if (typeof DEMDEX ==="undefined") {var DEMDEX ={constants :{},TIM :{constants :{}
}
};}
DEMDEX.UTILS ={statusArray :{"UNDEFINED":"Undefined","ACTIVE":"Active","INACTIVE":"Inactive","DELETED":"Deleted"},currentTime :function(){return new Date().getTime();},dirtyMonitor :{_configs :{cleanup :true,cleaned :false
},_dirtyBit :false,_onDirty :function() {},_onClean :function() {},_elements :[],_errors :[],_defaults :{actions :{"INPUT":"keydown","SELECT":"change","TEXTAREA":"keydown"}
},_cleanup :function() {var self =this;if (!this._configs.cleaned) {$.each(this._elements,function(i,obj) {self._monitorElement(obj,false);});}
},_dirtyIt :function() {this._dirtyBit =1;this._onDirty()
this._configs.cleanup &&this._cleanup();},_monitorElement :function(arg,watch) {var $elems =arg.element;var action =arg.action ||this._defaults.actions[$elems[0].nodeName.toUpperCase()];action +=".dirtyUtil";if (watch) {var dirtyIt =$.proxy(this._dirtyIt,this)
if (arg.delegate) {$elems.delegate(arg.delegate,action,dirtyIt)
}
else {$elems.bind(action,dirtyIt);}
}
else {$elems.unbind(action);}
},_validate :function() {},isDirty :function() {return this._dirtyBit;},clean :function() {this._dirtyBit =false;this._cleanup();this._onClean();},monitor :function(config) {var self =this;if (config.cleanup) {this._configs.cleanup =config.cleanup;}
if (config.onDirty &&typeof config.onDirty =="function") {this._onDirty =config.onDirty;}
if (config.onClean &&typeof config.onClean =="function") {this._onClean =config.onClean;}
this._elements =config.elements;$.each(config.elements,function(i,obj) {self._monitorElement(obj,true);});}
},pressedEnter :function(e){var keycode;if (window.event){keycode =window.event.keyCode;}else if (e){keycode =e.which;}else{keycode =e.keyCode;}
if (keycode ==13){return true;}else{return false;}
},addTimeStamp :function(url){var newURL =url;if("&"==url.charAt(url.length-1)){newURL +="ignoreThisTimeStamp="+ this.currentTime() + "&";}else{newURL +="&ignoreThisTimeStamp="+ this.currentTime() + "&";}
return newURL;},formatPercent:function(num){if(num !=null &&num !=""){num =num * 100;num =num.toFixed(2);num +="%";}
return num;},formatNumber :function(num,endPoint){var startPoint =0;if(parseInt(num ) < 0 ) {startPoint =1;}
if(num !=null &&num !=""){num =num.toString();if(endPoint ==null){endPoint =num.length - 1;}
if(parseInt(num.substring(startPoint,endPoint+1) ) < 1000){return num;}else{var newNum =num.substr(0,endPoint-2) + ","+ num.substr(endPoint-2);return this.formatNumber(newNum,endPoint-3);}
}else{return num;}
},parseTime :function(dateString){var dateVal =0;pattern1 =/\d+\/\d+\/\d+/;

if(pattern1.test(dateString) ){var dArray =dateString.split('/');var month =dArray[0] - 1;var day =dArray[1];var year =dArray[2];dateVal =new Date(year,month,day);}
return dateVal.getTime();},convertToShortDate :function(mils){var date =new Date(parseInt(mils));var month =date.getMonth() + 1;var day =date.getDate();var year =date.getFullYear();return month + "/"+ day + "/"+ year;},encodeDate :function(dateStr){if(dateStr ==null){return "";}
var dateArr =dateStr.split("/");if(dateArr.length !=3){return "";}
return dateArr[2] + "-"+ dateArr[0] + "-"+ dateArr[1];},decodeDate :function(dateStr){if(dateStr ==null){return "";}
var dateArr =dateStr.split("-");if(dateArr.length !=3){return "";}
return dateArr[1] + "/"+ dateArr[2] + "/"+ dateArr[0];},unescape :function (str){return str.replace(/&amp;/g, "&").replace(/&quot;/g, "\"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&rsquo;/,"'");

},truncLongStr :function(str,maxLength ){strLength =str.length;if(strLength > maxLength ){return str.substr(0,maxLength - 3) + "...";}else{return str;}
},loadingMsg :'<div class="loadingMsg">'+
 '<p><span class="icon-largeLoader">Loading</span></p>'+ '</div>',noDataMsg :'<div class="noDataMsg"><p>No results returned from search.</p></div>',formatFolderHierarchy :function (obj ){var newObj ={"attr":{"id":obj.folderId + "_folder","rel":"folder"},"data":obj.name
};if($.isArray(obj.subFolders) &&obj.subFolders.length > 0){var children =[];$.each(obj.subFolders ,function (i,child){var childObj =DEMDEX.UTILS.formatFolderHierarchy(child);children.push(childObj );}
);$.extend(newObj,{"state":"closed","children":children});}
return newObj;}
}
APP =window.APP ={};APP.collections ={helpers :{}
};APP.models ={};APP.views ={};APP.routers ={};APP.state ={vars :{images :{},urls :{},globals :{}
}
};APP.cache ={};APP.dialogs ={};APP.templates ={};var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{};jaaulde.utils.cookies=(function(){var resolveOptions,assembleOptionsString,parseCookies,constructor,defaultOptions={expiresAt:null,path:'/',domain:null,secure:false};resolveOptions=function(options){var returnValue,expireDate;if(typeof options!=='object'||options===null){returnValue=defaultOptions;}else
{returnValue={expiresAt:defaultOptions.expiresAt,path:defaultOptions.path,domain:defaultOptions.domain,secure:defaultOptions.secure};if(typeof options.expiresAt==='object'&&options.expiresAt instanceof Date){returnValue.expiresAt=options.expiresAt;}else if(typeof options.hoursToLive==='number'&&options.hoursToLive!==0){expireDate=new Date();expireDate.setTime(expireDate.getTime()+(options.hoursToLive*60*60*1000));returnValue.expiresAt=expireDate;}if(typeof options.path==='string'&&options.path!==''){returnValue.path=options.path;}if(typeof options.domain==='string'&&options.domain!==''){returnValue.domain=options.domain;}if(options.secure===true){returnValue.secure=options.secure;}}return returnValue;};assembleOptionsString=function(options){options=resolveOptions(options);return((typeof options.expiresAt==='object'&&options.expiresAt instanceof Date?'; expires='+options.expiresAt.toGMTString():'')+'; path='+options.path+(typeof options.domain==='string'?'; domain='+options.domain:'')+(options.secure===true?'; secure':''));};parseCookies=function(){var cookies={},i,pair,name,value,separated=document.cookie.split(';'),unparsedValue;for(i=0;i<separated.length;i=i+1){pair=separated[i].split('=');name=pair[0].replace(/^\s*/,'').replace(/\s*$/,'');try
{value=decodeURIComponent(pair[1]);}catch(e1){value=pair[1];}if(typeof JSON==='object'&&JSON!==null&&typeof JSON.parse==='function'){try
{unparsedValue=value;value=JSON.parse(value);}catch(e2){value=unparsedValue;}}cookies[name]=value;}return cookies;};constructor=function(){};constructor.prototype.get=function(cookieName){var returnValue,item,cookies=parseCookies();if(typeof cookieName==='string'){returnValue=(typeof cookies[cookieName]!=='undefined')?cookies[cookieName]:null;}else if(typeof cookieName==='object'&&cookieName!==null){returnValue={};for(item in cookieName){if(typeof cookies[cookieName[item]]!=='undefined'){returnValue[cookieName[item]]=cookies[cookieName[item]];}else
{returnValue[cookieName[item]]=null;}}}else
{returnValue=cookies;}return returnValue;};constructor.prototype.filter=function(cookieNameRegExp){var cookieName,returnValue={},cookies=parseCookies();if(typeof cookieNameRegExp==='string'){cookieNameRegExp=new RegExp(cookieNameRegExp);}for(cookieName in cookies){if(cookieName.match(cookieNameRegExp)){returnValue[cookieName]=cookies[cookieName];}}return returnValue;};constructor.prototype.set=function(cookieName,value,options){if(typeof options!=='object'||options===null){options={};}if(typeof value==='undefined'||value===null){value='';options.hoursToLive=-8760;}else if(typeof value!=='string'){if(typeof JSON==='object'&&JSON!==null&&typeof JSON.stringify==='function'){value=JSON.stringify(value);}else
{throw new Error('cookies.set() received non-string value and could not serialize.');}}var optionsString=assembleOptionsString(options);document.cookie=cookieName+'='+encodeURIComponent(value)+optionsString;};constructor.prototype.del=function(cookieName,options){var allCookies={},name;if(typeof options!=='object'||options===null){options={};}if(typeof cookieName==='boolean'&&cookieName===true){allCookies=this.get();}else if(typeof cookieName==='string'){allCookies[cookieName]=true;}for(name in allCookies){if(typeof name==='string'&&name!==''){this.set(name,null,options);}}};constructor.prototype.test=function(){var returnValue=false,testName='cT',testValue='data';this.set(testName,testValue);if(this.get(testName)===testValue){this.del(testName);returnValue=true;}return returnValue;};constructor.prototype.setOptions=function(options){if(typeof options!=='object'){options=null;}defaultOptions=resolveOptions(options);};return new constructor();})();(function(){if(window.jQuery){(function($){$.cookies=jaaulde.utils.cookies;var extensions={cookify:function(options){return this.each(function(){var i,nameAttrs=['name','id'],name,$this=$(this),value;for(i in nameAttrs){if(!isNaN(i)){name=$this.attr(nameAttrs[i]);if(typeof name==='string'&&name!==''){if($this.is(':checkbox, :radio')){if($this.attr('checked')){value=$this.val();}}else if($this.is(':input')){value=$this.val();}else
{value=$this.html();}if(typeof value!=='string'||value===''){value=null;}$.cookies.set(name,value,options);break;}}}});},cookieFill:function(){return this.each(function(){var n,getN,nameAttrs=['name','id'],name,$this=$(this),value;getN=function(){n=nameAttrs.pop();return!!n;};while(getN()){name=$this.attr(n);if(typeof name==='string'&&name!==''){value=$.cookies.get(name);if(value!==null){if($this.is(':checkbox, :radio')){if($this.val()===value){$this.attr('checked','checked');}else
{$this.removeAttr('checked');}}else if($this.is(':input')){$this.val(value);}else
{$this.html(value);}}break;}}});},cookieBind:function(options){return this.each(function(){var $this=$(this);$this.cookieFill().change(function(){$this.cookify(options);});});}};$.each(extensions,function(i){$.fn[i]=this;});})(window.jQuery);}})();ADOBE.AM.pid =1577
APP.state.vars.images.play_standard ='/portal/images/icons/12x12/Play_Standard.png';APP.state.vars.images.clone_standard ='/portal/images/icons/12x12/Clone_Standard.png';APP.state.vars.images.email_standard ='/portal/images/icons/12x12/Email_Standard.png';APP.state.vars.images.rf_on ='/portal/images/icons/recency_frequency_on.png';APP.state.vars.images.rf_clicked ='/portal/images/icons/recency_frequency_clicked.png';APP.state.vars.images.rf_off ='/portal/images/icons/recency_frequency_off.png';APP.state.vars.images.op_line ='/portal/images/icons/op_horizontal_line.png';APP.state.vars.images.op_line_gray ='/portal/images/icons/op_horizontal_line_gray.png';APP.state.vars.images.op_dots ='/portal/images/icons/op_dots.png';APP.state.vars.images.browse_items ='/portal/images/icons/16x16/Browse_Icon.png';APP.state.vars.segment_builder_page_path ='/portal/Segments/SegmentBuilder.ddx';APP.state.vars.manage_destination_path ='/portal/Segments/ManageDestination.ddx';APP.state.vars.urls.models_page ='/portal/Segments/Models.ddx';(function(_,APP) {_.templateSettings ={interpolate:/\<\@\=(.+?)\@\>/gim,

evaluate:/\<\@(.+?)\@\>/gim

};APP.templates.makeTemplate =function(template_name,args) {var template =null;if (template_name instanceof Array) {var tmp =this[template_name[0]];for (var i =1;i < template_name.length;i++) {tmp =tmp[template_name[i]];}
template =tmp;}
else {template =this[template_name];}
for (var key in args) {if (args.hasOwnProperty(key)) {template =template.replace(key,args[key]);}
}
return template;};APP.templates.getLocalizedMessage =function(code) {return ADOBE.AM.MESSAGES.getMessage(code).message;};APP.templates.graph_no_data =''+ '<div class="noDataMsg"><p>'+ APP.templates.getLocalizedMessage('model_has_no_data')
 + '</p></div>';APP.templates.graph_not_run =''+ '<div class="noDataMsg"><p>'+ APP.templates.getLocalizedMessage('model_has_not_run')
 + '</p></div>';APP.templates.graph_reach_exceeded =''+ '<div class="noDataMsg"><p>'+ APP.templates.getLocalizedMessage('no_valid_model_run_values')
 + '</p></div>';APP.templates.list_page_toolbar ='<ul class="toolbar">'+ '%%CREATE_BUTTON_LI%%'+ '%%ADD_TO_DESTINATION%%'+ '%%CREATE_MODEL_WITH_SELECTED_LI%%'+ '%%DELETE_BUTTON_LI%%'+ '</ul>';APP.templates.list_page_toolbar_create_button ='<li data-type="newSegment"><img class="icon" src="/css/aam/images/Add_Standard.png">Create New Segment</li>';APP.templates.list_page_toolbar_edit_button ='<li data-type="editSegment"><img class="icon" src="/css/aam/images/Add_Standard.png">Edit Segment</li>';APP.templates.toolbar_delete_selected_button ='<li data-type="deleteSelected"><img class="icon" src="/css/aam/images/AlertDeactivate_Standard.png">Delete Selected</li>';APP.templates.toolbar_delete_button ='<li data-type="deleteSegment"><img class="icon" src="/css/aam/images/ClearXGrey_Buttcon.png">Delete</li>';APP.templates.toolbar_clone_button ='<li data-type="cloneSegment"><img class="icon" src="/portal/images/icons/12x12/Clone_Standard.png" />Clone</li>';APP.templates.toolbar_create_model_with_selected ='<li data-type="createModelWithSelected"><img class="icon" src="/css/aam/images/Add_Standard.png">Create Model with Selected</li>';APP.templates.can_show_segment_to_destination_in_sb_toolbar_buttons ='<li data-type="addToDestination"><img class="icon" src="/css/aam/images/Add_Standard.png">Add Selected To Destination</li>';APP.templates.view_page_toolbar ='<ul class="toolbar">'+ '%%CREATE_BUTTON_LI%%'+ '%%EDIT_BUTTON_LI%%'+ '%%CLONE_BUTTON_LI%%'+ '%%DELETE_BUTTON_LI%%'+ '</ul>';APP.templates.segment_result_item ='<td>'+ '<span class="result_checkbox">'+ '<@ if (typeof checked == "undefined" || checked == false) { @>'+ '<img src="/css/aam/images/checkbox_unchecked.png" class="result_checkbox_disabled" />'+ '<@ } else { @>'+ '<img src="/css/aam/images/checkbox_checked.png" class="result_checkbox_enabled" />'+ '<@ } @>'+ '</span>'+ '</td>'+ '<td><@= sid @></td>'+ '<td><a href="#view/<@= sid @>"><@= name @></a></td>'+ '<td class="description"><span title="<@= description @>"><@= description @></span></td>'+ '<td>'+ '<@ if (status == "ACTIVE") { @>Active'+ '<@ } else { @><span class="gray_text">Inactive</span>'+ '<@ } @>'+ '</td>'+ '<td>'+ '<@ if (permissions.edit) { @>'+ '<a href="#edit/<@= sid @>"><img class="edit btn_action" src="/css/aam/images/Edit_Standard.png" alt="Edit" title="Edit" /></a>'+ '<@ if (status == "ACTIVE") { @>'+ '<img class="pause btn_action" src="/css/aam/images/Pause_Standard.png" alt="Pause" title="Pause" />'+ '<@ } else { @>'+ '<img class="play btn_action" src="%%IMG_PLAY_STANDARD%%" alt="Play" title="Play" />'+ '<@ } @>'+ '<@ } @>'+ '<@ if (permissions.clone) { @>'+ '<img class="clone btn_action" src="%%IMG_CLONE_STANDARD%%" alt="Clone" title="Clone" />'+ '<@ } @>'+ '<@ if (permissions._delete) { @>'+ '<img class="delete btn_action" alt="Delete" title="Delete" src="/css/aam/images/ClearXGrey_Buttcon.png" />'+ '<@ } @>'+ '</td>';APP.templates.server_pagination ='<div class="breadcrumb">'+'<span class="cell">View'+'<select class="serverhowmany">'+'<option value="10" <@ if (pageSize == 10) { @>selected<@ } @>>10</option>'+'<option value="25" <@ if (pageSize == 25) { @>selected<@ } @>>25</option>'+'<option value="50" <@ if (pageSize == 50) { @>selected<@ } @>>50</option>'+'</select>'+'/ page'+'&nbsp;&nbsp;</span>'+'<span class="cell">'+'<@ if (page > firstPage) { @>'+'<a href="#" class="serverprevious">'+'<button style="min-width:28px;width:28px;">&#9668;</button>&nbsp;&nbsp;'+'</a>'+'<@ }else{ @>'+'<button style="min-width:28px;width:28px;" class="disabled">&#9668;</button>'+'<@ } @>'+'&nbsp;&nbsp;<span>'+'<select name="pagination_pages" class="pagination_pages">'+'<@ if (page == 0) { page = 1;  @>'+'<@ } else if (page > 0) { page++; } @>'+'<@ for(p = 1; p <= totalPages; p++){ @>'+'<option value="<@= p @>" class="page <@ if (page == p) { @>selected <@ } @>" <@ if (page == p) { @>selected<@ } @>><@= p @></option>'+'<@ } @>'+'</select>'+'<span class="divider">&nbsp;/&nbsp;</span>'+'<@= typeof totalPages != "undefined" ? totalPages : 0 @>'+'&nbsp;&nbsp;</span>'+'<@ if (page < totalPages) { @>'+'<a href="#" class="servernext">'+'<button style="min-width:28px;width:28px;">&#9658;</button>'+'</a>'+'<@ } else { @>'+'<button style="min-width:28px;width:28px;" class="disabled">&#9658;</button>'+'<@ } @>'+'</span>'+ '</div>';APP.templates.view_page_basic_info ='<h3>Basic Information</h3><table><tbody>'+'<tr><td class="label">Segment ID:</td><td><@= sid @></td></tr>'+'<tr><td class="label">Legacy ID:</td><td><@= legacyId @></td></tr>'+'<tr><td class="label">Name:</td><td><@= name @></td></tr>'+'<tr><td class="label">Description:</td><td><@= description @></td></tr>'+'<tr><td class="label">Integration Code:</td><td><@= integrationCode @></td></tr>'+'<tr><td class="label">Data Source:</td><td><@= dataSourceName @></td></tr>'+'<tr><td class="label">Stored In:</td><td><@= path @></td></tr>'+'<tr><td class="label">Status:</td><td>'+ '<@ if (status == "ACTIVE") { @>Active'+ '<@ } else { @>Inactive'+ '<@ } @>'+'</td></tr>'+'<tr><td class="label">Real-time Segment Population:</td><td>7 Days: <@= instantUniques7Day @><br />30 Days: <@= instantUniques30Day @><br />60 Days: <@= instantUniques60Day @></td></tr>'+'<tr><td class="label">Total Segment Population:</td><td>7 Days: <@= totalUniques7Day @><br />30 Days: <@= totalUniques30Day @><br />60 Days: <@= totalUniques60Day @></td></tr>'+'</tbody></table><div class="clear"></div>';APP.templates.edit_page_basic_info ='<div id="sebiBox" class="left basicInfo"><form><table class="infoTable"><tbody>'+'<tr class="sb_edit_basic_info_sid"><td class="label" data-type="basic_info_sid">Segment ID:</td><td><@= the_sid @></td></tr>'+'<tr class="sb_edit_basic_info_csegid"><td class="label" data-type="basic_info_csegid">Legacy ID:</td><td><@= the_csegid @></td></tr>'+'<tr><td class="label">Name:</td><td><input type="text" size="30" name="name" value="<@= name || "" @>" /></td></tr>'+'<tr><td class="label">Description:</td><td><input type="text" size="30" name="description" value="<@= the_description @>" /></td></tr>'+'<tr><td class="label">Integration Code:</td><td><input type="text" size="30" name="integrationCode" value="<@= integrationCode @>" /></td></tr>'+'<tr><td class="label">Data Source:</td><td class="segment_datasources"><@= dataSourceName @></td></tr>'+'<tr><td class="label">Status:</td><td>'+ '<select name="status">'+'<option value="ACTIVE" <@ if (status == "ACTIVE") { @>selected="selected"<@ } @>>Active</option>'+'<option value="INACTIVE" <@ if (status == "INACTIVE") { @>selected="selected"<@ } @>>Inactive</option>'+'</select>'+'</td></tr>'+'<tr>'+'<td></td>'+'</tr>'+'</tbody></table></form><div class="clear"></div></div>';APP.templates.edit_page_datasources ='<select name="dataSourceId">'+ '<@ _.each(datasources, function(ds) { @>'+ '<option value="<@= ds.get("dataSourceId") @>" <@ if (ds.get("dataSourceId") == model_dataProviderId) { @>selected="selected" <@ } @>><@= ds.get("name") @> (DPID: <@= ds.get("dataSourceId") @>)</option>'+ '<@ }) @>'+ '</select>';APP.templates.historic_segment_size ='<div class="AUI_content_white" id="historic_segment_size">'+ '<div class="panel_title">Estimated Historic Segment Size <span class="context-help" title="Help" data-id="r_segment_data.html">&nbsp;</span></div>'+ '<div class="panel_content">'+ '     <div class="days_7">Last 7 Days: <span class="day_number_7">-</span></div>'+ '     <div class="days_30">Last 30 Days: <span class="day_number_30">-</span></div>'+ '     <div class="days_60">Last 60 Days: <span class="day_number_60">-</span></div>'+ '<div class="recalculate_size"><button type="button" class="secondary">Recalculate Size</button></div>'+ '</div>'+ '</div>';APP.templates.instant_segment_size ='<div class="AUI_content_white">'+ '<div class="panel_title">Real-time Segment Population <span class="context-help" title="Help" data-id="r_segment_data.html">&nbsp;</span></div>'+ '<div class="panel_content">'+ '     <div>Last 7 Days: <span class="7day_number"><@= instantUniques7Day @></span></div>'+ '     <div>Last 30 Days: <span class="30day_number"><@= instantUniques30Day @></span></div>'+ '     <div>Last 60 Days: <span class="60day_number"><@= instantUniques60Day @></span></div>'+ '</div>'+ '</div>';APP.templates.realized_segment_size ='<div class="AUI_content_white">'+ '<div class="panel_title">Total Segment Population <span class="context-help" title="Help" data-id="r_segment_data.html">&nbsp;</span></div>'+ '<div class="panel_content">'+ '     <div>Last 7 Days: <span class="7day_number"><@= totalUniques7Day @></span></div>'+ '     <div>Last 30 Days: <span class="30day_number"><@= totalUniques30Day @></span></div>'+ '     <div>Last 60 Days: <span class="60day_number"><@= totalUniques60Day @></span></div>'+ '</div>'+ '</div>';APP.templates.viewpage_destination_table_row ='<td><@= destination_id @></td><td><a href="'+ APP.state.vars.manage_destination_path + '?destinationId=<@= destination_id @>#view"><@= destination_name @></a></td><td><@= destination_type @></td><td><@= ADOBE.AM.UTILS.HELPERS.decorateWithSpanAndSlice(derivedMapping) @></td>';APP.templates.destination_table_editable_row ='<td><@= destination_id @></td><td><@= destination_name @></td><td><@= destination_type @></td><td><@= ADOBE.AM.UTILS.HELPERS.decorateWithSpanAndSlice(derivedMapping) @></td><td><@= startDate ? startDate : "" @></td><td><@= endDate ? endDate : "" @></td><td class="actions"><a class="edit" rel="<@= destinationId @>,<@= destinationMappingId @>"><img class="icon" src="https://www.omniture-static.com/aui/1.0.1/images/icons/12x12/Edit_Standard.png"></a> <a class="remove" rel="<@= destinationId @>,<@= destinationMappingId @>"><img class="icon" src="/css/aam/images/ClearXGrey_Buttcon.png"></a></td>';APP.templates.viewpage_destination_message ='%%MESSAGE%%';APP.templates.browse_traits_modal =''+ '<div id="browse_traits_modal">'+'<div class="layout-2-col " style="width:1000px;height:550px;">'+'<div class="sidebar col1 panels trait_storage">'+'<div class="trait_search"></div>'+ '<h4>Traits Storage</h4>'+'<div id="traits_folder_tree""></div>'+'</div>'+'<div class="col2">'+'<div class="panels traits_list">'+ '<form id="form_traits">'+'<table class="table bb-table-widget traits_table" id="traits_table" width="100%">'+'<thead>'+'<tr>'+'<th class="column_checkbox disabled column_radio">'+'<img src="/css/aam/images/checkbox_unchecked.png" class="AUI_Menu_icon result_checkbox_disabled" />'+'<img src="/css/aam/images/checkbox_checked.png" class="AUI_Menu_icon result_checkbox_enabled" />'+'</th>'+'<th class="sortable" data-sortby="sid">Trait ID</th>'+'<th class="sortable" data-sortby="name">Name</th>'+'<th class="sortable" data-sortby="traitType">Type</th>'+'<th class="sortable" data-sortby="dataSourceId">Data Source</th>'+'<th class="sortable" data-sortby="uniques7Day">7-Day Uniques</th>'+'<th class="sortable" data-sortby="uniques30Day">30-Uniques</th>'+'<th class="sortable" data-sortby="uniques60Day">60-Day Uniques</th>'+'</tr>'+'</thead>'+'<tbody id="traits_table_tbody"></tbody>'+'</table>'+ '</form>'+'<div id="traits_pagination" class="pagination"></div>'+'</div>'+'</div>'+ '</div>'+ '</div>';APP.templates.browse_segments_modal =''+ '<div id="browse_segments_modal">'+'<div class="layout-2-col " style="width:1000px;height:550px;">'+'<div class="col1 panels segment_storage">'+'<h4>Segments Storage</h4>'+'<div class="segment_search"></div>'+'<div id="segment_folder_tree""></div>'+'</div>'+'<div class="col2">'+'<div class="panels segments_list">'+ '<form id="form_segments">'+'<table class="table bb-table-widget" id="segments_table" width="100%">'+'<thead>'+'<tr>'+ '<th class="column_checkbox disabled"></th>'+'<th class="sortable" data-sortby="sid">Segment ID</th>'+'<th class="sortable" data-sortby="name">Name</th>'+'<th class="sortable" data-sortby="description">Description</th>'+'<th class="sortable" data-sortby="status">Status</th>'+'</tr>'+'</thead>'+'<tbody id="segments_table_tbody"></tbody>'+'</table>'+'</form>'+'<div id="segments_pagination" class="pagination"></div>'+'</div>'+'</div>'+ '</div>'+ '</div>';APP.templates.browse_destinations_modal =''+ '<div id="browse_destinations_modal">'+'<div class="layout-2-col " style="width:1000px;height:550px;">'+'<div class="col1 panels destinations_storage">'+'<h4>Destinations Search</h4>'+'<div class="destination_search"></div>'+'</div>'+'<div class="col2" style="float: left; margin-left: 10px;">'+'<div class="panels destinations_list" style="h overflow: auto;">'+'<table class="table bb-table-widget browse_destinations_table" style="width: 756px;">'+'<thead>'+'<tr>'+'<th>'+'</th>'+'<th class="sortable" data-type="destinationId">Destination ID</th>'+'<th class="sortable" data-type="name">Name</th>'+'<th class="sortable" data-type="description">Description</th>'+'<th class="sortable" data-type="destinationType">Type</th>'+'</tr>'+'</thead>'+'<tbody id="traits_table_tbody"></tbody>'+'</table>'+'</div>'+'</div>'+'<div class="clear"></div>'+ '</div>'+ '</div>';APP.templates.browse_models_modal =''+ '<div id="browse_models_modal">'+'<div class="layout-2-col " style="width:1000px;height:550px;">'+'<div class="col1 panels models_search">'+'<h4>Models Search</h4>'+'</div>'+'<div class="col2" style="float: left; margin-left: 10px;">'+'<div class="panels models_list" style="overflow: auto;">'+ '<form id="form_models">'+ '<table class="table bb-table-widget browse_models_table" id="models_table" style="width: 756px;">'+ '<thead>'+ '<tr>'+ '<th>'+ '</th>'+ '<th class="sortable" data-sortby="algoModelId">ID</th>'+ '<th class="sortable" data-sortby="name">Name</th>'+ '<th class="sortable" data-sortby="description">Description</th>'+ '<th class="sortable" data-sortby="algorithm">Algorithm</th>'+ '<th class="sortable" data-sortby="status">Status</th>'+ '<th class="sortable" data-sortby="lookback">Look Back</th>'+ '<th class="sortable" data-sortby="lastSuccessfulRunTimestamp">Last Successful Run</th>'+ '</tr>'+ '</thead>'+ '<tbody id="models_table_tbody"></tbody>'+ '</table>'+ '</form>'+'</div>'+'</div>'+'<div class="clear"></div>'+ '</div>'+ '</div>';APP.templates.model_table_row =''+ '<td>'+ '<span class="radio">'+ '<input type="radio" name="selected_model" value="<@= t.get("algoModelId") @>" />'+ '</span>'+ '</td>'+ '<td><@= t.get("algoModelId") @></td>'+ '<td><@= t.get("name") @></td>'+ '<td><@= t.get("description") @></td>'+ '<td><@= displayAlgorithm(t.get("algoTypeId")) @></td>'+ '<td><@= displayStatus(t.get("status")) @></td>'+ '<td><@= t.get("lookBackPeriod") @></td>'+ '<td><@= formatTimestamp(t.get("lastSuccessfulRunTimestamp")) @></td>';APP.templates.trait_table_row =''+ '<td>'+ '<@ if (document.getElementsByTagName("body")[0].getAttribute("class").indexOf("Models") > -1) { @>'+ '<span class="radio">'+ '<input type="radio" name="selected_trait" value="<@= t.get("sid") @>" />'+ '</span>'+ '<@ } else { @>'+ '<span class="result_checkbox">'+ '<@ if (t.get("checked") == true) { @>'+ '<img src="/css/aam/images/checkbox_checked.png" class="result_checkbox_disabled" />'+ '<@ } else { @>'+ '<img src="/css/aam/images/checkbox_unchecked.png" class="result_checkbox_enabled" />'+ '<@ } @>'+ '</span>'+ '<@ } @>'+ '</td>'+ '<td><@= t.get("sid") @></td>'+ '<td><@= t.get("name") @></td>'+ '<td><@= getTraitTypeName(t.get("traitType")) || "" @></td>'+ '<td><@= (dataSourceName + "(" + t.get("dataSourceId") + ")") || "" @></td>'+ '<td class="days_7"><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques7Day")) @></td>'+ '<td class="days_30"><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques30Day")) @></td>'+ '<td class="days_60"><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques60Day")) @></td>';APP.templates.segment_table_row =''+ '<td>'+'<span class="radio">'+ '<input type="radio" name="selected_trait" value="<@= t.get("sid") @>" />'+ '</span>'+ '</td>'+ '<td><@= t.get("sid") @></td>'+ '<td><@= t.get("name") @></td>'+ '<td><@= t.get("description") @></td>'+ '<td>'+ '<@ if (t.get("status") == "ACTIVE") { @>Active'+ '<@ } else { @><span class="gray_text">Inactive</span>'+ '<@ } @>'+ '</td>';APP.templates.destination_table_row =''+ '<td>'+ '<input id="order_<@= t.get(\"destinationId\") @>" name="addDestRadio" type="radio" />'+ '</td>'+ '<td><@= t.get("destinationId") @></td>'+ '<td><@= t.get("name") @></td>'+ '<td><@= t.get("description") || "" @></td>'+ '<td><@ switch (t.get("destinationType")) { case "PUSH": @>URL<@ break; case "S2S": @>Server-to-Server<@ break; case "ADS": @>Cookie<@ break; default: @><@= t.get("destinationType") || "" @><@ break; } @></td>';APP.templates.segment_builder_widget ={};APP.templates.segment_builder_widget.elements ={};APP.templates.segment_builder_widget.elements.op =''+ '<tr class="ruleOp <@= op_wrapper_class @>">'+'<td class="first"></td>'+'<td colspan="3" class="middle">'+'<select class="ruleOpSelect">'+'<option <@= selected == false ? "selected=selected" : "" @>></option>'+'<option <@= selected == "AND" ? "selected=selected" : "" @>>AND</option>'+'<option <@= selected == "OR" ? "selected=selected" : "" @>>OR</option>'+'<option <@= selected == "AND NOT" ? "selected=selected" : "" @>>AND NOT</option>'+'</select>'+'<span><@= selected @></span>'+'</td>'+'<td class="last"></td>'+ '</tr>';APP.templates.segment_builder_widget.elements.rule_wrapper =''+'<div class="rule_wrapper">'+'<div class="rule_content" style="position:relative;float:left"><@= content @></div>'+APP.templates.segment_builder_widget.elements.solr
+'<br class="clear" />'+'</div>';APP.templates.segment_builder_widget.elements.rule =''+'<tr data-sid="<@= sid @>" class="<@= sid @>_rule_sid traitRule <@ if (rowspan) { @>rf<@ } @>">'+'<td class="first"><img style="display:block;margin: 4px 0 0 10px;" class="mover" src="https://www.omniture-static.com/aui/1.0.2/images/ui/Tables/grabber.png" /></td>'+'<td class="trait"><p class="trait_name table_cell"><a title="<@= name@>"><@= name @></a></p></td>'+'<td class="days_30"><p class="table_cell table_uniques">Last 30 Days: <span class="day_number_30"><@= uniques @></span></p></td>'+'<td class="actions"><img src="/css/aam/images/ClearXGrey_Buttcon.png" alt="Delete" class="delete_icon" /></td>'+'<td class="last" width="10"></td>'+'<@ if (rowspan) { @>'+'<@= rf_html @>'+'<@ } @>'+'</tr>';APP.templates.segment_builder_widget.elements.rf_cell =''+'<td class="rf_cell <@ if (typeof state != \"undefined\") {@><@= state @><@ } else {@>off<@}@>" rowspan="<@= rowspan @>">'+'<img class="rf_off" src="'+ APP.state.vars.images.rf_off + '" />'+'<img class="rf_on" src="'+ APP.state.vars.images.rf_on + '" />'+'<img class="rf_clicked" src="'+ APP.state.vars.images.rf_clicked + '" />'+'<div class="solr_wrapper"><span class="days_30">Last 30 Days:  </span><span class="solr_number">-</span></div>'+'<div style="position:relative"><div class="rf_popup">'+'<p class="rf_title">Recency and Frequency<span class="context-help" title="Help" data-id="c_recency_frequency.html">&nbsp;</span></p>'+'<select class="frequency_ops">'+'<option value="<=" <@= frequency_ops == "<=" ? "selected=selected" : "" @>><=</option>'+'<option value="==" <@= frequency_ops == "==" ? "selected=selected" : "" @>>==</option>'+'<option value=">=" <@= frequency_ops == ">=" ? "selected=selected" : "" @>>>=</option>'+'</select>'+'<span class="frequency_ops"><@= frequency_ops @></span>'+'<input type="text" size="2" value="<@= frequency_val @>" class="frequency_val" />'+'<span class="frequency_val"><@= frequency_val @></span>'+'<span> times in</span>'+'<div class="rf_design">'+'<div class="left line"></div>'+'<p class="left">/</p>'+'<div class="right line"></div>'+'<br class="clear" />'+'</div>'+'<select class="recency_ops">'+'<option value="<=" <@= recency_ops == "<=" ? "selected=selected" : "" @>><=</option>'+'<option value=">=" <@= recency_ops == ">=" ? "selected=selected" : "" @>>>=</option>'+'</select>'+'<span class="recency_ops"><@= recency_ops @></span>'+'<input type="text" size="2" value="<@= recency_val @>" class="recency_val" />'+'<span class="recency_val"><@= recency_val @></span>'+'<span> days ago</span>'+'<br class="clear" />'+'<button type="button" class="primary">Clear</button>'+'</div></div>'+'</td>';APP.templates.rules_with_top_bottom =''+'<tr class="groupTop ruleBorder">'+'<td class="first"></td>'+'<td colspan="3"></td>'+'<td class="last"></td>'+'</tr>'+'<@= html @>'+'<tr class="groupBtm ruleBorder">'+'<td class="first"></td>'+'<td colspan="3"></td>'+'<td class="last"></td>'+'</tr>';APP.templates.segment_builder_widget.segment_traits_tab =''+ '<div class="st_top">'+ '<div class="ruleDisplay">'+'<table class="groupTable">'+'<tbody>'+'</tbody>'+'</table>'+'</div>'+ '</div>'+ '<div class="st_bottom">'+ '<div class="panel_title">Add a Trait</div>'+ '<div class="panel_title">Search by Trait</div>'+ '<div>'+'<input id="trait_autocomplete" type="text" value="" size="40" />'+ '<img class="autocomplete_loading" src="/css/aam/images/16x16/Loading_Animated.gif" />&nbsp;'+ '<button type="button" class="primary" id="trait_add">Add Trait</button>'+ '<button type="button" class="primary" id="trait_browse">Browse All Traits</button>'+'</div>'+ '</div>';APP.templates.segment_builder_widget.segment_expression_tab =''+ '<div class="segment_expression">'+ '<textarea id="segment_expression" cols="120" rows="10"></textarea>'+ '<p style="line-height:28px">'+ '<button type="button" class="primary validate_expression">Validate Expression</button><button type="button" class="reset_and_return">Reset and Return to Basic View</button>'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="see_all_traits">Click to see all traits</a>'+ '</p>'+'<div class="list_traits_in_segment"></div>'+ '</div>';APP.templates.segment_builder_widget.trait_modal =''+ '<div class="trait_modal">'+ '<h4>Basic Information</h4>'+'<table>'+'<tr>'+'<td class="label">Trait ID</td>'+'<td><@= t.get("sid") @></td>'+'</tr>'+'<tr>'+'<td class="label">Name</td>'+'<td><@= t.get("name") @></td>'+'</tr>'+'<td class="label">Description</td>'+'<td><@= t.get("description") @></td>'+'</tr>'+'<tr>'+'<td class="label">Type</td>'+'<td><@= type @></td>'+'</tr>'+'<td class="label">Data Source</td>'+'<td><@= datasource @></td>'+'</tr>'+ '<tr>'+'<td class="label">Trait Rule</td>'+'<td><@= t.get("traitRule") || "" @></td>'+'</tr>'+'<tr>'+'<td class="label">Integration Code</td>'+'<td><@= t.get("integrationCode") || "" @></td>'+'</tr>'+'<td class="label">Stored In</td>'+'<td><@= folder @></td>'+'</tr>'+'<tr>'+'<td class="label">Data Category</td>'+'<td><@= category @></td>'+'</tr>'+'<td class="label days_7">7-Day Uniques</td>'+ '<td><@ if (isNaN(t.get("uniques7Day"))) {@>&mdash;<@} else {@><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques7Day")) @><@} @></td>'+'</tr>'+'<tr>'+'<td class="label days_30">30-Day Uniques</td>'+ '<td><@ if (isNaN(t.get("uniques30Day"))) {@>&mdash;<@} else {@><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques30Day")) @><@} @></td>'+'</tr>'+'<tr>'+'<td class="label days_60">60-Day Uniques</td>'+'<td><@ if (isNaN(t.get("uniques60Day"))) {@>&mdash;<@} else {@><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques60Day")) @><@} @></td>'+'</tr>'+'<tr class="last-child">'+'<td class="label">Comments</td>'+'<td><@= t.get("comments") || "" @></td>'+'</tr>'+'</table>'+ '</div>';APP.templates.model_builder ={};APP.templates.model_builder.page ={};APP.templates.model_builder.basic_info_accordion =''+ '<div class="input_holder"><label for="name">Name:</label><input type="text" name="name" value="<@= name @>" /></div>'+ '<div class="input_holder"><label for="description">Description:</label><input type="text" name="description" value="<@ try { @><@= description @><@ } catch(err) {} @>" /></div>'+ '<div class="input_holder"><label for="status">Status:</label>'+ '<select name="status">'+ '<option value="ACTIVE" <@= isSelected("ACTIVE") @>>Active</option>'+ '<option value="INACTIVE" <@= isSelected("INACTIVE") @>>Inactive</option>'+ '</select>'+ '</div>'+ '<input type="hidden" name="dataSources" value="<@ try { @><@= dataSources @><@ } catch(err) {} @>" />';APP.templates.model_builder.configuration_accordion =''+ '<div class="trait_or_segment section"></div>'+ '<div class="lookback_and_algorithms section"></div>'+ '<div class="layout-helper">'+ '<div class="layout-helper-sub">'+ '<div class="datasources section"></div>'+ '</div>'+ '</div>';APP.templates.model_builder.page.create_edit =''+ '<div class="page_title">Model Builder</div>'+ '<br style="clear:both" />'+ '<div id="basic_info_accordion"></div>'+ '<div id="configuration_accordion"></div>'+ '<div class="action_btns">'+'<button class="save primary">Save</button>'+'<button class="cancel">Cancel</button>'+ '</div>';APP.templates.model_builder.page.trait_or_segment =''+ '<input type="hidden" value="<@ try { @><@= sid @><@ } catch(err) {} @>" name="sid" />'+ '<h1>Select a Baseline Trait or Segment</h1>'+ '<div class="btns">'+ '<@ if (can_show_view_traits()) { @><button type="button" class="primary task" id="browse_all_traits">Browse All Traits</button><@ } @>'+ '<@ if (can_show_view_segments()) { @><button type="button" class="primary task" id="browse_all_segments">Browse All Segments</button><@ } @>'+ '</div>'+ '<div id="traitsegment_wrapper">'+ '<div class="traitsegment_inner"><hr />'+ '<div class="basic_info">'+ '<h2 class="trait_basic_info">Baseline Trait Information</h2>'+ '<h2 class="segment_basic_info">Baseline Segment Information</h2>'+ '<dl>'+ '<dt>Name:</dt>'+ '<dd><@= name @></dd>'+ '<dt>Description:</dt>'+ '<dd><@ try { @><@= description @><@ } catch(err) {} @></dd>'+ '<dt>Stored In:</dt>'+ '<dd><@ try { @><@= c_folderPath @><@ } catch(err) {} @></dd>'+ '<dt class="segment_status">Status:</dt>'+ '<dd>'+ '<@ if (status == "ACTIVE") { @>Active'+ '<@ } else { @><span class="gray_text">Inactive</span>'+ '<@ } @>'+ '</dd>'+ '</dl>'+ '</div>'+ '<div class="graph">'+ '<h2 class="segment_graph">Segment Graph</h2>'+ '<h2 class="trait_graph">Trait Graph</h2>'+ '<div id="graph_container"><div id="cloudVizChart"></div></div>'+ '</div>'+ '</div>'+ '</div>';APP.templates.model_builder.page.lookback_algorithms_create =''+ '<div id="lookback">'+ '<h1>Select Look Back Period</h1>'+ '<p>Look back period of '+ '<select name="lookBackPeriod">'+ '<option value="30">30</option>'+ '<option value="60">60</option>'+ '<option value="90">90</option>'+ '</select>'+ ' days.</p>'+ '</div>'+ '<div id="algorithms">'+ '<h1>Select Algorithm</h1>'+ '</div>';APP.templates.model_builder.page.lookback_algorithms_readonly =''+ '<div id="lookback">'+ '<h1>Selected Look Back Period:</h1>'+ '<p>Look back period of <@= lookBackPeriod @> days.</p>'+ '</div>'+ '<div id="algorithms">'+ '<h1>Selected Algorithm:</h1>'+ '<p> <@= getAlgorithmName(algoTypeId) @> </p>'+ '</div>';APP.templates.model_builder.page.algorithm_row =''+ '<div class="radiobtn">'+ '<input type="radio" name="algoTypeId" value="<@= algoTypeId @>" />'+ '</div><div class="name"><@= name @></div>';APP.templates.model_builder.page.datasources_create =''+ '<h1>Select Available Data</h1>'+ '<div id="datasources_container">'+ '<table class="table">'+ '<thead><tr>'+ '<th width="4%" class="checkbox">'+ '<div>'+ '<input type="checkbox" />'+ '</div>'+ '</th>'+ '<th width="10%" class="sortable" data-sortby="dataSourceId">DPID</th>'+ '<th width="58%" class="sortable" data-sortby="name">Name</th>'+ '<th width="28%" class="sortable" data-sortby="first_third">First/Third Party Data</th></tr>'+ '</thead>'+ '<tbody></tbody>'+ '</table>'+ '</div>';APP.templates.model_builder.page.datasource_create_row =''+ '<td class="checkbox">'+ '<div>'+ '<input type="checkbox" value="<@= dataSourceId @>" />'+ '</div>'+ '</td>'+ '<td><@= dataSourceId @></td>'+ '<td><@= name @></td>'+ '<td><@= isFirstParty(pid) ? "First Party" : "Third Party" @></td>';APP.templates.model_builder.page.datasources_readonly =''+ '<h1>Selected Data</h1>'+ '<div id="datasources_container">'+ '<table class="table">'+ '<thead><tr>'+ '<th width="10%" class="sortable" data-sortby="dataSourceId">DPID</th>'+ '<th width="63%" class="sortable" data-sortby="name">Name</th>'+ '<th width="27%" class="sortable">First/Third Party Data</th></tr>'+ '</thead>'+ '<tbody>'+ '</tbody>'+ '</table>'+ '</div>';APP.templates.model_builder.page.datasource_readonly_row =''+ '<td><@= dataSourceId @></td>'+ '<td><@= name @></td>'+ '<td><@= isFirstParty(pid) ? "First Party" : "Third Party" @></td>';APP.templates.model_builder.page.process_freq =''+ '<h1>Select Look Back Period</h1>'+ '<p>Process model every '+ '<select name="intervalSeconds">'+ '<option value="2592000">30</option>'+ '<option value="5184000">60</option>'+ '<option value="7776000">90</option>'+ '</select>'+ ' days.';APP.templates.model_builder.page.view_page =''+ '<div id="ModelView">'+'<div class="top_toolbar">'+'<ul class="toolbar">'+ '<@ if (can_show_create_button()) {@><li class="new_model"><img class="icon" src="/css/aam/images/Add_Standard.png">Create New Model</li><@ } @>'+ '<@ if (can_show_edit_button()) {@><li class="edit_model"><img class="icon" src="/css/aam/images/Edit_Standard.png">Edit</li><@ } @>'+ '<@ if (can_show_clone_button()) {@><li class="clone_model"><img class="icon" src="%%IMG_CLONE_STANDARD%%">Clone</li><@ } @>'+ '<@ if (show_delete_button()) {@><li class="delete_model"><img class="icon" src="/css/aam/images/ClearXGrey_Buttcon.png">Delete</li><@ } @>'+ '<@ if (can_show_pause_play_buttons()) {@><li class="status"><@= getStatusImage() @></li><@ } @>'+ '</ul>'+'</div>'+'<h1 class="page_title"><@= getModelName() @></h1><span class="context-help" title="Help" data-id="c_models_summary.html">&nbsp;</span>'+'<div class="basic_info_and_graph dashboard">'+'<div class="reach_accuracy_view right"></div>'+'<div class="basic_info_view basicInfo left"></div>'+'</div>'+'<div class="dashboard no-border">'+ '<div class="layout_helper_model_processing">'+'<div class="widget left model_processing_history_wrapper">'+'<h3>Model Processing History (Last 10 Processes)</h3>'+'<div class="model_processing_history"></div>'+'</div>'+ '</div>'+ '<div class="layout_helper_influential_traits">'+'<div class="widget right last influential_traits_wrapper">'+'<h3>Influential Traits (Top 50)</h3>'+'<div class="influential_traits"></div>'+'</div>'+ '</div>'+'<br class="clear" />'+'</div>'+'<div class="dashboard bottom no-border">'+'<div class="widget traits_using_model_name_wrapper">'+'<h3>Traits Using <@= getModelName() @></h3>'+'<div class="traits_using_model_name"></div>'+'</div>'+'</div>';APP.templates.model_builder.page.model_basic_information =''+'<div class="basic_info">'+ '<h3>Basic Information</h3>'+ '<dl>'+ '<dt>Name:</dt>'+ '<dd><@= name @></dd>'+ '<dt>Description:</dt>'+ '<dd><@= displayValue(description) @></dd>'+ '<dt>Baseline <span class="<@= getBaselineType() @>"><span class="trait">Trait</span><span class="segment">Segment</span></span>:</dt>'+ '<dd><@= getBaselineName() @> (<@= sid @>)</dd>'+ '<dt>Algorithm:</dt>'+ '<dd><@= algorithm.name @></dd>'+ '<dt>Historic Increment:</dt>'+ '<dd><@= lookBackPeriod @> Days</dd>'+ '<dt>Last Run:</dt>'+ '<dd><@ try {@><@= formatTimestamp(lastSuccessfulRunTimestamp) @><@} catch(__err__) {@>-<@}@></dd>'+ '</dl>'+ '</div>';APP.templates.model_builder.page.model_reach_accuracy_graph =''+ '<div class="graph">'+'<h3>Model Reach & Accuracy</h3>'+ '<div id="model_graph_container"></div>'+ '</div>';APP.templates.model_builder.page.model_processing_history =''+ '<table class="table">'+'<thead>'+'<th>Processing Date and Time</th>'+ '<th>Data Generated?</th>'+'</thead>'+'<tbody class="history_list"></tbody>'+ '</table>';APP.templates.model_builder.page.model_processing_history_row ='<td><@= datetime @></td><td><@= dataGenerated @></td>';APP.templates.model_builder.page.model_processing_history_not_run =''+ '<tr><td>'+ APP.templates.getLocalizedMessage('model_has_not_run')
 + '</td></tr>';APP.templates.model_builder.page.model_processing_history_nodata =''+ '<tr><td>'+ APP.templates.getLocalizedMessage('model_has_not_run')
 + '</td></tr>';APP.templates.model_builder.page.influential_traits =''+ '<div class="table_wrapper">'+'<table class="table">'+'<thead>'+'<th class="sortable desc" data-sortby="rank" width="5%">Rank</th>'+'<th class="sortable" data-sortby="sid" width="10%">Trait ID</th>'+'<th class="sortable" data-sortby="name" width="25%">Name</th>'+'<th width="45%">Description</th>'+'<th class="sortable" data-sortby="uniques30Day" width="15%">30-Day Uniques</th>'+'</thead>'+'<tbody class="influential_trait_list"></tbody>'+ '</table>'+ '</div>'+ '<button type="button" class="primary">View All Influential Traits</button>';APP.templates.model_builder.page.influential_traits_row =''+ '<td><@= rank @></td>'+ '<td class="sid"><a href="#" data-sid="<@= sid @>"><@= sid @></a></td>'+ '<td class="name"><a href="#" data-sid="<@= sid @>"><@= name @></a></td>'+ '<td><@= description @></td>'+ '<td class="days_30"><@= ADOBE.AM.UTILS.HELPERS.formatNumber(uniques30Day) @></td>';APP.templates.model_builder.page.influential_traits_nodata =''+ '<tr class="influential_traits_nodata">'+'<td colspan="5">'+APP.templates.getLocalizedMessage('influential_traits_nodata')
 +'</td>'+ '</tr>';APP.templates.model_builder.page.influential_traits_not_run =''+ '<tr class="influential_traits_nodata">'+'<td colspan="5">'+APP.templates.getLocalizedMessage('model_has_not_run')
 +'</td>'+ '</tr>';APP.templates.model_builder.page.traits_using_model_name =''+ '<div class="table_wrapper">'+ '<table class="table">'+'<thead>'+'<th class="sortable" data-sortby="sid" width="8%">Trait ID</th>'+'<th class="sortable" data-sortby="name" width="25%">Name</th>'+'<th width="42%">Description</th>'+'<th class="sortable" data-sortby="reach" width="10%">Reach</th>'+'<th class="sortable" data-sortby="accuracy" width="15%">Accuracy</th>'+'</thead>'+'<tbody class="traits_using_model_name"></tbody>'+ '</table>'+ '</div>'+ '<@ if (canCreateTrait()) { @>'+ '<button type="button" class="primary">Create New Trait with Model</button>'+ '<@ } @>';APP.templates.model_builder.page.traits_using_model_name_empty_row =''+ '<td colspan="5">No traits found</td>';APP.templates.model_builder.page.traits_using_model_name_row =''+ '<td class="sid"><a href="#" data-sid="<@= sid @>"><@= sid @></a></td>'+ '<td class="name"><a href="#" data-sid="<@= sid @>"><@= name @></a></td>'+ '<td><@= description@></td>'+ '<td><@= displayReach() @></td>'+ '<td><@= displayAccuracy() @></td>';APP.templates.model_builder.page.influential_traits_modal =''+ '<div id="influential_traits_modal">'+'<div class="layout-2-col " style="width:1000px;height:550px;">'+'<div class="panels influential_traits_list">'+'<table class="table bb-table-widget" id="influential_traits_table" width="100%">'+'<thead>'+'<tr>'+'<th class="sortable" data-sortby="rank" width="5%">Rank</th>'+'<th class="sortable" data-sortby="sid" width="10%">Trait ID</th>'+'<th class="sortable" data-sortby="name" width="25%">Name</th>'+'<th width="45%">Description</th>'+'<th class="sortable" data-sortby="uniques30Day" width="15%">Uniques</th>'+'</tr>'+'</thead>'+'<tbody id="influential_traits_table_tbody"></tbody>'+'</table>'+'<div id="influential_traits_pagination" class="pagination"></div>'+'</div>'+'</div>'+ '</div>';APP.templates.model_builder.page.influential_trait_table_row =''+ '<td><@= t.get("rank") @></td>'+ '<td><@= t.get("sid") @></td>'+ '<td><@= t.get("name") @></td>'+ '<td><@= t.get("description") @></td>'+ '<td class="days_30"><@= ADOBE.AM.UTILS.HELPERS.formatNumber(t.get("uniques30Day")) @></td>';APP.templates.model_builder.page.list_page =''+ '<div id="ModelList">'+'<div class="top_toolbar">'+'<ul class="toolbar">'+ '<@ if (can_show_create_button()) {@><li class="new_model"><img class="icon" src="/css/aam/images/Add_Standard.png">Create New Model</li><@ } @>'+ '<li class="new_trait"><img class="icon" src="/css/aam/images/Add_Standard.png">New Trait with Selected Model</li>'+ '<@ if (can_show_delete_button()) {@><li class="delete_model"><img class="icon" src="/css/aam/images/ClearXGrey_Buttcon.png">Delete</li><@ } @>'+ '</ul>'+'</div>'+'<div class="layout-2-col">'+'<div class="col1 model_storage container">'+'<h4>Model Storage</h4>'+'</div>'+'<div class="col2 container">'+'<div class="models_list"></div>'+'<div id="model_pagination" class="pagination"></div>'+'</div>'+ '</div>'+ '</div>';APP.templates.model_builder.page.list_models_table =''+ '<table class="table" id="models_table">'+'<thead>'+'<tr>'+'<th width="1%" data-sortby="name"><input type="checkbox" /></th>'+'<th width="1%" class="sortable" data-sortby="algoModelId">ID</th>'+'<th width="20%" class="sortable" data-sortby="name">Name</th>'+'<th width="27%" class="sortable" data-sortby="description">Description</th>'+'<th width="10%" class="sortable" data-sortby="algoTypeId">Algorithm</th>'+'<th width="8%" class="sortable" data-sortby="status">Status</th>'+'<th width="12%" class="sortable" data-sortby="lookBackPeriod">Look Back</th>'+'<th width="10%" class="sortable" data-sortby="lastSuccessfulRunTimestamp">Last Successful Run</th>'+'<th width="10%" class="actions">Actions</th>'+'</th>'+'</thead>'+'<tbody></tbody>'+ '</table>';APP.templates.model_builder.page.list_models_table_row =''+ '<td>'+ '<span class="result_checkbox"><@= displayCheckbox() @></span>'+ '</td>'+ '<td><@= algoModelId @></td>'+ '<td><a href="#view/<@= algoModelId @>"><@= name @></a></td>'+ '<td><@= description @></td>'+ '<td><@= displayAlgorithm() @></td>'+ '<td><@= displayStatus(status) @></td>'+ '<td><@= lookBackPeriod @></td>'+ '<td><@= formatTimestamp(lastSuccessfulRunTimestamp) @></td>'+ '<td class="actions">'+ '<@ if (can_show_edit_button()) {@><a href="#edit/<@= algoModelId @>"><img class="edit btn_action" src="/css/aam/images/Edit_Standard.png" alt="Edit" title="Edit" /></a><@ } @>'+'<@ if (can_show_pause_play_buttons()) {@><@= getStatusImage() @><@ } @>'+'<@ if (can_show_clone_button()) {@><a href="#clone/<@= algoModelId @>"><img class="clone btn_action" src="%%IMG_CLONE_STANDARD%%" alt="Clone" title="Clone" /></a><@ } @>'+'<@ if (show_delete_button()) { @><img class="delete btn_action" alt="Delete" title="Delete" src="/css/aam/images/ClearXGrey_Buttcon.png" /><@ } @>'+ '</td>';APP.templates.algo_trait ={};APP.templates.algo_trait.page ={};APP.templates.algo_trait.page.create_edit_page =''+ '<div class="page_title">Algorithmic Trait</div>'+ '<br style="clear:both" />'+ '<div id="basic_info_accordion"></div>'+ '<div id="configuration_accordion"></div>'+ '<input type="hidden" name="folderId" value="" />'+ '<input type="hidden" name="categoryId" value="" />'+ '<input type="hidden" name="algoModelId" value="" />'+ '<div class="action_btns">'+'<button type="button" class="save primary">Save</button>'+'<button type="button" class="cancel">Cancel</button>'+ '</div>';APP.templates.algo_trait.page.basic_info_accordion =''+ '<div id="basic_inputs"></div>'+ '<div class="layout_helper">'+ '<div class="layout_helper_sub">'+ '<div id="categories"></div>'+ '</div>'+ '<div class="layout_helper_sub">'+ '<div id="traits_storage"></div>'+ '</div>'+ '</div>';APP.templates.algo_trait.page.configuration_accordion =''+ '<div class="section select_model"></div>'+ '<div id="reach_accuracy_group">'+ '<div class="adjust_reach_accuracy section"></div>'+ '<div class="reach_accuracy section"></div>'+ '</div>';APP.templates.algo_trait.page.basic_inputs =''+ '<div class="input_row"><label for="name">Name:</label><input type="text" name="name" value="<@ try { @><@= name @><@ } catch(err) {} @>" /></div>'+ '<div class="input_row"><label for="description">Description:</label><input type="text" name="description" value="<@ try { @><@= description @><@ } catch(err) {} @>" /></div>'+ '<div class="input_row"><label for="datasource">Data Source:</label>'+ '<select name="dataSourceId">'+ '<option value="">Select a Data Source</option>'+ '<@ _.each(dataSources, function(dataSrc) { @>'+ '<option value="<@= dataSrc.dataSourceId @>" <@ try { if (dataSrc.dataSourceId == dataSourceId) { @>selected="selected"<@ }} catch(err) {} @>><@= dataSrc.name @> (DPID: <@= dataSrc.dataSourceId @>)</option>'+ ' <@ }); @>'+ '</select>'+ '</div>'+ '<@ if (!isAlgoTrait()) { @>'+ '<div class="input_row"><label for="pixelType">Event Type:</label>'+ '<select name="type">'+ '<option value="">Select an Event Type</option>'+ '<@ _.each(pixelTypes, function(pxType) { @>'+ '<option value="<@= pxType.pixelType @>" <@ try { if (pxType.pixelType == type) { @>selected="selected"<@ }} catch(err) {} @>><@= pxType.name @></option>'+ '<@ }); @>'+ '</select>'+ '</div>'+ '<@ } @>'+ '<div class="input_row"><label for="integrationCode">Integration Code:</label><input type="text" name="integrationCode" value="<@ try { @><@= integrationCode @><@ } catch(err) {} @>" /></div>'+ '<@ if (!isAlgoTrait()) { @>'+ '<div class="input_row">'+ '<label for="comments">Comments:</label>'+ '<textarea name="comments"><@ try { @><@= comments @><@ } catch(err) {} @></textarea>'+ '</div>'+ '<@ } @>';APP.templates.algo_trait.page.traits_storage =''+ '<h3>Store In:</h3>'+ '<div id="traits_folder_tree"></div>';APP.templates.algo_trait.page.data_category =''+ '<h3>Data Category: <span class="optional">(Optional)</span></h3>'+ '<div id="category_folder_tree"></div>';APP.templates.algo_trait.select_model =''+ '<h3><@= isEditMode() ? "Algorithmic Trait Model: " : "Select a Model for the Algorithmic Trait: " @><@= name @></h3>'+ '<@ if (!isEditMode()) { @>'+ '<button type="button" id="browse_all_models" class="primary"><@= (isCreateMode() && name === "") ? "Browse All Models" : "Update" @></button>'+ '<@ } @>';APP.templates.algo_trait.adjust_reach_accuracy =''+ '<h3>Adjust Reach & Accuracy</h3>'+ '<div id="reach_accuracy_graph" style="height:440px;width:595px"></div>'+ '<div id="reach_accuracy_slider" style="margin-left:64px"></div>';APP.templates.algo_trait.reach_accuracy =''+ '<h3>Reach & Accuracy</h3>'+ '<div class="reach_accuracy_table">'+ '<table class="table">'+ '<thead>'+ '<tr>'+ '<th>Accuracy</th>'+ '<th>Reach</th>'+ '</tr>'+ '</thead>'+ '<tbody class="reach_accuracy_table_body"></tbody>'+ '</table>'+ '</div>';APP.templates.algo_trait.reach_accuracy_row =''+ '<td><@= AccuracyValue @></td>'+ '<td><@= formatNumber(ReachValue) @></td>';APP.templates.algo_trait.view_page_toolbar_buttons =''+ '<ul class="toolbar">'+ '<@ if (data.add) { @><li class="new_algotrait"><img class="icon" src="/css/aam/images/Add_Standard.png">Create New Trait<ul id="atMenu" class="am-aui-menu"><li class="item_rule_based_trait"><a href="#new/rule" rel="rb">Rules-based</a></li><li><a href="#new/algo">Algorithmic</a></li><li><a href="#new/onboarded">Onboarded</a></li></ul></li><@ } @>'+ '<@ if (data.edit) { @><li class="edit_algotrait"><img class="icon" src="/css/aam/images/Edit_Standard.png">Edit</li><@ } @>'+ '<@ if (data.clone) { @><li class="clone_algotrait"><img class="icon" src="%%IMG_CLONE_STANDARD%%">Clone</li><@ } @>'+ '<@ if (data.del) { @><li class="delete_algotrait"><img class="icon" src="/css/aam/images/ClearXGrey_Buttcon.png">Delete</li><@ } @>'+ '</ul>';APP.templates.algo_trait.basic_information =''+ '<h3>Basic Information</h3>';APP.templates.algo_trait.segments_with_trait =''+ '<div>'+ '<table class="table" width="100%">'+ '<thead>'+ '<th width="10%">Segment ID</th>'+ '<th width="40%" class="sortable" data-sortby="name">Name</th>'+ '<th width="50%">Description</th>'+ '</thead>'+ '<tbody class="segments_with_trait"></tbody>'+ '</table>'+ '</div>';APP.templates.trait ={};APP.templates.trait.page ={};APP.templates.trait.page.graph =''+ '<div class="reach_accuracy_view">'+ '<h3>Trait Uniques</h3>'+ '<div id="algo_trait_graph_container"></div>'+ '</div>';APP.templates.trait.views ={};APP.templates.trait.views.basic_info =''+ '<dt>Trait ID:</dt>'+ '<dd><@= d.sid @></dd>'+ '<dt>Description:</dt>'+ '<dd><@= d.description @></dd>'+ '<dt>Data Source:</dt>'+ '<dd><@= d._datasource @></dd>'+ '<@ if (!d.isAlgoTrait()) { @>'+ '<dt>Event Type:</dt>'+ '<dd><@ if (d._type) { @><@= d._type @><@ } @></dd>'+ '<@ } @>'+ '<dt>Integration Code:</dt>'+ '<dd><@= d._integrationCode @></dd>'+ '<dt>Stored In:</dt>'+ '<dd><@= d._folder @> </dd>'+ '<dt>Data Category:</dt>'+ '<dd><@= d._category @></dd>'+ '<@ if (!d.isAlgoTrait()) { @>'+ '<dt>Comments:</dt>'+ '<dd><@= d._comments @></dd>'+ '<@ } @>';APP.templates.trait_builder ={};APP.templates.trait_builder.page ={};APP.templates.trait_builder.page.list_page =''+ '<div id="TraitList">'+'<div class="top_toolbar">'+'</div>'+'<div class="layout-2-col">'+'<div class="col1">'+ '<div class="sidebar trait_sidebar container">'+ '<div class="trait_search">'+ '</div>'+ '<div class="trait_storage">'+ '<h4>Trait Storage</h4>'+ '</div>'+ '</div>'+'</div>'+'<div class="col2 container">'+'<div class="traits_list"></div>'+'<div id="trait_pagination" class="pagination"></div>'+'</div>'+ '</div>'+ '</div>';APP.templates.trait_builder.list_page_toolbar_buttons =''+ '<ul class="toolbar">'+ '<@ if (data.add) { @><li class="new_algotrait"><img class="icon" src="/css/aam/images/Add_Standard.png">Create New Trait<ul id="atMenu" class="am-aui-menu"><li class="item_rule_based_trait"><a href="#new/rule" rel="rb">Rules-based</a></li><li><a href="#new/algo">Algorithmic</a></li><li><a href="#new/onboarded">Onboarded</a></li></ul></li><@ } @>'+ '<@ if (data.create_model) { @><li class="createModelWithTrait"><img class="icon" src="/css/aam/images/Add_Standard.png">Create Model with Selected</li><@ } @>'+ '<@ if (data.can_show_segment) { @><li class="createSegmentWithTraits"><img class="icon" src="/css/aam/images/Add_Standard.png">Create Segment with Selected</li><@ } @>'+ '<@ if (data.can_show_delete) { @><li class="deleteSelected"><img class="icon" src="/css/aam/images/AlertDeactivate_Standard.png">Delete Selected</li><@ } @>'+ '</ul>';APP.templates.trait_builder.page.create_edit_page =''+ '<div class="page_title"><@= type @> Trait</div>'+ '<br style="clear:both" />'+ '<div id="accordion_basicinfo"></div>'+ '<div id="accordion_second"></div>'+ '<@ if (type == "Rule-based" || type == "Onboarded") { @>'+ '<div id="accordion_traitexp">'+ '<div id="rulesDiv"></div>'+ '<div id="testExp"></div>'+ '</div>'+ '<@ } @>'+ '<input type="hidden" name="folderId" value="" />'+ '<input type="hidden" name="categoryId" value="" />'+ '<input type="hidden" name="algoModelId" value="" />'+ '<input type="hidden" name="accuracy" value="" />'+ '<div class="action_btns">'+'<button type="button" class="save primary">Save</button>'+'<button type="button" class="cancel">Cancel</button>'+ '</div>';APP.templates.trait_builder.page.create_page ={};APP.templates.trait_builder.page.create_page.advanced_options =''+ 'Expire after: <input id="ttl" value="<@ try { @><@= ttl @><@ } catch(err) {@>0<@} @>" name="ttl" type="text" size="3" /> days.';APP.templates.trait_builder.page.create_page.exp_panel_content =''+ '<div id="codeView" class="tabContent" style="">'+ '<textarea name="traitRule" id="traitRule" rows="10" cols="141"><@ try {@><@=traitRule@><@} catch(__err__){}@></textarea>'+ '<div class="button_wrap">'+ '<button type="button" id="validateBtn" class="primary">Validate Expression</button>'+ '<button type="button" id="resetExp" class="secondary">Reset and Return to Expression Builder</button>'+ '</div>'+ '</div>';APP.templates.trait_builder.page.create_page.test_section =''+ '<label for="testUrl">Test Event URL</label>'+ '<input id="testUrl" type="text" name="testUrl">'+ '<label for="testHeader">Test HTTP Header</label>'+ '<textarea id="testHeader" cols="50" rows="5" name="testHeader"></textarea>'+ '<div class="button_wrap"><button type="button" class="primary" id="testUrlBtn">Test</button></div>';APP.templates.trait_builder.page.view_page ={};APP.templates.trait_builder.page.view_page.graph_wrapper =''+ '<h3>Trait Graph</h3>'+ '<div class="graph_container"></div>';}(_,APP));var Mediator =(function(toDebug) {var debug =toDebug ?function(message) {console.log(message);} :function(){},components ={},active_component =null,main_component =null;var isValidComponent =function(component) {if (main_component ==null) {return true;}
if (active_component ==null) {return true;}
return main_component ==component ||component.match(RegExp("^"+ active_component));};var broadcast =function(event,args,source) {var e =event ||false;var a =args ||[];if (!e) {return;}
 debug(["Mediator received",e,a].join(' '));for (var c in components) {if (!isValidComponent(c)) {debug("Mediator skipping "+ c);continue;}
 if (typeof components[c]["on"+ e] =="function") {var s =source ||components[c];try {debug("Mediator calling "+ e + " on "+ c);components[c]["on"+ e].call(s,a);} catch (err) {debug(["Mediator error.",e,a,s,err].join(' '));}
 }
 }
 };var addComponent =function(name,component,replaceDuplicate) {debug("Mediator adding func: "+ JSON.stringify(component) + " to "+ name);if (name in components) {if (replaceDuplicate) {removeComponent(name);} else {throw new Error('Mediator name conflict: '+ name);}
 }
 components[name] =component;};var removeComponent =function(name) {debug("Mediator deleting "+ name);if (name in components) {delete components[name];}
 };var getComponent =function(name) {return components[name] ||false;};var contains =function(name) {return (name in components);};var setActiveComponent =function(component_name) {active_component =component_name;debug("Mediator activating: "+ active_component);};var setMainComponent =function(component_name) {main_component =component_name;debug("Mediator setting main component to: "+ main_component);};return {name :"Mediator",broadcast :broadcast,add :addComponent,rem :removeComponent,get :getComponent,has :contains,setMainComponent :setMainComponent,setActiveComponent :setActiveComponent
 };}(false));