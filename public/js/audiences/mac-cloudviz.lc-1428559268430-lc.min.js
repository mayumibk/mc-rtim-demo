d3=function(){var hw={version:"3.3.13"};
if(!Date.now){Date.now=function(){return +new Date()
}
}var bQ=[].slice,dW=function(e){return bQ.call(e)
};
var bP=document,eh=bP.documentElement,fM=window;
try{dW(eh.childNodes)[0].nodeType
}catch(hm){dW=function(ip){var e=ip.length,iq=new Array(e);
while(e--){iq[e]=ip[e]
}return iq
}
}try{bP.createElement("div").style.setProperty("opacity",0,"")
}catch(fI){var dU=fM.Element.prototype,b3=dU.setAttribute,he=dU.setAttributeNS,dG=fM.CSSStyleDeclaration.prototype,gX=dG.setProperty;
dU.setAttribute=function(e,ip){b3.call(this,e,ip+"")
};
dU.setAttributeNS=function(iq,e,ip){he.call(this,iq,e,ip+"")
};
dG.setProperty=function(e,iq,ip){gX.call(this,e,iq+"",ip)
}
}hw.ascending=function(ip,e){return ip<e?-1:ip>e?1:ip>=e?0:NaN
};
hw.descending=function(ip,e){return e<ip?-1:e>ip?1:e>=ip?0:NaN
};
hw.min=function(iu,ir){var iq=-1,it=iu.length,ip,e;
if(arguments.length===1){while(++iq<it&&!((ip=iu[iq])!=null&&ip<=ip)){ip=undefined
}while(++iq<it){if((e=iu[iq])!=null&&ip>e){ip=e
}}}else{while(++iq<it&&!((ip=ir.call(iu,iu[iq],iq))!=null&&ip<=ip)){ip=undefined
}while(++iq<it){if((e=ir.call(iu,iu[iq],iq))!=null&&ip>e){ip=e
}}}return ip
};
hw.max=function(iu,ir){var iq=-1,it=iu.length,ip,e;
if(arguments.length===1){while(++iq<it&&!((ip=iu[iq])!=null&&ip<=ip)){ip=undefined
}while(++iq<it){if((e=iu[iq])!=null&&e>ip){ip=e
}}}else{while(++iq<it&&!((ip=ir.call(iu,iu[iq],iq))!=null&&ip<=ip)){ip=undefined
}while(++iq<it){if((e=ir.call(iu,iu[iq],iq))!=null&&e>ip){ip=e
}}}return ip
};
hw.extent=function(iv,ir){var iq=-1,iu=iv.length,ip,e,it;
if(arguments.length===1){while(++iq<iu&&!((ip=it=iv[iq])!=null&&ip<=ip)){ip=it=undefined
}while(++iq<iu){if((e=iv[iq])!=null){if(ip>e){ip=e
}if(it<e){it=e
}}}}else{while(++iq<iu&&!((ip=it=ir.call(iv,iv[iq],iq))!=null&&ip<=ip)){ip=undefined
}while(++iq<iu){if((e=ir.call(iv,iv[iq],iq))!=null){if(ip>e){ip=e
}if(it<e){it=e
}}}}return[ip,it]
};
hw.sum=function(iu,ir){var iq=0,it=iu.length,e,ip=-1;
if(arguments.length===1){while(++ip<it){if(!isNaN(e=+iu[ip])){iq+=e
}}}else{while(++ip<it){if(!isNaN(e=+ir.call(iu,iu[ip],ip))){iq+=e
}}}return iq
};
function hB(e){return e!=null&&!isNaN(e)
}hw.mean=function(iv,it){var iu=iv.length,ip,e=0,ir=-1,iq=0;
if(arguments.length===1){while(++ir<iu){if(hB(ip=iv[ir])){e+=(ip-e)/++iq
}}}else{while(++ir<iu){if(hB(ip=it.call(iv,iv[ir],ir))){e+=(ip-e)/++iq
}}}return iq?e:undefined
};
hw.quantile=function(iq,iv){var ir=(iq.length-1)*iv+1,it=Math.floor(ir),ip=+iq[it-1],iu=ir-it;
return iu?ip+iu*(iq[it]-ip):ip
};
hw.median=function(ip,e){if(arguments.length>1){ip=ip.map(e)
}ip=ip.filter(hB);
return ip.length?hw.quantile(ip.sort(hw.ascending),0.5):undefined
};
hw.bisector=function(e){return{left:function(iq,ip,iu,it){if(arguments.length<3){iu=0
}if(arguments.length<4){it=iq.length
}while(iu<it){var ir=iu+it>>>1;
if(e.call(iq,iq[ir],ir)<ip){iu=ir+1
}else{it=ir
}}return iu
},right:function(iq,ip,iu,it){if(arguments.length<3){iu=0
}if(arguments.length<4){it=iq.length
}while(iu<it){var ir=iu+it>>>1;
if(ip<e.call(iq,iq[ir],ir)){it=ir
}else{iu=ir+1
}}return iu
}}
};
var gA=hw.bisector(function(e){return e
});
hw.bisectLeft=gA.left;
hw.bisect=hw.bisectRight=gA.right;
hw.shuffle=function(ir){var e=ir.length,iq,ip;
while(e){ip=Math.random()*e--|0;
iq=ir[e],ir[e]=ir[ip],ir[ip]=iq
}return ir
};
hw.permute=function(ir,ip){var iq=ip.length,e=new Array(iq);
while(iq--){e[iq]=ir[ip[iq]]
}return e
};
hw.pairs=function(iu){var e=0,it=iu.length-1,ir,iq=iu[0],ip=new Array(it<0?0:it);
while(e<it){ip[e]=[ir=iq,iq=iu[++e]]
}return ip
};
hw.zip=function(){if(!(iu=arguments.length)){return[]
}for(var ir=-1,e=hw.min(arguments,fr),iq=new Array(e);
++ir<e;
){for(var ip=-1,iu,it=iq[ir]=new Array(iu);
++ip<iu;
){it[ip]=arguments[ip][ir]
}}return iq
};
function fr(e){return e.length
}hw.transpose=function(e){return hw.zip.apply(hw,e)
};
hw.keys=function(iq){var ip=[];
for(var e in iq){ip.push(e)
}return ip
};
hw.values=function(iq){var e=[];
for(var ip in iq){e.push(iq[ip])
}return e
};
hw.entries=function(iq){var e=[];
for(var ip in iq){e.push({key:ip,value:iq[ip]})
}return e
};
hw.merge=function(it){var iv=it.length,ip,ir=-1,iq=0,e,iu;
while(++ir<iv){iq+=it[ir].length
}e=new Array(iq);
while(--iv>=0){iu=it[iv];
ip=iu.length;
while(--ip>=0){e[--iq]=iu[ip]
}}return e
};
var cL=Math.abs;
hw.range=function(iv,it,iu){if(arguments.length<3){iu=1;
if(arguments.length<2){it=iv;
iv=0
}}if((it-iv)/iu===Infinity){throw new Error("infinite range")
}var ip=[],e=gv(cL(iu)),ir=-1,iq;
iv*=e,it*=e,iu*=e;
if(iu<0){while((iq=iv+iu*++ir)>it){ip.push(iq/e)
}}else{while((iq=iv+iu*++ir)<it){ip.push(iq/e)
}}return ip
};
function gv(e){var ip=1;
while(e*ip%1){ip*=10
}return ip
}function id(ir,iq){try{for(var ip in iq){Object.defineProperty(ir.prototype,ip,{value:iq[ip],enumerable:false})
}}catch(it){ir.prototype=iq
}}hw.map=function(e){var iq=new aL();
if(e instanceof aL){e.forEach(function(ir,it){iq.set(ir,it)
})
}else{for(var ip in e){iq.set(ip,e[ip])
}}return iq
};
function aL(){}id(aL,{has:function(e){return ig+e in this
},get:function(e){return this[ig+e]
},set:function(e,ip){return this[ig+e]=ip
},remove:function(e){e=ig+e;
return e in this&&delete this[e]
},keys:function(){var e=[];
this.forEach(function(ip){e.push(ip)
});
return e
},values:function(){var e=[];
this.forEach(function(ip,iq){e.push(iq)
});
return e
},entries:function(){var e=[];
this.forEach(function(ip,iq){e.push({key:ip,value:iq})
});
return e
},forEach:function(ip){for(var e in this){if(e.charCodeAt(0)===dK){ip.call(this,e.substring(1),this[e])
}}}});
var ig="\x00",dK=ig.charCodeAt(0);
hw.nest=function(){var ir={},iq=[],iv=[],ip,it;
function iu(ix,iE,iC){if(iC>=iq.length){return it?it.call(ir,iE):ip?iE.sort(ip):iE
}var iD=-1,iw=iE.length,iG=iq[iC++],iB,iA,iz,iy=new aL(),iF;
while(++iD<iw){if(iF=iy.get(iB=iG(iA=iE[iD]))){iF.push(iA)
}else{iy.set(iB,[iA])
}}if(ix){iA=ix();
iz=function(iI,iH){iA.set(iI,iu(ix,iH,iC))
}
}else{iA={};
iz=function(iI,iH){iA[iI]=iu(ix,iH,iC)
}
}iy.forEach(iz);
return iA
}function e(ix,iy){if(iy>=iq.length){return ix
}var iz=[],iw=iv[iy++];
ix.forEach(function(iA,iB){iz.push({key:iA,values:e(iB,iy)})
});
return iw?iz.sort(function(iB,iA){return iw(iB.key,iA.key)
}):iz
}ir.map=function(ix,iw){return iu(iw,ix,0)
};
ir.entries=function(iw){return e(iu(hw.map,iw,0),0)
};
ir.key=function(iw){iq.push(iw);
return ir
};
ir.sortKeys=function(iw){iv[iq.length-1]=iw;
return ir
};
ir.sortValues=function(iw){ip=iw;
return ir
};
ir.rollup=function(iw){it=iw;
return ir
};
return ir
};
hw.set=function(ir){var iq=new dy();
if(ir){for(var e=0,ip=ir.length;
e<ip;
++e){iq.add(ir[e])
}}return iq
};
function dy(){}id(dy,{has:function(e){return ig+e in this
},add:function(e){this[ig+e]=true;
return e
},remove:function(e){e=ig+e;
return e in this&&delete this[e]
},values:function(){var e=[];
this.forEach(function(ip){e.push(ip)
});
return e
},forEach:function(ip){for(var e in this){if(e.charCodeAt(0)===dK){ip.call(this,e.substring(1))
}}}});
hw.behavior={};
hw.rebind=function(iq,ip){var e=1,it=arguments.length,ir;
while(++e<it){iq[ir=arguments[e]]=eH(iq,ip,ip[ir])
}return iq
};
function eH(ip,e,iq){return function(){var ir=iq.apply(e,arguments);
return ir===e?ip:ir
}
}function dp(iq,ip){if(ip in iq){return ip
}ip=ip.charAt(0).toUpperCase()+ip.substring(1);
for(var ir=0,it=O.length;
ir<it;
++ir){var e=O[ir]+ip;
if(e in iq){return e
}}}var O=["webkit","ms","moz","Moz","o","O"];
function aK(){}hw.dispatch=function(){var e=new e3(),ip=-1,iq=arguments.length;
while(++ip<iq){e[arguments[ip]]=fu(e)
}return e
};
function e3(){}e3.prototype.on=function(iq,ir){var ip=iq.indexOf("."),e="";
if(ip>=0){e=iq.substring(ip+1);
iq=iq.substring(0,ip)
}if(iq){return arguments.length<2?this[iq].on(e):this[iq].on(e,ir)
}if(arguments.length===2){if(ir==null){for(iq in this){if(this.hasOwnProperty(iq)){this[iq].on(e,null)
}}}return this
}};
function fu(e){var iq=[],ip=new aL();
function ir(){var iv=iq,iu=-1,iw=iv.length,it;
while(++iu<iw){if(it=iv[iu].on){it.apply(this,arguments)
}}return e
}ir.on=function(iu,iw){var it=ip.get(iu),iv;
if(arguments.length<2){return it&&it.on
}if(it){it.on=null;
iq=iq.slice(0,iv=iq.indexOf(it)).concat(iq.slice(iv+1));
ip.remove(iu)
}if(iw){iq.push(ip.set(iu,{on:iw}))
}return e
};
return ir
}hw.event=null;
function w(){hw.event.preventDefault()
}function aj(){var iq=hw.event,ip;
while(ip=iq.sourceEvent){iq=ip
}return iq
}function hr(iq){var e=new e3(),ip=0,ir=arguments.length;
while(++ip<ir){e[arguments[ip]]=fu(e)
}e.of=function(iu,it){return function(iv){try{var iw=iv.sourceEvent=hw.event;
iv.target=iq;
hw.event=iv;
e[iv.type].apply(iu,it)
}finally{hw.event=iw
}}
};
return e
}hw.requote=function(e){return e.replace(df,"\\$&")
};
var df=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
var ih={}.__proto__?function(ip,e){ip.__proto__=e
}:function(ip,e){for(var iq in e){ip[iq]=e[iq]
}};
function d8(e){ih(e,d7);
return e
}var dx=function(e,ip){return ip.querySelector(e)
},gj=function(e,ip){return ip.querySelectorAll(e)
},c=eh[dp(eh,"matchesSelector")],a=function(ip,e){return c.call(ip,e)
};
if(typeof Sizzle==="function"){dx=function(e,ip){return Sizzle(e,ip)[0]||null
};
gj=function(e,ip){return Sizzle.uniqueSort(Sizzle(e,ip))
};
a=Sizzle.matchesSelector
}hw.selection=function(){return g2
};
var d7=hw.selection.prototype=[];
d7.select=function(iu){var iq=[],iy,e,ix,ir;
iu=B(iu);
for(var iv=-1,it=this.length;
++iv<it;
){iq.push(iy=[]);
iy.parentNode=(ix=this[iv]).parentNode;
for(var iw=-1,ip=ix.length;
++iw<ip;
){if(ir=ix[iw]){iy.push(e=iu.call(ir,ir.__data__,iw,iv));
if(e&&"__data__" in ir){e.__data__=ir.__data__
}}else{iy.push(null)
}}}return d8(iq)
};
function B(e){return typeof e==="function"?e:function(){return dx(e,this)
}
}d7.selectAll=function(it){var ip=[],ix,iq;
it=c7(it);
for(var iu=-1,ir=this.length;
++iu<ir;
){for(var iw=this[iu],iv=-1,e=iw.length;
++iv<e;
){if(iq=iw[iv]){ip.push(ix=dW(it.call(iq,iq.__data__,iv,iu)));
ix.parentNode=iq
}}}return d8(ip)
};
function c7(e){return typeof e==="function"?e:function(){return gj(e,this)
}
}var eo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
hw.ns={prefix:eo,qualify:function(e){var ip=e.indexOf(":"),iq=e;
if(ip>=0){iq=e.substring(0,ip);
e=e.substring(ip+1)
}return eo.hasOwnProperty(iq)?{space:eo[iq],local:e}:e
}};
d7.attr=function(e,iq){if(arguments.length<2){if(typeof e==="string"){var ip=this.node();
e=hw.ns.qualify(e);
return e.local?ip.getAttributeNS(e.space,e.local):ip.getAttribute(e)
}for(iq in e){this.each(bv(iq,e[iq]))
}return this
}return this.each(bv(e,iq))
};
function bv(iq,iv){iq=hw.ns.qualify(iq);
function ip(){this.removeAttribute(iq)
}function iw(){this.removeAttributeNS(iq.space,iq.local)
}function iu(){this.setAttribute(iq,iv)
}function it(){this.setAttributeNS(iq.space,iq.local,iv)
}function e(){var ix=iv.apply(this,arguments);
if(ix==null){this.removeAttribute(iq)
}else{this.setAttribute(iq,ix)
}}function ir(){var ix=iv.apply(this,arguments);
if(ix==null){this.removeAttributeNS(iq.space,iq.local)
}else{this.setAttributeNS(iq.space,iq.local,ix)
}}return iv==null?iq.local?iw:ip:typeof iv==="function"?iq.local?ir:e:iq.local?it:iu
}function cM(e){return e.trim().replace(/\s+/g," ")
}d7.classed=function(e,ir){if(arguments.length<2){if(typeof e==="string"){var iq=this.node(),it=(e=gG(e)).length,ip=-1;
if(ir=iq.classList){while(++ip<it){if(!ir.contains(e[ip])){return false
}}}else{ir=iq.getAttribute("class");
while(++ip<it){if(!gY(e[ip]).test(ir)){return false
}}}return true
}for(ir in e){this.each(gP(ir,e[ir]))
}return this
}return this.each(gP(e,ir))
};
function gY(e){return new RegExp("(?:^|\\s+)"+hw.requote(e)+"(?:\\s+|$)","g")
}function gG(e){return e.trim().split(/^|\s+/)
}function gP(ip,ir){ip=gG(ip).map(ic);
var it=ip.length;
function e(){var iu=-1;
while(++iu<it){ip[iu](this,ir)
}}function iq(){var iv=-1,iu=ir.apply(this,arguments);
while(++iv<it){ip[iv](this,iu)
}}return typeof ir==="function"?iq:e
}function ic(e){var ip=gY(e);
return function(iq,ir){if(it=iq.classList){return ir?it.add(e):it.remove(e)
}var it=iq.getAttribute("class")||"";
if(ir){ip.lastIndex=0;
if(!ip.test(it)){iq.setAttribute("class",cM(it+" "+e))
}}else{iq.setAttribute("class",cM(it.replace(ip," ")))
}}
}d7.style=function(e,iq,ip){var ir=arguments.length;
if(ir<3){if(typeof e!=="string"){if(ir<2){iq=""
}for(ip in e){this.each(fZ(ip,e[ip],iq))
}return this
}if(ir<2){return fM.getComputedStyle(this.node(),null).getPropertyValue(e)
}ip=""
}return this.each(fZ(e,iq,ip))
};
function fZ(iq,iu,ir){function ip(){this.style.removeProperty(iq)
}function it(){this.style.setProperty(iq,iu,ir)
}function e(){var iv=iu.apply(this,arguments);
if(iv==null){this.style.removeProperty(iq)
}else{this.style.setProperty(iq,iv,ir)
}}return iu==null?ip:typeof iu==="function"?e:it
}d7.property=function(e,ip){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]
}for(ip in e){this.each(hP(ip,e[ip]))
}return this
}return this.each(hP(e,ip))
};
function hP(ip,ir){function e(){delete this[ip]
}function iq(){this[ip]=ir
}function it(){var iu=ir.apply(this,arguments);
if(iu==null){delete this[ip]
}else{this[ip]=iu
}}return ir==null?e:typeof ir==="function"?it:iq
}d7.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var ip=e.apply(this,arguments);
this.textContent=ip==null?"":ip
}:e==null?function(){this.textContent=""
}:function(){this.textContent=e
}):this.node().textContent
};
d7.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var ip=e.apply(this,arguments);
this.innerHTML=ip==null?"":ip
}:e==null?function(){this.innerHTML=""
}:function(){this.innerHTML=e
}):this.node().innerHTML
};
d7.append=function(e){e=aG(e);
return this.select(function(){return this.appendChild(e.apply(this,arguments))
})
};
function aG(e){return typeof e==="function"?e:(e=hw.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)
}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)
}
}d7.insert=function(e,ip){e=aG(e);
ip=B(ip);
return this.select(function(){return this.insertBefore(e.apply(this,arguments),ip.apply(this,arguments)||null)
})
};
d7.remove=function(){return this.each(function(){var e=this.parentNode;
if(e){e.removeChild(this)
}})
};
d7.data=function(iw,iy){var it=-1,ip=this.length,ix,iq;
if(!arguments.length){iw=new Array(ip=(ix=this[0]).length);
while(++it<ip){if(iq=ix[it]){iw[it]=iq.__data__
}}return iw
}function iu(iI,iD){var iF,iA=iI.length,iC=iD.length,iH=Math.min(iA,iC),iM=new Array(iC),iJ=new Array(iC),iG=new Array(iA),iB,iz;
if(iy){var iN=new aL(),iK=new aL(),iL=[],iE;
for(iF=-1;
++iF<iA;
){iE=iy.call(iB=iI[iF],iB.__data__,iF);
if(iN.has(iE)){iG[iF]=iB
}else{iN.set(iE,iB)
}iL.push(iE)
}for(iF=-1;
++iF<iC;
){iE=iy.call(iD,iz=iD[iF],iF);
if(iB=iN.get(iE)){iM[iF]=iB;
iB.__data__=iz
}else{if(!iK.has(iE)){iJ[iF]=P(iz)
}}iK.set(iE,iz);
iN.remove(iE)
}for(iF=-1;
++iF<iA;
){if(iN.has(iL[iF])){iG[iF]=iI[iF]
}}}else{for(iF=-1;
++iF<iH;
){iB=iI[iF];
iz=iD[iF];
if(iB){iB.__data__=iz;
iM[iF]=iB
}else{iJ[iF]=P(iz)
}}for(;
iF<iC;
++iF){iJ[iF]=P(iD[iF])
}for(;
iF<iA;
++iF){iG[iF]=iI[iF]
}}iJ.update=iM;
iJ.parentNode=iM.parentNode=iG.parentNode=iI.parentNode;
iv.push(iJ);
ir.push(iM);
e.push(iG)
}var iv=bW([]),ir=d8([]),e=d8([]);
if(typeof iw==="function"){while(++it<ip){iu(ix=this[it],iw.call(ix,ix.parentNode.__data__,it))
}}else{while(++it<ip){iu(ix=this[it],iw)
}}ir.enter=function(){return iv
};
ir.exit=function(){return e
};
return ir
};
function P(e){return{__data__:e}
}d7.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")
};
d7.filter=function(e){var iq=[],ix,iw,ir;
if(typeof e!=="function"){e=bb(e)
}for(var iu=0,it=this.length;
iu<it;
iu++){iq.push(ix=[]);
ix.parentNode=(iw=this[iu]).parentNode;
for(var iv=0,ip=iw.length;
iv<ip;
iv++){if((ir=iw[iv])&&e.call(ir,ir.__data__,iv,iu)){ix.push(ir)
}}}return d8(iq)
};
function bb(e){return function(){return a(this,e)
}
}d7.order=function(){for(var ip=-1,e=this.length;
++ip<e;
){for(var iu=this[ip],iq=iu.length-1,ir=iu[iq],it;
--iq>=0;
){if(it=iu[iq]){if(ir&&ir!==it.nextSibling){ir.parentNode.insertBefore(it,ir)
}ir=it
}}}return this
};
d7.sort=function(ip){ip=gW.apply(this,arguments);
for(var iq=-1,e=this.length;
++iq<e;
){this[iq].sort(ip)
}return this.order()
};
function gW(e){if(!arguments.length){e=hw.ascending
}return function(iq,ip){return iq&&ip?e(iq.__data__,ip.__data__):!iq-!ip
}
}d7.each=function(e){return cN(this,function(ir,iq,ip){e.call(ir,ir.__data__,iq,ip)
})
};
function cN(ip,iw){for(var iq=0,e=ip.length;
iq<e;
iq++){for(var iu=ip[iq],ir=0,iv=iu.length,it;
ir<iv;
ir++){if(it=iu[ir]){iw(it,ir,iq)
}}}return ip
}d7.call=function(ip){var e=dW(arguments);
ip.apply(e[0]=this,e);
return this
};
d7.empty=function(){return !this.node()
};
d7.node=function(){for(var ip=0,e=this.length;
ip<e;
ip++){for(var it=this[ip],iq=0,iu=it.length;
iq<iu;
iq++){var ir=it[iq];
if(ir){return ir
}}}return null
};
d7.size=function(){var e=0;
this.each(function(){++e
});
return e
};
function bW(e){ih(e,fh);
return e
}var fh=[];
hw.selection.enter=bW;
hw.selection.enter.prototype=fh;
fh.append=d7.append;
fh.empty=d7.empty;
fh.node=d7.node;
fh.call=d7.call;
fh.size=d7.size;
fh.select=function(iu){var iq=[],iz,e,ix,iy,it;
for(var iv=-1,ir=this.length;
++iv<ir;
){ix=(iy=this[iv]).update;
iq.push(iz=[]);
iz.parentNode=iy.parentNode;
for(var iw=-1,ip=iy.length;
++iw<ip;
){if(it=iy[iw]){iz.push(ix[iw]=e=iu.call(iy.parentNode,it.__data__,iw,iv));
e.__data__=it.__data__
}else{iz.push(null)
}}}return d8(iq)
};
fh.insert=function(e,ip){if(arguments.length<2){ip=gF(this)
}return d7.insert.call(this,e,ip)
};
function gF(iq){var e,ip;
return function(iw,it,ir){var iv=iq[ir].update,ix=iv.length,iu;
if(ir!=ip){ip=ir,e=0
}if(it>=e){e=it+1
}while(!(iu=iv[e])&&++e<ix){}return iu
}
}d7.transition=function(){var e=aw||++hk,iq=[],iy,ir,iw=ee||{time:Date.now(),ease:aA,delay:0,duration:250};
for(var iu=-1,it=this.length;
++iu<it;
){iq.push(iy=[]);
for(var ix=this[iu],iv=-1,ip=ix.length;
++iv<ip;
){if(ir=ix[iv]){fP(ir,iv,e,iw)
}iy.push(ir)
}}return g0(iq,e)
};
d7.interrupt=function(){return this.each(c0)
};
function c0(){var e=this.__transition__;
if(e){++e.active
}}hw.select=function(e){var ip=[typeof e==="string"?dx(e,bP):e];
ip.parentNode=eh;
return d8([ip])
};
hw.selectAll=function(e){var ip=dW(typeof e==="string"?gj(e,bP):e);
ip.parentNode=eh;
return d8([ip])
};
var g2=hw.select(eh);
d7.on=function(ip,iq,e){var ir=arguments.length;
if(ir<3){if(typeof ip!=="string"){if(ir<2){iq=false
}for(e in ip){this.each(l(e,ip[e],iq))
}return this
}if(ir<2){return(ir=this.node()["__on"+ip])&&ir._
}e=false
}return this.each(l(ip,iq,e))
};
function l(ix,ir,iy){var e="__on"+ix,iu=ix.indexOf("."),ip=fD;
if(iu>0){ix=ix.substring(0,iu)
}var iq=bM.get(ix);
if(iq){ix=iq,ip=av
}function it(){var iz=this[e];
if(iz){this.removeEventListener(ix,iz,iz.$);
delete this[e]
}}function iw(){var iz=ip(ir,dW(arguments));
it.call(this);
this.addEventListener(ix,this[e]=iz,iz.$=iy);
iz._=ir
}function iv(){var iC=new RegExp("^__on([^.]+)"+hw.requote(ix)+"$"),iB;
for(var iA in this){if(iB=iA.match(iC)){var iz=this[iA];
this.removeEventListener(iB[1],iz,iz.$);
delete this[iA]
}}}return iu?ir?iw:it:ir?aK:iv
}var bM=hw.map({mouseenter:"mouseover",mouseleave:"mouseout"});
bM.forEach(function(e){if("on"+e in bP){bM.remove(e)
}});
function fD(ip,e){return function(iq){var ir=hw.event;
hw.event=iq;
e[0]=this.__data__;
try{ip.apply(this,e)
}finally{hw.event=ir
}}
}function av(iq,e){var ip=fD(iq,e);
return function(iu){var it=this,ir=iu.relatedTarget;
if(!ir||ir!==it&&!(ir.compareDocumentPosition(it)&8)){ip.call(it,iu)
}}
}var cd="onselectstart" in bP?null:dp(eh.style,"userSelect"),gU=0;
function bN(){var iq=".dragsuppress-"+ ++gU,it="click"+iq,ip=hw.select(fM).on("touchmove"+iq,w).on("dragstart"+iq,w).on("selectstart"+iq,w);
if(cd){var ir=eh.style,e=ir[cd];
ir[cd]="none"
}return function(iu){ip.on(iq,null);
if(cd){ir[cd]=e
}if(iu){function iv(){ip.on(it,null)
}ip.on(it,function(){w();
iv()
},true);
setTimeout(iv,0)
}}
}hw.mouse=function(e){return a1(e,aj())
};
var cJ=/WebKit/.test(fM.navigator.userAgent)?-1:0;
function a1(ir,iv){if(iv.changedTouches){iv=iv.changedTouches[0]
}var it=ir.ownerSVGElement||ir;
if(it.createSVGPoint){var ip=it.createSVGPoint();
if(cJ<0&&(fM.scrollX||fM.scrollY)){it=hw.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");
var iq=it[0][0].getScreenCTM();
cJ=!(iq.f||iq.e);
it.remove()
}if(cJ){ip.x=iv.pageX,ip.y=iv.pageY
}else{ip.x=iv.clientX,ip.y=iv.clientY
}ip=ip.matrixTransform(ir.getScreenCTM().inverse());
return[ip.x,ip.y]
}var iu=ir.getBoundingClientRect();
return[iv.clientX-iu.left-ir.clientLeft,iv.clientY-iu.top-ir.clientTop]
}hw.touches=function(e,ip){if(arguments.length<2){ip=aj().touches
}return ip?dW(ip).map(function(ir){var iq=a1(e,ir);
iq.identifier=ir.identifier;
return iq
}):[]
};
hw.behavior.drag=function(){var it=hr(ir,"drag","dragstart","dragend"),e=null,ip=iq(aK,hw.mouse,"mousemove","mouseup"),iw=iq(iv,iu,"touchmove","touchend");
function ir(){this.on("mousedown.drag",ip).on("touchstart.drag",iw)
}function iv(){return hw.event.changedTouches[0].identifier
}function iu(ix,iy){return hw.touches(ix).filter(function(iz){return iz.identifier===iy
})[0]
}function iq(iA,ix,iz,iy){return function(){var iF=this,iM=iF.parentNode,iN=it.of(iF,arguments),iL=hw.event.target,iB=iA(),iD=iB==null?"drag":"drag-"+iB,iG=ix(iM,iB),iI=0,iC,iK=hw.select(fM).on(iz+"."+iD,iH).on(iy+"."+iD,iJ),iE=bN();
if(e){iC=e.apply(iF,arguments);
iC=[iC.x-iG[0],iC.y-iG[1]]
}else{iC=[0,0]
}iN({type:"dragstart"});
function iH(){var iQ=ix(iM,iB),iP=iQ[0]-iG[0],iO=iQ[1]-iG[1];
iI|=iP|iO;
iG=iQ;
iN({type:"drag",x:iQ[0]+iC[0],y:iQ[1]+iC[1],dx:iP,dy:iO})
}function iJ(){iK.on(iz+"."+iD,null).on(iy+"."+iD,null);
iE(iI&&hw.event.target===iL);
iN({type:"dragend"})
}}
}ir.origin=function(ix){if(!arguments.length){return e
}e=ix;
return ir
};
return hw.rebind(ir,it,"on")
};
var gp=Math.PI,gk=2*gp,ey=gp/2,gz=0.000001,eM=gz*gz,N=gp/180,hM=180/gp;
function cb(e){return e>0?1:e<0?-1:0
}function ai(e){return e>1?0:e<-1?gp:Math.acos(e)
}function cg(e){return e>1?ey:e<-1?-ey:Math.asin(e)
}function d5(e){return((e=Math.exp(e))-1/e)/2
}function bF(e){return((e=Math.exp(e))+1/e)/2
}function fG(e){return((e=Math.exp(2*e))-1)/(e+1)
}function aH(e){return(e=Math.sin(e/2))*e
}var gn=Math.SQRT2,af=2,ad=4;
hw.interpolateZoom=function(ip,e){var iA=ip[0],iF=ip[1],iy=ip[2],iz=e[0],iE=e[1],iw=e[2];
var ix=iz-iA,iv=iE-iF,iG=ix*ix+iv*iv,iH=Math.sqrt(iG),it=(iw*iw-iy*iy+ad*iG)/(2*iy*af*iH),ir=(iw*iw-iy*iy-ad*iG)/(2*iw*af*iH),iD=Math.log(Math.sqrt(it*it+1)-it),iC=Math.log(Math.sqrt(ir*ir+1)-ir),iB=iC-iD,iq=(iB||Math.log(iw/iy))/gn;
function iu(iJ){var iK=iJ*iq;
if(iB){var iL=bF(iD),iI=iy/(af*iH)*(iL*fG(gn*iK+iD)-d5(iD));
return[iA+iI*ix,iF+iI*iv,iy*iL/bF(gn*iK+iD)]
}return[iA+iJ*ix,iF+iJ*iv,iy*Math.exp(gn*iK)]
}iu.duration=iq*1000;
return iu
};
hw.behavior.zoom=function(){var iA={x:0,y:0,k:1},iP,iR,iE=[960,500],iq=f8,iI="mousedown.zoom",iQ="mousemove.zoom",iJ="mouseup.zoom",iF,iN="touchstart.zoom",ix,iK=hr(ip,"zoomstart","zoom","zoomend"),iO,iM,iv,it;
function ip(iT){iT.on(iI,ir).on(hd+".zoom",iB).on(iQ,iL).on("dblclick.zoom",iy).on(iN,iu)
}ip.event=function(iT){iT.each(function(){var iV=iK.of(this,arguments),iU=iA;
if(aw){hw.select(this).transition().each("start.zoom",function(){iA=this.__chart__||{x:0,y:0,k:1};
iG(iV)
}).tween("zoom:zoom",function(){var iY=iE[0],iX=iE[1],iW=iY/2,i0=iX/2,iZ=hw.interpolateZoom([(iW-iA.x)/iA.k,(i0-iA.y)/iA.k,iY/iA.k],[(iW-iU.x)/iU.k,(i0-iU.y)/iU.k,iY/iU.k]);
return function(i3){var i1=iZ(i3),i2=iY/i1[2];
this.__chart__=iA={x:iW-i1[0]*i2,y:i0-i1[1]*i2,k:i2};
iD(iV)
}
}).each("end.zoom",function(){iC(iV)
})
}else{this.__chart__=iA;
iG(iV);
iD(iV);
iC(iV)
}})
};
ip.translate=function(iT){if(!arguments.length){return[iA.x,iA.y]
}iA={x:+iT[0],y:+iT[1],k:iA.k};
iz();
return ip
};
ip.scale=function(iT){if(!arguments.length){return iA.k
}iA={x:iA.x,y:iA.y,k:+iT};
iz();
return ip
};
ip.scaleExtent=function(iT){if(!arguments.length){return iq
}iq=iT==null?f8:[+iT[0],+iT[1]];
return ip
};
ip.center=function(iT){if(!arguments.length){return iR
}iR=iT&&[+iT[0],+iT[1]];
return ip
};
ip.size=function(iT){if(!arguments.length){return iE
}iE=iT&&[+iT[0],+iT[1]];
return ip
};
ip.x=function(iT){if(!arguments.length){return iM
}iM=iT;
iO=iT.copy();
iA={x:0,y:0,k:1};
return ip
};
ip.y=function(iT){if(!arguments.length){return it
}it=iT;
iv=iT.copy();
iA={x:0,y:0,k:1};
return ip
};
function e(iT){return[(iT[0]-iA.x)/iA.k,(iT[1]-iA.y)/iA.k]
}function iH(iT){return[iT[0]*iA.k+iA.x,iT[1]*iA.k+iA.y]
}function iw(iT){iA.k=Math.max(iq[0],Math.min(iq[1],iT))
}function iS(iU,iT){iT=iH(iT);
iA.x+=iU[0]-iT[0];
iA.y+=iU[1]-iT[1]
}function iz(){if(iM){iM.domain(iO.range().map(function(iT){return(iT-iA.x)/iA.k
}).map(iO.invert))
}if(it){it.domain(iv.range().map(function(iT){return(iT-iA.y)/iA.k
}).map(iv.invert))
}}function iG(iT){iT({type:"zoomstart"})
}function iD(iT){iz();
iT({type:"zoom",scale:iA.k,translate:[iA.x,iA.y]})
}function iC(iT){iT({type:"zoomend"})
}function ir(){var iV=this,i0=iK.of(iV,arguments),iZ=hw.event.target,iX=0,i1=hw.select(fM).on(iQ,iW).on(iJ,iY),iT=e(hw.mouse(iV)),iU=bN();
c0.call(iV);
iG(i0);
function iW(){iX=1;
iS(hw.mouse(iV),iT);
iD(i0)
}function iY(){i1.on(iQ,fM===iV?iL:null).on(iJ,null);
iU(iX&&hw.event.target===iZ);
iC(i0)
}}function iu(){var iZ=this,i5=iK.of(iZ,arguments),iX={},i1=0,iY,iT=hw.event.changedTouches[0].identifier,iV="touchmove.zoom-"+iT,i6="touchend.zoom-"+iT,i4=hw.select(fM).on(iV,i2).on(i6,i3),i7=hw.select(iZ).on(iI,null).on(iN,i0),iW=bN();
c0.call(iZ);
i0();
iG(i5);
function iU(){var i8=hw.touches(iZ);
iY=iA.k;
i8.forEach(function(i9){if(i9.identifier in iX){iX[i9.identifier]=e(i9)
}});
return i8
}function i0(){var jd=hw.event.changedTouches;
for(var je=0,jb=jd.length;
je<jb;
++je){iX[jd[je].identifier]=null
}var jf=iU(),ja=Date.now();
if(jf.length===1){if(ja-ix<500){var i9=jf[0],jc=iX[i9.identifier];
iw(iA.k*2);
iS(i9,jc);
w();
iD(i5)
}ix=ja
}else{if(jf.length>1){var i9=jf[0],i8=jf[1],jh=i9[0]-i8[0],jg=i9[1]-i8[1];
i1=jh*jh+jg*jg
}}}function i2(){var jc=hw.touches(iZ),jg,ja,jf,i9;
for(var jb=0,i8=jc.length;
jb<i8;
++jb,i9=null){jf=jc[jb];
if(i9=iX[jf.identifier]){if(ja){break
}jg=jf,ja=i9
}}if(i9){var je=(je=jf[0]-jg[0])*je+(je=jf[1]-jg[1])*je,jd=i1&&Math.sqrt(je/i1);
jg=[(jg[0]+jf[0])/2,(jg[1]+jf[1])/2];
ja=[(ja[0]+i9[0])/2,(ja[1]+i9[1])/2];
iw(jd*iY)
}ix=null;
iS(jg,ja);
iD(i5)
}function i3(){if(hw.event.touches.length){var ja=hw.event.changedTouches;
for(var i9=0,jb=ja.length;
i9<jb;
++i9){delete iX[ja[i9].identifier]
}for(var i8 in iX){return void iU()
}}i4.on(iV,null).on(i6,null);
i7.on(iI,ir).on(iN,iu);
iW();
iC(i5)
}}function iB(){var iU=iK.of(this,arguments);
if(iF){clearTimeout(iF)
}else{c0.call(this),iG(iU)
}iF=setTimeout(function(){iF=null;
iC(iU)
},50);
w();
var iT=iR||hw.mouse(this);
if(!iP){iP=e(iT)
}iw(Math.pow(2,cC()*0.002)*iA.k);
iS(iT,iP);
iD(iU)
}function iL(){iP=null
}function iy(){var iV=iK.of(this,arguments),iW=hw.mouse(this),iT=e(iW),iU=Math.log(iA.k)/Math.LN2;
iG(iV);
iw(Math.pow(2,hw.event.shiftKey?Math.ceil(iU)-1:Math.floor(iU)+1));
iS(iW,iT);
iD(iV);
iC(iV)
}return hw.rebind(ip,iK,"on")
};
var f8=[0,Infinity];
var cC,hd="onwheel" in bP?(cC=function(){return -hw.event.deltaY*(hw.event.deltaMode?120:1)
},"wheel"):"onmousewheel" in bP?(cC=function(){return hw.event.wheelDelta
},"mousewheel"):(cC=function(){return -hw.event.detail
},"MozMousePixelScroll");
function K(){}K.prototype.toString=function(){return this.rgb()+""
};
hw.hsl=function(iq,ip,e){return arguments.length===1?iq instanceof fE?eQ(iq.h,iq.s,iq.l):a0(""+iq,gI,eQ):eQ(+iq,+ip,+e)
};
function eQ(iq,ip,e){return new fE(iq,ip,e)
}function fE(iq,ip,e){this.h=iq;
this.s=ip;
this.l=e
}var eF=fE.prototype=new K();
eF.brighter=function(e){e=Math.pow(0.7,arguments.length?e:1);
return eQ(this.h,this.s,this.l/e)
};
eF.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);
return eQ(this.h,this.s,e*this.l)
};
eF.rgb=function(){return bj(this.h,this.s,this.l)
};
function bj(iu,it,e){var ir,iq;
iu=isNaN(iu)?0:(iu%=360)<0?iu+360:iu;
it=isNaN(it)?0:it<0?0:it>1?1:it;
e=e<0?0:e>1?1:e;
iq=e<=0.5?e*(1+it):e+it-e*it;
ir=2*e-iq;
function ip(iw){if(iw>360){iw-=360
}else{if(iw<0){iw+=360
}}if(iw<60){return ir+(iq-ir)*iw/60
}if(iw<180){return iq
}if(iw<240){return ir+(iq-ir)*(240-iw)/60
}return ir
}function iv(iw){return Math.round(ip(iw)*255)
}return ez(iv(iu+120),iv(iu),iv(iu-120))
}hw.hcl=function(ip,iq,e){return arguments.length===1?ip instanceof cy?bD(ip.h,ip.c,ip.l):ip instanceof dd?gS(ip.l,ip.a,ip.b):gS((ip=d9((ip=hw.rgb(ip)).r,ip.g,ip.b)).l,ip.a,ip.b):bD(+ip,+iq,+e)
};
function bD(ip,iq,e){return new cy(ip,iq,e)
}function cy(ip,iq,e){this.h=ip;
this.c=iq;
this.l=e
}var hp=cy.prototype=new K();
hp.brighter=function(e){return bD(this.h,this.c,Math.min(100,this.l+bt*(arguments.length?e:1)))
};
hp.darker=function(e){return bD(this.h,this.c,Math.max(0,this.l-bt*(arguments.length?e:1)))
};
hp.rgb=function(){return bE(this.h,this.c,this.l).rgb()
};
function bE(ip,iq,e){if(isNaN(ip)){ip=0
}if(isNaN(iq)){iq=0
}return cq(e,Math.cos(ip*=N)*iq,Math.sin(ip)*iq)
}hw.lab=function(iq,ip,e){return arguments.length===1?iq instanceof dd?cq(iq.l,iq.a,iq.b):iq instanceof cy?bE(iq.l,iq.c,iq.h):d9((iq=hw.rgb(iq)).r,iq.g,iq.b):cq(+iq,+ip,+e)
};
function cq(iq,ip,e){return new dd(iq,ip,e)
}function dd(iq,ip,e){this.l=iq;
this.a=ip;
this.b=e
}var bt=18;
var bk=0.95047,bi=1,bf=1.08883;
var gK=dd.prototype=new K();
gK.brighter=function(e){return cq(Math.min(100,this.l+bt*(arguments.length?e:1)),this.a,this.b)
};
gK.darker=function(e){return cq(Math.max(0,this.l-bt*(arguments.length?e:1)),this.a,this.b)
};
gK.rgb=function(){return aF(this.l,this.a,this.b)
};
function aF(ir,iq,ip){var iu=(ir+16)/116,e=iu+iq/500,it=iu-ip/200;
e=ha(e)*bk;
iu=ha(iu)*bi;
it=ha(it)*bf;
return ez(d(3.2404542*e-1.5371385*iu-0.4985314*it),d(-0.969266*e+1.8760108*iu+0.041556*it),d(0.0556434*e-0.2040259*iu+1.0572252*it))
}function gS(iq,ip,e){return iq>0?bD(Math.atan2(e,ip)*hM,Math.sqrt(ip*ip+e*e),iq):bD(NaN,NaN,iq)
}function ha(e){return e>0.206893034?e*e*e:(e-4/29)/7.787037
}function gB(e){return e>0.008856?Math.pow(e,1/3):7.787037*e+4/29
}function d(e){return Math.round(255*(e<=0.00304?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))
}hw.rgb=function(iq,ip,e){return arguments.length===1?iq instanceof fk?ez(iq.r,iq.g,iq.b):a0(""+iq,ez,bj):ez(~~iq,~~ip,~~e)
};
function dl(e){return ez(e>>16,e>>8&255,e&255)
}function dC(e){return dl(e)+""
}function ez(iq,ip,e){return new fk(iq,ip,e)
}function fk(iq,ip,e){this.r=iq;
this.g=ip;
this.b=e
}var eR=fk.prototype=new K();
eR.brighter=function(ip){ip=Math.pow(0.7,arguments.length?ip:1);
var it=this.r,ir=this.g,e=this.b,iq=30;
if(!it&&!ir&&!e){return ez(iq,iq,iq)
}if(it&&it<iq){it=iq
}if(ir&&ir<iq){ir=iq
}if(e&&e<iq){e=iq
}return ez(Math.min(255,~~(it/ip)),Math.min(255,~~(ir/ip)),Math.min(255,~~(e/ip)))
};
eR.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);
return ez(~~(e*this.r),~~(e*this.g),~~(e*this.b))
};
eR.hsl=function(){return gI(this.r,this.g,this.b)
};
eR.toString=function(){return"#"+cA(this.r)+cA(this.g)+cA(this.b)
};
function cA(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)
}function a0(iu,ir,iv){var e=0,iq=0,it=0,ix,iw,ip;
ix=/([a-z]+)\((.*)\)/i.exec(iu);
if(ix){iw=ix[2].split(",");
switch(ix[1]){case"hsl":return iv(parseFloat(iw[0]),parseFloat(iw[1])/100,parseFloat(iw[2])/100);
case"rgb":return ir(e6(iw[0]),e6(iw[1]),e6(iw[2]))
}}if(ip=ar.get(iu)){return ir(ip.r,ip.g,ip.b)
}if(iu!=null&&iu.charAt(0)==="#"){if(iu.length===4){e=iu.charAt(1);
e+=e;
iq=iu.charAt(2);
iq+=iq;
it=iu.charAt(3);
it+=it
}else{if(iu.length===7){e=iu.substring(1,3);
iq=iu.substring(3,5);
it=iu.substring(5,7)
}}e=parseInt(e,16);
iq=parseInt(iq,16);
it=parseInt(it,16)
}return ir(e,iq,it)
}function gI(e,it,iv){var iq=Math.min(e/=255,it/=255,iv/=255),iw=Math.max(e,it,iv),iu=iw-iq,ir,ix,ip=(iw+iq)/2;
if(iu){ix=ip<0.5?iu/(iw+iq):iu/(2-iw-iq);
if(e==iw){ir=(it-iv)/iu+(it<iv?6:0)
}else{if(it==iw){ir=(iv-e)/iu+2
}else{ir=(e-it)/iu+4
}}ir*=60
}else{ir=NaN;
ix=ip>0&&ip<1?0:ir
}return eQ(ir,ix,ip)
}function d9(ir,iq,ip){ir=dJ(ir);
iq=dJ(iq);
ip=dJ(ip);
var e=gB((0.4124564*ir+0.3575761*iq+0.1804375*ip)/bk),iu=gB((0.2126729*ir+0.7151522*iq+0.072175*ip)/bi),it=gB((0.0193339*ir+0.119192*iq+0.9503041*ip)/bf);
return cq(116*iu-16,500*(e-iu),200*(iu-it))
}function dJ(e){return(e/=255)<=0.04045?e/12.92:Math.pow((e+0.055)/1.055,2.4)
}function e6(ip){var e=parseFloat(ip);
return ip.charAt(ip.length-1)==="%"?Math.round(e*2.55):e
}var ar=hw.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});
ar.forEach(function(e,ip){ar.set(e,dl(ip))
});
function W(e){return typeof e==="function"?e:function(){return e
}
}hw.functor=W;
function gw(e){return e
}hw.xhr=ac(gw);
function ac(e){return function(ip,iq,ir){if(arguments.length===2&&typeof iq==="function"){ir=iq,iq=null
}return h9(ip,iq,e,ir)
}
}function h9(e,iq,it,ix){var iy={},iw=hw.dispatch("beforesend","progress","load","error"),ir={},iu=new XMLHttpRequest(),iv=null;
if(fM.XDomainRequest&&!("withCredentials" in iu)&&/^(http(s)?:)?\/\//.test(e)){iu=new XDomainRequest()
}"onload" in iu?iu.onload=iu.onerror=ip:iu.onreadystatechange=function(){iu.readyState>3&&ip()
};
function ip(){var iA=iu.status,iz;
if(!iA&&iu.responseText||iA>=200&&iA<300||iA===304){try{iz=it.call(iy,iu)
}catch(iB){iw.error.call(iy,iB);
return
}iw.load.call(iy,iz)
}else{iw.error.call(iy,iu)
}}iu.onprogress=function(iz){var iA=hw.event;
hw.event=iz;
try{iw.progress.call(iy,iu)
}finally{hw.event=iA
}};
iy.header=function(iz,iA){iz=(iz+"").toLowerCase();
if(arguments.length<2){return ir[iz]
}if(iA==null){delete ir[iz]
}else{ir[iz]=iA+""
}return iy
};
iy.mimeType=function(iz){if(!arguments.length){return iq
}iq=iz==null?null:iz+"";
return iy
};
iy.responseType=function(iz){if(!arguments.length){return iv
}iv=iz;
return iy
};
iy.response=function(iz){it=iz;
return iy
};
["get","post"].forEach(function(iz){iy[iz]=function(){return iy.send.apply(iy,[iz].concat(dW(arguments)))
}
});
iy.send=function(iC,iA,iB){if(arguments.length===2&&typeof iA==="function"){iB=iA,iA=null
}iu.open(iC,e,true);
if(iq!=null&&!("accept" in ir)){ir.accept=iq+",*/*"
}if(iu.setRequestHeader){for(var iz in ir){iu.setRequestHeader(iz,ir[iz])
}}if(iq!=null&&iu.overrideMimeType){iu.overrideMimeType(iq)
}if(iv!=null){iu.responseType=iv
}if(iB!=null){iy.on("error",iB).on("load",function(iD){iB(null,iD)
})
}iw.beforesend.call(iy,iu);
iu.send(iA==null?null:iA);
return iy
};
iy.abort=function(){iu.abort();
return iy
};
hw.rebind(iy,iw,"on");
return ix==null?iy:iy.get(eg(ix))
}function eg(e){return e.length===1?function(ip,iq){e(ip==null?iq:null)
}:e
}hw.dsv=function(e,ip){var ir=new RegExp('["'+e+"\n]"),iu=e.charCodeAt(0);
function iw(iy,iA,iB){if(arguments.length<3){iB=iA,iA=null
}var iz=h9(iy,ip,iA==null?it:iq(iA),iB);
iz.row=function(iC){return arguments.length?iz.response((iA=iC)==null?it:iq(iC)):iA
};
return iz
}function it(iy){return iw.parse(iy.responseText)
}function iq(iy){return function(iz){return iw.parse(iz.responseText,iy)
}
}iw.parse=function(iA,iy){var iz;
return iw.parseRows(iA,function(iD,iC){if(iz){return iz(iD,iC-1)
}var iB=new Function("d","return {"+iD.map(function(iE,iF){return JSON.stringify(iE)+": d["+iF+"]"
}).join(",")+"}");
iz=iy?function(iF,iE){return iy(iB(iF),iE)
}:iB
})
};
iw.parseRows=function(iH,iC){var iz={},iB={},iJ=[],iD=iH.length,iG=0,iy=0,iI,iE;
function iA(){if(iG>=iD){return iB
}if(iE){return iE=false,iz
}var iL=iG;
if(iH.charCodeAt(iL)===34){var iM=iL;
while(iM++<iD){if(iH.charCodeAt(iM)===34){if(iH.charCodeAt(iM+1)!==34){break
}++iM
}}iG=iM+2;
var iN=iH.charCodeAt(iM+1);
if(iN===13){iE=true;
if(iH.charCodeAt(iM+2)===10){++iG
}}else{if(iN===10){iE=true
}}return iH.substring(iL+1,iM).replace(/""/g,'"')
}while(iG<iD){var iN=iH.charCodeAt(iG++),iK=1;
if(iN===10){iE=true
}else{if(iN===13){iE=true;
if(iH.charCodeAt(iG)===10){++iG,++iK
}}else{if(iN!==iu){continue
}}}return iH.substring(iL,iG-iK)
}return iH.substring(iL)
}while((iI=iA())!==iB){var iF=[];
while(iI!==iz&&iI!==iB){iF.push(iI);
iI=iA()
}if(iC&&!(iF=iC(iF,iy++))){continue
}iJ.push(iF)
}return iJ
};
iw.format=function(iA){if(Array.isArray(iA[0])){return iw.formatRows(iA)
}var iz=new dy(),iy=[];
iA.forEach(function(iC){for(var iB in iC){if(!iz.has(iB)){iy.push(iz.add(iB))
}}});
return[iy.map(iv).join(e)].concat(iA.map(function(iB){return iy.map(function(iC){return iv(iB[iC])
}).join(e)
})).join("\n")
};
iw.formatRows=function(iy){return iy.map(ix).join("\n")
};
function ix(iy){return iy.map(iv).join(e)
}function iv(iy){return ir.test(iy)?'"'+iy.replace(/\"/g,'""')+'"':iy
}return iw
};
hw.csv=hw.dsv(",","text/csv");
hw.tsv=hw.dsv("	","text/tab-separated-values");
var ea,ak,cu,ft,dr,hC=fM[dp(fM,"requestAnimationFrame")]||function(e){setTimeout(e,17)
};
hw.timer=function(iu,e,iq){var it=arguments.length;
if(it<2){e=0
}if(it<3){iq=Date.now()
}var ip=iq+e,ir={c:iu,t:ip,f:false,n:null};
if(ak){ak.n=ir
}else{ea=ir
}ak=ir;
if(!cu){ft=clearTimeout(ft);
cu=1;
hC(hD)
}};
function hD(){var ip=bG(),e=ah()-ip;
if(e>24){if(isFinite(e)){clearTimeout(ft);
ft=setTimeout(hD,e)
}cu=0
}else{cu=1;
hC(hD)
}}hw.timer.flush=function(){bG();
ah()
};
function bG(){var e=Date.now();
dr=ea;
while(dr){if(e>=dr.t){dr.f=dr.c(e-dr.t)
}dr=dr.n
}return e
}function ah(){var ip,e=ea,iq=Infinity;
while(e){if(e.f){e=ip?ip.n=e.n:ea=e.n
}else{if(e.t<iq){iq=e.t
}e=(ip=e).n
}}ak=ip;
return iq
}var g7=".",fe=",",i=[3,3],bJ="$";
var cz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(dV);
hw.formatPrefix=function(iq,e){var ip=0;
if(iq){if(iq<0){iq*=-1
}if(e){iq=hw.round(iq,eq(iq,e))
}ip=1+Math.floor(1e-12+Math.log(iq)/Math.LN10);
ip=Math.max(-24,Math.min(24,Math.floor((ip<=0?ip+1:ip-1)/3)*3))
}return cz[8+ip/3]
};
function dV(iq,ip){var e=Math.pow(10,cL(8-ip)*3);
return{scale:ip>8?function(ir){return ir/e
}:function(ir){return ir*e
},symbol:iq}
}hw.round=function(e,ip){return ip?Math.round(e*(ip=Math.pow(10,ip)))/ip:Math.round(e)
};
hw.format=function(iA){var ix=cE.exec(iA),iC=ix[1]||" ",iy=ix[2]||">",ip=ix[3]||"",ir=ix[4]||"",it=ix[5],e=+ix[6],iD=ix[7],iw=ix[8],iz=ix[9],iq=1,iB="",iv=false;
if(iw){iw=+iw.substring(1)
}if(it||iC==="0"&&iy==="="){it=iC="0";
iy="=";
if(iD){e-=Math.floor((e-1)/4)
}}switch(iz){case"n":iD=true;
iz="g";
break;
case"%":iq=100;
iB="%";
iz="f";
break;
case"p":iq=100;
iB="%";
iz="r";
break;
case"b":case"o":case"x":case"X":if(ir==="#"){ir="0"+iz.toLowerCase()
}case"c":case"d":iv=true;
iw=0;
break;
case"s":iq=-1;
iz="r";
break
}if(ir==="#"){ir=""
}else{if(ir==="$"){ir=bJ
}}if(iz=="r"&&!iw){iz="g"
}if(iw!=null){if(iz=="g"){iw=Math.max(1,Math.min(21,iw))
}else{if(iz=="e"||iz=="f"){iw=Math.max(0,Math.min(20,iw))
}}}iz=z.get(iz)||bp;
var iu=it&&iD;
return function(iJ){if(iv&&iJ%1){return""
}var iE=iJ<0||iJ===0&&1/iJ<0?(iJ=-iJ,"-"):ip;
if(iq<0){var iI=hw.formatPrefix(iJ,iw);
iJ=iI.scale(iJ);
iB=iI.symbol
}else{iJ*=iq
}iJ=iz(iJ,iw);
var iF=iJ.lastIndexOf("."),iH=iF<0?iJ:iJ.substring(0,iF),iL=iF<0?"":g7+iJ.substring(iF+1);
if(!it&&iD){iH=dn(iH)
}var iG=ir.length+iH.length+iL.length+(iu?0:iE.length),iK=iG<e?new Array(iG=e-iG+1).join(iC):"";
if(iu){iH=dn(iK+iH)
}iE+=ir;
iJ=iH+iL;
return(iy==="<"?iE+iJ+iK:iy===">"?iK+iE+iJ:iy==="^"?iK.substring(0,iG>>=1)+iE+iJ+iK.substring(iG):iE+(iu?iJ:iK+iJ))+iB
}
};
var cE=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;
var z=hw.map({b:function(e){return e.toString(2)
},c:function(e){return String.fromCharCode(e)
},o:function(e){return e.toString(8)
},x:function(e){return e.toString(16)
},X:function(e){return e.toString(16).toUpperCase()
},g:function(e,ip){return e.toPrecision(ip)
},e:function(e,ip){return e.toExponential(ip)
},f:function(e,ip){return e.toFixed(ip)
},r:function(e,ip){return(e=hw.round(e,eq(e,ip))).toFixed(Math.max(0,Math.min(20,eq(e*(1+1e-15),ip))))
}});
function eq(e,ip){return ip-(e?Math.ceil(Math.log(e)/Math.LN10):1)
}function bp(e){return e+""
}var dn=gw;
if(i){var ca=i.length;
dn=function(it){var iq=it.length,ip=[],e=0,ir=i[0];
while(iq>0&&ir>0){ip.push(it.substring(iq-=ir,iq+ir));
ir=i[e=(e+1)%ca]
}return ip.reverse().join(fe)
}
}hw.geo={};
function fq(){}fq.prototype={s:0,t:0,add:function(e){dw(e,this.t,hZ);
dw(hZ.s,this.s,this);
if(this.s){this.t+=hZ.t
}else{this.s=hZ.t
}},reset:function(){this.s=this.t=0
},valueOf:function(){return this.s
}};
var hZ=new fq();
function dw(ir,iq,iu){var ip=iu.s=ir+iq,e=ip-ir,it=ip-e;
iu.t=ir-it+(iq-e)
}hw.geo.stream=function(e,ip){if(e&&C.hasOwnProperty(e.type)){C[e.type](e,ip)
}else{aU(e,ip)
}};
function aU(ip,e){if(ip&&e0.hasOwnProperty(ip.type)){e0[ip.type](ip,e)
}}var C={Feature:function(e,ip){aU(e.geometry,ip)
},FeatureCollection:function(e,ir){var iq=e.features,ip=-1,it=iq.length;
while(++ip<it){aU(iq[ip].geometry,ir)
}}};
var e0={Sphere:function(e,ip){ip.sphere()
},Point:function(e,ip){e=e.coordinates;
ip.point(e[0],e[1],e[2])
},MultiPoint:function(e,iq){var ir=e.coordinates,ip=-1,it=ir.length;
while(++ip<it){e=ir[ip],iq.point(e[0],e[1],e[2])
}},LineString:function(e,ip){cr(e.coordinates,ip,0)
},MultiLineString:function(e,iq){var ir=e.coordinates,ip=-1,it=ir.length;
while(++ip<it){cr(ir[ip],iq,0)
}},Polygon:function(e,ip){ho(e.coordinates,ip)
},MultiPolygon:function(e,iq){var ir=e.coordinates,ip=-1,it=ir.length;
while(++ip<it){ho(ir[ip],iq)
}},GeometryCollection:function(e,ir){var iq=e.geometries,ip=-1,it=iq.length;
while(++ip<it){aU(iq[ip],ir)
}}};
function cr(ir,iq,e){var ip=-1,iu=ir.length-e,it;
iq.lineStart();
while(++ip<iu){it=ir[ip],iq.point(it[0],it[1],it[2])
}iq.lineEnd()
}function ho(iq,ip){var e=-1,ir=iq.length;
ip.polygonStart();
while(++e<ir){cr(iq[e],ip,1)
}ip.polygonEnd()
}hw.geo.area=function(e){bc=0;
hw.geo.stream(e,hu);
return bc
};
var bc,f3=new fq();
var hu={sphere:function(){bc+=4*gp
},point:aK,lineStart:aK,lineEnd:aK,polygonStart:function(){f3.reset();
hu.lineStart=b7
},polygonEnd:function(){var e=2*f3;
bc+=e<0?4*gp+e:e;
hu.lineStart=hu.lineEnd=hu.point=aK
}};
function b7(){var ip,e,ir,iq,it;
hu.point=function(iw,iv){hu.point=iu;
ir=(ip=iw)*N,iq=Math.cos(iv=(e=iv)*N/2+gp/4),it=Math.sin(iv)
};
function iu(iw,iv){iw*=N;
iv=iv*N/2+gp/4;
var iA=iw-ir,iC=Math.cos(iv),iB=Math.sin(iv),iy=it*iB,iz=iq*iC+iy*Math.cos(iA),ix=iy*Math.sin(iA);
f3.add(Math.atan2(ix,iz));
ir=iw,iq=iC,it=iB
}hu.lineEnd=function(){iu(ip,e)
}
}function az(e){var iq=e[0],ip=e[1],ir=Math.cos(ip);
return[ir*Math.cos(iq),ir*Math.sin(iq),Math.sin(ip)]
}function aC(ip,e){return ip[0]*e[0]+ip[1]*e[1]+ip[2]*e[2]
}function c4(ip,e){return[ip[1]*e[2]-ip[2]*e[1],ip[2]*e[0]-ip[0]*e[2],ip[0]*e[1]-ip[1]*e[0]]
}function cG(ip,e){ip[0]+=e[0];
ip[1]+=e[1];
ip[2]+=e[2]
}function gr(e,ip){return[e[0]*ip,e[1]*ip,e[2]*ip]
}function fx(ip){var e=Math.sqrt(ip[0]*ip[0]+ip[1]*ip[1]+ip[2]*ip[2]);
ip[0]/=e;
ip[1]/=e;
ip[2]/=e
}function ik(e){return[Math.atan2(e[1],e[0]),cg(e[2])]
}function e1(ip,e){return cL(ip[0]-e[0])<gz&&cL(ip[1]-e[1])<gz
}hw.geo.bounds=function(){var ir,iI,ip,iG,it,iA,iC,iu,ix,iv,iy;
var e={point:iD,lineStart:iz,lineEnd:iF,polygonStart:function(){e.point=iE;
e.lineStart=iw;
e.lineEnd=iB;
ix=0;
hu.polygonStart()
},polygonEnd:function(){hu.polygonEnd();
e.point=iD;
e.lineStart=iz;
e.lineEnd=iF;
if(f3<0){ir=-(ip=180),iI=-(iG=90)
}else{if(ix>gz){iG=90
}else{if(ix<-gz){iI=-90
}}}iy[0]=ir,iy[1]=ip
}};
function iD(iM,iL){iv.push(iy=[ir=iM,ip=iM]);
if(iL<iI){iI=iL
}if(iL>iG){iG=iL
}}function iq(iP,iV){var iL=az([iP*N,iV*N]);
if(iu){var iR=c4(iu,iL),iS=[iR[1],-iR[0],0],iQ=c4(iS,iR);
fx(iQ);
iQ=ik(iQ);
var iT=iP-it,iU=iT>0?1:-1,iM=iQ[0]*hM*iU,iO=cL(iT)>180;
if(iO^(iU*it<iM&&iM<iU*iP)){var iN=iQ[1]*hM;
if(iN>iG){iG=iN
}}else{if(iM=(iM+360)%360-180,iO^(iU*it<iM&&iM<iU*iP)){var iN=-iQ[1]*hM;
if(iN<iI){iI=iN
}}else{if(iV<iI){iI=iV
}if(iV>iG){iG=iV
}}}if(iO){if(iP<it){if(iH(ir,iP)>iH(ir,ip)){ip=iP
}}else{if(iH(iP,ip)>iH(ir,ip)){ir=iP
}}}else{if(ip>=ir){if(iP<ir){ir=iP
}if(iP>ip){ip=iP
}}else{if(iP>it){if(iH(ir,iP)>iH(ir,ip)){ip=iP
}}else{if(iH(iP,ip)>iH(ir,ip)){ir=iP
}}}}}else{iD(iP,iV)
}iu=iL,it=iP
}function iz(){e.point=iq
}function iF(){iy[0]=ir,iy[1]=ip;
e.point=iD;
iu=null
}function iE(iM,iL){if(iu){var iN=iM-it;
ix+=cL(iN)>180?iN+(iN>0?360:-360):iN
}else{iA=iM,iC=iL
}hu.point(iM,iL);
iq(iM,iL)
}function iw(){hu.lineStart()
}function iB(){iE(iA,iC);
hu.lineEnd();
if(cL(ix)>gz){ir=-(ip=180)
}iy[0]=ir,iy[1]=ip;
iu=null
}function iH(iM,iL){return(iL-=iM)<0?iL+360:iL
}function iK(iM,iL){return iM[0]-iL[0]
}function iJ(iL,iM){return iM[0]<=iM[1]?iM[0]<=iL&&iL<=iM[1]:iL<iM[0]||iM[1]<iL
}return function(iQ){iG=ip=-(ir=iI=Infinity);
iv=[];
hw.geo.stream(iQ,e);
var iS=iv.length;
if(iS){iv.sort(iK);
for(var iP=1,iN=iv[0],iM,iL=[iN];
iP<iS;
++iP){iM=iv[iP];
if(iJ(iM[0],iN)||iJ(iM[1],iN)){if(iH(iN[0],iM[1])>iH(iN[0],iN[1])){iN[1]=iM[1]
}if(iH(iM[0],iN[1])>iH(iN[0],iN[1])){iN[0]=iM[0]
}}else{iL.push(iN=iM)
}}var iR=-Infinity,iO;
for(var iS=iL.length-1,iP=0,iN=iL[iS],iM;
iP<=iS;
iN=iM,++iP){iM=iL[iP];
if((iO=iH(iN[1],iM[0]))>iR){iR=iO,ir=iM[0],ip=iN[1]
}}}iv=iy=null;
return ir===Infinity||iI===Infinity?[[NaN,NaN],[NaN,NaN]]:[[ir,iI],[ip,iG]]
}
}();
hw.geo.centroid=function(iq){em=ek=dS=du=dc=dR=dt=da=dQ=ds=c9=0;
hw.geo.stream(iq,gt);
var ip=dQ,it=ds,ir=c9,e=ip*ip+it*it+ir*ir;
if(e<eM){ip=dR,it=dt,ir=da;
if(ek<gz){ip=dS,it=du,ir=dc
}e=ip*ip+it*it+ir*ir;
if(e<eM){return[NaN,NaN]
}}return[Math.atan2(it,ip)*hM,cg(ir/Math.sqrt(e))*hM]
};
var em,ek,dS,du,dc,dR,dt,da,dQ,ds,c9;
var gt={sphere:aK,point:cc,lineStart:fw,lineEnd:aI,polygonStart:function(){gt.lineStart=bs
},polygonEnd:function(){gt.lineStart=fw
}};
function cc(ip,e){ip*=N;
var iq=Math.cos(e*=N);
gE(iq*Math.cos(ip),iq*Math.sin(ip),Math.sin(e))
}function gE(e,iq,ip){++em;
dS+=(e-dS)/em;
du+=(iq-du)/em;
dc+=(ip-dc)/em
}function fw(){var e,ip,ir;
gt.point=function(iu,it){iu*=N;
var iv=Math.cos(it*=N);
e=iv*Math.cos(iu);
ip=iv*Math.sin(iu);
ir=Math.sin(it);
gt.point=iq;
gE(e,ip,ir)
};
function iq(iw,iv){iw*=N;
var ix=Math.cos(iv*=N),it=ix*Math.cos(iw),iz=ix*Math.sin(iw),iy=Math.sin(iv),iu=Math.atan2(Math.sqrt((iu=ip*iy-ir*iz)*iu+(iu=ir*it-e*iy)*iu+(iu=e*iz-ip*it)*iu),e*it+ip*iz+ir*iy);
ek+=iu;
dR+=iu*(e+(e=it));
dt+=iu*(ip+(ip=iz));
da+=iu*(ir+(ir=iy));
gE(e,ip,ir)
}}function aI(){gt.point=cc
}function bs(){var ip,e,iq,ir,iu;
gt.point=function(iw,iv){ip=iw,e=iv;
gt.point=it;
iw*=N;
var ix=Math.cos(iv*=N);
iq=ix*Math.cos(iw);
ir=ix*Math.sin(iw);
iu=Math.sin(iv);
gE(iq,ir,iu)
};
gt.lineEnd=function(){it(ip,e);
gt.lineEnd=aI;
gt.point=cc
};
function it(iA,iH){iA*=N;
var iy=Math.cos(iH*=N),iD=iy*Math.cos(iA),iC=iy*Math.sin(iA),iB=Math.sin(iH),iz=ir*iB-iu*iC,ix=iu*iD-iq*iB,iw=iq*iC-ir*iD,iv=Math.sqrt(iz*iz+ix*ix+iw*iw),iG=iq*iD+ir*iC+iu*iB,iF=iv&&-ai(iG)/iv,iE=Math.atan2(iv,iG);
dQ+=iF*iz;
ds+=iF*ix;
c9+=iF*iw;
ek+=iE;
dR+=iE*(iq+(iq=iD));
dt+=iE*(ir+(ir=iC));
da+=iE*(iu+(iu=iB));
gE(iq,ir,iu)
}}function am(){return true
}function cv(iv,ip,iz,ix,ir){var iy=[],it=[];
iv.forEach(function(iH){if((iK=iH.length-1)<=0){return
}var iK,iJ=iH[0],iI=iH[iK];
if(e1(iJ,iI)){ir.lineStart();
for(var iG=0;
iG<iK;
++iG){ir.point((iJ=iH[iG])[0],iJ[1])
}ir.lineEnd();
return
}var iF=new b(iJ,iH,null,true),iE=new b(iJ,null,iF,false);
iF.o=iE;
iy.push(iF);
it.push(iE);
iF=new b(iI,iH,null,false);
iE=new b(iI,null,iF,true);
iF.o=iE;
iy.push(iF);
it.push(iE)
});
it.sort(ip);
hS(iy);
hS(it);
if(!iy.length){return
}for(var iu=0,iB=iz,iq=it.length;
iu<iq;
++iu){it[iu].e=iB=!iB
}var e=iy[0],iC,iA;
while(1){var iw=e,iD=true;
while(iw.v){if((iw=iw.n)===e){return
}}iC=iw.z;
ir.lineStart();
do{iw.v=iw.o.v=true;
if(iw.e){if(iD){for(var iu=0,iq=iC.length;
iu<iq;
++iu){ir.point((iA=iC[iu])[0],iA[1])
}}else{ix(iw.x,iw.n.x,1,ir)
}iw=iw.n
}else{if(iD){iC=iw.p.z;
for(var iu=iC.length-1;
iu>=0;
--iu){ir.point((iA=iC[iu])[0],iA[1])
}}else{ix(iw.x,iw.p.x,-1,ir)
}iw=iw.p
}iw=iw.o;
iC=iw.z;
iD=!iD
}while(!iw.v);
ir.lineEnd()
}}function hS(it){if(!(ir=it.length)){return
}var ir,iq=0,ip=it[0],e;
while(++iq<ir){ip.n=e=it[iq];
e.p=ip;
ip=e
}ip.n=e=it[0];
e.p=ip
}function b(ip,iq,e,ir){this.x=ip;
this.z=iq;
this.o=e;
this.e=ir;
this.v=false;
this.n=this.p=null
}function es(e,ir,ip,iq){return function(iA,iv){var iJ=ir(iv),iu=iA.invert(iq[0],iq[1]);
var iw={point:iH,lineStart:iD,lineEnd:iz,polygonStart:function(){iw.point=iF;
iw.lineStart=iE;
iw.lineEnd=iI;
iC=[];
iG=[];
iv.polygonStart()
},polygonEnd:function(){iw.point=iH;
iw.lineStart=iD;
iw.lineEnd=iz;
iC=hw.merge(iC);
var iK=f0(iu,iG);
if(iC.length){cv(iC,d4,iK,ip,iv)
}else{if(iK){iv.lineStart();
ip(null,null,1,iv);
iv.lineEnd()
}}iv.polygonEnd();
iC=iG=null
},sphere:function(){iv.polygonStart();
iv.lineStart();
ip(null,null,1,iv);
iv.lineEnd();
iv.polygonEnd()
}};
function iH(iM,iL){var iK=iA(iM,iL);
if(e(iM=iK[0],iL=iK[1])){iv.point(iM,iL)
}}function iB(iM,iL){var iK=iA(iM,iL);
iJ.point(iK[0],iK[1])
}function iD(){iw.point=iB;
iJ.lineStart()
}function iz(){iw.point=iH;
iJ.lineEnd()
}var iC;
var iy=U(),it=ir(iy),iG,ix;
function iF(iM,iL){ix.push([iM,iL]);
var iK=iA(iM,iL);
it.point(iK[0],iK[1])
}function iE(){it.lineStart();
ix=[]
}function iI(){iF(ix[0][0],ix[0][1]);
it.lineEnd();
var iM=it.clean(),iO=iy.buffer(),iN,iP=iO.length;
ix.pop();
iG.push(ix);
ix=null;
if(!iP){return
}if(iM&1){iN=iO[0];
var iP=iN.length-1,iL=-1,iK;
iv.lineStart();
while(++iL<iP){iv.point((iK=iN[iL])[0],iK[1])
}iv.lineEnd();
return
}if(iP>1&&iM&2){iO.push(iO.pop().concat(iO.shift()))
}iC.push(iO.filter(eW))
}return iw
}
}function eW(e){return e.length>1
}function U(){var ip=[],e;
return{lineStart:function(){ip.push(e=[])
},point:function(ir,iq){e.push([ir,iq])
},lineEnd:aK,buffer:function(){var iq=ip;
ip=[];
e=null;
return iq
},rejoin:function(){if(ip.length>1){ip.push(ip.pop().concat(ip.shift()))
}}}
}function d4(ip,e){return((ip=ip.x)[0]<0?ip[1]-ey-gz:ey-ip[1])-((e=e.x)[0]<0?e[1]-ey-gz:ey-e[1])
}function f0(iG,iC){var iO=iG[0],iP=iG[1],e=[Math.sin(iO),-Math.cos(iO),0],iB=0,iM=0;
f3.reset();
for(var iL=0,iD=iC.length;
iL<iD;
++iL){var ix=iC[iL],iF=ix.length;
if(!iF){continue
}var iu=ix[0],iq=iu[0],iN=iu[1]/2+gp/4,iw=Math.sin(iN),ip=Math.cos(iN),iK=1;
while(true){if(iK===iF){iK=0
}iG=ix[iK];
var iE=iG[0],iA=iG[1]/2+gp/4,ir=Math.sin(iA),iJ=Math.cos(iA),iI=iE-iq,it=cL(iI)>gp,iH=iw*ir;
f3.add(Math.atan2(iH*Math.sin(iI),ip*iJ+iH*Math.cos(iI)));
iB+=it?iI+(iI>=0?gk:-gk):iI;
if(it^iq>=iO^iE>=iO){var iy=c4(az(iu),az(iG));
fx(iy);
var iz=c4(e,iy);
fx(iz);
var iv=(it^iI>=0?-1:1)*cg(iz[2]);
if(iP>iv||iP===iv&&(iy[0]||iy[1])){iM+=it^iI>=0?1:-1
}}if(!iK++){break
}iq=iE,iw=ir,ip=iJ,iu=iG
}}return(iB<-gz||iB<gz&&f3<0)^iM&1
}var k=es(am,eN,dj,[-gp,-gp/2]);
function eN(it){var ip=NaN,e=NaN,ir=NaN,iq;
return{lineStart:function(){it.lineStart();
iq=1
},point:function(iv,iu){var ix=iv>0?gp:-gp,iw=cL(iv-ip);
if(cL(iw-gp)<gz){it.point(ip,e=(e+iu)/2>0?ey:-ey);
it.point(ir,e);
it.lineEnd();
it.lineStart();
it.point(ix,e);
it.point(iv,e);
iq=0
}else{if(ir!==ix&&iw>=gp){if(cL(ip-ir)<gz){ip-=ir*gz
}if(cL(iv-ix)<gz){iv-=ix*gz
}e=v(ip,e,iv,iu);
it.point(ir,e);
it.lineEnd();
it.lineStart();
it.point(ix,e);
iq=0
}}it.point(ip=iv,e=iu);
ir=ix
},lineEnd:function(){it.lineEnd();
ip=e=NaN
},clean:function(){return 2-iq
}}
}function v(iu,it,ir,iq){var ip,e,iv=Math.sin(iu-ir);
return cL(iv)>gz?Math.atan((Math.sin(it)*(e=Math.cos(iq))*Math.sin(ir)-Math.sin(iq)*(ip=Math.cos(it))*Math.sin(iu))/(ip*e*iv)):(it+iq)/2
}function dj(iu,it,ir,iq){var e;
if(iu==null){e=ir*ey;
iq.point(-gp,e);
iq.point(0,e);
iq.point(gp,e);
iq.point(gp,0);
iq.point(gp,-e);
iq.point(0,-e);
iq.point(-gp,-e);
iq.point(-gp,0);
iq.point(-gp,e)
}else{if(cL(iu[0]-it[0])>gz){var ip=iu[0]<it[0]?gp:-gp;
e=ir*ip/2;
iq.point(-ip,e);
iq.point(0,e);
iq.point(ip,e)
}else{iq.point(it[0],it[1])
}}}function aP(it){var iu=Math.cos(it),ir=iu>0,iv=cL(iu)>gz,iw=b6(it,6*N);
return es(iq,ix,iw,ir?[0,-it]:[-gp,it-gp]);
function iq(iz,iy){return Math.cos(iz)*Math.cos(iy)>iu
}function ix(iD){var iC,iB,iy,iA,iz;
return{lineStart:function(){iA=iy=false;
iz=1
},point:function(iF,iE){var iJ=[iF,iE],iI,iG=iq(iF,iE),iK=ir?iG?0:e(iF,iE):iG?e(iF+(iF<0?gp:-gp),iE):0;
if(!iC&&(iA=iy=iG)){iD.lineStart()
}if(iG!==iy){iI=ip(iC,iJ);
if(e1(iC,iI)||e1(iJ,iI)){iJ[0]+=gz;
iJ[1]+=gz;
iG=iq(iJ[0],iJ[1])
}}if(iG!==iy){iz=0;
if(iG){iD.lineStart();
iI=ip(iJ,iC);
iD.point(iI[0],iI[1])
}else{iI=ip(iC,iJ);
iD.point(iI[0],iI[1]);
iD.lineEnd()
}iC=iI
}else{if(iv&&iC&&ir^iG){var iH;
if(!(iK&iB)&&(iH=ip(iJ,iC,true))){iz=0;
if(ir){iD.lineStart();
iD.point(iH[0][0],iH[0][1]);
iD.point(iH[1][0],iH[1][1]);
iD.lineEnd()
}else{iD.point(iH[1][0],iH[1][1]);
iD.lineEnd();
iD.lineStart();
iD.point(iH[0][0],iH[0][1])
}}}}if(iG&&(!iC||!e1(iC,iJ))){iD.point(iJ[0],iJ[1])
}iC=iJ,iy=iG,iB=iK
},lineEnd:function(){if(iy){iD.lineEnd()
}iC=null
},clean:function(){return iz|(iA&&iy)<<1
}}
}function ip(iZ,iY,iC){var iA=az(iZ),iy=az(iY);
var iH=[1,0,0],iE=c4(iA,iy),iK=aC(iE,iE),iX=iE[0],iQ=iK-iX*iX;
if(!iQ){return !iC&&iZ
}var iT=iu*iK/iQ,iS=-iu*iX/iQ,i0=c4(iH,iE),iR=gr(iH,iT),iP=gr(iE,iS);
cG(iR,iP);
var iM=i0,iL=aC(iR,iM),iD=aC(iM,iM),iJ=iL*iL-iD*(aC(iR,iR)-1);
if(iJ<0){return
}var iN=Math.sqrt(iJ),iO=gr(iM,(-iL-iN)/iD);
cG(iO,iR);
iO=ik(iO);
if(!iC){return iO
}var iB=iZ[0],iz=iY[0],iV=iZ[1],iU=iY[1],iG;
if(iz<iB){iG=iB,iB=iz,iz=iG
}var iF=iz-iB,i1=cL(iF-gp)<gz,iW=i1||iF<gz;
if(!i1&&iU<iV){iG=iV,iV=iU,iU=iG
}if(iW?i1?iV+iU>0^iO[1]<(cL(iO[0]-iB)<gz?iV:iU):iV<=iO[1]&&iO[1]<=iU:iF>gp^(iB<=iO[0]&&iO[0]<=iz)){var iI=gr(iM,(-iL+iN)/iD);
cG(iI,iR);
return[iO,ik(iI)]
}}function e(iz,iy){var iB=ir?it:gp-it,iA=0;
if(iz<-iB){iA|=1
}else{if(iz>iB){iA|=2
}}if(iy<-iB){iA|=4
}else{if(iy>iB){iA|=8
}}return iA
}}function ap(ip,ir,e,iq){return function(iE){var iA=iE.a,iz=iE.b,iu=iA.x,iD=iA.y,iy=iz.x,ix=iz.y,iw=0,iv=1,iC=iy-iu,iB=ix-iD,it;
it=ip-iu;
if(!iC&&it>0){return
}it/=iC;
if(iC<0){if(it<iw){return
}if(it<iv){iv=it
}}else{if(iC>0){if(it>iv){return
}if(it>iw){iw=it
}}}it=e-iu;
if(!iC&&it<0){return
}it/=iC;
if(iC<0){if(it>iv){return
}if(it>iw){iw=it
}}else{if(iC>0){if(it<iw){return
}if(it<iv){iv=it
}}}it=ir-iD;
if(!iB&&it>0){return
}it/=iB;
if(iB<0){if(it<iw){return
}if(it<iv){iv=it
}}else{if(iB>0){if(it>iv){return
}if(it>iw){iw=it
}}}it=iq-iD;
if(!iB&&it<0){return
}it/=iB;
if(iB<0){if(it>iv){return
}if(it>iw){iw=it
}}else{if(iB>0){if(it<iw){return
}if(it<iv){iv=it
}}}if(iw>0){iE.a={x:iu+iw*iC,y:iD+iw*iB}
}if(iv<1){iE.b={x:iu+iv*iC,y:iD+iv*iB}
}return iE
}
}var cO=1000000000;
hw.geo.clipExtent=function(){var iq,iu,ip,ir,iv,it,e={stream:function(iw){if(iv){iv.valid=false
}iv=it(iw);
iv.valid=true;
return iv
},extent:function(iw){if(!arguments.length){return[[iq,iu],[ip,ir]]
}it=ep(iq=+iw[0][0],iu=+iw[0][1],ip=+iw[1][0],ir=+iw[1][1]);
if(iv){iv.valid=false,iv=null
}return e
}};
return e.extent([[0,0],[960,500]])
};
function ep(ip,it,e,iq){return function(iB){var ix=iB,iH=U(),iy=ap(ip,it,e,iq),iP,iI,iF;
var iT={point:iO,lineStart:iL,lineEnd:iR,polygonStart:function(){iB=iH;
iP=[];
iI=[];
iQ=true
},polygonEnd:function(){iB=ix;
iP=hw.merge(iP);
var iV=iK([ip,iq]),iU=iQ&&iV,iW=iP.length;
if(iU||iW){iB.polygonStart();
if(iU){iB.lineStart();
iG(null,null,1,iB);
iB.lineEnd()
}if(iW){cv(iP,iu,iV,iG,iB)
}iB.polygonEnd()
}iP=iI=iF=null
}};
function iK(iU){var i2=0,iV=iI.length,i0=iU[1];
for(var iY=0;
iY<iV;
++iY){for(var iX=1,i3=iI[iY],iW=i3.length,i1=i3[0],iZ;
iX<iW;
++iX){iZ=i3[iX];
if(i1[1]<=i0){if(iZ[1]>i0&&iC(i1,iZ,iU)>0){++i2
}}else{if(iZ[1]<=i0&&iC(i1,iZ,iU)<0){--i2
}}i1=iZ
}}return i2!==0
}function iC(iV,iU,iW){return(iU[0]-iV[0])*(iW[1]-iV[1])-(iW[0]-iV[0])*(iU[1]-iV[1])
}function iG(iZ,iY,iX,iW){var iV=0,iU=0;
if(iZ==null||(iV=ir(iZ,iX))!==(iU=ir(iY,iX))||iv(iZ,iY)<0^iX>0){do{iW.point(iV===0||iV===3?ip:e,iV>1?iq:it)
}while((iV=(iV+iX+4)%4)!==iU)
}else{iW.point(iY[0],iY[1])
}}function iJ(iU,iV){return ip<=iU&&iU<=e&&it<=iV&&iV<=iq
}function iO(iU,iV){if(iJ(iU,iV)){iB.point(iU,iV)
}}var iN,iD,iM,iS,iA,iz,iE,iQ;
function iL(){iT.point=iw;
if(iI){iI.push(iF=[])
}iE=true;
iz=false;
iS=iA=NaN
}function iR(){if(iP){iw(iN,iD);
if(iM&&iz){iH.rejoin()
}iP.push(iH.buffer())
}iT.point=iO;
if(iz){iB.lineEnd()
}}function iw(iU,iX){iU=Math.max(-cO,Math.min(cO,iU));
iX=Math.max(-cO,Math.min(cO,iX));
var iW=iJ(iU,iX);
if(iI){iF.push([iU,iX])
}if(iE){iN=iU,iD=iX,iM=iW;
iE=false;
if(iW){iB.lineStart();
iB.point(iU,iX)
}}else{if(iW&&iz){iB.point(iU,iX)
}else{var iV={a:{x:iS,y:iA},b:{x:iU,y:iX}};
if(iy(iV)){if(!iz){iB.lineStart();
iB.point(iV.a.x,iV.a.y)
}iB.point(iV.b.x,iV.b.y);
if(!iW){iB.lineEnd()
}iQ=false
}else{if(iW){iB.lineStart();
iB.point(iU,iX);
iQ=false
}}}}iS=iU,iA=iX,iz=iW
}return iT
};
function ir(ix,iw){return cL(ix[0]-ip)<gz?iw>0?0:3:cL(ix[0]-e)<gz?iw>0?2:1:cL(ix[1]-it)<gz?iw>0?1:0:iw>0?3:2
}function iu(ix,iw){return iv(ix.x,iw.x)
}function iv(iz,ix){var iy=ir(iz,1),iw=ir(ix,1);
return iy!==iw?iy-iw:iy===0?ix[1]-iz[1]:iy===1?iz[0]-ix[0]:iy===2?iz[1]-ix[1]:ix[0]-iz[0]
}}function fj(ip,e){function iq(ir,it){return ir=ip(ir,it),e(ir[0],ir[1])
}if(ip.invert&&e.invert){iq.invert=function(ir,it){return ir=e.invert(ir,it),ir&&ip.invert(ir[0],ir[1])
}
}return iq
}function b8(ir){var iq=0,ip=gp/3,e=fv(ir),it=e(iq,ip);
it.parallels=function(iu){if(!arguments.length){return[iq/gp*180,ip/gp*180]
}return e(iq=iu[0]*gp/180,ip=iu[1]*gp/180)
};
return it
}function R(ip,e){var it=Math.sin(ip),iv=(it+Math.sin(e))/2,iu=1+it*(2*iv-it),ir=Math.sqrt(iu)/iv;
function iq(ix,iw){var iy=Math.sqrt(iu-2*iv*Math.sin(iw))/iv;
return[iy*Math.sin(ix*=iv),ir-iy*Math.cos(ix)]
}iq.invert=function(iw,iy){var ix=ir-iy;
return[Math.atan2(iw,ix)/iv,cg((iu-(iw*iw+ix*ix)*iv*iv)/(2*iv))]
};
return iq
}(hw.geo.conicEqualArea=function(){return b8(R)
}).raw=R;
hw.geo.albers=function(){return hw.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)
};
hw.geo.albersUsa=function(){var ip=hw.geo.albers();
var iu=hw.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);
var iq=hw.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);
var iw,e={point:function(iy,iz){iw=[iy,iz]
}},it,iv,ir;
function ix(iz){var iy=iz[0],iA=iz[1];
iw=null;
(it(iy,iA),iw)||(iv(iy,iA),iw)||ir(iy,iA);
return iw
}ix.invert=function(iB){var iz=ip.scale(),iA=ip.translate(),iy=(iB[0]-iA[0])/iz,iC=(iB[1]-iA[1])/iz;
return(iC>=0.12&&iC<0.234&&iy>=-0.425&&iy<-0.214?iu:iC>=0.166&&iC<0.234&&iy>=-0.214&&iy<-0.115?iq:ip).invert(iB)
};
ix.stream=function(iA){var iz=ip.stream(iA),iB=iu.stream(iA),iy=iq.stream(iA);
return{point:function(iC,iD){iz.point(iC,iD);
iB.point(iC,iD);
iy.point(iC,iD)
},sphere:function(){iz.sphere();
iB.sphere();
iy.sphere()
},lineStart:function(){iz.lineStart();
iB.lineStart();
iy.lineStart()
},lineEnd:function(){iz.lineEnd();
iB.lineEnd();
iy.lineEnd()
},polygonStart:function(){iz.polygonStart();
iB.polygonStart();
iy.polygonStart()
},polygonEnd:function(){iz.polygonEnd();
iB.polygonEnd();
iy.polygonEnd()
}}
};
ix.precision=function(iy){if(!arguments.length){return ip.precision()
}ip.precision(iy);
iu.precision(iy);
iq.precision(iy);
return ix
};
ix.scale=function(iy){if(!arguments.length){return ip.scale()
}ip.scale(iy);
iu.scale(iy*0.35);
iq.scale(iy);
return ix.translate(ip.translate())
};
ix.translate=function(iA){if(!arguments.length){return ip.translate()
}var iz=ip.scale(),iy=+iA[0],iB=+iA[1];
it=ip.translate(iA).clipExtent([[iy-0.455*iz,iB-0.238*iz],[iy+0.455*iz,iB+0.238*iz]]).stream(e).point;
iv=iu.translate([iy-0.307*iz,iB+0.201*iz]).clipExtent([[iy-0.425*iz+gz,iB+0.12*iz+gz],[iy-0.214*iz-gz,iB+0.234*iz-gz]]).stream(e).point;
ir=iq.translate([iy-0.205*iz,iB+0.212*iz]).clipExtent([[iy-0.214*iz+gz,iB+0.166*iz+gz],[iy-0.115*iz-gz,iB+0.234*iz-gz]]).stream(e).point;
return ix
};
return ix.scale(1070)
};
var f1,D,dH={point:aK,lineStart:aK,lineEnd:aK,polygonStart:function(){D=0;
dH.lineStart=cQ
},polygonEnd:function(){dH.lineStart=dH.lineEnd=dH.point=aK;
f1+=cL(D/2)
}};
function cQ(){var ir,e,ip,iq;
dH.point=function(iu,iv){dH.point=it;
ir=ip=iu,e=iq=iv
};
function it(iu,iv){D+=iq*iu-ip*iv;
ip=iu,iq=iv
}dH.lineEnd=function(){it(ir,e)
}
}var eU,ex,eS,ew;
var aB={point:cZ,lineStart:aK,lineEnd:aK,polygonStart:aK,polygonEnd:aK};
function cZ(e,ip){if(e<eU){eU=e
}if(e>eS){eS=e
}if(ip<ex){ex=ip
}if(ip>ew){ew=ip
}}function cl(){var iq=hg(4.5),ip=[];
var iw={point:e,lineStart:function(){iw.point=iv
},lineEnd:iu,polygonStart:function(){iw.lineEnd=ir
},polygonEnd:function(){iw.lineEnd=iu;
iw.point=e
},pointRadius:function(ix){iq=hg(ix);
return iw
},result:function(){if(ip.length){var ix=ip.join("");
ip=[];
return ix
}}};
function e(ix,iy){ip.push("M",ix,",",iy,iq)
}function iv(ix,iy){ip.push("M",ix,",",iy);
iw.point=it
}function it(ix,iy){ip.push("L",ix,",",iy)
}function iu(){iw.point=e
}function ir(){ip.push("Z")
}return iw
}function hg(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"
}var hf={point:cU,lineStart:f6,lineEnd:cT,polygonStart:function(){hf.lineStart=b1
},polygonEnd:function(){hf.point=cU;
hf.lineStart=f6;
hf.lineEnd=cT
}};
function cU(e,ip){dS+=e;
du+=ip;
++dc
}function f6(){var e,ip;
hf.point=function(ir,it){hf.point=iq;
cU(e=ir,ip=it)
};
function iq(ir,iw){var iu=ir-e,it=iw-ip,iv=Math.sqrt(iu*iu+it*it);
dR+=iv*(e+ir)/2;
dt+=iv*(ip+iw)/2;
da+=iv;
cU(e=ir,ip=iw)
}}function cT(){hf.point=cU
}function b1(){var ir,e,ip,iq;
hf.point=function(iu,iv){hf.point=it;
cU(ir=ip=iu,e=iq=iv)
};
function it(iu,iy){var iw=iu-ip,iv=iy-iq,ix=Math.sqrt(iw*iw+iv*iv);
dR+=ix*(ip+iu)/2;
dt+=ix*(iq+iy)/2;
da+=ix;
ix=iq*iu-ip*iy;
dQ+=ix*(ip+iu);
ds+=ix*(iq+iy);
c9+=ix*3;
cU(ip=iu,iq=iy)
}hf.lineEnd=function(){it(ir,e)
}
}function cK(ip){var it=4.5;
var iw={point:e,lineStart:function(){iw.point=iv
},lineEnd:iu,polygonStart:function(){iw.lineEnd=iq
},polygonEnd:function(){iw.lineEnd=iu;
iw.point=e
},pointRadius:function(ix){it=ix;
return iw
},result:aK};
function e(ix,iy){ip.moveTo(ix,iy);
ip.arc(ix,iy,it,0,gk)
}function iv(ix,iy){ip.moveTo(ix,iy);
iw.point=ir
}function ir(ix,iy){ip.lineTo(ix,iy)
}function iu(){iw.point=e
}function iq(){ip.closePath()
}return iw
}function f2(iv){var it=0.5,iu=Math.cos(30*N),iw=16;
function iq(ix){return(iw?ir:e)(ix)
}function e(ix){return eP(ix,function(iy,iz){iy=iv(iy,iz);
ix.point(iy[0],iy[1])
})
}function ir(iD){var iI,iO,iN,iE,iR,iG,iy,iz,iQ,iA,iS,iF,iJ;
var iB={point:iM,lineStart:iH,lineEnd:iP,polygonStart:function(){iD.polygonStart();
iB.lineStart=iC
},polygonEnd:function(){iD.polygonEnd();
iB.lineStart=iH
}};
function iM(iT,iU){iT=iv(iT,iU);
iD.point(iT[0],iT[1])
}function iH(){iQ=NaN;
iB.point=ix;
iD.lineStart()
}function ix(iU,iT){var iW=az([iU,iT]),iV=iv(iU,iT);
ip(iQ,iA,iz,iS,iF,iJ,iQ=iV[0],iA=iV[1],iz=iU,iS=iW[0],iF=iW[1],iJ=iW[2],iw,iD);
iD.point(iQ,iA)
}function iP(){iB.point=iM;
iD.lineEnd()
}function iC(){iH();
iB.point=iL;
iB.lineEnd=iK
}function iL(iU,iT){ix(iI=iU,iO=iT),iN=iQ,iE=iA,iR=iS,iG=iF,iy=iJ;
iB.point=ix
}function iK(){ip(iQ,iA,iz,iS,iF,iJ,iN,iE,iI,iR,iG,iy,iw,iD);
iB.lineEnd=iP;
iP()
}return iB
}function ip(iS,iD,iz,iZ,iG,iO,iR,iC,iy,iX,iF,iM,iW,iE){var iK=iR-iS,iJ=iC-iD,iY=iK*iK+iJ*iJ;
if(iY>4*it&&iW--){var iV=iZ+iX,iU=iG+iF,iT=iO+iM,iN=Math.sqrt(iV*iV+iU*iU+iT*iT),iQ=Math.asin(iT/=iN),ix=cL(cL(iT)-1)<gz||cL(iz-iy)<gz?(iz+iy)/2:Math.atan2(iU,iV),iL=iv(ix,iQ),iP=iL[0],iB=iL[1],iA=iP-iS,iI=iB-iD,iH=iJ*iA-iK*iI;
if(iH*iH/iY>it||cL((iK*iA+iJ*iI)/iY-0.5)>0.3||iZ*iX+iG*iF+iO*iM<iu){ip(iS,iD,iz,iZ,iG,iO,iP,iB,ix,iV/=iN,iU/=iN,iT,iW,iE);
iE.point(iP,iB);
ip(iP,iB,ix,iV,iU,iT,iR,iC,iy,iX,iF,iM,iW,iE)
}}}iq.precision=function(ix){if(!arguments.length){return Math.sqrt(it)
}iw=(it=ix*ix)>0&&16;
return iq
};
return iq
}hw.geo.path=function(){var iv=4.5,ip,ir,it,e,iq;
function iw(ix){if(ix){if(typeof iv==="function"){e.pointRadius(+iv.apply(this,arguments))
}if(!iq||!iq.valid){iq=it(e)
}hw.geo.stream(ix,iq)
}return e.result()
}iw.area=function(ix){f1=0;
hw.geo.stream(ix,it(dH));
return f1
};
iw.centroid=function(ix){dS=du=dc=dR=dt=da=dQ=ds=c9=0;
hw.geo.stream(ix,it(hf));
return c9?[dQ/c9,ds/c9]:da?[dR/da,dt/da]:dc?[dS/dc,du/dc]:[NaN,NaN]
};
iw.bounds=function(ix){eS=ew=-(eU=ex=Infinity);
hw.geo.stream(ix,it(aB));
return[[eU,ex],[eS,ew]]
};
iw.projection=function(ix){if(!arguments.length){return ip
}it=(ip=ix)?ix.stream||hq(ix):gw;
return iu()
};
iw.context=function(ix){if(!arguments.length){return ir
}e=(ir=ix)==null?new cl():new cK(ix);
if(typeof iv!=="function"){e.pointRadius(iv)
}return iu()
};
iw.pointRadius=function(ix){if(!arguments.length){return iv
}iv=typeof ix==="function"?ix:(e.pointRadius(+ix),+ix);
return iw
};
function iu(){iq=null;
return iw
}return iw.projection(hw.geo.albersUsa()).context(null)
};
function hq(ip){var e=f2(function(iq,ir){return ip([iq*hM,ir*hM])
});
return function(iq){return ci(e(iq))
}
}hw.geo.transform=function(e){return{stream:function(ir){var iq=new el(ir);
for(var ip in e){iq[ip]=e[ip]
}return iq
}}
};
function el(e){this.stream=e
}el.prototype={point:function(e,ip){this.stream.point(e,ip)
},sphere:function(){this.stream.sphere()
},lineStart:function(){this.stream.lineStart()
},lineEnd:function(){this.stream.lineEnd()
},polygonStart:function(){this.stream.polygonStart()
},polygonEnd:function(){this.stream.polygonEnd()
}};
function eP(ip,e){return{point:e,sphere:function(){ip.sphere()
},lineStart:function(){ip.lineStart()
},lineEnd:function(){ip.lineEnd()
},polygonStart:function(){ip.polygonStart()
},polygonEnd:function(){ip.polygonEnd()
}}
}hw.geo.projection=fO;
hw.geo.projectionMutator=fv;
function fO(e){return fv(function(){return e
})()
}function fv(iD){var ir,iI,iw,iF=f2(function(iN,iO){iN=ir(iN,iO);
return[iN[0]*iH+iu,iq-iN[1]*iH]
}),iH=150,iB=480,iz=250,iG=0,iA=0,ix=0,it=0,iE=0,iu,iq,iM=k,iJ=gw,e=null,ip=null,iv;
function iL(iN){iN=iw(iN[0]*N,iN[1]*N);
return[iN[0]*iH+iu,iq-iN[1]*iH]
}function iC(iN){iN=iw.invert((iN[0]-iu)/iH,(iq-iN[1])/iH);
return iN&&[iN[0]*hM,iN[1]*hM]
}iL.stream=function(iN){if(iv){iv.valid=false
}iv=ci(iM(iI,iF(iJ(iN))));
iv.valid=true;
return iv
};
iL.clipAngle=function(iN){if(!arguments.length){return e
}iM=iN==null?(e=iN,k):aP((e=+iN)*N);
return iy()
};
iL.clipExtent=function(iN){if(!arguments.length){return ip
}ip=iN;
iJ=iN?ep(iN[0][0],iN[0][1],iN[1][0],iN[1][1]):gw;
return iy()
};
iL.scale=function(iN){if(!arguments.length){return iH
}iH=+iN;
return iK()
};
iL.translate=function(iN){if(!arguments.length){return[iB,iz]
}iB=+iN[0];
iz=+iN[1];
return iK()
};
iL.center=function(iN){if(!arguments.length){return[iG*hM,iA*hM]
}iG=iN[0]%360*N;
iA=iN[1]%360*N;
return iK()
};
iL.rotate=function(iN){if(!arguments.length){return[ix*hM,it*hM,iE*hM]
}ix=iN[0]%360*N;
it=iN[1]%360*N;
iE=iN.length>2?iN[2]%360*N:0;
return iK()
};
hw.rebind(iL,iF,"precision");
function iK(){iw=fj(iI=dN(ix,it,iE),ir);
var iN=ir(iG,iA);
iu=iB-iN[0]*iH;
iq=iz+iN[1]*iH;
return iy()
}function iy(){if(iv){iv.valid=false,iv=null
}return iL
}return function(){ir=iD.apply(this,arguments);
iL.invert=ir.invert&&iC;
return iK()
}
}function ci(e){return eP(e,function(ip,iq){e.point(ip*N,iq*N)
})
}function bz(ip,e){return[ip,e]
}(hw.geo.equirectangular=function(){return fO(bz)
}).raw=bz.invert=bz;
hw.geo.rotation=function(ip){ip=dN(ip[0]%360*N,ip[1]*N,ip.length>2?ip[2]*N:0);
function e(iq){iq=ip(iq[0]*N,iq[1]*N);
return iq[0]*=hM,iq[1]*=hM,iq
}e.invert=function(iq){iq=ip.invert(iq[0]*N,iq[1]*N);
return iq[0]*=hM,iq[1]*=hM,iq
};
return e
};
function bL(ip,e){return[ip>gp?ip-gk:ip<-gp?ip+gk:ip,e]
}bL.invert=bz;
function dN(iq,ip,e){return iq?ip||e?fj(fb(iq),bV(ip,e)):fb(iq):ip||e?bV(ip,e):bL
}function g8(e){return function(iq,ip){return iq+=e,[iq>gp?iq-gk:iq<-gp?iq+gk:iq,ip]
}
}function fb(ip){var e=g8(ip);
e.invert=g8(-ip);
return e
}function bV(iu,ip){var it=Math.cos(iu),iv=Math.sin(iu),e=Math.cos(ip),iq=Math.sin(ip);
function ir(iy,ix){var iA=Math.cos(ix),iw=Math.cos(iy)*iA,iC=Math.sin(iy)*iA,iB=Math.sin(ix),iz=iB*it+iw*iv;
return[Math.atan2(iC*e-iz*iq,iw*it-iB*iv),cg(iz*e+iC*iq)]
}ir.invert=function(iy,ix){var iA=Math.cos(ix),iw=Math.cos(iy)*iA,iC=Math.sin(iy)*iA,iB=Math.sin(ix),iz=iB*e-iC*iq;
return[Math.atan2(iC*e+iB*iq,iw*it+iz*iv),cg(iz*it-iw*iv)]
};
return ir
}hw.geo.circle=function(){var ip=[0,0],it,e=6,iq;
function ir(){var iu=typeof ip==="function"?ip.apply(this,arguments):ip,iw=dN(-iu[0]*N,-iu[1]*N,0).invert,iv=[];
iq(null,null,1,{point:function(ix,iy){iv.push(ix=iw(ix,iy));
ix[0]*=hM,ix[1]*=hM
}});
return{type:"Polygon",coordinates:[iv]}
}ir.origin=function(iu){if(!arguments.length){return ip
}ip=iu;
return ir
};
ir.angle=function(iu){if(!arguments.length){return it
}iq=b6((it=+iu)*N,e*N);
return ir
};
ir.precision=function(iu){if(!arguments.length){return e
}iq=b6(it*N,(e=+iu)*N);
return ir
};
return ir.angle(90)
};
function b6(e,ip){var ir=Math.cos(e),iq=Math.sin(e);
return function(iz,iy,ix,iw){var iv=ix*ip;
if(iz!=null){iz=h2(ir,iz);
iy=h2(ir,iy);
if(ix>0?iz<iy:iz>iy){iz+=ix*gk
}}else{iz=e+ix*gk;
iy=e-0.5*iv
}for(var it,iu=iz;
ix>0?iu>iy:iu<iy;
iu-=iv){iw.point((it=ik([ir,-iq*Math.cos(iu),-iq*Math.sin(iu)]))[0],it[1])
}}
}function h2(iq,e){var ip=az(e);
ip[0]-=iq;
fx(ip);
var ir=ai(-ip[1]);
return((-ip[2]<0?-ir:ir)+2*Math.PI-gz)%(2*Math.PI)
}hw.geo.distance=function(iw,iv){var ix=(iv[0]-iw[0])*N,iz=iw[1]*N,iy=iv[1]*N,it=Math.sin(ix),ip=Math.cos(ix),iu=Math.sin(iz),iq=Math.cos(iz),ir=Math.sin(iy),e=Math.cos(iy),iA;
return Math.atan2(Math.sqrt((iA=e*it)*iA+(iA=iq*ir-iu*e*ip)*iA),iu*ir+iq*e*ip)
};
hw.geo.graticule=function(){var iD,iF,iG,iH,ir,it,iu,iw,iB=10,iA=iB,ix=90,iv=360,iz,iy,iq,ip,iC=2.5;
function iE(){return{type:"MultiLineString",coordinates:e()}
}function e(){return hw.range(Math.ceil(iH/ix)*ix,iG,ix).map(iq).concat(hw.range(Math.ceil(iw/iv)*iv,iu,iv).map(ip)).concat(hw.range(Math.ceil(iF/iB)*iB,iD,iB).filter(function(iI){return cL(iI%ix)>gz
}).map(iz)).concat(hw.range(Math.ceil(it/iA)*iA,ir,iA).filter(function(iI){return cL(iI%iv)>gz
}).map(iy))
}iE.lines=function(){return e().map(function(iI){return{type:"LineString",coordinates:iI}
})
};
iE.outline=function(){return{type:"Polygon",coordinates:[iq(iH).concat(ip(iu).slice(1),iq(iG).reverse().slice(1),ip(iw).reverse().slice(1))]}
};
iE.extent=function(iI){if(!arguments.length){return iE.minorExtent()
}return iE.majorExtent(iI).minorExtent(iI)
};
iE.majorExtent=function(iI){if(!arguments.length){return[[iH,iw],[iG,iu]]
}iH=+iI[0][0],iG=+iI[1][0];
iw=+iI[0][1],iu=+iI[1][1];
if(iH>iG){iI=iH,iH=iG,iG=iI
}if(iw>iu){iI=iw,iw=iu,iu=iI
}return iE.precision(iC)
};
iE.minorExtent=function(iI){if(!arguments.length){return[[iF,it],[iD,ir]]
}iF=+iI[0][0],iD=+iI[1][0];
it=+iI[0][1],ir=+iI[1][1];
if(iF>iD){iI=iF,iF=iD,iD=iI
}if(it>ir){iI=it,it=ir,ir=iI
}return iE.precision(iC)
};
iE.step=function(iI){if(!arguments.length){return iE.minorStep()
}return iE.majorStep(iI).minorStep(iI)
};
iE.majorStep=function(iI){if(!arguments.length){return[ix,iv]
}ix=+iI[0],iv=+iI[1];
return iE
};
iE.minorStep=function(iI){if(!arguments.length){return[iB,iA]
}iB=+iI[0],iA=+iI[1];
return iE
};
iE.precision=function(iI){if(!arguments.length){return iC
}iC=+iI;
iz=aO(it,ir,90);
iy=aM(iF,iD,iC);
iq=aO(iw,iu,90);
ip=aM(iH,iG,iC);
return iE
};
return iE.majorExtent([[-180,-90+gz],[180,90-gz]]).minorExtent([[-180,-80-gz],[180,80+gz]])
};
function aO(iq,ip,e){var ir=hw.range(iq,ip-gz,e).concat(ip);
return function(it){return ir.map(function(iu){return[it,iu]
})
}
}function aM(ir,iq,ip){var e=hw.range(ir,iq-gz,ip).concat(iq);
return function(it){return e.map(function(iu){return[iu,it]
})
}
}function hR(e){return e.source
}function h0(e){return e.target
}hw.geo.greatArc=function(){var iq=hR,ip,ir=h0,it;
function e(){return{type:"LineString",coordinates:[ip||iq.apply(this,arguments),it||ir.apply(this,arguments)]}
}e.distance=function(){return hw.geo.distance(ip||iq.apply(this,arguments),it||ir.apply(this,arguments))
};
e.source=function(iu){if(!arguments.length){return iq
}iq=iu,ip=typeof iu==="function"?null:iu;
return e
};
e.target=function(iu){if(!arguments.length){return ir
}ir=iu,it=typeof iu==="function"?null:iu;
return e
};
e.precision=function(){return arguments.length?e:0
};
return e
};
hw.geo.interpolate=function(e,ip){return g(e[0]*N,e[1]*N,ip[0]*N,ip[1]*N)
};
function g(ir,iD,iq,iB){var iv=Math.cos(iD),iC=Math.sin(iD),it=Math.cos(iB),iA=Math.sin(iB),ix=iv*Math.cos(ir),ip=iv*Math.sin(ir),iw=it*Math.cos(iq),e=it*Math.sin(iq),iz=2*Math.asin(Math.sqrt(aH(iB-iD)+iv*it*aH(iq-ir))),iu=1/Math.sin(iz);
var iy=iz?function(iG){var iJ=Math.sin(iG*=iz)*iu,iF=Math.sin(iz-iG)*iu,iE=iF*ix+iJ*iw,iI=iF*ip+iJ*e,iH=iF*iC+iJ*iA;
return[Math.atan2(iI,iE)*hM,Math.atan2(iH,Math.sqrt(iE*iE+iI*iI))*hM]
}:function(){return[ir*hM,iD*hM]
};
iy.distance=iz;
return iy
}hw.geo.length=function(e){d2=0;
hw.geo.stream(e,ga);
return d2
};
var d2;
var ga={sphere:aK,point:aK,lineStart:hU,lineEnd:aK,polygonStart:aK,polygonEnd:aK};
function hU(){var ip,iq,e;
ga.point=function(iu,it){ip=iu*N,iq=Math.sin(it*=N),e=Math.cos(it);
ga.point=ir
};
ga.lineEnd=function(){ga.point=ga.lineEnd=aK
};
function ir(iu,it){var ix=Math.sin(it*=N),iy=Math.cos(it),iv=cL((iu*=N)-ip),iw=Math.cos(iv);
d2+=Math.atan2(Math.sqrt((iv=iy*Math.sin(iv))*iv+(iv=e*ix-iq*iy*iw)*iv),iq*ix+e*iy*iw);
ip=iu,iq=ix,e=iy
}}function eG(iq,ip){function e(it,ir){var iw=Math.cos(it),iv=Math.cos(ir),iu=iq(iw*iv);
return[iu*iv*Math.sin(it),iu*Math.sin(ir)]
}e.invert=function(ir,ix){var iv=Math.sqrt(ir*ir+ix*ix),iw=ip(iv),it=Math.sin(iw),iu=Math.cos(iw);
return[Math.atan2(ir*it,iv*iu),Math.asin(iv&&ix*it/iv)]
};
return e
}var bw=eG(function(e){return Math.sqrt(2/(1+e))
},function(e){return 2*Math.asin(e/2)
});
(hw.geo.azimuthalEqualArea=function(){return fO(bw)
}).raw=bw;
var bK=eG(function(e){var ip=Math.acos(e);
return ip&&ip/Math.sin(ip)
},gw);
(hw.geo.azimuthalEquidistant=function(){return fO(bK)
}).raw=bK;
function fX(iq,ip){var e=Math.cos(iq),it=function(iw){return Math.tan(gp/4+iw/2)
},iv=iq===ip?Math.sin(iq):Math.log(e/Math.cos(ip))/Math.log(it(ip)/it(iq)),iu=e*Math.pow(it(iq),iv)/iv;
if(!iv){return aX
}function ir(ix,iw){var iy=cL(cL(iw)-ey)<gz?0:iu/Math.pow(it(iw),iv);
return[iy*Math.sin(iv*ix),iu-iy*Math.cos(iv*ix)]
}ir.invert=function(iw,iz){var iy=iu-iz,ix=cb(iv)*Math.sqrt(iw*iw+iy*iy);
return[Math.atan2(iw,iy)/iv,2*Math.atan(Math.pow(iu/ix,1/iv))-ey]
};
return ir
}(hw.geo.conicConformal=function(){return b8(fX)
}).raw=fX;
function hJ(iq,ip){var e=Math.cos(iq),iu=iq===ip?Math.sin(iq):(e-Math.cos(ip))/(ip-iq),it=e/iu+iq;
if(cL(iu)<gz){return bz
}function ir(iw,iv){var ix=it-iv;
return[ix*Math.sin(iu*iw),it-ix*Math.cos(iu*iw)]
}ir.invert=function(iv,ix){var iw=it-ix;
return[Math.atan2(iv,iw)/iu,it-cb(iu)*Math.sqrt(iv*iv+iw*iw)]
};
return ir
}(hw.geo.conicEquidistant=function(){return b8(hJ)
}).raw=hJ;
var eO=eG(function(e){return 1/e
},Math.atan);
(hw.geo.gnomonic=function(){return fO(eO)
}).raw=eO;
function aX(ip,e){return[ip,Math.log(Math.tan(gp/4+e/2))]
}aX.invert=function(e,ip){return[e,2*Math.atan(Math.exp(ip))-ey]
};
function db(iu){var e=fO(iu),it=e.scale,ir=e.translate,ip=e.clipExtent,iq;
e.scale=function(){var iv=it.apply(e,arguments);
return iv===e?iq?e.clipExtent(null):e:iv
};
e.translate=function(){var iv=ir.apply(e,arguments);
return iv===e?iq?e.clipExtent(null):e:iv
};
e.clipExtent=function(ix){var iw=ip.apply(e,arguments);
if(iw===e){if(iq=ix==null){var iv=gp*it(),iy=ir();
ip([[iy[0]-iv,iy[1]-iv],[iy[0]+iv,iy[1]+iv]])
}}else{if(iq){iw=null
}}return iw
};
return e.clipExtent(null)
}(hw.geo.mercator=function(){return db(aX)
}).raw=aX;
var gc=eG(function(){return 1
},Math.asin);
(hw.geo.orthographic=function(){return fO(gc)
}).raw=gc;
var ce=eG(function(e){return 1/(1+e)
},function(e){return 2*Math.atan(e)
});
(hw.geo.stereographic=function(){return fO(ce)
}).raw=ce;
function ao(ip,e){return[Math.log(Math.tan(gp/4+e/2)),-ip]
}ao.invert=function(e,ip){return[-ip,2*Math.atan(Math.exp(e))-ey]
};
(hw.geo.transverseMercator=function(){var ip=db(ao),e=ip.center,iq=ip.rotate;
ip.center=function(ir){return ir?e([-ir[1],ir[0]]):(ir=e(),[-ir[1],ir[0]])
};
ip.rotate=function(ir){return ir?iq([ir[0],ir[1],ir.length>2?ir[2]+90:90]):(ir=iq(),[ir[0],ir[1],ir[2]-90])
};
return ip.rotate([0,0])
}).raw=ao;
hw.geom={};
function h4(e){return e[0]
}function h3(e){return e[1]
}hw.geom.hull=function(ip){var e=h4,ir=h3;
if(arguments.length){return iq(ip)
}function iq(iN){if(iN.length<3){return[]
}var iw=W(e),iv=W(ir),iD=iN.length,iy,iA=iD-1,iG=[],iz=[],iL,iH,iE,iI=0,iK,iu,iJ,it,iC,iB,iM,iF;
if(iw===h4&&ir===h3){iy=iN
}else{for(iH=0,iy=[];
iH<iD;
++iH){iy.push([+iw.call(this,iL=iN[iH],iH),+iv.call(this,iL,iH)])
}}for(iH=1;
iH<iD;
++iH){if(iy[iH][1]<iy[iI][1]||iy[iH][1]==iy[iI][1]&&iy[iH][0]<iy[iI][0]){iI=iH
}}for(iH=0;
iH<iD;
++iH){if(iH===iI){continue
}iu=iy[iH][1]-iy[iI][1];
iK=iy[iH][0]-iy[iI][0];
iG.push({angle:Math.atan2(iu,iK),index:iH})
}iG.sort(function(iP,iO){return iP.angle-iO.angle
});
iM=iG[0].angle;
iB=iG[0].index;
iC=0;
for(iH=1;
iH<iA;
++iH){iE=iG[iH].index;
if(iM==iG[iH].angle){iK=iy[iB][0]-iy[iI][0];
iu=iy[iB][1]-iy[iI][1];
iJ=iy[iE][0]-iy[iI][0];
it=iy[iE][1]-iy[iI][1];
if(iK*iK+iu*iu>=iJ*iJ+it*it){iG[iH].index=-1;
continue
}else{iG[iC].index=-1
}}iM=iG[iH].angle;
iC=iH;
iB=iE
}iz.push(iI);
for(iH=0,iE=0;
iH<2;
++iE){if(iG[iE].index>-1){iz.push(iG[iE].index);
iH++
}}iF=iz.length;
for(;
iE<iA;
++iE){if(iG[iE].index<0){continue
}while(!dO(iz[iF-2],iz[iF-1],iG[iE].index,iy)){--iF
}iz[iF++]=iG[iE].index
}var ix=[];
for(iH=iF-1;
iH>=0;
--iH){ix.push(iN[iz[iH]])
}return ix
}iq.x=function(it){return arguments.length?(e=it,iq):e
};
iq.y=function(it){return arguments.length?(ir=it,iq):ir
};
return iq
};
function dO(ir,iq,ip,iz){var iA,iy,ix,iw,iv,iu,it;
iA=iz[ir];
iy=iA[0];
ix=iA[1];
iA=iz[iq];
iw=iA[0];
iv=iA[1];
iA=iz[ip];
iu=iA[0];
it=iA[1];
return(it-ix)*(iw-iy)-(iv-ix)*(iu-iy)>0
}hw.geom.polygon=function(e){ih(e,eA);
return e
};
var eA=hw.geom.polygon.prototype=[];
eA.area=function(){var iq=-1,it=this.length,ip,e=this[it-1],ir=0;
while(++iq<it){ip=e;
e=this[iq];
ir+=ip[1]*e[0]-ip[0]*e[1]
}return ir*0.5
};
eA.centroid=function(ir){var it=-1,iw=this.length,ip=0,iv=0,iq,e=this[iw-1],iu;
if(!arguments.length){ir=-1/(6*this.area())
}while(++it<iw){iq=e;
e=this[it];
iu=iq[0]*e[1]-e[0]*iq[1];
ip+=(iq[0]+e[0])*iu;
iv+=(iq[1]+e[1])*iu
}return[ip*ir,iv*ir]
};
eA.clip=function(iw){var iy,it=g3(iw),ir=-1,e=this.length-g3(this),iq,ip,iz=this[e-1],ix,iv,iu;
while(++ir<e){iy=iw.slice();
iw.length=0;
ix=this[ir];
iv=iy[(ip=iy.length-it)-1];
iq=-1;
while(++iq<ip){iu=iy[iq];
if(G(iu,iz,ix)){if(!G(iv,iz,ix)){iw.push(gx(iv,iu,iz,ix))
}iw.push(iu)
}else{if(G(iv,iz,ix)){iw.push(gx(iv,iu,iz,ix))
}}iv=iu
}if(it){iw.push(iw[0])
}iz=ix
}return iw
};
function G(iq,ip,e){return(e[0]-ip[0])*(iq[1]-ip[1])<(e[1]-ip[1])*(iq[0]-ip[0])
}function gx(iv,it,iz,iw){var iq=iv[0],e=iz[0],ir=it[0]-iq,iA=iw[0]-e,iy=iv[1],iu=iz[1],ix=it[1]-iy,iB=iw[1]-iu,ip=(iA*(iy-iu)-iB*(iq-e))/(iB*ir-iA*ix);
return[iq+ip*ir,iy+ip*ix]
}function g3(iq){var ip=iq[0],e=iq[iq.length-1];
return !(ip[0]-e[0]||ip[1]-e[1])
}var gZ,eI,cW,dk=[],hn,ec,eC=[];
function gO(){t(this);
this.edge=this.site=this.circle=null
}function e7(ip){var e=dk.pop()||new gO();
e.site=ip;
return e
}function gN(e){eV(e);
cW.remove(e);
dk.push(e);
t(e)
}function hy(ip){var e=ip.circle,iy=e.x,iv=e.cy,it={x:iy,y:iv},iu=ip.P,ir=ip.N,ix=[ip];
gN(ip);
var iA=iu;
while(iA.circle&&cL(iy-iA.circle.x)<gz&&cL(iv-iA.circle.cy)<gz){iu=iA.P;
ix.unshift(iA);
gN(iA);
iA=iu
}ix.unshift(iA);
eV(iA);
var iq=ir;
while(iq.circle&&cL(iy-iq.circle.x)<gz&&cL(iv-iq.circle.cy)<gz){ir=iq.N;
ix.push(iq);
gN(iq);
iq=ir
}ix.push(iq);
eV(iq);
var iz=ix.length,iw;
for(iw=1;
iw<iz;
++iw){iq=ix[iw];
iA=ix[iw-1];
cs(iq.edge,iA.site,iq.site,it)
}iA=ix[0];
iq=ix[iz-1];
iq.edge=ht(iA.site,iq.site,null,it);
ab(iA);
ab(iq)
}function dB(iz){var ix=iz.x,iB=iz.y,iD,iA,iJ,iE,iC=cW._;
while(iC){iJ=de(iC,iB)-ix;
if(iJ>gz){iC=iC.L
}else{iE=ix-gq(iC,iB);
if(iE>gz){if(!iC.R){iD=iC;
break
}iC=iC.R
}else{if(iJ>-gz){iD=iC.P;
iA=iC
}else{if(iE>-gz){iD=iC;
iA=iC.N
}else{iD=iA=iC
}}break
}}}var ir=e7(iz);
cW.insert(iD,ir);
if(!iD&&!iA){return
}if(iD===iA){eV(iD);
iA=e7(iD.site);
cW.insert(ir,iA);
ir.edge=iA.edge=ht(iD.site,ir.site);
ab(iD);
ab(iA);
return
}if(!iA){ir.edge=ht(iD.site,ir.site);
return
}eV(iD);
eV(iA);
var iv=iD.site,iy=iv.x,iw=iv.y,iH=iz.x-iy,iF=iz.y-iw,e=iA.site,iq=e.x-iy,ip=e.y-iw,iI=2*(iH*ip-iF*iq),iu=iH*iH+iF*iF,it=iq*iq+ip*ip,iG={x:(ip*iu-iF*it)/iI+iy,y:(iH*it-iq*iu)/iI+iw};
cs(iA.edge,iv,e,iG);
ir.edge=ht(iv,iz,null,iG);
iA.edge=ht(iz,e,null,iG);
ab(iD);
ab(iA)
}function de(ir,it){var e=ir.site,iA=e.x,iz=e.y,iy=iz-it;
if(!iy){return iA
}var iB=ir.P;
if(!iB){return -Infinity
}e=iB.site;
var iv=e.x,iu=e.y,iq=iu-it;
if(!iq){return iv
}var ip=iv-iA,ix=1/iy-1/iq,iw=ip/iq;
if(ix){return(-iw+Math.sqrt(iw*iw-2*ix*(ip*ip/(-2*iq)-iu+iq/2+iz-iy/2)))/ix+iA
}return(iA+iv)/2
}function gq(ip,iq){var ir=ip.N;
if(ir){return de(ir,iq)
}var e=ip.site;
return e.y===iq?e.x:Infinity
}function bZ(e){this.site=e;
this.edges=[]
}bZ.prototype.prepare=function(){var iq=this.edges,e=iq.length,ip;
while(e--){ip=iq[e].edge;
if(!ip.b||!ip.a){iq.splice(e,1)
}}iq.sort(u);
return iq.length
};
function bA(iF){var iv=iF[0][0],iu=iF[1][0],iB=iF[0][1],iA=iF[1][1],ir,iz,e,iy,iE=eI,iq=iE.length,iD,iC,ix,ip,it,iw;
while(iq--){iD=iE[iq];
if(!iD||!iD.prepare()){continue
}ix=iD.edges;
ip=ix.length;
iC=0;
while(iC<ip){iw=ix[iC].end(),e=iw.x,iy=iw.y;
it=ix[++iC%ip].start(),ir=it.x,iz=it.y;
if(cL(e-ir)>gz||cL(iy-iz)>gz){ix.splice(iC,0,new ib(hi(iD.site,iw,cL(e-iv)<gz&&iA-iy>gz?{x:iv,y:cL(ir-iv)<gz?iz:iA}:cL(iy-iA)<gz&&iu-e>gz?{x:cL(iz-iA)<gz?ir:iu,y:iA}:cL(e-iu)<gz&&iy-iB>gz?{x:iu,y:cL(ir-iu)<gz?iz:iB}:cL(iy-iB)<gz&&e-iv>gz?{x:cL(iz-iB)<gz?ir:iv,y:iB}:null),iD.site,null));
++ip
}}}}function u(ip,e){return e.angle-ip.angle
}function aZ(){t(this);
this.x=this.y=this.arc=this.site=this.cy=null
}function ab(iv){var iE=iv.P,iC=iv.N;
if(!iE||!iC){return
}var ix=iE.site,iH=iv.site,e=iC.site;
if(ix===e){return
}var iG=iH.x,iF=iH.y,iA=ix.x-iG,iy=ix.y-iF,iq=e.x-iG,ip=e.y-iF;
var iI=2*(iA*ip-iy*iq);
if(iI>=-eM){return
}var iu=iA*iA+iy*iy,it=iq*iq+ip*ip,iz=(ip*iu-iy*it)/iI,iw=(iA*it-iq*iu)/iI,ip=iw+iF;
var ir=eC.pop()||new aZ();
ir.arc=iv;
ir.site=iH;
ir.x=iz+iG;
ir.y=ip+Math.sqrt(iz*iz+iw*iw);
ir.cy=ip;
iv.circle=ir;
var iB=null,iD=ec._;
while(iD){if(ir.y<iD.y||ir.y===iD.y&&ir.x<=iD.x){if(iD.L){iD=iD.L
}else{iB=iD.P;
break
}}else{if(iD.R){iD=iD.R
}else{iB=iD;
break
}}}ec.insert(iB,ir);
if(!iB){hn=ir
}}function eV(e){var ip=e.circle;
if(ip){if(!ip.P){hn=ip.N
}ec.remove(ip);
eC.push(ip);
t(ip);
e.circle=null
}}function hL(ir){var ip=gZ,it=ap(ir[0][0],ir[0][1],ir[1][0],ir[1][1]),iq=ip.length,iu;
while(iq--){iu=ip[iq];
if(!bq(iu,ir)||!it(iu)||cL(iu.a.x-iu.b.x)<gz&&cL(iu.a.y-iu.b.y)<gz){iu.a=iu.b=null;
ip.splice(iq,1)
}}}function bq(iA,iD){var e=iA.b;
if(e){return true
}var ip=iA.a,iG=iD[0][0],iF=iD[1][0],iu=iD[0][1],ir=iD[1][1],iC=iA.l,iq=iA.r,ix=iC.x,iw=iC.y,iz=iq.x,iy=iq.y,iv=(ix+iz)/2,it=(iw+iy)/2,iB,iE;
if(iy===iw){if(iv<iG||iv>=iF){return
}if(ix>iz){if(!ip){ip={x:iv,y:iu}
}else{if(ip.y>=ir){return
}}e={x:iv,y:ir}
}else{if(!ip){ip={x:iv,y:ir}
}else{if(ip.y<iu){return
}}e={x:iv,y:iu}
}}else{iB=(ix-iz)/(iy-iw);
iE=it-iB*iv;
if(iB<-1||iB>1){if(ix>iz){if(!ip){ip={x:(iu-iE)/iB,y:iu}
}else{if(ip.y>=ir){return
}}e={x:(ir-iE)/iB,y:ir}
}else{if(!ip){ip={x:(ir-iE)/iB,y:ir}
}else{if(ip.y<iu){return
}}e={x:(iu-iE)/iB,y:iu}
}}else{if(iw<iy){if(!ip){ip={x:iG,y:iB*iG+iE}
}else{if(ip.x>=iF){return
}}e={x:iF,y:iB*iF+iE}
}else{if(!ip){ip={x:iF,y:iB*iF+iE}
}else{if(ip.x<iG){return
}}e={x:iG,y:iB*iG+iE}
}}}iA.a=ip;
iA.b=e;
return true
}function J(ip,e){this.l=ip;
this.r=e;
this.a=this.b=null
}function ht(it,e,ir,ip){var iq=new J(it,e);
gZ.push(iq);
if(ir){cs(iq,it,e,ir)
}if(ip){cs(iq,e,it,ip)
}eI[it.i].edges.push(new ib(iq,it,e));
eI[e.i].edges.push(new ib(iq,e,it));
return iq
}function hi(ir,iq,e){var ip=new J(ir,null);
ip.a=iq;
ip.b=e;
gZ.push(ip);
return ip
}function cs(ip,ir,e,iq){if(!ip.a&&!ip.b){ip.a=iq;
ip.l=ir;
ip.r=e
}else{if(ip.l===e){ip.b=iq
}else{ip.a=iq
}}}function ib(ir,it,e){var iq=ir.a,ip=ir.b;
this.edge=ir;
this.site=it;
this.angle=e?Math.atan2(e.y-it.y,e.x-it.x):ir.l===it?Math.atan2(ip.x-iq.x,iq.y-ip.y):Math.atan2(iq.x-ip.x,ip.y-iq.y)
}ib.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b
},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a
}};
function bd(){this._=null
}function t(e){e.U=e.C=e.L=e.R=e.P=e.N=null
}bd.prototype={insert:function(it,ir){var iq,ip,e;
if(it){ir.P=it;
ir.N=it.N;
if(it.N){it.N.P=ir
}it.N=ir;
if(it.R){it=it.R;
while(it.L){it=it.L
}it.L=ir
}else{it.R=ir
}iq=it
}else{if(this._){it=di(this._);
ir.P=null;
ir.N=it;
it.P=it.L=ir;
iq=it
}else{ir.P=ir.N=null;
this._=ir;
iq=null
}}ir.L=ir.R=null;
ir.U=iq;
ir.C=true;
it=ir;
while(iq&&iq.C){ip=iq.U;
if(iq===ip.L){e=ip.R;
if(e&&e.C){iq.C=e.C=false;
ip.C=true;
it=ip
}else{if(it===iq.R){an(this,iq);
it=iq;
iq=it.U
}iq.C=false;
ip.C=true;
eZ(this,ip)
}}else{e=ip.L;
if(e&&e.C){iq.C=e.C=false;
ip.C=true;
it=ip
}else{if(it===iq.L){eZ(this,iq);
it=iq;
iq=it.U
}iq.C=false;
ip.C=true;
an(this,ip)
}}iq=it.U
}this._.C=false
},remove:function(it){if(it.N){it.N.P=it.P
}if(it.P){it.P.N=it.N
}it.N=it.P=null;
var ir=it.U,iq,iv=it.L,e=it.R,ip,iu;
if(!iv){ip=e
}else{if(!e){ip=iv
}else{ip=di(e)
}}if(ir){if(ir.L===it){ir.L=ip
}else{ir.R=ip
}}else{this._=ip
}if(iv&&e){iu=ip.C;
ip.C=it.C;
ip.L=iv;
iv.U=ip;
if(ip!==e){ir=ip.U;
ip.U=it.U;
it=ip.R;
ir.L=it;
ip.R=e;
e.U=ip
}else{ip.U=ir;
ir=ip;
it=ip.R
}}else{iu=it.C;
it=ip
}if(it){it.U=ir
}if(iu){return
}if(it&&it.C){it.C=false;
return
}do{if(it===this._){break
}if(it===ir.L){iq=ir.R;
if(iq.C){iq.C=false;
ir.C=true;
an(this,ir);
iq=ir.R
}if(iq.L&&iq.L.C||iq.R&&iq.R.C){if(!iq.R||!iq.R.C){iq.L.C=false;
iq.C=true;
eZ(this,iq);
iq=ir.R
}iq.C=ir.C;
ir.C=iq.R.C=false;
an(this,ir);
it=this._;
break
}}else{iq=ir.L;
if(iq.C){iq.C=false;
ir.C=true;
eZ(this,ir);
iq=ir.L
}if(iq.L&&iq.L.C||iq.R&&iq.R.C){if(!iq.L||!iq.L.C){iq.R.C=false;
iq.C=true;
an(this,iq);
iq=ir.L
}iq.C=ir.C;
ir.C=iq.L.C=false;
eZ(this,ir);
it=this._;
break
}}iq.C=true;
it=ir;
ir=ir.U
}while(!it.C);
if(it){it.C=false
}}};
function an(e,iq){var it=iq,ir=iq.R,ip=it.U;
if(ip){if(ip.L===it){ip.L=ir
}else{ip.R=ir
}}else{e._=ir
}ir.U=ip;
it.U=ir;
it.R=ir.L;
if(it.R){it.R.U=it
}ir.L=it
}function eZ(e,iq){var it=iq,ir=iq.L,ip=it.U;
if(ip){if(ip.L===it){ip.L=ir
}else{ip.R=ir
}}else{e._=ir
}ir.U=ip;
it.U=ir;
it.L=ir.R;
if(it.L){it.L.U=it
}ir.R=it
}function di(e){while(e.L){e=e.L
}return e
}function hc(iu,iv){var ip=iu.sort(bn).pop(),iq,ir,it;
gZ=[];
eI=new Array(iu.length);
cW=new bd();
ec=new bd();
while(true){it=hn;
if(ip&&(!it||ip.y<it.y||ip.y===it.y&&ip.x<it.x)){if(ip.x!==iq||ip.y!==ir){eI[ip.i]=new bZ(ip);
dB(ip);
iq=ip.x,ir=ip.y
}ip=iu.pop()
}else{if(it){hy(it.arc)
}else{break
}}}if(iv){hL(iv),bA(iv)
}var e={cells:eI,edges:gZ};
cW=ec=gZ=eI=null;
return e
}function bn(ip,e){return e.y-ip.y||e.x-ip.x
}hw.geom.voronoi=function(ir){var e=h4,iw=h3,it=e,iq=iw,ip=hO;
if(ir){return iv(ir)
}function iv(iC){var ix=new Array(iC.length),iz=ip[0][0],iB=ip[0][1],iy=ip[1][0],iA=ip[1][1];
hc(iu(iC),ip).cells.forEach(function(iD,iH){var iE=iD.edges,iF=iD.site,iG=ix[iH]=iE.length?iE.map(function(iJ){var iI=iJ.start();
return[iI.x,iI.y]
}):iF.x>=iz&&iF.x<=iy&&iF.y>=iB&&iF.y<=iA?[[iz,iA],[iy,iA],[iy,iB],[iz,iB]]:[];
iG.point=iC[iH]
});
return ix
}function iu(ix){return ix.map(function(iz,iy){return{x:Math.round(it(iz,iy)/gz)*gz,y:Math.round(iq(iz,iy)/gz)*gz,i:iy}
})
}iv.links=function(ix){return hc(iu(ix)).edges.filter(function(iy){return iy.l&&iy.r
}).map(function(iy){return{source:ix[iy.l.i],target:ix[iy.r.i]}
})
};
iv.triangles=function(iy){var ix=[];
hc(iu(iy)).cells.forEach(function(iH,iD){var iz=iH.site,iC=iH.edges.sort(u),iB=-1,iA=iC.length,iF,iI,iE=iC[iA-1].edge,iG=iE.l===iz?iE.r:iE.l;
while(++iB<iA){iF=iE;
iI=iG;
iE=iC[iB].edge;
iG=iE.l===iz?iE.r:iE.l;
if(iD<iI.i&&iD<iG.i&&gM(iz,iI,iG)<0){ix.push([iy[iD],iy[iI.i],iy[iG.i]])
}}});
return ix
};
iv.x=function(ix){return arguments.length?(it=W(e=ix),iv):e
};
iv.y=function(ix){return arguments.length?(iq=W(iw=ix),iv):iw
};
iv.clipExtent=function(ix){if(!arguments.length){return ip===hO?null:ip
}ip=ix==null?hO:ix;
return iv
};
iv.size=function(ix){if(!arguments.length){return ip===hO?null:ip&&ip[1]
}return iv.clipExtent(ix&&[[0,0],ix])
};
return iv
};
var hO=[[-1000000,-1000000],[1000000,1000000]];
function gM(ip,e,iq){return(ip.x-iq.x)*(e.y-ip.y)-(ip.x-e.x)*(iq.y-ip.y)
}hw.geom.delaunay=function(e){return hw.geom.voronoi().triangles(e)
};
hw.geom.quadtree=function(iw,ip,iu,e,it){var iv=h4,ir=h3,ix;
if(ix=arguments.length){iv=gg;
ir=gf;
if(ix===3){it=iu;
e=ip;
iu=ip=0
}return iq(iw)
}function iq(iQ){var iN,iC=W(iv),iA=W(ir),iE,iK,iL,iI,iy,iH,iD,iP;
if(ip!=null){iy=ip,iH=iu,iD=e,iP=it
}else{iD=iP=-(iy=iH=Infinity);
iE=[],iK=[];
iI=iQ.length;
if(ix){for(iL=0;
iL<iI;
++iL){iN=iQ[iL];
if(iN.x<iy){iy=iN.x
}if(iN.y<iH){iH=iN.y
}if(iN.x>iD){iD=iN.x
}if(iN.y>iP){iP=iN.y
}iE.push(iN.x);
iK.push(iN.y)
}}else{for(iL=0;
iL<iI;
++iL){var iM=+iC(iN=iQ[iL],iL),iB=+iA(iN,iL);
if(iM<iy){iy=iM
}if(iB<iH){iH=iB
}if(iM>iD){iD=iM
}if(iB>iP){iP=iB
}iE.push(iM);
iK.push(iB)
}}}var iG=iD-iy,iF=iP-iH;
if(iG>iF){iP=iH+iG
}else{iD=iy+iF
}function iz(iT,iX,i1,iY,iS,i0,iR,iZ){if(isNaN(i1)||isNaN(iY)){return
}if(iT.leaf){var iW=iT.x,iV=iT.y;
if(iW!=null){if(cL(iW-i1)+cL(iV-iY)<0.01){iO(iT,iX,i1,iY,iS,i0,iR,iZ)
}else{var iU=iT.point;
iT.x=iT.y=iT.point=null;
iO(iT,iU,iW,iV,iS,i0,iR,iZ);
iO(iT,iX,i1,iY,iS,i0,iR,iZ)
}}else{iT.x=i1,iT.y=iY,iT.point=iX
}}else{iO(iT,iX,i1,iY,iS,i0,iR,iZ)
}}function iO(iU,iW,i2,iY,iT,i1,iS,iZ){var i0=(iT+iS)*0.5,iX=(i1+iZ)*0.5,i3=i2>=i0,iR=iY>=iX,iV=(iR<<1)+i3;
iU.leaf=false;
iU=iU.nodes[iV]||(iU.nodes[iV]=fV());
if(i3){iT=i0
}else{iS=i0
}if(iR){i1=iX
}else{iZ=iX
}iz(iU,iW,i2,iY,iT,i1,iS,iZ)
}var iJ=fV();
iJ.add=function(iR){iz(iJ,iR,+iC(iR,++iL),+iA(iR,iL),iy,iH,iD,iP)
};
iJ.visit=function(iR){cR(iR,iJ,iy,iH,iD,iP)
};
iL=-1;
if(ip==null){while(++iL<iI){iz(iJ,iQ[iL],iE[iL],iK[iL],iy,iH,iD,iP)
}--iL
}else{iQ.forEach(iJ.add)
}iE=iK=iQ=iN=null;
return iJ
}iq.x=function(iy){return arguments.length?(iv=iy,iq):iv
};
iq.y=function(iy){return arguments.length?(ir=iy,iq):ir
};
iq.extent=function(iy){if(!arguments.length){return ip==null?null:[[ip,iu],[e,it]]
}if(iy==null){ip=iu=e=it=null
}else{ip=+iy[0][0],iu=+iy[0][1],e=+iy[1][0],it=+iy[1][1]
}return iq
};
iq.size=function(iy){if(!arguments.length){return ip==null?null:[e-ip,it-iu]
}if(iy==null){ip=iu=e=it=null
}else{ip=iu=0,e=+iy[0],it=+iy[1]
}return iq
};
return iq
};
function gg(e){return e.x
}function gf(e){return e.y
}function fV(){return{leaf:true,nodes:[],point:null,x:null,y:null}
}function cR(it,ir,ip,ix,e,iv){if(!it(ir,ip,ix,e,iv)){var iw=(ip+e)*0.5,iu=(ix+iv)*0.5,iq=ir.nodes;
if(iq[0]){cR(it,iq[0],ip,ix,iw,iu)
}if(iq[1]){cR(it,iq[1],iw,ix,e,iu)
}if(iq[2]){cR(it,iq[2],ip,iu,iw,iv)
}if(iq[3]){cR(it,iq[3],iw,iu,e,iv)
}}}hw.interpolateRgb=aS;
function aS(ip,e){ip=hw.rgb(ip);
e=hw.rgb(e);
var ir=ip.r,iq=ip.g,iv=ip.b,iu=e.r-ir,it=e.g-iq,iw=e.b-iv;
return function(ix){return"#"+cA(Math.round(ir+iu*ix))+cA(Math.round(iq+it*ix))+cA(Math.round(iv+iw*ix))
}
}hw.interpolateObject=bO;
function bO(ip,e){var ir={},it={},iq;
for(iq in ip){if(iq in e){ir[iq]=fQ(ip[iq],e[iq])
}else{it[iq]=ip[iq]
}}for(iq in e){if(!(iq in ip)){it[iq]=e[iq]
}}return function(iu){for(iq in ir){it[iq]=ir[iq](iu)
}return it
}
}hw.interpolateNumber=bH;
function bH(ip,e){e-=ip=+ip;
return function(iq){return ip+e*iq
}
}hw.interpolateString=b2;
function b2(iw,iv){var ir,iu,it,iy=0,ix=0,iz=[],e=[],iq,ip;
iw=iw+"",iv=iv+"";
f5.lastIndex=0;
for(iu=0;
ir=f5.exec(iv);
++iu){if(ir.index){iz.push(iv.substring(iy,ix=ir.index))
}e.push({i:iz.length,x:ir[0]});
iz.push(null);
iy=f5.lastIndex
}if(iy<iv.length){iz.push(iv.substring(iy))
}for(iu=0,iq=e.length;
(ir=f5.exec(iw))&&iu<iq;
++iu){ip=e[iu];
if(ip.x==ir[0]){if(ip.i){if(iz[ip.i+1]==null){iz[ip.i-1]+=ip.x;
iz.splice(ip.i,1);
for(it=iu+1;
it<iq;
++it){e[it].i--
}}else{iz[ip.i-1]+=ip.x+iz[ip.i+1];
iz.splice(ip.i,2);
for(it=iu+1;
it<iq;
++it){e[it].i-=2
}}}else{if(iz[ip.i+1]==null){iz[ip.i]=ip.x
}else{iz[ip.i]=ip.x+iz[ip.i+1];
iz.splice(ip.i+1,1);
for(it=iu+1;
it<iq;
++it){e[it].i--
}}}e.splice(iu,1);
iq--;
iu--
}else{ip.x=bH(parseFloat(ir[0]),parseFloat(ip.x))
}}while(iu<iq){ip=e.pop();
if(iz[ip.i+1]==null){iz[ip.i]=ip.x
}else{iz[ip.i]=ip.x+iz[ip.i+1];
iz.splice(ip.i+1,1)
}iq--
}if(iz.length===1){return iz[0]==null?(ip=e[0].x,function(iA){return ip(iA)+""
}):function(){return iv
}
}return function(iA){for(iu=0;
iu<iq;
++iu){iz[(ip=e[iu]).i]=ip.x(iA)
}return iz.join("")
}
}var f5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
hw.interpolate=fQ;
function fQ(ip,e){var iq=hw.interpolators.length,ir;
while(--iq>=0&&!(ir=hw.interpolators[iq](ip,e))){}return ir
}hw.interpolators=[function(ip,e){var iq=typeof e;
return(iq==="string"?ar.has(e)||/^(#|rgb\(|hsl\()/.test(e)?aS:b2:e instanceof K?aS:iq==="object"?Array.isArray(e)?eX:bO:bH)(ip,e)
}];
hw.interpolateArray=eX;
function eX(it,iq){var ip=[],iw=[],ir=it.length,e=iq.length,iv=Math.min(it.length,iq.length),iu;
for(iu=0;
iu<iv;
++iu){ip.push(fQ(it[iu],iq[iu]))
}for(;
iu<ir;
++iu){iw[iu]=it[iu]
}for(;
iu<e;
++iu){iw[iu]=iq[iu]
}return function(ix){for(iu=0;
iu<iv;
++iu){iw[iu]=ip[iu](ix)
}return iw
}
}var hs=function(){return gw
};
var ag=hw.map({linear:hs,poly:aW,quad:function(){return b0
},cubic:function(){return M
},sin:function(){return go
},exp:function(){return fH
},circle:function(){return ef
},elastic:aa,back:g9,bounce:function(){return cn
}});
var j=hw.map({"in":gw,out:F,"in-out":a5,"out-in":function(e){return a5(F(e))
}});
hw.ease=function(ip){var ir=ip.indexOf("-"),iq=ir>=0?ip.substring(0,ir):ip,e=ir>=0?ip.substring(ir+1):"in";
iq=ag.get(iq)||hs;
e=j.get(e)||gw;
return fN(e(iq.apply(null,bQ.call(arguments,1))))
};
function fN(e){return function(ip){return ip<=0?0:ip>=1?1:e(ip)
}
}function F(e){return function(ip){return 1-e(1-ip)
}
}function a5(e){return function(ip){return 0.5*(ip<0.5?e(2*ip):2-e(2-2*ip))
}
}function b0(e){return e*e
}function M(e){return e*e*e
}function aA(ip){if(ip<=0){return 0
}if(ip>=1){return 1
}var iq=ip*ip,e=iq*ip;
return 4*(ip<0.5?e:3*(ip-iq)+e-0.75)
}function aW(ip){return function(e){return Math.pow(e,ip)
}
}function go(e){return 1-Math.cos(e*ey)
}function fH(e){return Math.pow(2,10*(e-1))
}function ef(e){return 1-Math.sqrt(1-e*e)
}function aa(e,iq){var ip;
if(arguments.length<2){iq=0.45
}if(arguments.length){ip=iq/gk*Math.asin(1/e)
}else{e=1,ip=iq/4
}return function(ir){return 1+e*Math.pow(2,-10*ir)*Math.sin((ir-ip)*gk/iq)
}
}function g9(e){if(!e){e=1.70158
}return function(ip){return ip*ip*((e+1)*ip-e)
}
}function cn(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375
}hw.interpolateHcl=g1;
function g1(iq,e){iq=hw.hcl(iq);
e=hw.hcl(e);
var ip=iq.h,it=iq.c,iv=iq.l,ir=e.h-ip,iu=e.c-it,iw=e.l-iv;
if(isNaN(iu)){iu=0,it=isNaN(it)?e.c:it
}if(isNaN(ir)){ir=0,ip=isNaN(ip)?e.h:ip
}else{if(ir>180){ir-=360
}else{if(ir<-180){ir+=360
}}}return function(ix){return bE(ip+ir*ix,it+iu*ix,iv+iw*ix)+""
}
}hw.interpolateHsl=a6;
function a6(ir,e){ir=hw.hsl(ir);
e=hw.hsl(e);
var iq=ir.h,ip=ir.s,iv=ir.l,iu=e.h-iq,it=e.s-ip,iw=e.l-iv;
if(isNaN(it)){it=0,ip=isNaN(ip)?e.s:ip
}if(isNaN(iu)){iu=0,iq=isNaN(iq)?e.h:iq
}else{if(iu>180){iu-=360
}else{if(iu<-180){iu+=360
}}}return function(ix){return bj(iq+iu*ix,ip+it*ix,iv+iw*ix)+""
}
}hw.interpolateLab=hH;
function hH(ip,e){ip=hw.lab(ip);
e=hw.lab(e);
var it=ip.l,ir=ip.a,iq=ip.b,iw=e.l-it,iv=e.a-ir,iu=e.b-iq;
return function(ix){return aF(it+iw*ix,ir+iv*ix,iq+iu*ix)+""
}
}hw.interpolateRound=fL;
function fL(ip,e){e-=ip;
return function(iq){return Math.round(ip+e*iq)
}
}hw.transform=function(e){var ip=bP.createElementNS(hw.ns.prefix.svg,"g");
return(hw.transform=function(iq){if(iq!=null){ip.setAttribute("transform",iq);
var ir=ip.transform.baseVal.consolidate()
}return new o(ir?ir.matrix:gl)
})(e)
};
function o(e){var ir=[e.a,e.b],ip=[e.c,e.d],iu=fC(ir),iq=e8(ir,ip),it=fC(bU(ip,ir,-iq))||0;
if(ir[0]*ip[1]<ip[0]*ir[1]){ir[0]*=-1;
ir[1]*=-1;
iu*=-1;
iq*=-1
}this.rotate=(iu?Math.atan2(ir[1],ir[0]):Math.atan2(-ip[0],ip[1]))*hM;
this.translate=[e.e,e.f];
this.scale=[iu,it];
this.skew=it?Math.atan2(iq,it)*hM:0
}o.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"
};
function e8(ip,e){return ip[0]*e[0]+ip[1]*e[1]
}function fC(e){var ip=Math.sqrt(e8(e,e));
if(ip){e[0]/=ip;
e[1]/=ip
}return ip
}function bU(ip,e,iq){ip[0]+=iq*e[0];
ip[1]+=iq*e[1];
return ip
}var gl={a:1,b:0,c:0,d:1,e:0,f:0};
hw.interpolateTransform=er;
function er(iC,iB){var iD=[],ip=[],iu,it=hw.transform(iC),ir=hw.transform(iB),iy=it.translate,ix=ir.translate,iq=it.rotate,e=ir.rotate,iw=it.skew,iv=ir.skew,iA=it.scale,iz=ir.scale;
if(iy[0]!=ix[0]||iy[1]!=ix[1]){iD.push("translate(",null,",",null,")");
ip.push({i:1,x:bH(iy[0],ix[0])},{i:3,x:bH(iy[1],ix[1])})
}else{if(ix[0]||ix[1]){iD.push("translate("+ix+")")
}else{iD.push("")
}}if(iq!=e){if(iq-e>180){e+=360
}else{if(e-iq>180){iq+=360
}}ip.push({i:iD.push(iD.pop()+"rotate(",null,")")-2,x:bH(iq,e)})
}else{if(e){iD.push(iD.pop()+"rotate("+e+")")
}}if(iw!=iv){ip.push({i:iD.push(iD.pop()+"skewX(",null,")")-2,x:bH(iw,iv)})
}else{if(iv){iD.push(iD.pop()+"skewX("+iv+")")
}}if(iA[0]!=iz[0]||iA[1]!=iz[1]){iu=iD.push(iD.pop()+"scale(",null,",",null,")");
ip.push({i:iu-4,x:bH(iA[0],iz[0])},{i:iu-2,x:bH(iA[1],iz[1])})
}else{if(iz[0]!=1||iz[1]!=1){iD.push(iD.pop()+"scale("+iz+")")
}}iu=ip.length;
return function(iF){var iE=-1,iG;
while(++iE<iu){iD[(iG=ip[iE]).i]=iG.x(iF)
}return iD.join("")
}
}function hE(ip,e){e=e-(ip=+ip)?1/(e-ip):0;
return function(iq){return(iq-ip)*e
}
}function aD(ip,e){e=e-(ip=+ip)?1/(e-ip):0;
return function(iq){return Math.max(0,Math.min(1,(iq-ip)*e))
}
}hw.layout={};
hw.layout.bundle=function(){return function(e){var iq=[],ip=-1,ir=e.length;
while(++ip<ir){iq.push(eT(e[ip]))
}return iq
}
};
function eT(ir){var iu=ir.source,e=ir.target,it=fY(iu,e),iq=[iu];
while(iu!==it){iu=iu.parent;
iq.push(iu)
}var ip=iq.length;
while(e!==it){iq.splice(ip,0,e);
e=e.parent
}return iq
}function fB(iq){var ip=[],e=iq.parent;
while(e!=null){ip.push(iq);
iq=e;
e=e.parent
}ip.push(iq);
return ip
}function fY(ir,ip){if(ir===ip){return ir
}var iq=fB(ir),e=fB(ip),it=iq.pop(),iu=e.pop(),iv=null;
while(it===iu){iv=it;
it=iq.pop();
iu=e.pop()
}return iv
}hw.layout.chord=function(){var iu={},iv,ir,iz,iq,iy=0,e,ip,it;
function ix(){var iE={},iH=[],iP=hw.range(iq),iL=[],iF,iN,iD,iI,iG;
iv=[];
ir=[];
iF=0,iI=-1;
while(++iI<iq){iN=0,iG=-1;
while(++iG<iq){iN+=iz[iI][iG]
}iH.push(iN);
iL.push(hw.range(iq));
iF+=iN
}if(e){iP.sort(function(iR,iQ){return e(iH[iR],iH[iQ])
})
}if(ip){iL.forEach(function(iR,iQ){iR.sort(function(iT,iS){return ip(iz[iQ][iT],iz[iQ][iS])
})
})
}iF=(gk-iy*iq)/iF;
iN=0,iI=-1;
while(++iI<iq){iD=iN,iG=-1;
while(++iG<iq){var iM=iP[iI],iK=iL[iM][iG],iO=iz[iM][iK],iC=iN,iB=iN+=iO*iF;
iE[iM+"-"+iK]={index:iM,subindex:iK,startAngle:iC,endAngle:iB,value:iO}
}ir[iM]={index:iM,startAngle:iD,endAngle:iN,value:(iN-iD)/iF};
iN+=iy
}iI=-1;
while(++iI<iq){iG=iI-1;
while(++iG<iq){var iA=iE[iI+"-"+iG],iJ=iE[iG+"-"+iI];
if(iA.value||iJ.value){iv.push(iA.value<iJ.value?{source:iJ,target:iA}:{source:iA,target:iJ})
}}}if(it){iw()
}}function iw(){iv.sort(function(iB,iA){return it((iB.source.value+iB.target.value)/2,(iA.source.value+iA.target.value)/2)
})
}iu.matrix=function(iA){if(!arguments.length){return iz
}iq=(iz=iA)&&iz.length;
iv=ir=null;
return iu
};
iu.padding=function(iA){if(!arguments.length){return iy
}iy=iA;
iv=ir=null;
return iu
};
iu.sortGroups=function(iA){if(!arguments.length){return e
}e=iA;
iv=ir=null;
return iu
};
iu.sortSubgroups=function(iA){if(!arguments.length){return ip
}ip=iA;
iv=null;
return iu
};
iu.sortChords=function(iA){if(!arguments.length){return it
}it=iA;
if(iv){iw()
}return iu
};
iu.chords=function(){if(!iv){ix()
}return iv
};
iu.groups=function(){if(!ir){ix()
}return ir
};
return iu
};
hw.layout.force=function(){var ip={},iD=hw.dispatch("start","tick","end"),iz=[1,1],iF,it,iw=0.9,iG=f4,ir=cx,iC=-30,iu=0.1,ix=0.8,iB=[],iq=[],iv,e,iy;
function iE(iH){return function(iK,iP,iO,iN){if(iK.point!==iH){var iM=iK.cx-iH.x,iJ=iK.cy-iH.y,iI=1/Math.sqrt(iM*iM+iJ*iJ);
if((iN-iP)*iI<ix){var iL=iK.charge*iI*iI;
iH.px-=iM*iL;
iH.py-=iJ*iL;
return true
}if(iK.point&&isFinite(iI)){var iL=iK.pointCharge*iI*iI;
iH.px-=iM*iL;
iH.py-=iJ*iL
}}return !iK.charge
}
}ip.tick=function(){if((it*=0.99)<0.005){iD.end({type:"end",alpha:it=0});
return true
}var iJ=iB.length,iK=iq.length,iH,iN,iI,iR,iQ,iL,iM,iP,iO;
for(iN=0;
iN<iK;
++iN){iI=iq[iN];
iR=iI.source;
iQ=iI.target;
iP=iQ.x-iR.x;
iO=iQ.y-iR.y;
if(iL=iP*iP+iO*iO){iL=it*e[iN]*((iL=Math.sqrt(iL))-iv[iN])/iL;
iP*=iL;
iO*=iL;
iQ.x-=iP*(iM=iR.weight/(iQ.weight+iR.weight));
iQ.y-=iO*iM;
iR.x+=iP*(iM=1-iM);
iR.y+=iO*iM
}}if(iM=it*iu){iP=iz[0]/2;
iO=iz[1]/2;
iN=-1;
if(iM){while(++iN<iJ){iI=iB[iN];
iI.x+=(iP-iI.x)*iM;
iI.y+=(iO-iI.y)*iM
}}}if(iC){gL(iH=hw.geom.quadtree(iB),it,iy);
iN=-1;
while(++iN<iJ){if(!(iI=iB[iN]).fixed){iH.visit(iE(iI))
}}}iN=-1;
while(++iN<iJ){iI=iB[iN];
if(iI.fixed){iI.x=iI.px;
iI.y=iI.py
}else{iI.x-=(iI.px-(iI.px=iI.x))*iw;
iI.y-=(iI.py-(iI.py=iI.y))*iw
}}iD.tick({type:"tick",alpha:it})
};
ip.nodes=function(iH){if(!arguments.length){return iB
}iB=iH;
return ip
};
ip.links=function(iH){if(!arguments.length){return iq
}iq=iH;
return ip
};
ip.size=function(iH){if(!arguments.length){return iz
}iz=iH;
return ip
};
ip.linkDistance=function(iH){if(!arguments.length){return iG
}iG=typeof iH==="function"?iH:+iH;
return ip
};
ip.distance=ip.linkDistance;
ip.linkStrength=function(iH){if(!arguments.length){return ir
}ir=typeof iH==="function"?iH:+iH;
return ip
};
ip.friction=function(iH){if(!arguments.length){return iw
}iw=+iH;
return ip
};
ip.charge=function(iH){if(!arguments.length){return iC
}iC=typeof iH==="function"?iH:+iH;
return ip
};
ip.gravity=function(iH){if(!arguments.length){return iu
}iu=+iH;
return ip
};
ip.theta=function(iH){if(!arguments.length){return ix
}ix=+iH;
return ip
};
ip.alpha=function(iH){if(!arguments.length){return it
}iH=+iH;
if(it){if(iH>0){it=iH
}else{it=0
}}else{if(iH>0){iD.start({type:"start",alpha:it=iH});
hw.timer(ip.tick)
}}return ip
};
ip.start=function(){var iL,iO=iB.length,iI=iq.length,iJ=iz[0],iM=iz[1],iK,iN;
for(iL=0;
iL<iO;
++iL){(iN=iB[iL]).index=iL;
iN.weight=0
}for(iL=0;
iL<iI;
++iL){iN=iq[iL];
if(typeof iN.source=="number"){iN.source=iB[iN.source]
}if(typeof iN.target=="number"){iN.target=iB[iN.target]
}++iN.source.weight;
++iN.target.weight
}for(iL=0;
iL<iO;
++iL){iN=iB[iL];
if(isNaN(iN.x)){iN.x=iH("x",iJ)
}if(isNaN(iN.y)){iN.y=iH("y",iM)
}if(isNaN(iN.px)){iN.px=iN.x
}if(isNaN(iN.py)){iN.py=iN.y
}}iv=[];
if(typeof iG==="function"){for(iL=0;
iL<iI;
++iL){iv[iL]=+iG.call(this,iq[iL],iL)
}}else{for(iL=0;
iL<iI;
++iL){iv[iL]=iG
}}e=[];
if(typeof ir==="function"){for(iL=0;
iL<iI;
++iL){e[iL]=+ir.call(this,iq[iL],iL)
}}else{for(iL=0;
iL<iI;
++iL){e[iL]=ir
}}iy=[];
if(typeof iC==="function"){for(iL=0;
iL<iO;
++iL){iy[iL]=+iC.call(this,iB[iL],iL)
}}else{for(iL=0;
iL<iO;
++iL){iy[iL]=iC
}}function iH(iU,iS){if(!iK){iK=new Array(iO);
for(iR=0;
iR<iO;
++iR){iK[iR]=[]
}for(iR=0;
iR<iQ;
++iR){var iV=iq[iR];
iK[iV.source.index].push(iV.target);
iK[iV.target.index].push(iV.source)
}}var iT=iK[iL],iR=-1,iQ=iT.length,iP;
while(++iR<iQ){if(!isNaN(iP=iT[iR][iU])){return iP
}}return Math.random()*iS
}return ip.resume()
};
ip.resume=function(){return ip.alpha(0.1)
};
ip.stop=function(){return ip.alpha(0)
};
ip.drag=function(){if(!iF){iF=hw.behavior.drag().origin(gw).on("dragstart.force",r).on("drag.force",iA).on("dragend.force",en)
}if(!arguments.length){return iF
}this.on("mouseover.force",cB).on("mouseout.force",eu).call(iF)
};
function iA(iH){iH.px=hw.event.x,iH.py=hw.event.y;
ip.resume()
}return hw.rebind(ip,iD,"on")
};
function r(e){e.fixed|=2
}function en(e){e.fixed&=~6
}function cB(e){e.fixed|=4;
e.px=e.x,e.py=e.y
}function eu(e){e.fixed&=~4
}function gL(iy,it,ix){var iu=0,iq=0;
iy.charge=0;
if(!iy.leaf){var e=iy.nodes,ip=e.length,iv=-1,iw;
while(++iv<ip){iw=e[iv];
if(iw==null){continue
}gL(iw,it,ix);
iy.charge+=iw.charge;
iu+=iw.charge*iw.cx;
iq+=iw.charge*iw.cy
}}if(iy.point){if(!iy.leaf){iy.point.x+=Math.random()-0.5;
iy.point.y+=Math.random()-0.5
}var ir=it*ix[iy.point.index];
iy.charge+=iy.pointCharge=ir;
iu+=ir*iy.point.x;
iq+=ir*iy.point.y
}iy.cx=iu/iy.charge;
iy.cy=iq/iy.charge
}var f4=20,cx=1;
hw.layout.hierarchy=function(){var iq=dY,ip=ba,it=hT;
function ir(ix,iz,iv){var iC=ip.call(e,ix,iz);
ix.depth=iz;
iv.push(ix);
if(iC&&(iw=iC.length)){var iA=-1,iw,iD=ix.children=new Array(iw),iE=0,iy=iz+1,iB;
while(++iA<iw){iB=iD[iA]=ir(iC[iA],iy,iv);
iB.parent=ix;
iE+=iB.value
}if(iq){iD.sort(iq)
}if(it){ix.value=iE
}}else{delete ix.children;
if(it){ix.value=+it.call(e,ix,iz)||0
}}return ix
}function iu(iz,iA){var iy=iz.children,iv=0;
if(iy&&(iB=iy.length)){var ix=-1,iB,iw=iA+1;
while(++ix<iB){iv+=iu(iy[ix],iw)
}}else{if(it){iv=+it.call(e,iz,iA)||0
}}if(it){iz.value=iv
}return iv
}function e(iw){var iv=[];
ir(iw,0,iv);
return iv
}e.sort=function(iv){if(!arguments.length){return iq
}iq=iv;
return e
};
e.children=function(iv){if(!arguments.length){return ip
}ip=iv;
return e
};
e.value=function(iv){if(!arguments.length){return it
}it=iv;
return e
};
e.revalue=function(iv){iu(iv,0);
return iv
};
return e
};
function gD(ip,e){hw.rebind(ip,e,"sort","children","value");
ip.nodes=ip;
ip.links=gH;
return ip
}function ba(e){return e.children
}function hT(e){return e.value
}function dY(ip,e){return e.value-ip.value
}function gH(e){return hw.merge(e.map(function(ip){return(ip.children||[]).map(function(iq){return{source:ip,target:iq}
})
}))
}hw.layout.partition=function(){var iq=hw.layout.hierarchy(),ir=[1,1];
function e(iw,iA,iC,iB){var iu=iw.children;
iw.x=iA;
iw.y=iw.depth*iB;
iw.dx=iC;
iw.dy=iB;
if(iu&&(iv=iu.length)){var ix=-1,iv,iz,iy;
iC=iw.value?iC/iw.value:0;
while(++ix<iv){e(iz=iu[ix],iA,iy=iz.value*iC,iB);
iA+=iy
}}}function it(iw){var iv=iw.children,ix=0;
if(iv&&(iy=iv.length)){var iu=-1,iy;
while(++iu<iy){ix=Math.max(ix,it(iv[iu]))
}}return 1+ix
}function ip(iw,iv){var iu=iq.call(this,iw,iv);
e(iu[0],0,ir[0],ir[1]/it(iu[0]));
return iu
}ip.size=function(iu){if(!arguments.length){return ir
}ir=iu;
return ip
};
return gD(ip,iq)
};
hw.layout.pie=function(){var it=Number,ir=Z,iq=0,ip=gk;
function e(iz){var iw=iz.map(function(iB,iA){return +it.call(e,iB,iA)
});
var iu=+(typeof iq==="function"?iq.apply(this,arguments):iq);
var iv=((typeof ip==="function"?ip.apply(this,arguments):ip)-iu)/hw.sum(iw);
var ix=hw.range(iz.length);
if(ir!=null){ix.sort(ir===Z?function(iB,iA){return iw[iA]-iw[iB]
}:function(iB,iA){return ir(iz[iB],iz[iA])
})
}var iy=[];
ix.forEach(function(iA){var iB;
iy[iA]={data:iz[iA],value:iB=iw[iA],startAngle:iu,endAngle:iu+=iB*iv}
});
return iy
}e.value=function(iu){if(!arguments.length){return it
}it=iu;
return e
};
e.sort=function(iu){if(!arguments.length){return ir
}ir=iu;
return e
};
e.startAngle=function(iu){if(!arguments.length){return iq
}iq=iu;
return e
};
e.endAngle=function(iu){if(!arguments.length){return ip
}ip=iu;
return e
};
return e
};
var Z={};
hw.layout.stack=function(){var ir=gw,iq=bT,iu=fS,it=fT,ip=at,iv=aq;
function e(iD,iF){var iE=iD.map(function(iI,iH){return ir.call(e,iI,iH)
});
var iG=iE.map(function(iH){return iH.map(function(iI,iJ){return[ip.call(e,iI,iJ),iv.call(e,iI,iJ)]
})
});
var iA=iq.call(e,iG,iF);
iE=hw.permute(iE,iA);
iG=hw.permute(iG,iA);
var iz=iu.call(e,iG,iF);
var ix=iE.length,iy=iE[0].length,iC,iB,iw;
for(iB=0;
iB<iy;
++iB){it.call(e,iE[0][iB],iw=iz[iB],iG[0][iB][1]);
for(iC=1;
iC<ix;
++iC){it.call(e,iE[iC][iB],iw+=iG[iC-1][iB][1],iG[iC][iB][1])
}}return iD
}e.values=function(iw){if(!arguments.length){return ir
}ir=iw;
return e
};
e.order=function(iw){if(!arguments.length){return iq
}iq=typeof iw==="function"?iw:a8.get(iw)||bT;
return e
};
e.offset=function(iw){if(!arguments.length){return iu
}iu=typeof iw==="function"?iw:al.get(iw)||fS;
return e
};
e.x=function(iw){if(!arguments.length){return ip
}ip=iw;
return e
};
e.y=function(iw){if(!arguments.length){return iv
}iv=iw;
return e
};
e.out=function(iw){if(!arguments.length){return it
}it=iw;
return e
};
return e
};
function at(e){return e.x
}function aq(e){return e.y
}function fT(ip,e,iq){ip.y0=e;
ip.y=iq
}var a8=hw.map({"inside-out":function(it){var iq=it.length,iu,ir,iy=it.map(bY),iv=it.map(dA),iw=hw.range(iq).sort(function(iB,iA){return iy[iB]-iy[iA]
}),ix=0,e=0,iz=[],ip=[];
for(iu=0;
iu<iq;
++iu){ir=iw[iu];
if(ix<e){ix+=iv[ir];
iz.push(ir)
}else{e+=iv[ir];
ip.push(ir)
}}return ip.reverse().concat(iz)
},reverse:function(e){return hw.range(e.length).reverse()
},"default":bT});
var al=hw.map({silhouette:function(it){var ip=it.length,iq=it[0].length,iv=[],iw=0,iu,ir,e,ix=[];
for(ir=0;
ir<iq;
++ir){for(iu=0,e=0;
iu<ip;
iu++){e+=it[iu][ir][1]
}if(e>iw){iw=e
}iv.push(e)
}for(ir=0;
ir<iq;
++ir){ix[ir]=(iw-iv[ir])/2
}return ix
},wiggle:function(iv){var ip=iv.length,iy=iv[0],iq=iy.length,iw,iu,it,iB,iA,ix,iC,e,ir,iz=[];
iz[0]=e=ir=0;
for(iu=1;
iu<iq;
++iu){for(iw=0,iB=0;
iw<ip;
++iw){iB+=iv[iw][iu][1]
}for(iw=0,iA=0,iC=iy[iu][0]-iy[iu-1][0];
iw<ip;
++iw){for(it=0,ix=(iv[iw][iu][1]-iv[iw][iu-1][1])/(2*iC);
it<iw;
++it){ix+=(iv[it][iu][1]-iv[it][iu-1][1])/iC
}iA+=ix*iv[iw][iu][1]
}iz[iu]=e-=iB?iA/iB*iC:0;
if(e<ir){ir=e
}}for(iu=0;
iu<iq;
++iu){iz[iu]-=ir
}return iz
},expand:function(iu){var iw=iu.length,e=iu[0].length,ip=1/iw,ir,iq,iv,it=[];
for(iq=0;
iq<e;
++iq){for(ir=0,iv=0;
ir<iw;
ir++){iv+=iu[ir][iq][1]
}if(iv){for(ir=0;
ir<iw;
ir++){iu[ir][iq][1]/=iv
}}else{for(ir=0;
ir<iw;
ir++){iu[ir][iq][1]=ip
}}}for(iq=0;
iq<e;
++iq){it[iq]=0
}return it
},zero:fS});
function bT(e){return hw.range(e.length)
}function fS(ir){var ip=-1,e=ir[0].length,iq=[];
while(++ip<e){iq[ip]=0
}return iq
}function bY(iu){var ir=1,iq=0,ip=iu[0][1],e,it=iu.length;
for(;
ir<it;
++ir){if((e=iu[ir][1])>ip){iq=ir;
ip=e
}}return iq
}function dA(e){return e.reduce(fR,0)
}function fR(e,ip){return e+ip[1]
}hw.layout.histogram=function(){var it=true,ip=Number,e=bm,iq=hF;
function ir(ix,iy){var iD=[],iB=ix.map(ip,this),iz=e.call(this,iB,iy),iC=iq.call(this,iz,iB,iy),iE,iy=-1,iu=iB.length,iv=iC.length-1,iw=it?1:1/iu,iA;
while(++iy<iv){iE=iD[iy]=[];
iE.dx=iC[iy+1]-(iE.x=iC[iy]);
iE.y=0
}if(iv>0){iy=-1;
while(++iy<iu){iA=iB[iy];
if(iA>=iz[0]&&iA<=iz[1]){iE=iD[hw.bisect(iC,iA,1,iv)-1];
iE.y+=iw;
iE.push(ix[iy])
}}}return iD
}ir.value=function(iu){if(!arguments.length){return ip
}ip=iu;
return ir
};
ir.range=function(iu){if(!arguments.length){return e
}e=W(iu);
return ir
};
ir.bins=function(iu){if(!arguments.length){return iq
}iq=typeof iu==="number"?function(iv){return h(iv,iu)
}:W(iu);
return ir
};
ir.frequency=function(iu){if(!arguments.length){return it
}it=!!iu;
return ir
};
return ir
};
function hF(ip,e){return h(ip,Math.ceil(Math.log(e.length)/Math.LN2+1))
}function h(ir,iu){var iq=-1,ip=+ir[0],e=(ir[1]-ip)/iu,it=[];
while(++iq<=iu){it[iq]=e*iq+ip
}return it
}function bm(e){return[hw.min(e),hw.max(e)]
}hw.layout.tree=function(){var iq=hw.layout.hierarchy().sort(null).value(null),it=dF,ir=[1,1],ip=false;
function e(iB,iz){var iv=iq.call(this,iB,iz),iD=iv[0];
function iA(iL,iH){var iJ=iL.children,iO=iL._tree;
if(iJ&&(iK=iJ.length)){var iK,iQ=iJ[0],iP,iN=iQ,iI,iM=-1;
while(++iM<iK){iI=iJ[iM];
iA(iI,iP);
iN=iu(iI,iP,iN);
iP=iI
}dI(iL);
var iR=0.5*(iQ._tree.prelim+iI._tree.prelim);
if(iH){iO.prelim=iH._tree.prelim+it(iL,iH);
iO.mod=iO.prelim-iR
}else{iO.prelim=iR
}}else{if(iH){iO.prelim=iH._tree.prelim+it(iL,iH)
}}}function iC(iK,iH){iK.x=iK._tree.prelim+iH;
var iJ=iK.children;
if(iJ&&(iL=iJ.length)){var iI=-1,iL;
iH+=iK._tree.mod;
while(++iI<iL){iC(iJ[iI],iH)
}}}function iu(iL,iH,iO){if(iH){var iK=iL,iJ=iL,iN=iH,iM=iL.parent.children[0],iQ=iK._tree.mod,iP=iJ._tree.mod,iS=iN._tree.mod,iR=iM._tree.mod,iI;
while(iN=aE(iN),iK=h8(iK),iN&&iK){iM=h8(iM);
iJ=aE(iJ);
iJ._tree.ancestor=iL;
iI=iN._tree.prelim+iS-iK._tree.prelim-iQ+it(iN,iK);
if(iI>0){ia(gb(iN,iL,iO),iL,iI);
iQ+=iI;
iP+=iI
}iS+=iN._tree.mod;
iQ+=iK._tree.mod;
iR+=iM._tree.mod;
iP+=iJ._tree.mod
}if(iN&&!aE(iJ)){iJ._tree.thread=iN;
iJ._tree.mod+=iS-iP
}if(iK&&!h8(iM)){iM._tree.thread=iK;
iM._tree.mod+=iQ-iR;
iO=iL
}}return iO
}hN(iD,function(iI,iH){iI._tree={ancestor:iI,prelim:0,mod:0,change:0,shift:0,number:iH?iH._tree.number+1:0}
});
iA(iD);
iC(iD,-iD._tree.prelim);
var iy=eb(iD,bI),iG=eb(iD,c6),iF=eb(iD,H),ix=iy.x-it(iy,iG)/2,iw=iG.x+it(iG,iy)/2,iE=iF.depth||1;
hN(iD,ip?function(iH){iH.x*=ir[0];
iH.y=iH.depth*ir[1];
delete iH._tree
}:function(iH){iH.x=(iH.x-ix)/(iw-ix)*ir[0];
iH.y=iH.depth/iE*ir[1];
delete iH._tree
});
return iv
}e.separation=function(iu){if(!arguments.length){return it
}it=iu;
return e
};
e.size=function(iu){if(!arguments.length){return ip?null:ir
}ip=(ir=iu)==null;
return e
};
e.nodeSize=function(iu){if(!arguments.length){return ip?ir:null
}ip=(ir=iu)!=null;
return e
};
return gD(e,iq)
};
function dF(ip,e){return ip.parent==e.parent?1:2
}function h8(ip){var e=ip.children;
return e&&e.length?e[0]:ip._tree.thread
}function aE(ip){var e=ip.children,iq;
return e&&(iq=e.length)?e[iq-1]:ip._tree.thread
}function eb(iq,ir){var ip=iq.children;
if(ip&&(it=ip.length)){var iu,it,e=-1;
while(++e<it){if(ir(iu=eb(ip[e],ir),iq)>0){iq=iu
}}}return iq
}function c6(ip,e){return ip.x-e.x
}function bI(ip,e){return e.x-ip.x
}function H(ip,e){return ip.depth-e.depth
}function hN(ip,iq){function e(iw,iv){var iu=iw.children;
if(iu&&(ix=iu.length)){var iy,it=null,ir=-1,ix;
while(++ir<ix){iy=iu[ir];
e(iy,it);
it=iy
}}iq(iw,iv)
}e(ip,null)
}function dI(ir){var e=0,iu=0,iq=ir.children,ip=iq.length,it;
while(--ip>=0){it=iq[ip]._tree;
it.prelim+=e;
it.mod+=e;
e+=it.shift+(iu+=it.change)
}}function ia(ip,iq,e){ip=ip._tree;
iq=iq._tree;
var ir=e/(iq.number-ip.number);
ip.change+=ir;
iq.change-=ir;
iq.shift+=e;
iq.prelim+=e;
iq.mod+=e
}function gb(e,iq,ip){return e._tree.ancestor.parent==iq.parent?e._tree.ancestor:ip
}hw.layout.pack=function(){var ip=hw.layout.hierarchy().sort(eJ),it=0,ir=[1,1],e;
function iq(iB,ix){var iw=ip.call(this,iB,ix),iv=iw[0],iu=ir[0],iy=ir[1],iz=e==null?Math.sqrt:typeof e==="function"?e:function(){return e
};
iv.x=iv.y=0;
hN(iv,function(iC){iC.r=+iz(iC.value)
});
hN(iv,Y);
if(it){var iA=it*(e?1:Math.max(2*iv.r/iu,2*iv.r/iy))/2;
hN(iv,function(iC){iC.r+=iA
});
hN(iv,Y);
hN(iv,function(iC){iC.r-=iA
})
}fA(iv,iu/2,iy/2,e?1:1/Math.max(2*iv.r/iu,2*iv.r/iy));
return iw
}iq.size=function(iu){if(!arguments.length){return ir
}ir=iu;
return iq
};
iq.radius=function(iu){if(!arguments.length){return e
}e=iu==null||typeof iu==="function"?iu:+iu;
return iq
};
iq.padding=function(iu){if(!arguments.length){return it
}it=+iu;
return iq
};
return gD(iq,ip)
};
function eJ(ip,e){return ip.value-e.value
}function bS(ip,e){var iq=ip._pack_next;
ip._pack_next=e;
e._pack_prev=ip;
e._pack_next=iq;
iq._pack_prev=e
}function bh(ip,e){ip._pack_next=e;
e._pack_prev=ip
}function ev(iq,e){var ir=e.x-iq.x,ip=e.y-iq.y,it=iq.r+e.r;
return 0.999*it*it>ir*ir+ip*ip
}function Y(iA){if(!(iz=iA.children)||!(iy=iz.length)){return
}var iz,iE=Infinity,iI=-Infinity,e=Infinity,it=-Infinity,iH,iG,iF,iD,iC,iB,iy;
function iq(iJ){iE=Math.min(iJ.x-iJ.r,iE);
iI=Math.max(iJ.x+iJ.r,iI);
e=Math.min(iJ.y-iJ.r,e);
it=Math.max(iJ.y+iJ.r,it)
}iz.forEach(aV);
iH=iz[0];
iH.x=-iH.r;
iH.y=0;
iq(iH);
if(iy>1){iG=iz[1];
iG.x=iG.r;
iG.y=0;
iq(iG);
if(iy>2){iF=iz[2];
bg(iH,iG,iF);
iq(iF);
bS(iH,iF);
iH._pack_prev=iF;
bS(iF,iG);
iG=iH._pack_next;
for(iD=3;
iD<iy;
iD++){bg(iH,iG,iF=iz[iD]);
var ip=0,iu=1,ir=1;
for(iC=iG._pack_next;
iC!==iG;
iC=iC._pack_next,iu++){if(ev(iC,iF)){ip=1;
break
}}if(ip==1){for(iB=iH._pack_prev;
iB!==iC._pack_prev;
iB=iB._pack_prev,ir++){if(ev(iB,iF)){break
}}}if(ip){if(iu<ir||iu==ir&&iG.r<iH.r){bh(iH,iG=iC)
}else{bh(iH=iB,iG)
}iD--
}else{bS(iH,iF);
iG=iF;
iq(iF)
}}}}var iw=(iE+iI)/2,iv=(e+it)/2,ix=0;
for(iD=0;
iD<iy;
iD++){iF=iz[iD];
iF.x-=iw;
iF.y-=iv;
ix=Math.max(ix,iF.r+Math.sqrt(iF.x*iF.x+iF.y*iF.y))
}iA.r=ix;
iz.forEach(eY)
}function aV(e){e._pack_next=e._pack_prev=e
}function eY(e){delete e._pack_next;
delete e._pack_prev
}function fA(it,e,iv,ip){var ir=it.children;
it.x=e+=ip*it.x;
it.y=iv+=ip*it.y;
it.r*=ip;
if(ir){var iq=-1,iu=ir.length;
while(++iq<iu){fA(ir[iq],e,iv,ip)
}}}function bg(it,iq,e){var iv=it.r+e.r,iy=iq.x-it.x,iw=iq.y-it.y;
if(iv&&(iy||iw)){var ix=iq.r+e.r,iu=iy*iy+iw*iw;
ix*=ix;
iv*=iv;
var ir=0.5+(iv-ix)/(2*iu),ip=Math.sqrt(Math.max(0,2*ix*(iv+iu)-(iv-=iu)*iv-ix*ix))/(2*iu);
e.x=it.x+ir*iy+ip*iw;
e.y=it.y+ir*iw-ip*iy
}else{e.x=it.x+iv;
e.y=it.y
}}hw.layout.cluster=function(){var iq=hw.layout.hierarchy().sort(null).value(null),it=dF,ir=[1,1],ip=false;
function e(iz,iy){var iu=iq.call(this,iz,iy),iA=iu[0],iB,iC=0;
hN(iA,function(iF){var iE=iF.children;
if(iE&&iE.length){iF.x=by(iE);
iF.y=bx(iE)
}else{iF.x=iB?iC+=it(iF,iB):0;
iF.y=0;
iB=iF
}});
var ix=eL(iA),iD=dM(iA),iw=ix.x-it(ix,iD)/2,iv=iD.x+it(iD,ix)/2;
hN(iA,ip?function(iE){iE.x=(iE.x-iA.x)*ir[0];
iE.y=(iA.y-iE.y)*ir[1]
}:function(iE){iE.x=(iE.x-iw)/(iv-iw)*ir[0];
iE.y=(1-(iA.y?iE.y/iA.y:1))*ir[1]
});
return iu
}e.separation=function(iu){if(!arguments.length){return it
}it=iu;
return e
};
e.size=function(iu){if(!arguments.length){return ip?null:ir
}ip=(ir=iu)==null;
return e
};
e.nodeSize=function(iu){if(!arguments.length){return ip?ir:null
}ip=(ir=iu)!=null;
return e
};
return gD(e,iq)
};
function bx(e){return 1+hw.max(e,function(ip){return ip.y
})
}function by(e){return e.reduce(function(ip,iq){return ip+iq.x
},0)/e.length
}function eL(ip){var e=ip.children;
return e&&e.length?eL(e[0]):ip
}function dM(ip){var e=ip.children,iq;
return e&&(iq=e.length)?dM(e[iq-1]):ip
}hw.layout.treemap=function(){var ix=hw.layout.hierarchy(),iB=Math.round,iD=[1,1],iy=null,e=fm,iz=false,iv,iu="squarify",iw=0.5*(1+Math.sqrt(5));
function ip(iG,iE){var iF=-1,iJ=iG.length,iI,iH;
while(++iF<iJ){iH=(iI=iG[iF]).value*(iE<0?0:iE);
iI.area=isNaN(iH)||iH<=0?0:iH
}}function ir(iI){var iF=iI.children;
if(iF&&iF.length){var iL=e(iI),iN=[],iK=iF.slice(),iE,iJ=Infinity,iH,iM=iu==="slice"?iL.dx:iu==="dice"?iL.dy:iu==="slice-dice"?iI.depth&1?iL.dy:iL.dx:Math.min(iL.dx,iL.dy),iG;
ip(iK,iL.dx*iL.dy/iI.value);
iN.area=0;
while((iG=iK.length)>0){iN.push(iE=iK[iG-1]);
iN.area+=iE.area;
if(iu!=="squarify"||(iH=iq(iN,iM))<=iJ){iK.pop();
iJ=iH
}else{iN.area-=iN.pop().area;
it(iN,iM,iL,false);
iM=Math.min(iL.dx,iL.dy);
iN.length=iN.area=0;
iJ=Infinity
}}if(iN.length){it(iN,iM,iL,true);
iN.length=iN.area=0
}iF.forEach(ir)
}}function iC(iH){var iE=iH.children;
if(iE&&iE.length){var iG=e(iH),iF=iE.slice(),iJ,iI=[];
ip(iF,iG.dx*iG.dy/iH.value);
iI.area=0;
while(iJ=iF.pop()){iI.push(iJ);
iI.area+=iJ.area;
if(iJ.z!=null){it(iI,iJ.z?iG.dx:iG.dy,iG,!iF.length);
iI.length=iI.area=0
}}iE.forEach(iC)
}}function iq(iJ,iF){var iH=iJ.area,iI,iL=0,iE=Infinity,iG=-1,iK=iJ.length;
while(++iG<iK){if(!(iI=iJ[iG].area)){continue
}if(iI<iE){iE=iI
}if(iI>iL){iL=iI
}}iH*=iH;
iF*=iF;
return iH?Math.max(iF*iL*iw/iH,iH/(iF*iE*iw)):Infinity
}function it(iN,iM,iI,iL){var iG=-1,iF=iN.length,iJ=iI.x,iH=iI.y,iK=iM?iB(iN.area/iM):0,iE;
if(iM==iI.dx){if(iL||iK>iI.dy){iK=iI.dy
}while(++iG<iF){iE=iN[iG];
iE.x=iJ;
iE.y=iH;
iE.dy=iK;
iJ+=iE.dx=Math.min(iI.x+iI.dx-iJ,iK?iB(iE.area/iK):0)
}iE.z=true;
iE.dx+=iI.x+iI.dx-iJ;
iI.y+=iK;
iI.dy-=iK
}else{if(iL||iK>iI.dx){iK=iI.dx
}while(++iG<iF){iE=iN[iG];
iE.x=iJ;
iE.y=iH;
iE.dx=iK;
iH+=iE.dy=Math.min(iI.y+iI.dy-iH,iK?iB(iE.area/iK):0)
}iE.z=false;
iE.dy+=iI.y+iI.dy-iH;
iI.x+=iK;
iI.dx-=iK
}}function iA(iG){var iF=iv||ix(iG),iE=iF[0];
iE.x=0;
iE.y=0;
iE.dx=iD[0];
iE.dy=iD[1];
if(iv){ix.revalue(iE)
}ip([iE],iE.dx*iE.dy/iE.value);
(iv?iC:ir)(iE);
if(iz){iv=iF
}return iF
}iA.size=function(iE){if(!arguments.length){return iD
}iD=iE;
return iA
};
iA.padding=function(iE){if(!arguments.length){return iy
}function iH(iI){var iJ=iE.call(iA,iI,iI.depth);
return iJ==null?fm(iI):a3(iI,typeof iJ==="number"?[iJ,iJ,iJ,iJ]:iJ)
}function iG(iI){return a3(iI,iE)
}var iF;
e=(iy=iE)==null?fm:(iF=typeof iE)==="function"?iH:iF==="number"?(iE=[iE,iE,iE,iE],iG):iG;
return iA
};
iA.round=function(iE){if(!arguments.length){return iB!=Number
}iB=iE?Math.round:Number;
return iA
};
iA.sticky=function(iE){if(!arguments.length){return iz
}iz=iE;
iv=null;
return iA
};
iA.ratio=function(iE){if(!arguments.length){return iw
}iw=iE;
return iA
};
iA.mode=function(iE){if(!arguments.length){return iu
}iu=iE+"";
return iA
};
return gD(iA,ix)
};
function fm(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}
}function a3(ir,it){var e=ir.x+it[3],iu=ir.y+it[0],iq=ir.dx-it[1]-it[3],ip=ir.dy-it[0]-it[2];
if(iq<0){e+=iq/2;
iq=0
}if(ip<0){iu+=ip/2;
ip=0
}return{x:e,y:iu,dx:iq,dy:ip}
}hw.random={normal:function(ip,e){var iq=arguments.length;
if(iq<2){e=1
}if(iq<1){ip=0
}return function(){var ir,iu,it;
do{ir=Math.random()*2-1;
iu=Math.random()*2-1;
it=ir*ir+iu*iu
}while(!it||it>1);
return ip+e*ir*Math.sqrt(-2*Math.log(it)/it)
}
},logNormal:function(){var e=hw.random.normal.apply(hw,arguments);
return function(){return Math.exp(e())
}
},bates:function(e){var ip=hw.random.irwinHall(e);
return function(){return ip()/e
}
},irwinHall:function(e){return function(){for(var iq=0,ip=0;
ip<e;
ip++){iq+=Math.random()
}return iq
}
}};
hw.scale={};
function eB(ip){var iq=ip[0],e=ip[ip.length-1];
return iq<e?[iq,e]:[e,iq]
}function a2(e){return e.rangeExtent?e.rangeExtent():eB(e.range())
}function aJ(it,e,iu,iq){var ip=iu(it[0],it[1]),ir=iq(e[0],e[1]);
return function(iv){return ir(ip(iv))
}
}function gu(iv,it){var iu=0,ir=iv.length-1,iq=iv[iu],ip=iv[ir],e;
if(ip<iq){e=iu,iu=ir,ir=e;
e=iq,iq=ip,ip=e
}iv[iu]=it.floor(iq);
iv[ir]=it.ceil(ip);
return iv
}function a9(e){return e?{floor:function(ip){return Math.floor(ip/e)*e
},ceil:function(ip){return Math.ceil(ip/e)*e
}}:eK
}var eK={floor:gw,ceil:gw};
function Q(iv,ip,iw,it){var ir=[],iu=[],iq=0,e=Math.min(iv.length,ip.length)-1;
if(iv[e]<iv[0]){iv=iv.slice().reverse();
ip=ip.slice().reverse()
}while(++iq<=e){ir.push(iw(iv[iq-1],iv[iq]));
iu.push(it(ip[iq-1],ip[iq]))
}return function(ix){var iy=hw.bisect(iv,ix,1,e)-1;
return iu[iy](ir[iy](ix))
}
}hw.scale.linear=function(){return et([0,1],[0,1],fQ,false)
};
function et(iu,ir,it,iw){var iq,ip;
function e(){var ix=Math.min(iu.length,ir.length)>2?Q:aJ,iy=iw?aD:hE;
iq=ix(iu,ir,iy,it);
ip=ix(ir,iu,iy,fQ);
return iv
}function iv(ix){return iq(ix)
}iv.invert=function(ix){return ip(ix)
};
iv.domain=function(ix){if(!arguments.length){return iu
}iu=ix.map(Number);
return e()
};
iv.range=function(ix){if(!arguments.length){return ir
}ir=ix;
return e()
};
iv.rangeRound=function(ix){return iv.range(ix).interpolate(fL)
};
iv.clamp=function(ix){if(!arguments.length){return iw
}iw=ix;
return e()
};
iv.interpolate=function(ix){if(!arguments.length){return it
}it=ix;
return e()
};
iv.ticks=function(ix){return fc(iu,ix)
};
iv.tickFormat=function(ix,iy){return fo(iu,ix,iy)
};
iv.nice=function(ix){aR(iu,ix);
return e()
};
iv.copy=function(){return et(iu,ir,it,iw)
};
return e()
}function gm(ip,e){return hw.rebind(ip,e,"range","rangeRound","interpolate","clamp")
}function aR(ip,e){return gu(ip,a9(q(ip,e)[2]))
}function q(iu,e){if(e==null){e=10
}var iq=eB(iu),ip=iq[1]-iq[0],it=Math.pow(10,Math.floor(Math.log(ip/e)/Math.LN10)),ir=e/ip*it;
if(ir<=0.15){it*=10
}else{if(ir<=0.35){it*=5
}else{if(ir<=0.75){it*=2
}}}iq[0]=Math.ceil(iq[0]/it)*it;
iq[1]=Math.floor(iq[1]/it)*it+it*0.5;
iq[2]=it;
return iq
}function fc(ip,e){return hw.range.apply(hw,q(ip,e))
}function fo(iq,e,ir){var ip=q(iq,e);
return hw.format(ir?ir.replace(cE,function(iC,iB,iA,iz,iy,ix,iw,iv,iu,it){return[iB,iA,iz,iy,ix,iw,iv,iu||"."+A(it,ip),it].join("")
}):",."+g5(ip[2])+"f")
}var h7={s:1,g:1,p:1,r:1,e:1};
function g5(e){return -Math.floor(Math.log(e)/Math.LN10+0.01)
}function A(ip,e){var iq=g5(e[2]);
return ip in h7?Math.abs(iq-g5(Math.max(Math.abs(e[0]),Math.abs(e[1]))))+ +(ip!=="e"):iq-(ip==="%")*2
}hw.scale.log=function(){return gR(hw.scale.linear().domain([0,1]),10,true,[1,10])
};
function gR(ip,iu,e,it){function iq(iw){return(e?Math.log(iw<0?0:iw):-Math.log(iw>0?0:-iw))/Math.log(iu)
}function ir(iw){return e?Math.pow(iu,iw):-Math.pow(iu,-iw)
}function iv(iw){return ip(iq(iw))
}iv.invert=function(iw){return ir(ip.invert(iw))
};
iv.domain=function(iw){if(!arguments.length){return it
}e=iw[0]>=0;
ip.domain((it=iw.map(Number)).map(iq));
return iv
};
iv.base=function(iw){if(!arguments.length){return iu
}iu=+iw;
ip.domain(it.map(iq));
return iv
};
iv.nice=function(){var iw=gu(it.map(iq),e?Math:gV);
ip.domain(iw);
it=iw.map(ir);
return iv
};
iv.ticks=function(){var iB=eB(it),iC=[],iz=iB[0],ix=iB[1],iA=Math.floor(iq(iz)),iy=Math.ceil(iq(ix)),iD=iu%1?2:iu;
if(isFinite(iy-iA)){if(e){for(;
iA<iy;
iA++){for(var iw=1;
iw<iD;
iw++){iC.push(ir(iA)*iw)
}}iC.push(ir(iA))
}else{iC.push(ir(iA));
for(;
iA++<iy;
){for(var iw=iD-1;
iw>0;
iw--){iC.push(ir(iA)*iw)
}}}for(iA=0;
iC[iA]<iz;
iA++){}for(iy=iC.length;
iC[iy-1]>ix;
iy--){}iC=iC.slice(iA,iy)
}return iC
};
iv.tickFormat=function(iA,iz){if(!arguments.length){return dz
}if(arguments.length<2){iz=dz
}else{if(typeof iz!=="function"){iz=hw.format(iz)
}}var iw=Math.max(0.1,iA/iv.ticks().length),ix=e?(iy=1e-12,Math.ceil):(iy=-1e-12,Math.floor),iy;
return function(iB){return iB/ir(ix(iq(iB)+iy))<=iw?iz(iB):""
}
};
iv.copy=function(){return gR(ip.copy(),iu,e,it)
};
return gm(iv,ip)
}var dz=hw.format(".0e"),gV={floor:function(e){return -Math.ceil(-e)
},ceil:function(e){return -Math.floor(-e)
}};
hw.scale.pow=function(){return gC(hw.scale.linear(),1,[0,1])
};
function gC(e,ir,iq){var ip=f7(ir),it=f7(1/ir);
function iu(iv){return e(ip(iv))
}iu.invert=function(iv){return it(e.invert(iv))
};
iu.domain=function(iv){if(!arguments.length){return iq
}e.domain((iq=iv.map(Number)).map(ip));
return iu
};
iu.ticks=function(iv){return fc(iq,iv)
};
iu.tickFormat=function(iv,iw){return fo(iq,iv,iw)
};
iu.nice=function(iv){return iu.domain(aR(iq,iv))
};
iu.exponent=function(iv){if(!arguments.length){return ir
}ip=f7(ir=iv);
it=f7(1/ir);
e.domain(iq.map(ip));
return iu
};
iu.copy=function(){return gC(e.copy(),ir,iq)
};
return gm(iu,e)
}function f7(ip){return function(e){return e<0?-Math.pow(-e,ip):Math.pow(e,ip)
}
}hw.scale.sqrt=function(){return hw.scale.pow().exponent(0.5)
};
hw.scale.ordinal=function(){return cw([],{t:"range",a:[[]]})
};
function cw(iu,iq){var it,ip,ir;
function iv(iw){return ip[((it.get(iw)||iq.t==="range"&&it.set(iw,iu.push(iw)))-1)%ip.length]
}function e(ix,iw){return hw.range(iu.length).map(function(iy){return ix+iw*iy
})
}iv.domain=function(iw){if(!arguments.length){return iu
}iu=[];
it=new aL();
var iy=-1,iz=iw.length,ix;
while(++iy<iz){if(!it.has(ix=iw[iy])){it.set(ix,iu.push(ix))
}}return iv[iq.t].apply(iv,iq.a)
};
iv.range=function(iw){if(!arguments.length){return ip
}ip=iw;
ir=0;
iq={t:"range",a:arguments};
return iv
};
iv.rangePoints=function(iw,iz){if(arguments.length<2){iz=0
}var iA=iw[0],ix=iw[1],iy=(ix-iA)/(Math.max(1,iu.length-1)+iz);
ip=e(iu.length<2?(iA+ix)/2:iA+iy*iz/2,iy);
ir=0;
iq={t:"rangePoints",a:arguments};
return iv
};
iv.rangeBands=function(ix,iB,iw){if(arguments.length<2){iB=0
}if(arguments.length<3){iw=iB
}var iy=ix[1]<ix[0],iC=ix[iy-0],iz=ix[1-iy],iA=(iz-iC)/(iu.length-iB+2*iw);
ip=e(iC+iA*iw,iA);
if(iy){ip.reverse()
}ir=iA*(1-iB);
iq={t:"rangeBands",a:arguments};
return iv
};
iv.rangeRoundBands=function(ix,iC,iw){if(arguments.length<2){iC=0
}if(arguments.length<3){iw=iC
}var iz=ix[1]<ix[0],iD=ix[iz-0],iA=ix[1-iz],iB=Math.floor((iA-iD)/(iu.length-iC+2*iw)),iy=iA-iD-(iu.length-iC)*iB;
ip=e(iD+Math.round(iy/2),iB);
if(iz){ip.reverse()
}ir=Math.round(iB*(1-iC));
iq={t:"rangeRoundBands",a:arguments};
return iv
};
iv.rangeBand=function(){return ir
};
iv.rangeExtent=function(){return eB(iq.a[0])
};
iv.copy=function(){return cw(iu,iq)
};
return iv.domain(iu)
}hw.scale.category10=function(){return hw.scale.ordinal().range(cF)
};
hw.scale.category20=function(){return hw.scale.ordinal().range(ck)
};
hw.scale.category20b=function(){return hw.scale.ordinal().range(hl)
};
hw.scale.category20c=function(){return hw.scale.ordinal().range(hj)
};
var cF=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dC);
var ck=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dC);
var hl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dC);
var hj=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dC);
hw.scale.quantile=function(){return E([],[])
};
function E(iq,ip){var ir;
function e(){var iu=0,iv=ip.length;
ir=[];
while(++iu<iv){ir[iu-1]=hw.quantile(iq,iu/iv)
}return it
}function it(iu){if(!isNaN(iu=+iu)){return ip[hw.bisect(ir,iu)]
}}it.domain=function(iu){if(!arguments.length){return iq
}iq=iu.filter(function(iv){return !isNaN(iv)
}).sort(hw.ascending);
return e()
};
it.range=function(iu){if(!arguments.length){return ip
}ip=iu;
return e()
};
it.quantiles=function(){return ir
};
it.invertExtent=function(iu){iu=ip.indexOf(iu);
return iu<0?[NaN,NaN]:[iu>0?ir[iu-1]:iq[0],iu<ir.length?ir[iu]:iq[iq.length-1]]
};
it.copy=function(){return E(iq,ip)
};
return e()
}hw.scale.quantize=function(){return dL(0,1,[0,1])
};
function dL(it,iq,ip){var iu,ir;
function iv(iw){return ip[Math.max(0,Math.min(ir,Math.floor(iu*(iw-it))))]
}function e(){iu=ip.length/(iq-it);
ir=ip.length-1;
return iv
}iv.domain=function(iw){if(!arguments.length){return[it,iq]
}it=+iw[0];
iq=+iw[iw.length-1];
return e()
};
iv.range=function(iw){if(!arguments.length){return ip
}ip=iw;
return e()
};
iv.invertExtent=function(iw){iw=ip.indexOf(iw);
iw=iw<0?NaN:iw/iu+it;
return[iw,iw+1/iu]
};
iv.copy=function(){return dL(it,iq,ip)
};
return e()
}hw.scale.threshold=function(){return gh([0.5],[0,1])
};
function gh(ip,e){function iq(ir){if(ir<=ir){return e[hw.bisect(ip,ir)]
}}iq.domain=function(ir){if(!arguments.length){return ip
}ip=ir;
return iq
};
iq.range=function(ir){if(!arguments.length){return e
}e=ir;
return iq
};
iq.invertExtent=function(ir){ir=e.indexOf(ir);
return[ip[ir-1],ip[ir]]
};
iq.copy=function(){return gh(ip,e)
};
return iq
}hw.scale.identity=function(){return e2([0,1])
};
function e2(ip){function e(iq){return +iq
}e.invert=e;
e.domain=e.range=function(iq){if(!arguments.length){return ip
}ip=iq.map(e);
return e
};
e.ticks=function(iq){return fc(ip,iq)
};
e.tickFormat=function(iq,ir){return fo(ip,iq,ir)
};
e.copy=function(){return e2(ip)
};
return e
}hw.svg={};
hw.svg.arc=function(){var it=bC,ir=cX,iq=gs,e=au;
function ip(){var ix=it.apply(this,arguments),iw=ir.apply(this,arguments),iv=iq.apply(this,arguments)+hQ,iu=e.apply(this,arguments)+hQ,iD=(iu<iv&&(iD=iv,iv=iu,iu=iD),iu-iv),iA=iD<gp?"0":"1",iz=Math.cos(iv),iC=Math.sin(iv),iy=Math.cos(iu),iB=Math.sin(iu);
return iD>=hV?ix?"M0,"+iw+"A"+iw+","+iw+" 0 1,1 0,"+-iw+"A"+iw+","+iw+" 0 1,1 0,"+iw+"M0,"+ix+"A"+ix+","+ix+" 0 1,0 0,"+-ix+"A"+ix+","+ix+" 0 1,0 0,"+ix+"Z":"M0,"+iw+"A"+iw+","+iw+" 0 1,1 0,"+-iw+"A"+iw+","+iw+" 0 1,1 0,"+iw+"Z":ix?"M"+iw*iz+","+iw*iC+"A"+iw+","+iw+" 0 "+iA+",1 "+iw*iy+","+iw*iB+"L"+ix*iy+","+ix*iB+"A"+ix+","+ix+" 0 "+iA+",0 "+ix*iz+","+ix*iC+"Z":"M"+iw*iz+","+iw*iC+"A"+iw+","+iw+" 0 "+iA+",1 "+iw*iy+","+iw*iB+"L0,0Z"
}ip.innerRadius=function(iu){if(!arguments.length){return it
}it=W(iu);
return ip
};
ip.outerRadius=function(iu){if(!arguments.length){return ir
}ir=W(iu);
return ip
};
ip.startAngle=function(iu){if(!arguments.length){return iq
}iq=W(iu);
return ip
};
ip.endAngle=function(iu){if(!arguments.length){return e
}e=W(iu);
return ip
};
ip.centroid=function(){var iv=(it.apply(this,arguments)+ir.apply(this,arguments))/2,iu=(iq.apply(this,arguments)+e.apply(this,arguments))/2+hQ;
return[Math.cos(iu)*iv,Math.sin(iu)*iv]
};
return ip
};
var hQ=-ey,hV=gk-gz;
function bC(e){return e.innerRadius
}function cX(e){return e.outerRadius
}function gs(e){return e.startAngle
}function au(e){return e.endAngle
}function fn(ip){var e=h4,iw=h3,iv=am,ir=h1,iu=ir.key,it=0.7;
function iq(iA){var iC=[],iF=[],iB=-1,ix=iA.length,iE,iz=W(e),iy=W(iw);
function iD(){iC.push("M",ir(ip(iF),it))
}while(++iB<ix){if(iv.call(this,iE=iA[iB],iB)){iF.push([+iz.call(this,iE,iB),+iy.call(this,iE,iB)])
}else{if(iF.length){iD();
iF=[]
}}}if(iF.length){iD()
}return iC.length?iC.join(""):null
}iq.x=function(ix){if(!arguments.length){return e
}e=ix;
return iq
};
iq.y=function(ix){if(!arguments.length){return iw
}iw=ix;
return iq
};
iq.defined=function(ix){if(!arguments.length){return iv
}iv=ix;
return iq
};
iq.interpolate=function(ix){if(!arguments.length){return iu
}if(typeof ix==="function"){iu=ir=ix
}else{iu=(ir=cf.get(ix)||h1).key
}return iq
};
iq.tension=function(ix){if(!arguments.length){return it
}it=ix;
return iq
};
return iq
}hw.svg.line=function(){return fn(gw)
};
var cf=hw.map({linear:h1,"linear-closed":ae,step:dg,"step-before":bo,"step-after":hG,basis:fs,"basis-open":bl,"basis-closed":cS,bundle:cV,cardinal:d1,"cardinal-open":b5,"cardinal-closed":s,monotone:dq});
cf.forEach(function(e,ip){ip.key=e;
ip.closed=/-closed$/.test(e)
});
function h1(e){return e.join("L")
}function ae(e){return h1(e)+"Z"
}function dg(ip){var e=0,it=ip.length,ir=ip[0],iq=[ir[0],",",ir[1]];
while(++e<it){iq.push("H",(ir[0]+(ir=ip[e])[0])/2,"V",ir[1])
}if(it>1){iq.push("H",ir[0])
}return iq.join("")
}function bo(ip){var e=0,it=ip.length,ir=ip[0],iq=[ir[0],",",ir[1]];
while(++e<it){iq.push("V",(ir=ip[e])[1],"H",ir[0])
}return iq.join("")
}function hG(ip){var e=0,it=ip.length,ir=ip[0],iq=[ir[0],",",ir[1]];
while(++e<it){iq.push("H",(ir=ip[e])[0],"V",ir[1])
}return iq.join("")
}function b5(ip,e){return ip.length<4?h1(ip):ip[1]+c3(ip.slice(1,ip.length-1),bX(ip,e))
}function s(ip,e){return ip.length<3?h1(ip):ip[0]+c3((ip.push(ip[0]),ip),bX([ip[ip.length-2]].concat(ip,[ip[1]]),e))
}function d1(ip,e){return ip.length<3?h1(ip):ip[0]+c3(ip,bX(ip,e))
}function c3(iv,iu){if(iu.length<1||iv.length!=iu.length&&iv.length!=iu.length+2){return h1(iv)
}var iw=iv.length!=iu.length,iz="",ix=iv[0],e=iv[1],it=iu[0],iy=it,iq=1;
if(iw){iz+="Q"+(e[0]-it[0]*2/3)+","+(e[1]-it[1]*2/3)+","+e[0]+","+e[1];
ix=iv[1];
iq=2
}if(iu.length>1){iy=iu[1];
e=iv[iq];
iq++;
iz+="C"+(ix[0]+it[0])+","+(ix[1]+it[1])+","+(e[0]-iy[0])+","+(e[1]-iy[1])+","+e[0]+","+e[1];
for(var ip=2;
ip<iu.length;
ip++,iq++){e=iv[iq];
iy=iu[ip];
iz+="S"+(e[0]-iy[0])+","+(e[1]-iy[1])+","+e[0]+","+e[1]
}}if(iw){var ir=iv[iq];
iz+="Q"+(e[0]+iy[0]*2/3)+","+(e[1]+iy[1]*2/3)+","+ir[0]+","+ir[1]
}return iz
}function bX(iv,it){var iq=[],ir=(1-it)/2,ix,iw=iv[0],iu=iv[1],ip=1,e=iv.length;
while(++ip<e){ix=iw;
iw=iu;
iu=iv[ip];
iq.push([ir*(iu[0]-ix[0]),ir*(iu[1]-ix[1])])
}return iq
}function fs(iw){if(iw.length<3){return h1(iw)
}var iq=1,ip=iw.length,ir=iw[0],e=ir[0],iu=ir[1],iv=[e,e,e,(ir=iw[1])[0]],it=[iu,iu,iu,ir[1]],ix=[e,",",iu,"L",gy(hv,iv),",",gy(hv,it)];
iw.push(iw[ip-1]);
while(++iq<=ip){ir=iw[iq];
iv.shift();
iv.push(ir[0]);
it.shift();
it.push(ir[1]);
bR(ix,iv,it)
}iw.pop();
ix.push("L",ir);
return ix.join("")
}function bl(ir){if(ir.length<4){return h1(ir)
}var iu=[],iq=-1,iv=ir.length,it,ip=[0],e=[0];
while(++iq<3){it=ir[iq];
ip.push(it[0]);
e.push(it[1])
}iu.push(gy(hv,ip)+","+gy(hv,e));
--iq;
while(++iq<iv){it=ir[iq];
ip.shift();
ip.push(it[0]);
e.shift();
e.push(it[1]);
bR(iu,ip,e)
}return iu.join("")
}function cS(it){var iv,ir=-1,iw=it.length,e=iw+4,iu,iq=[],ip=[];
while(++ir<4){iu=it[ir%iw];
iq.push(iu[0]);
ip.push(iu[1])
}iv=[gy(hv,iq),",",gy(hv,ip)];
--ir;
while(++ir<e){iu=it[ir%iw];
iq.shift();
iq.push(iu[0]);
ip.shift();
ip.push(iu[1]);
bR(iv,iq,ip)
}return iv.join("")
}function cV(iv,iu){var iq=iv.length-1;
if(iq){var ip=iv[0][0],it=iv[0][1],iy=iv[iq][0]-ip,ix=iv[iq][1]-it,ir=-1,e,iw;
while(++ir<=iq){e=iv[ir];
iw=ir/iq;
e[0]=iu*e[0]+(1-iu)*(ip+iw*iy);
e[1]=iu*e[1]+(1-iu)*(it+iw*ix)
}}return fs(iv)
}function gy(ip,e){return ip[0]*e[0]+ip[1]*e[1]+ip[2]*e[2]+ip[3]*e[3]
}var hz=[0,2/3,1/3,0],hx=[0,1/3,2/3,0],hv=[0,1/6,2/3,1/6];
function bR(ip,e,iq){ip.push("C",gy(hz,e),",",gy(hz,iq),",",gy(hx,e),",",gy(hx,iq),",",gy(hv,e),",",gy(hv,iq))
}function ie(ip,e){return(e[1]-ip[1])/(e[0]-ip[0])
}function ei(ir){var iq=0,ip=ir.length-1,e=[],iv=ir[0],iu=ir[1],it=e[0]=ie(iv,iu);
while(++iq<ip){e[iq]=(it+(it=ie(iv=iu,iu=ir[iq+1])))/2
}e[iq]=it;
return e
}function ay(iw){var it=[],ir,iv,iu,ix,e=ei(iw),iq=-1,ip=iw.length-1;
while(++iq<ip){ir=ie(iw[iq],iw[iq+1]);
if(cL(ir)<gz){e[iq]=e[iq+1]=0
}else{iv=e[iq]/ir;
iu=e[iq+1]/ir;
ix=iv*iv+iu*iu;
if(ix>9){ix=ir*3/Math.sqrt(ix);
e[iq]=ix*iv;
e[iq+1]=ix*iu
}}}iq=-1;
while(++iq<=ip){ix=(iw[Math.min(ip,iq+1)][0]-iw[Math.max(0,iq-1)][0])/(6*(1+e[iq]*e[iq]));
it.push([ix||0,e[iq]*ix||0])
}return it
}function dq(e){return e.length<3?h1(e):e[0]+c3(e,ay(e))
}hw.svg.line.radial=function(){var e=fn(T);
e.radius=e.x,delete e.x;
e.angle=e.y,delete e.y;
return e
};
function T(ir){var e,iq=-1,iu=ir.length,it,ip;
while(++iq<iu){e=ir[iq];
it=e[0];
ip=e[1]+hQ;
e[0]=it*Math.cos(ip);
e[1]=it*Math.sin(ip)
}return ir
}function ii(it){var iq=h4,ip=h4,iz=0,ix=h3,ir=am,iu=h1,iA=iu.key,iw=iu,iv="L",iy=0.7;
function e(iF){var iH=[],iB=[],iO=[],iG=-1,iC=iF.length,iJ,iE=W(iq),iN=W(iz),iD=iq===ip?function(){return iL
}:W(ip),iM=iz===ix?function(){return iK
}:W(ix),iL,iK;
function iI(){iH.push("M",iu(it(iO),iy),iv,iw(it(iB.reverse()),iy),"Z")
}while(++iG<iC){if(ir.call(this,iJ=iF[iG],iG)){iB.push([iL=+iE.call(this,iJ,iG),iK=+iN.call(this,iJ,iG)]);
iO.push([+iD.call(this,iJ,iG),+iM.call(this,iJ,iG)])
}else{if(iB.length){iI();
iB=[];
iO=[]
}}}if(iB.length){iI()
}return iH.length?iH.join(""):null
}e.x=function(iB){if(!arguments.length){return ip
}iq=ip=iB;
return e
};
e.x0=function(iB){if(!arguments.length){return iq
}iq=iB;
return e
};
e.x1=function(iB){if(!arguments.length){return ip
}ip=iB;
return e
};
e.y=function(iB){if(!arguments.length){return ix
}iz=ix=iB;
return e
};
e.y0=function(iB){if(!arguments.length){return iz
}iz=iB;
return e
};
e.y1=function(iB){if(!arguments.length){return ix
}ix=iB;
return e
};
e.defined=function(iB){if(!arguments.length){return ir
}ir=iB;
return e
};
e.interpolate=function(iB){if(!arguments.length){return iA
}if(typeof iB==="function"){iA=iu=iB
}else{iA=(iu=cf.get(iB)||h1).key
}iw=iu.reverse||iu;
iv=iu.closed?"M":"L";
return e
};
e.tension=function(iB){if(!arguments.length){return iy
}iy=iB;
return e
};
return e
}bo.reverse=hG;
hG.reverse=bo;
hw.svg.area=function(){return ii(gw)
};
hw.svg.area.radial=function(){var e=ii(T);
e.radius=e.x,delete e.x;
e.innerRadius=e.x0,delete e.x0;
e.outerRadius=e.x1,delete e.x1;
e.angle=e.y,delete e.y;
e.startAngle=e.y0,delete e.y0;
e.endAngle=e.y1,delete e.y1;
return e
};
hw.svg.chord=function(){var e=hR,iw=h0,iv=L,ix=gs,it=au;
function iu(iC,iA){var iB=iy(this,e,iC,iA),iz=iy(this,iw,iC,iA);
return"M"+iB.p0+ip(iB.r,iB.p1,iB.a1-iB.a0)+(iq(iB,iz)?ir(iB.r,iB.p1,iB.r,iB.p0):ir(iB.r,iB.p1,iz.r,iz.p0)+ip(iz.r,iz.p1,iz.a1-iz.a0)+ir(iz.r,iz.p1,iB.r,iB.p0))+"Z"
}function iy(iC,iF,iG,iD){var iB=iF.call(iC,iG,iD),iE=iv.call(iC,iB,iD),iA=ix.call(iC,iB,iD)+hQ,iz=it.call(iC,iB,iD)+hQ;
return{r:iE,a0:iA,a1:iz,p0:[iE*Math.cos(iA),iE*Math.sin(iA)],p1:[iE*Math.cos(iz),iE*Math.sin(iz)]}
}function iq(iA,iz){return iA.a0==iz.a0&&iA.a1==iz.a1
}function ip(iA,iB,iz){return"A"+iA+","+iA+" 0 "+ +(iz>gp)+",1 "+iB
}function ir(iA,iC,iz,iB){return"Q 0,0 "+iB
}iu.radius=function(iz){if(!arguments.length){return iv
}iv=W(iz);
return iu
};
iu.source=function(iz){if(!arguments.length){return e
}e=W(iz);
return iu
};
iu.target=function(iz){if(!arguments.length){return iw
}iw=W(iz);
return iu
};
iu.startAngle=function(iz){if(!arguments.length){return ix
}ix=W(iz);
return iu
};
iu.endAngle=function(iz){if(!arguments.length){return it
}it=W(iz);
return iu
};
return iu
};
function L(e){return e.radius
}hw.svg.diagonal=function(){var iq=hR,ir=h0,e=m;
function ip(ix,iu){var iy=iq.call(this,ix,iu),iv=ir.call(this,ix,iu),it=(iy.y+iv.y)/2,iw=[iy,{x:iy.x,y:it},{x:iv.x,y:it},iv];
iw=iw.map(e);
return"M"+iw[0]+"C"+iw[1]+" "+iw[2]+" "+iw[3]
}ip.source=function(it){if(!arguments.length){return iq
}iq=W(it);
return ip
};
ip.target=function(it){if(!arguments.length){return ir
}ir=W(it);
return ip
};
ip.projection=function(it){if(!arguments.length){return e
}e=it;
return ip
};
return ip
};
function m(e){return[e.x,e.y]
}hw.svg.diagonal.radial=function(){var iq=hw.svg.diagonal(),e=m,ip=iq.projection;
iq.projection=function(ir){return arguments.length?ip(n(e=ir)):e
};
return iq
};
function n(e){return function(){var ir=e.apply(this,arguments),iq=ir[0],ip=ir[1]+hQ;
return[iq*Math.cos(ip),iq*Math.sin(ip)]
}
}hw.svg.symbol=function(){var ip=aY,e=fi;
function iq(it,ir){return(hX.get(ip.call(this,it,ir))||ch)(e.call(this,it,ir))
}iq.type=function(ir){if(!arguments.length){return ip
}ip=W(ir);
return iq
};
iq.size=function(ir){if(!arguments.length){return e
}e=W(ir);
return iq
};
return iq
};
function fi(){return 64
}function aY(){return"circle"
}function ch(e){var ip=Math.sqrt(e/gp);
return"M0,"+ip+"A"+ip+","+ip+" 0 1,1 0,"+-ip+"A"+ip+","+ip+" 0 1,1 0,"+ip+"Z"
}var hX=hw.map({circle:ch,cross:function(e){var ip=Math.sqrt(e/5)/2;
return"M"+-3*ip+","+-ip+"H"+-ip+"V"+-3*ip+"H"+ip+"V"+-ip+"H"+3*ip+"V"+ip+"H"+ip+"V"+3*ip+"H"+-ip+"V"+ip+"H"+-3*ip+"Z"
},diamond:function(e){var ip=Math.sqrt(e/(2*cp)),iq=ip*cp;
return"M0,"+-ip+"L"+iq+",0 0,"+ip+" "+-iq+",0Z"
},square:function(e){var ip=Math.sqrt(e)/2;
return"M"+-ip+","+-ip+"L"+ip+","+-ip+" "+ip+","+ip+" "+-ip+","+ip+"Z"
},"triangle-down":function(e){var iq=Math.sqrt(e/b9),ip=iq*b9/2;
return"M0,"+ip+"L"+iq+","+-ip+" "+-iq+","+-ip+"Z"
},"triangle-up":function(e){var iq=Math.sqrt(e/b9),ip=iq*b9/2;
return"M0,"+-ip+"L"+iq+","+ip+" "+-iq+","+ip+"Z"
}});
hw.svg.symbolTypes=hX.keys();
var b9=Math.sqrt(3),cp=Math.tan(30*N);
function g0(e,ip){ih(e,eD);
e.id=ip;
return e
}var eD=[],hk=0,aw,ee;
eD.call=d7.call;
eD.empty=d7.empty;
eD.node=d7.node;
eD.size=d7.size;
hw.transition=function(e){return arguments.length?aw?e.transition():e:g2.transition()
};
hw.transition.prototype=eD;
eD.select=function(iv){var e=this.id,ir=[],iz,ip,it;
iv=B(iv);
for(var iw=-1,iu=this.length;
++iw<iu;
){ir.push(iz=[]);
for(var iy=this[iw],ix=-1,iq=iy.length;
++ix<iq;
){if((it=iy[ix])&&(ip=iv.call(it,it.__data__,ix,iw))){if("__data__" in it){ip.__data__=it.__data__
}fP(ip,ix,e,it.__transition__[e]);
iz.push(ip)
}else{iz.push(null)
}}}return g0(ir,e)
};
eD.selectAll=function(ix){var ip=this.id,iu=[],iD,e,iw,iq,iB;
ix=c7(ix);
for(var iz=-1,iv=this.length;
++iz<iv;
){for(var iC=this[iz],iA=-1,it=iC.length;
++iA<it;
){if(iw=iC[iA]){iB=iw.__transition__[ip];
e=ix.call(iw,iw.__data__,iA,iz);
iu.push(iD=[]);
for(var iy=-1,ir=e.length;
++iy<ir;
){if(iq=e[iy]){fP(iq,iy,ip,iB)
}iD.push(iq)
}}}}return g0(iu,ip)
};
eD.filter=function(e){var iq=[],ix,iw,ir;
if(typeof e!=="function"){e=bb(e)
}for(var iu=0,it=this.length;
iu<it;
iu++){iq.push(ix=[]);
for(var iw=this[iu],iv=0,ip=iw.length;
iv<ip;
iv++){if((ir=iw[iv])&&e.call(ir,ir.__data__,iv,iu)){ix.push(ir)
}}}return g0(iq,this.id)
};
eD.tween=function(e,ip){var iq=this.id;
if(arguments.length<2){return this.node().__transition__[iq].tween.get(e)
}return cN(this,ip==null?function(ir){ir.__transition__[iq].tween.remove(e)
}:function(ir){ir.__transition__[iq].tween.set(e,ip)
})
};
function hW(e,ip,ir,iq){var it=e.id;
return cN(e,typeof ir==="function"?function(iw,iv,iu){iw.__transition__[it].tween.set(ip,iq(ir.call(iw,iw.__data__,iv,iu)))
}:(ir=iq(ir),function(iu){iu.__transition__[it].tween.set(ip,ir)
}))
}eD.attr=function(e,iu){if(arguments.length<2){for(iu in e){this.attr(iu,e[iu])
}return this
}var ir=e=="transform"?er:fQ,iq=hw.ns.qualify(e);
function ip(){this.removeAttribute(iq)
}function iw(){this.removeAttributeNS(iq.space,iq.local)
}function it(ix){return ix==null?ip:(ix+="",function(){var iy=this.getAttribute(iq),iz;
return iy!==ix&&(iz=ir(iy,ix),function(iA){this.setAttribute(iq,iz(iA))
})
})
}function iv(ix){return ix==null?iw:(ix+="",function(){var iy=this.getAttributeNS(iq.space,iq.local),iz;
return iy!==ix&&(iz=ir(iy,ix),function(iA){this.setAttributeNS(iq.space,iq.local,iz(iA))
})
})
}return hW(this,"attr."+e,iu,iq.local?iv:it)
};
eD.attrTween=function(e,iq){var ip=hw.ns.qualify(e);
function ir(iw,iu){var iv=iq.call(this,iw,iu,this.getAttribute(ip));
return iv&&function(ix){this.setAttribute(ip,iv(ix))
}
}function it(iw,iu){var iv=iq.call(this,iw,iu,this.getAttributeNS(ip.space,ip.local));
return iv&&function(ix){this.setAttributeNS(ip.space,ip.local,iv(ix))
}
}return this.tween("attr."+e,ip.local?it:ir)
};
eD.style=function(iq,it,ir){var iu=arguments.length;
if(iu<3){if(typeof iq!=="string"){if(iu<2){it=""
}for(ir in iq){this.style(ir,iq[ir],it)
}return this
}ir=""
}function ip(){this.style.removeProperty(iq)
}function e(iv){return iv==null?ip:(iv+="",function(){var iw=fM.getComputedStyle(this,null).getPropertyValue(iq),ix;
return iw!==iv&&(ix=fQ(iw,iv),function(iy){this.style.setProperty(iq,ix(iy),ir)
})
})
}return hW(this,"style."+iq,it,e)
};
eD.styleTween=function(e,iq,ip){if(arguments.length<3){ip=""
}function ir(iv,it){var iu=iq.call(this,iv,it,fM.getComputedStyle(this,null).getPropertyValue(e));
return iu&&function(iw){this.style.setProperty(e,iu(iw),ip)
}
}return this.tween("style."+e,ir)
};
eD.text=function(e){return hW(this,"text",e,io)
};
function io(e){if(e==null){e=""
}return function(){this.textContent=e
}
}eD.remove=function(){return this.each("end.transition",function(){var e;
if(this.__transition__.count<2&&(e=this.parentNode)){e.removeChild(this)
}})
};
eD.ease=function(e){var ip=this.id;
if(arguments.length<1){return this.node().__transition__[ip].ease
}if(typeof e!=="function"){e=hw.ease.apply(hw,arguments)
}return cN(this,function(iq){iq.__transition__[ip].ease=e
})
};
eD.delay=function(e){var ip=this.id;
return cN(this,typeof e==="function"?function(it,ir,iq){it.__transition__[ip].delay=+e.call(it,it.__data__,ir,iq)
}:(e=+e,function(iq){iq.__transition__[ip].delay=e
}))
};
eD.duration=function(e){var ip=this.id;
return cN(this,typeof e==="function"?function(it,ir,iq){it.__transition__[ip].duration=Math.max(1,e.call(it,it.__data__,ir,iq))
}:(e=Math.max(1,e),function(iq){iq.__transition__[ip].duration=e
}))
};
eD.each=function(ip,iq){var it=this.id;
if(arguments.length<2){var e=ee,ir=aw;
aw=it;
cN(this,function(iw,iv,iu){ee=iw.__transition__[it];
ip.call(iw,iw.__data__,iv,iu)
});
ee=e;
aw=ir
}else{cN(this,function(iu){var iv=iu.__transition__[it];
(iv.event||(iv.event=hw.dispatch("start","end"))).on(ip,iq)
})
}return this
};
eD.transition=function(){var iz=this.id,iy=++hk,ip=[],ix,iw,ir,iv;
for(var it=0,iq=this.length;
it<iq;
it++){ip.push(ix=[]);
for(var iw=this[it],iu=0,e=iw.length;
iu<e;
iu++){if(ir=iw[iu]){iv=Object.create(ir.__transition__[iz]);
iv.delay+=iv.duration;
fP(ir,iu,iy,iv)
}ix.push(ir)
}}return g0(ip,iy)
};
function fP(ir,iq,iv,e){var ip=ir.__transition__||(ir.__transition__={active:0,count:0}),iu=ip[iv];
if(!iu){var it=e.time;
iu=ip[iv]={tween:new aL(),time:it,ease:e.ease,delay:e.delay,duration:e.duration};
++ip.count;
hw.timer(function(iF){var iC=ir.__data__,iy=iu.ease,iA=iu.delay,iz=iu.duration,iw=dr,iE=[];
iw.t=iA+it;
if(iA<=iF){return ix(iF-iA)
}iw.c=ix;
function ix(iG){if(ip.active>iv){return iD()
}ip.active=iv;
iu.event&&iu.event.start.call(ir,iC,iq);
iu.tween.forEach(function(iH,iI){if(iI=iI.call(ir,iC,iq)){iE.push(iI)
}});
hw.timer(function(){iw.c=iB(iG||1)?am:iB;
return 1
},0,it)
}function iB(iG){if(ip.active!==iv){return iD()
}var iH=iG/iz,iI=iy(iH),iJ=iE.length;
while(iJ>0){iE[--iJ].call(ir,iI)
}if(iH>=1){iu.event&&iu.event.end.call(ir,iC,iq);
return iD()
}}function iD(){if(--ip.count){delete ip[iv]
}else{delete ir.__transition__
}return 1
}},0,it)
}}hw.svg.axis=function(){var iq=hw.scale.linear(),it=h6,e=6,iu=6,ix=3,iw=[10],ir=null,iv;
function ip(iy){iy.each(function(){var iP=hw.select(this);
var iM=this.__chart__||iq,iL=this.__chart__=iq.copy();
var iR=ir==null?iL.ticks?iL.ticks.apply(iL,iw):iL.domain():ir,iK=iv==null?iL.tickFormat?iL.tickFormat.apply(iL,iw):gw:iv,iN=iP.selectAll(".tick").data(iR,iL),iH=iN.enter().insert("g",".domain").attr("class","tick").style("opacity",gz),iJ=hw.transition(iN.exit()).style("opacity",gz).remove(),iB=hw.transition(iN).style("opacity",1),iz;
var iG=a2(iL),iI=iP.selectAll(".domain").data([0]),iS=(iI.enter().append("path").attr("class","domain"),hw.transition(iI));
iH.append("line");
iH.append("text");
var iA=iH.select("line"),iQ=iB.select("line"),iF=iN.select("text").text(iK),iC=iH.select("text"),iO=iB.select("text");
switch(it){case"bottom":iz=fz;
iA.attr("y2",e);
iC.attr("y",Math.max(e,0)+ix);
iQ.attr("x2",0).attr("y2",e);
iO.attr("x",0).attr("y",Math.max(e,0)+ix);
iF.attr("dy",".71em").style("text-anchor","middle");
iS.attr("d","M"+iG[0]+","+iu+"V0H"+iG[1]+"V"+iu);
break;
case"top":iz=fz;
iA.attr("y2",-e);
iC.attr("y",-(Math.max(e,0)+ix));
iQ.attr("x2",0).attr("y2",-e);
iO.attr("x",0).attr("y",-(Math.max(e,0)+ix));
iF.attr("dy","0em").style("text-anchor","middle");
iS.attr("d","M"+iG[0]+","+-iu+"V0H"+iG[1]+"V"+-iu);
break;
case"left":iz=fy;
iA.attr("x2",-e);
iC.attr("x",-(Math.max(e,0)+ix));
iQ.attr("x2",-e).attr("y2",0);
iO.attr("x",-(Math.max(e,0)+ix)).attr("y",0);
iF.attr("dy",".32em").style("text-anchor","end");
iS.attr("d","M"+-iu+","+iG[0]+"H0V"+iG[1]+"H"+-iu);
break;
case"right":iz=fy;
iA.attr("x2",e);
iC.attr("x",Math.max(e,0)+ix);
iQ.attr("x2",e).attr("y2",0);
iO.attr("x",Math.max(e,0)+ix).attr("y",0);
iF.attr("dy",".32em").style("text-anchor","start");
iS.attr("d","M"+iu+","+iG[0]+"H0V"+iG[1]+"H"+iu);
break
}if(iL.rangeBand){var iD=iL,iE=iD.rangeBand()/2;
iM=iL=function(iT){return iD(iT)+iE
}
}else{if(iM.rangeBand){iM=iL
}else{iJ.call(iz,iL)
}}iH.call(iz,iM);
iB.call(iz,iL)
})
}ip.scale=function(iy){if(!arguments.length){return iq
}iq=iy;
return ip
};
ip.orient=function(iy){if(!arguments.length){return it
}it=iy in fd?iy+"":h6;
return ip
};
ip.ticks=function(){if(!arguments.length){return iw
}iw=arguments;
return ip
};
ip.tickValues=function(iy){if(!arguments.length){return ir
}ir=iy;
return ip
};
ip.tickFormat=function(iy){if(!arguments.length){return iv
}iv=iy;
return ip
};
ip.tickSize=function(iy){var iz=arguments.length;
if(!iz){return e
}e=+iy;
iu=+arguments[iz-1];
return ip
};
ip.innerTickSize=function(iy){if(!arguments.length){return e
}e=+iy;
return ip
};
ip.outerTickSize=function(iy){if(!arguments.length){return iu
}iu=+iy;
return ip
};
ip.tickPadding=function(iy){if(!arguments.length){return ix
}ix=+iy;
return ip
};
ip.tickSubdivide=function(){return arguments.length&&ip
};
return ip
};
var h6="bottom",fd={top:1,right:1,bottom:1,left:1};
function fz(ip,e){ip.attr("transform",function(iq){return"translate("+e(iq)+",0)"
})
}function fy(e,ip){e.attr("transform",function(iq){return"translate(0,"+ip(iq)+")"
})
}hw.svg.brush=function(){var ip=hr(ix,"brushstart","brush","brushend"),iA=null,iy=null,iq=[0,0],iw=[0,0],iz,it,e=true,iv=true,iB=ax[0];
function ix(iE){iE.each(function(){var iK=hw.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",iC).on("touchstart.brush",iC);
var iJ=iK.selectAll(".background").data([0]);
iJ.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");
iK.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");
var iI=iK.selectAll(".resize").data(iB,gw);
iI.exit().remove();
iI.enter().append("g").attr("class",function(iL){return"resize "+iL
}).style("cursor",function(iL){return e5[iL]
}).append("rect").attr("x",function(iL){return/[ew]$/.test(iL)?-3:null
}).attr("y",function(iL){return/^[ns]/.test(iL)?-3:null
}).attr("width",6).attr("height",6).style("visibility","hidden");
iI.style("display",ix.empty()?"none":null);
var iH=hw.transition(iK),iF=hw.transition(iJ),iG;
if(iA){iG=a2(iA);
iF.attr("x",iG[0]).attr("width",iG[1]-iG[0]);
iu(iH)
}if(iy){iG=a2(iy);
iF.attr("y",iG[0]).attr("height",iG[1]-iG[0]);
ir(iH)
}iD(iH)
})
}ix.event=function(iE){iE.each(function(){var iF=ip.of(this,arguments),iG={x:iq,y:iw,i:iz,j:it},iH=this.__chart__||iG;
this.__chart__=iG;
if(aw){hw.select(this).transition().each("start.brush",function(){iz=iH.i;
it=iH.j;
iq=iH.x;
iw=iH.y;
iF({type:"brushstart"})
}).tween("brush:brush",function(){var iI=eX(iq,iG.x),iJ=eX(iw,iG.y);
iz=it=null;
return function(iK){iq=iG.x=iI(iK);
iw=iG.y=iJ(iK);
iF({type:"brush",mode:"resize"})
}
}).each("end.brush",function(){iz=iG.i;
it=iG.j;
iF({type:"brush",mode:"resize"});
iF({type:"brushend"})
})
}else{iF({type:"brushstart"});
iF({type:"brush",mode:"resize"});
iF({type:"brushend"})
}})
};
function iD(iE){iE.selectAll(".resize").attr("transform",function(iF){return"translate("+iq[+/e$/.test(iF)]+","+iw[+/^s/.test(iF)]+")"
})
}function iu(iE){iE.select(".extent").attr("x",iq[0]);
iE.selectAll(".extent,.n>rect,.s>rect").attr("width",iq[1]-iq[0])
}function ir(iE){iE.select(".extent").attr("y",iw[0]);
iE.selectAll(".extent,.e>rect,.w>rect").attr("height",iw[1]-iw[0])
}function iC(){var iX=this,iF=hw.select(hw.event.target),iM=ip.of(iX,arguments),iS=hw.select(iX),iU=iF.datum(),iQ=!/^(n|s)$/.test(iU)&&iA,iO=!/^(e|w)$/.test(iU)&&iy,iP=iF.classed("extent"),iH=bN(),iV,iW=hw.mouse(iX),iG;
var iK=hw.select(fM).on("keydown.brush",iN).on("keyup.brush",iJ);
if(hw.event.changedTouches){iK.on("touchmove.brush",iL).on("touchend.brush",iE)
}else{iK.on("mousemove.brush",iL).on("mouseup.brush",iE)
}iS.interrupt().selectAll("*").interrupt();
if(iP){iW[0]=iq[0]-iW[0];
iW[1]=iw[0]-iW[1]
}else{if(iU){var iT=+/w$/.test(iU),iR=+/^n/.test(iU);
iG=[iq[1-iT]-iW[0],iw[1-iR]-iW[1]];
iW[0]=iq[iT];
iW[1]=iw[iR]
}else{if(hw.event.altKey){iV=iW.slice()
}}}iS.style("pointer-events","none").selectAll(".resize").style("display",null);
hw.select("body").style("cursor",iF.style("cursor"));
iM({type:"brushstart"});
iL();
function iN(){if(hw.event.keyCode==32){if(!iP){iV=null;
iW[0]-=iq[1];
iW[1]-=iw[1];
iP=2
}w()
}}function iJ(){if(hw.event.keyCode==32&&iP==2){iW[0]+=iq[1];
iW[1]+=iw[1];
iP=0;
w()
}}function iL(){var iY=hw.mouse(iX),iZ=false;
if(iG){iY[0]+=iG[0];
iY[1]+=iG[1]
}if(!iP){if(hw.event.altKey){if(!iV){iV=[(iq[0]+iq[1])/2,(iw[0]+iw[1])/2]
}iW[0]=iq[+(iY[0]<iV[0])];
iW[1]=iw[+(iY[1]<iV[1])]
}else{iV=null
}}if(iQ&&iI(iY,iA,0)){iu(iS);
iZ=true
}if(iO&&iI(iY,iy,1)){ir(iS);
iZ=true
}if(iZ){iD(iS);
iM({type:"brush",mode:iP?"move":"resize"})
}}function iI(i6,i0,i2){var i3=a2(i0),iZ=i3[0],iY=i3[1],i4=iW[i2],i7=i2?iw:iq,i8=i7[1]-i7[0],i1,i5;
if(iP){iZ-=i4;
iY-=i8+i4
}i1=(i2?iv:e)?Math.max(iZ,Math.min(iY,i6[i2])):i6[i2];
if(iP){i5=(i1+=i4)+i8
}else{if(iV){i4=Math.max(iZ,Math.min(iY,2*iV[i2]-i1))
}if(i4<i1){i5=i1;
i1=i4
}else{i5=i4
}}if(i7[0]!=i1||i7[1]!=i5){if(i2){it=null
}else{iz=null
}i7[0]=i1;
i7[1]=i5;
return true
}}function iE(){iL();
iS.style("pointer-events","all").selectAll(".resize").style("display",ix.empty()?"none":null);
hw.select("body").style("cursor",null);
iK.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);
iH();
iM({type:"brushend"})
}}ix.x=function(iE){if(!arguments.length){return iA
}iA=iE;
iB=ax[!iA<<1|!iy];
return ix
};
ix.y=function(iE){if(!arguments.length){return iy
}iy=iE;
iB=ax[!iA<<1|!iy];
return ix
};
ix.clamp=function(iE){if(!arguments.length){return iA&&iy?[e,iv]:iA?e:iy?iv:null
}if(iA&&iy){e=!!iE[0],iv=!!iE[1]
}else{if(iA){e=!!iE
}else{if(iy){iv=!!iE
}}}return ix
};
ix.extent=function(iJ){var iG,iE,iI,iH,iF;
if(!arguments.length){if(iA){if(iz){iG=iz[0],iE=iz[1]
}else{iG=iq[0],iE=iq[1];
if(iA.invert){iG=iA.invert(iG),iE=iA.invert(iE)
}if(iE<iG){iF=iG,iG=iE,iE=iF
}}}if(iy){if(it){iI=it[0],iH=it[1]
}else{iI=iw[0],iH=iw[1];
if(iy.invert){iI=iy.invert(iI),iH=iy.invert(iH)
}if(iH<iI){iF=iI,iI=iH,iH=iF
}}}return iA&&iy?[[iG,iI],[iE,iH]]:iA?[iG,iE]:iy&&[iI,iH]
}if(iA){iG=iJ[0],iE=iJ[1];
if(iy){iG=iG[0],iE=iE[0]
}iz=[iG,iE];
if(iA.invert){iG=iA(iG),iE=iA(iE)
}if(iE<iG){iF=iG,iG=iE,iE=iF
}if(iG!=iq[0]||iE!=iq[1]){iq=[iG,iE]
}}if(iy){iI=iJ[0],iH=iJ[1];
if(iA){iI=iI[1],iH=iH[1]
}it=[iI,iH];
if(iy.invert){iI=iy(iI),iH=iy(iH)
}if(iH<iI){iF=iI,iI=iH,iH=iF
}if(iI!=iw[0]||iH!=iw[1]){iw=[iI,iH]
}}return ix
};
ix.clear=function(){if(!ix.empty()){iq=[0,0],iw=[0,0];
iz=it=null
}return ix
};
ix.empty=function(){return !!iA&&iq[0]==iq[1]||!!iy&&iw[0]==iw[1]
};
return hw.rebind(ix,ip,"on")
};
var e5={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};
var ax=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];
var fU=hw.time={},hA=Date,p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
function cm(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])
}cm.prototype={getDate:function(){return this._.getUTCDate()
},getDay:function(){return this._.getUTCDay()
},getFullYear:function(){return this._.getUTCFullYear()
},getHours:function(){return this._.getUTCHours()
},getMilliseconds:function(){return this._.getUTCMilliseconds()
},getMinutes:function(){return this._.getUTCMinutes()
},getMonth:function(){return this._.getUTCMonth()
},getSeconds:function(){return this._.getUTCSeconds()
},getTime:function(){return this._.getTime()
},getTimezoneOffset:function(){return 0
},valueOf:function(){return this._.valueOf()
},setDate:function(){ge.setUTCDate.apply(this._,arguments)
},setDay:function(){ge.setUTCDay.apply(this._,arguments)
},setFullYear:function(){ge.setUTCFullYear.apply(this._,arguments)
},setHours:function(){ge.setUTCHours.apply(this._,arguments)
},setMilliseconds:function(){ge.setUTCMilliseconds.apply(this._,arguments)
},setMinutes:function(){ge.setUTCMinutes.apply(this._,arguments)
},setMonth:function(){ge.setUTCMonth.apply(this._,arguments)
},setSeconds:function(){ge.setUTCSeconds.apply(this._,arguments)
},setTime:function(){ge.setTime.apply(this._,arguments)
}};
var ge=Date.prototype;
var V="%a %b %e %X %Y",e4="%m/%d/%Y",dh="%H:%M:%S";
var co=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],cY=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ct=["January","February","March","April","May","June","July","August","September","October","November","December"],aN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
function c5(iu,e,ip){function ix(iy){var iA=iu(iy),iz=ir(iA,1);
return iy-iA<iz-iy?iA:iz
}function iw(iy){e(iy=iu(new hA(iy-1)),1);
return iy
}function ir(iz,iy){e(iz=new hA(+iz),iy);
return iz
}function it(iA,iz,iy){var iB=iw(iA),iC=[];
if(iy>1){while(iB<iz){if(!(ip(iB)%iy)){iC.push(new Date(+iB))
}e(iB,1)
}}else{while(iB<iz){iC.push(new Date(+iB)),e(iB,1)
}}return iC
}function iq(iB,iA,iz){try{hA=cm;
var iy=new cm();
iy._=iB;
return it(iy,iA,iz)
}finally{hA=Date
}}iu.floor=iu;
iu.round=ix;
iu.ceil=iw;
iu.offset=ir;
iu.range=it;
var iv=iu.utc=d0(iu);
iv.floor=iv;
iv.round=d0(ix);
iv.ceil=d0(iw);
iv.offset=d0(ir);
iv.range=iq;
return iu
}function d0(e){return function(iq,ip){try{hA=cm;
var ir=new cm();
ir._=iq;
return e(ir,ip)._
}finally{hA=Date
}}
}fU.year=c5(function(e){e=fU.day(e);
e.setMonth(0,1);
return e
},function(e,ip){e.setFullYear(e.getFullYear()+ip)
},function(e){return e.getFullYear()
});
fU.years=fU.year.range;
fU.years.utc=fU.year.utc.range;
fU.day=c5(function(ip){var e=new hA(2000,0);
e.setFullYear(ip.getFullYear(),ip.getMonth(),ip.getDate());
return e
},function(e,ip){e.setDate(e.getDate()+ip)
},function(e){return e.getDate()-1
});
fU.days=fU.day.range;
fU.days.utc=fU.day.utc.range;
fU.dayOfYear=function(e){var ip=fU.year(e);
return Math.floor((e-ip-(e.getTimezoneOffset()-ip.getTimezoneOffset())*60000)/86400000)
};
p.forEach(function(ip,iq){ip=ip.toLowerCase();
iq=7-iq;
var e=fU[ip]=c5(function(ir){(ir=fU.day(ir)).setDate(ir.getDate()-(ir.getDay()+iq)%7);
return ir
},function(ir,it){ir.setDate(ir.getDate()+Math.floor(it)*7)
},function(it){var ir=fU.year(it).getDay();
return Math.floor((fU.dayOfYear(it)+(ir+iq)%7)/7)-(ir!==iq)
});
fU[ip+"s"]=e.range;
fU[ip+"s"].utc=e.utc.range;
fU[ip+"OfYear"]=function(it){var ir=fU.year(it).getDay();
return Math.floor((fU.dayOfYear(it)+(ir+iq)%7)/7)
}
});
fU.week=fU.sunday;
fU.weeks=fU.sunday.range;
fU.weeks.utc=fU.sunday.utc.range;
fU.weekOfYear=fU.sundayOfYear;
fU.format=im;
function im(e){var iq=e.length;
function ip(iu){var it=[],iv=-1,ir=0,iy,ix,iw;
while(++iv<iq){if(e.charCodeAt(iv)===37){it.push(e.substring(ir,iv));
if((ix=aQ[iy=e.charAt(++iv)])!=null){iy=e.charAt(++iv)
}if(iw=gJ[iy]){iy=iw(iu,ix==null?iy==="e"?" ":"0":ix)
}it.push(iy);
ir=iv+1
}}it.push(e.substring(ir,iv));
return it.join("")
}ip.parse=function(iu){var iw={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},iv=ed(iw,e,iu,0);
if(iv!=iu.length){return null
}if("p" in iw){iw.H=iw.H%12+iw.p*12
}var ir=iw.Z!=null&&hA!==cm,it=new (ir?cm:hA)();
if("j" in iw){it.setFullYear(iw.y,0,iw.j)
}else{if("w" in iw&&("W" in iw||"U" in iw)){it.setFullYear(iw.y,0,1);
it.setFullYear(iw.y,0,"W" in iw?(iw.w+6)%7+iw.W*7-(it.getDay()+5)%7:iw.w+iw.U*7-(it.getDay()+6)%7)
}else{it.setFullYear(iw.y,iw.m,iw.d)
}}it.setHours(iw.H+Math.floor(iw.Z/100),iw.M+iw.Z%100,iw.S,iw.L);
return ir?it._:it
};
ip.toString=function(){return e
};
return ip
}function ed(ir,ix,iv,it){var iw,e,iy,iu=0,ip=ix.length,iq=iv.length;
while(iu<ip){if(it>=iq){return -1
}iw=ix.charCodeAt(iu++);
if(iw===37){iy=ix.charAt(iu++);
e=hY[iy in aQ?ix.charAt(iu++):iy];
if(!e||(it=e(ir,iv,it))<0){return -1
}}else{if(iw!=iv.charCodeAt(it++)){return -1
}}}return it
}function cP(e){return new RegExp("^(?:"+e.map(hw.requote).join("|")+")","i")
}function g4(iq){var ip=new aL(),e=-1,ir=iq.length;
while(++e<ir){ip.set(iq[e].toLowerCase(),e)
}return ip
}function dE(it,iu,iq){var e=it<0?"-":"",ip=(e?-it:it)+"",ir=ip.length;
return e+(ir<iq?new Array(iq-ir+1).join(iu)+ip:ip)
}var hK=cP(co),be=g4(co),fW=cP(cY),ej=g4(cY),hh=cP(ct),fJ=g4(ct),e9=cP(aN),fg=g4(aN),fl=/^%/;
var aQ={"-":"",_:" ","0":"0"};
var gJ={a:function(e){return cY[e.getDay()]
},A:function(e){return co[e.getDay()]
},b:function(e){return aN[e.getMonth()]
},B:function(e){return ct[e.getMonth()]
},c:im(V),d:function(ip,e){return dE(ip.getDate(),e,2)
},e:function(ip,e){return dE(ip.getDate(),e,2)
},H:function(ip,e){return dE(ip.getHours(),e,2)
},I:function(ip,e){return dE(ip.getHours()%12||12,e,2)
},j:function(ip,e){return dE(1+fU.dayOfYear(ip),e,3)
},L:function(ip,e){return dE(ip.getMilliseconds(),e,3)
},m:function(ip,e){return dE(ip.getMonth()+1,e,2)
},M:function(ip,e){return dE(ip.getMinutes(),e,2)
},p:function(e){return e.getHours()>=12?"PM":"AM"
},S:function(ip,e){return dE(ip.getSeconds(),e,2)
},U:function(ip,e){return dE(fU.sundayOfYear(ip),e,2)
},w:function(e){return e.getDay()
},W:function(ip,e){return dE(fU.mondayOfYear(ip),e,2)
},x:im(e4),X:im(dh),y:function(ip,e){return dE(ip.getFullYear()%100,e,2)
},Y:function(ip,e){return dE(ip.getFullYear()%10000,e,4)
},Z:f9,"%":function(){return"%"
}};
var hY={a:hb,A:cI,b:a4,B:fa,c:eE,d:b4,e:b4,H:aT,I:aT,j:I,L:g6,m:gT,M:c2,p:hI,S:d6,U:bu,w:dZ,W:dP,x:ij,X:gQ,y:S,Y:bB,Z:a7,"%":fF};
function hb(ip,e,iq){fW.lastIndex=0;
var ir=fW.exec(e.substring(iq));
return ir?(ip.w=ej.get(ir[0].toLowerCase()),iq+ir[0].length):-1
}function cI(ip,e,iq){hK.lastIndex=0;
var ir=hK.exec(e.substring(iq));
return ir?(ip.w=be.get(ir[0].toLowerCase()),iq+ir[0].length):-1
}function dZ(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+1));
return ir?(ip.w=+ir[0],iq+ir[0].length):-1
}function bu(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq));
return ir?(ip.U=+ir[0],iq+ir[0].length):-1
}function dP(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq));
return ir?(ip.W=+ir[0],iq+ir[0].length):-1
}function a4(ip,e,iq){e9.lastIndex=0;
var ir=e9.exec(e.substring(iq));
return ir?(ip.m=fg.get(ir[0].toLowerCase()),iq+ir[0].length):-1
}function fa(ip,e,iq){hh.lastIndex=0;
var ir=hh.exec(e.substring(iq));
return ir?(ip.m=fJ.get(ir[0].toLowerCase()),iq+ir[0].length):-1
}function eE(ip,e,iq){return ed(ip,gJ.c.toString(),e,iq)
}function ij(ip,e,iq){return ed(ip,gJ.x.toString(),e,iq)
}function gQ(ip,e,iq){return ed(ip,gJ.X.toString(),e,iq)
}function bB(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+4));
return ir?(ip.y=+ir[0],iq+ir[0].length):-1
}function S(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+2));
return ir?(ip.y=c8(+ir[0]),iq+ir[0].length):-1
}function a7(ip,e,iq){return/^[+-]\d{4}$/.test(e=e.substring(iq,iq+5))?(ip.Z=+e,iq+5):-1
}function c8(e){return e+(e>68?1900:2000)
}function gT(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+2));
return ir?(ip.m=ir[0]-1,iq+ir[0].length):-1
}function b4(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+2));
return ir?(ip.d=+ir[0],iq+ir[0].length):-1
}function I(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+3));
return ir?(ip.j=+ir[0],iq+ir[0].length):-1
}function aT(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+2));
return ir?(ip.H=+ir[0],iq+ir[0].length):-1
}function c2(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+2));
return ir?(ip.M=+ir[0],iq+ir[0].length):-1
}function d6(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+2));
return ir?(ip.S=+ir[0],iq+ir[0].length):-1
}function g6(ip,e,iq){gi.lastIndex=0;
var ir=gi.exec(e.substring(iq,iq+3));
return ir?(ip.L=+ir[0],iq+ir[0].length):-1
}var gi=/^\s*\d+/;
function hI(ip,e,iq){var ir=f.get(e.substring(iq,iq+=2).toLowerCase());
return ir==null?-1:(ip.p=ir,iq)
}var f=hw.map({am:0,pm:1});
function f9(it){var ir=it.getTimezoneOffset(),iq=ir>0?"-":"+",ip=~~(cL(ir)/60),e=cL(ir)%60;
return iq+dE(ip,"0",2)+dE(e,"0",2)
}function fF(ip,e,iq){fl.lastIndex=0;
var ir=fl.exec(e.substring(iq,iq+1));
return ir?iq+ir[0].length:-1
}im.utc=dm;
function dm(ip){var e=im(ip);
function iq(ir){try{hA=cm;
var it=new hA();
it._=ir;
return e(it)
}finally{hA=Date
}}iq.parse=function(it){try{hA=cm;
var ir=e.parse(it);
return ir&&ir._
}finally{hA=Date
}};
iq.toString=e.toString;
return iq
}var dX=dm("%Y-%m-%dT%H:%M:%S.%LZ");
im.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dD:dX;
function dD(e){return e.toISOString()
}dD.parse=function(ip){var e=new Date(ip);
return isNaN(e)?null:e
};
dD.toString=dX.toString;
fU.second=c5(function(e){return new hA(Math.floor(e/1000)*1000)
},function(e,ip){e.setTime(e.getTime()+Math.floor(ip)*1000)
},function(e){return e.getSeconds()
});
fU.seconds=fU.second.range;
fU.seconds.utc=fU.second.utc.range;
fU.minute=c5(function(e){return new hA(Math.floor(e/60000)*60000)
},function(e,ip){e.setTime(e.getTime()+Math.floor(ip)*60000)
},function(e){return e.getMinutes()
});
fU.minutes=fU.minute.range;
fU.minutes.utc=fU.minute.utc.range;
fU.hour=c5(function(e){var ip=e.getTimezoneOffset()/60;
return new hA((Math.floor(e/3600000-ip)+ip)*3600000)
},function(e,ip){e.setTime(e.getTime()+Math.floor(ip)*3600000)
},function(e){return e.getHours()
});
fU.hours=fU.hour.range;
fU.hours.utc=fU.hour.utc.range;
fU.month=c5(function(e){e=fU.day(e);
e.setDate(1);
return e
},function(e,ip){e.setMonth(e.getMonth()+ip)
},function(e){return e.getMonth()
});
fU.months=fU.month.range;
fU.months.utc=fU.month.utc.range;
function br(e,ip,iq){function ir(iu){return e(iu)
}ir.invert=function(iu){return gd(e.invert(iu))
};
ir.domain=function(iu){if(!arguments.length){return e.domain().map(gd)
}e.domain(iu);
return ir
};
function it(iw,ix){var iv=iw[1]-iw[0],iy=iv/ix,iu=hw.bisect(fp,iy);
return iu==fp.length?[ip.year,q(iw.map(function(iz){return iz/31536000000
}),ix)[2]]:!iu?[cD,q(iw,ix)[2]]:ip[iy/fp[iu-1]<fp[iu]/iy?iu-1:iu]
}ir.nice=function(iv,ix){var iy=ir.domain(),iw=eB(iy),iz=iv==null?it(iw,10):typeof iv==="number"&&it(iw,iv);
if(iz){iv=iz[0],ix=iz[1]
}function iu(iA){return !isNaN(iA)&&!iv.range(iA,gd(+iA+1),ix).length
}return ir.domain(gu(iy,ix>1?{floor:function(iA){while(iu(iA=iv.floor(iA))){iA=gd(iA-1)
}return iA
},ceil:function(iA){while(iu(iA=iv.ceil(iA))){iA=gd(+iA+1)
}return iA
}}:iv))
};
ir.ticks=function(iu,iw){var iv=eB(ir.domain()),ix=iu==null?it(iv,10):typeof iu==="number"?it(iv,iu):!iu.range&&[{range:iu},iw];
if(ix){iu=ix[0],iw=ix[1]
}return iu.range(iv[0],gd(+iv[1]+1),iw<1?1:iw)
};
ir.tickFormat=function(){return iq
};
ir.copy=function(){return br(e.copy(),ip,iq)
};
return gm(ir,e)
}function gd(e){return new Date(e)
}function c1(e){return function(ip){var iq=e.length-1,ir=e[iq];
while(!ir[1](ip)){ir=e[--iq]
}return ir[0](ip)
}
}var fp=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000];
var cH=[[fU.second,1],[fU.second,5],[fU.second,15],[fU.second,30],[fU.minute,1],[fU.minute,5],[fU.minute,15],[fU.minute,30],[fU.hour,1],[fU.hour,3],[fU.hour,6],[fU.hour,12],[fU.day,1],[fU.day,2],[fU.week,1],[fU.month,1],[fU.month,3],[fU.year,1]];
var fK=[[im("%Y"),am],[im("%B"),function(e){return e.getMonth()
}],[im("%b %d"),function(e){return e.getDate()!=1
}],[im("%a %d"),function(e){return e.getDay()&&e.getDate()!=1
}],[im("%I %p"),function(e){return e.getHours()
}],[im("%I:%M"),function(e){return e.getMinutes()
}],[im(":%S"),function(e){return e.getSeconds()
}],[im(".%L"),function(e){return e.getMilliseconds()
}]];
var X=c1(fK);
cH.year=fU.year;
fU.scale=function(){return br(hw.scale.linear(),cH,X)
};
var cD={range:function(iq,e,ip){return hw.range(+iq,+e,ip).map(gd)
},floor:gw,ceil:gw};
var h5=cH.map(function(e){return[e[0].utc,e[1]]
});
var cj=[[dm("%Y"),am],[dm("%B"),function(e){return e.getUTCMonth()
}],[dm("%b %d"),function(e){return e.getUTCDate()!=1
}],[dm("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1
}],[dm("%I %p"),function(e){return e.getUTCHours()
}],[dm("%I:%M"),function(e){return e.getUTCMinutes()
}],[dm(":%S"),function(e){return e.getUTCSeconds()
}],[dm(".%L"),function(e){return e.getUTCMilliseconds()
}]];
var ff=c1(cj);
h5.year=fU.year.utc;
fU.scale.utc=function(){return br(hw.scale.linear(),h5,ff)
};
hw.text=ac(function(e){return e.responseText
});
hw.json=function(e,ip){return h9(e,"application/json",dT,ip)
};
function dT(e){return JSON.parse(e.responseText)
}hw.html=function(e,ip){return h9(e,"text/html",il,ip)
};
function il(ip){var e=bP.createRange();
e.selectNode(bP.body);
return e.createContextualFragment(ip.responseText)
}hw.xml=ac(function(e){return e.responseXML
});
return hw
}();
(function(e,b){var g="jwv7ouu";
if(e.CUI&&e.CUI.options&&e.CUI.options.typeKitId){g=e.CUI.options.typeKitId
}var a={kitId:g,scriptTimeout:3000};
if(!e.Typekit){var c=document.getElementsByTagName("html")[0];
c.className+=" wf-loading";
var i=setTimeout(function(){c.className=c.className.replace(/(\s|^)wf-loading(\s|$)/g," ");
c.className+=" wf-inactive"
},a.scriptTimeout);
var k=document.createElement("script"),f=false;
k.src="//use.typekit.net/"+a.kitId+".js";
k.type="text/javascript";
k.async="true";
k.onload=k.onreadystatechange=function(){var h=this.readyState;
if(f||h&&h!="complete"&&h!="loaded"){return
}f=true;
clearTimeout(i);
try{Typekit.load(a)
}catch(d){}};
var j=document.getElementsByTagName("script")[0];
j.parentNode.insertBefore(k,j)
}}(this));
(function(){var T=d3.selection.prototype,c=T.on;
var j={tap:[["touchstart","touchend","touchmove"],N]};
var l=null,q=false,W=0,V=0,G=0,F=0;
T.on=function(ae,ag,ab){var af=ae.split("."),ad=af.shift(),ah=j[ad];
if(ah){var ac=ah[0],aa=this;
ag=ah[1].call(null,ag);
ac.forEach(function(ak,aj){var ai=[ak,af].join(".");
c.call(aa,ai,ag,ab)
});
return c
}else{return c.apply(this,arguments)
}};
function N(aa){return function(){if(d3.event.type==="touchstart"){l=e(d3.event);
G=W=l.pageX;
F=V=l.pageY;
q=true;
var ab=d3.event;
setTimeout(function(){if((G===W)&&!q&&(F===V)){d3.event=ab;
aa.apply(this,arguments)
}},200)
}if(d3.event.type==="touchend"&&q){q=false
}if(d3.event.type==="touchmove"&&q){l=e(d3.event);
W=l.pageX;
V=l.pageY
}}
}function e(aa){return aa.touches?aa.touches[0]:aa
}dv=function(){};
dv.version="3.1.0";
dv.ANIMATION=true;
var h=false,A=/xyz/.test(function(){xyz
})?/\b_super\b/:/.*/;
dv.extend=function(ad){var ac=this.prototype;
h=true;
var ab=new this();
ad=ad();
ad.init=ad;
h=false;
for(var ae in ad){ab[ae]=typeof ad[ae]=="function"&&typeof ac[ae]=="function"&&A.test(ad[ae])?(function(ag,af){return function(){var ai=this._super;
this._super=ac[ag];
var ah=af.apply(this,arguments);
this._super=ai;
return ah
}
})(ae,ad[ae]):ad[ae]
}function aa(){if(!h){h=true;
var af=new arguments.callee();
h=false;
af.init.apply(af,arguments);
return af
}}aa.prototype=ab;
aa.mixin=function(af,ag){if(dv.util.isObject(af)){dv.util.each(af,function(ah,ai){ab[ai]=ag
})
}else{ab[af]=ag
}};
aa.extend=arguments.callee;
return aa
};
dv.DEFAULT_COLORS=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];
dv.DEFAULT_CATEGORICAL_AES=["color","fill","stroke","shape","size","linetype"];
dv.absoluteCoordinates=function(ac,af,ab){if(ac.coord() instanceof dv.coord.polar){var ae=ac.coord().flip()?ab.yOuterScale():ab.xOuterScale(),ad=ac.coord().flip()?ab.xOuterScale():ab.yOuterScale(),aa=dv.util.scaleRangeNoReverse(ae),ag=dv.util.scaleRangeNoReverse(ad);
af[0]+=(aa[0]+aa[1])/2;
af[1]+=(ag[0]+ag[1])/2
}return af
};
dv.showTooltip=function(ab,ah,ai,ad,am,an){var af=an.selectAll(".dv-tooltip").data([ab]);
ab.cx=ab.cx||ab.x+ab.width/2;
ab.cy=ab.cy||ab.y+ab.height/2;
ab.dx=ab.dx||ab.x+ab.width;
ab.dy=ab.dy||ab.y+ab.height;
ah.dx=ah.dy||ah.x+ah.width;
ah.dy=ah.dy||ah.y+ah.height;
var aj=af.enter().append("div").classed("dv-tooltip",true).style("top",0).style("left",0);
aj.append("div").classed("content",true);
aj.append("b").classed("notch",true);
af.select(".content").html(ai);
var al=af.select(".notch");
var aa=af.node(),ac=aa.offsetWidth,ao=aa.offsetHeight,ak=0,ae=0,ag=function(ar,aq,ap){return Math.min(Math.max(aq,ar),ap)
};
switch(ad){case"left":ae=ab.x-ac-am;
ak=ab.cy-ao/2;
if(ae<ah.x){ae=ab.dx+am;
ad="right"
}if(ak<ah.y){ak=ah.y
}if(ak+ao>ah.dy){ak=ah.dy-ao
}al.style("top",ag(ab.cy-ak-5,3,ao-13)+"px");
break;
case"right":ae=ab.x+ab.width+am;
ak=ab.cy-ao/2;
if(ae+ac>ah.dx){ae=ab.x-ac-am;
ad="left"
}if(ak<ah.y){ak=ah.y
}if(ak+ao>ah.dy){ak=ah.dy-ao
}al.style("top",ag(ab.cy-ak-5,3,ao-13)+"px");
break;
case"top":ae=ab.cx-ac/2;
ak=ab.y-ao-am;
if(ak<ah.y){ak=ab.dy+am;
ad="bottom"
}if(ae<ah.x){ae=ah.x
}if(ae+ac>ah.dx){ae=ah.dx-ac
}al.style("left",ag(ab.cx-ae-5,3,ac-13)+"px");
break;
case"bottom":ae=ab.cx-ac/2;
ak=ab.dy+am;
if(ak+ao>ah.dy){ak=ab.y-ao-am;
ad="top"
}if(ae<ah.x){ae=ah.x
}if(ae+ac>ah.dx){ae=ah.dx-ac
}al.style("left",ag(ab.cx-ae-5,3,ac-13)+"px");
break;
default:ad=null;
break
}ak=Math.round(ak);
ae=Math.round(ae);
af.classed("top right left bottom hide",false).classed(ad,true);
aj.style("top",ak+"px").style("left",ae+"px");
af.style("top",ak+"px").style("left",ae+"px")
};
dv.removeTooltip=function(aa){aa.selectAll(".dv-tooltip").classed("hide",true)
};
dv.cancelEvent=function(aa){aa.stopPropagation();
aa.preventDefault()
};
dv.windowDimensions=function(){var aa={width:640,height:480};
if(document.body&&document.body.offsetWidth){aa.width=document.body.offsetWidth;
aa.height=document.body.offsetHeight
}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){aa.width=document.documentElement.offsetWidth;
aa.height=document.documentElement.offsetHeight
}if(window.innerWidth&&window.innerHeight){aa.width=window.innerWidth;
aa.height=window.innerHeight
}return aa
};
dv.addWindowResizeHandler=function(aa){window.addEventListener("resize",aa)
};
dv.removeWindowResizeHandler=function(aa){window.removeEventListener("resize",aa)
};
dv.scale=dv.extend(function(){function aa(ab){this._d3Scale=ab;
this._reverse=false;
this._parse=dv.util.identity;
this._includeInDomain=function(){return true
}
}aa._mapToD3Scale=function(ab){return this._d3Scale(ab)
};
aa.trainingProperties=function(ab){if(!arguments.length){if(this._trainingProperties){return this._trainingProperties
}if(this._property){return[this._property]
}return undefined
}if(!dv.util.isValidValue(ab,["isUndefined","isArray"])){dv.log.error({msg:"The supplied properties is not an array",data:{range:ab}})
}this._trainingProperties=ab;
return this
};
aa.trainDomain=function(ad,ab){var ac=this.calculateDomain(ad,ab);
this.domain(ac);
return ac
};
aa.parse=function(ab){if(!arguments.length){return this._parse
}this._parse=ab;
return this
};
aa.applyRangePadding=function(){};
aa.validateDomain=function(){};
aa.mapToProp=function(ac){var ad=ac[this.property()],ab=this;
if(dv.util.isArray(ad)){return dv.util.map(ad,function(ae){return ab._mapToD3Scale.call(ab,ae)
})
}return this._mapToD3Scale.call(this,ad)
};
aa.mapPropToPercent=function(ab){return this.mapValueToPercent(this.mapToProp(ab))
};
aa.mapValueToPercent=function(ad){var ac=dv.util.scaleRange(this),ab=ac[1]-ac[0];
if(dv.util.isArray(ad)){return dv.util.map(ad,function(ae){return ab?(ae-ac[0])/ab:0
})
}return ab?(ad-ac[0])/ab:0
};
aa.mapValue=function(ac){if(dv.util.isArray(ac)){var ab=this;
return dv.util.map(ac,function(ad){return ab._mapToD3Scale.call(ab,ad)
})
}return this._mapToD3Scale.call(this,ac)
};
aa.invertValue=function(ab){return this._d3Scale.invert(ab)
};
aa.rangeBand=function(ab){return 0
};
aa.reverse=function(ac){if(!arguments.length){return this._reverse
}if(this._reverse!=ac){this._reverse=ac;
var ab=this._d3Scale.domain()||[];
this._d3Scale.domain(ab.reverse())
}return this
};
aa.property=function(ab){if(!arguments.length){return this._property
}this._property=ab;
return this
};
aa.mapping=function(ab){if(!arguments.length){return this._mapping
}this._mapping=ab;
return this
};
aa.domain=function(ab){if(!arguments.length){return this._d3Scale.domain()
}if(!this._d3Scale){return this
}ab=this._reverse?ab.reverse():ab;
this._d3Scale.domain(ab);
return this
};
aa.hasSameDomain=function(ae){var ad=true,ac=this.domain();
if(ac.length!=ae.length){ad=false
}else{for(var ab=0;
ab<ae.length;
ab++){if(ae[ab]!=ac[ab]){ad=false;
break
}}}return ad
};
aa.range=function(ab){if(!arguments.length){return this._d3Scale.range()
}if(!this._d3Scale){return this
}if(!dv.util.isValidValue(ab,["isArray"])){dv.log.error({msg:"The supplied range is not an array",data:{range:ab}})
}this._d3Scale.range(ab);
return this
};
aa.expand=function(ab){if(!arguments.length){return this._expand
}this._expand=ab;
return this
};
aa.limits=function(ab){if(!arguments.length){return this._limits
}this._limits=ab;
return this
};
aa.breaks=function(ab){if(!arguments.length){return this._breaks
}this._breaks=ab;
return this
};
aa.orientation=function(ab){if(!arguments.length){return this._orientation
}this._orientation=ab;
return this
};
aa.includeInDomain=function(ab){if(!arguments.length){return this._includeInDomain
}this._includeInDomain=ab;
return this
};
aa.scaleIndex=function(ab){if(!arguments.length){return this._scaleIndex
}this._scaleIndex=ab;
return this
};
aa._copy=function(){dv.log.error({msg:"A copy function was not specified for the scale subclass."})
};
aa.copy=aa._copy;
aa.isDefault=function(ab){if(!arguments.length){return this._isDefault
}this._isDefault=ab;
return this
};
return aa
});
dv.scale.constant=dv.scale.extend(function(){function aa(){this._super(null)
}aa.trainDomain=function(ab){return
};
aa.map=function(ab){return this._value
};
aa.mapToProp=function(ab){return this._value
};
aa.value=function(ab){if(!arguments.length){return this._value
}this._value=ab;
return this
};
aa._copy=function(ac){var ab=this.trainingProperties();
if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}return dv.scale.constant().isDefault(this.isDefault()).value(this.value()).property(this.property()).trainingProperties(ab).scaleIndex(this._scaleIndex)
};
aa.copy=aa._copy;
return aa
});
dv.scale.continuous=dv.scale.extend(function(){function aa(ab){this._super(ab?ab:d3.scale.linear());
this.to=this.range;
this._parse=function(ac){return parseFloat(ac)
}
}aa.calculateDomain=function(aq,ac){var ar=[],ag=this,ao,ap,af=function(au){return ag._parse.call(this,au)
};
if(!this.trainingProperties()){this.trainingProperties([this.property()])
}var ah=this.trainingProperties();
if(!ac){ac={}
}if(!aq){aq=[]
}for(var ai=0;
ai<ah.length;
ai++){var ab=ah[ai];
for(var al=0;
al<aq.length;
al++){if(!ac.filter||!ac.filter.call(this,aq[al].key)){var ae=aq[al].values;
for(var am=0;
am<ae.length;
am++){var ak=ae[am];
if(!this._includeInDomain(ak,am)){continue
}if(this.scaleIndex()!==0){ak[this.property()+"-index"]=this.scaleIndex()
}var at=(ac.stack)?ak.y0:ak[ab];
if(!dv.util.isArray(at)){at=this._parse.call(this,at)
}var an=dv.util.isArray(at)?d3.min(at,af):at;
ao=(dv.util.isUndefined(ao)||an<ao)?an:ao;
if(ac.stack){var aj=ak[ab];
at+=dv.util.isArray(aj)?d3.max(aj,af):ag._parse.call(this,aj)
}var ad=dv.util.isArray(at)?d3.max(at,af):at;
ap=(dv.util.isUndefined(ap)||ad>ap)?ad:ap
}}}}if(isNaN(ao)&&isNaN(ap)){ar=[];
this._naturalDomain=[]
}else{ar=[ao,ap];
this._naturalDomain=[ao,ap]
}if(ac.fill){ar=[0,100]
}if(!dv.util.isUndefined(this._upperLimit)&&!dv.util.isFunction(this._upperLimit)&&!dv.util.isUndefined(this._lowerLimit)&&!dv.util.isFunction(this._lowerLimit)){ar=this.limits()
}else{this._reconcileLimits(ar)
}return ar
};
aa.unionDomain=function(ag,af){if(!ag||!(ag instanceof dv.scale.continuous)){dv.log.error({msg:"The supplied scale is not continuous.",data:{scale:ag,isReversed:af}})
}var ae=ag.domain(),ac=ag.naturalDomain(),ad=this.domain()?d3.extent(this.domain().concat(ae)):d3.extent(ae),ab=this._naturalDomain?d3.extent(this._naturalDomain.concat(ac)):d3.extent(ac);
if(isNaN(ad[0])&&isNaN(ad[1])){ad=[]
}if(isNaN(ab[0]&&isNaN(ab[1]))){ab=[]
}this.reverse(af||this._reverse);
this.domain(ad);
this._naturalDomain=ab;
return this
};
aa.validateDomain=function(){var ab=this.domain();
if(!ab||!ab.length){this.domain([0,1])
}};
aa.unionRange=function(ab){if(!dv.util.isValidValue(ab,["isArray"])){dv.log.error({msg:"The supplied range is not an array",data:{range:ab}})
}this.range(this.range()?d3.extent(this.range().concat(ab)):ab);
return this
};
aa.applyRangePadding=function(){var af=this.domain(),ad=this.range();
if(this._lowerRangePadding){var ab=ad[0]-ad[1],ac=Math.min(Math.abs(ab)-1,this._lowerRangePadding);
af[0]=this.invertValue(ab/(Math.abs(ab)-ac)*ac+ad[0])
}if(this._upperRangePadding){var ae=ad[1]-ad[0],ag=Math.min(Math.abs(ae)-1,this._upperRangePadding);
af[1]=this.invertValue(ae/(Math.abs(ae)-ag)*ag+ad[1])
}this.domain(af);
return this
};
aa.upperLimit=function(ab){if(!arguments.length){return this._upperLimit
}if(dv.util.isValidValue(ab,["isUndefined","isFinite","isDate","isFunction"])){this._upperLimit=ab
}else{dv.log.error({msg:"Invalid value, cannot set upperLimit with: "+ab})
}return this
};
aa.lowerLimit=function(ab){if(!arguments.length){return this._lowerLimit
}if(dv.util.isValidValue(ab,["isUndefined","isFinite","isDate","isFunction"])){this._lowerLimit=ab
}else{dv.log.error({msg:"Invalid value, cannot set lowerLimit with: "+ab})
}return this
};
aa.limits=function(ab){if(!arguments.length){return[this._lowerLimit,this._upperLimit]
}if(!ab||ab.length!=2){dv.log.error({msg:"Incorrect number of arguments, the limits function must supply an array containing both a lower and upper limit"})
}this.lowerLimit(ab[0]);
this.upperLimit(ab[1]);
return this
};
aa.naturalDomain=function(){return this._naturalDomain
};
aa.upperRangePadding=function(ab){if(!arguments.length){return this._upperRangePadding
}if(dv.util.isValidValue(ab,["isUndefined","isFinite","isDate","isFunction"])){this._upperRangePadding=ab
}else{dv.log.error({msg:"Invalid value, cannot set upperRangePadding with: "+ab})
}return this
};
aa.lowerRangePadding=function(ab){if(!arguments.length){return this._lowerRangePadding
}if(dv.util.isValidValue(ab,["isUndefined","isFinite","isDate","isFunction"])){this._lowerRangePadding=ab
}else{dv.log.error({msg:"Invalid value, cannot set lowerRangePadding with: "+ab})
}return this
};
aa.rangePadding=function(ab){if(!arguments.length){return[this._lowerRangePadding,this._upperRangePadding]
}if(!ab||ab.length!=2){dv.log.error({msg:"Incorrect number of arguments, the limits function must supply an array containing both a lower and upper limit"})
}this.lowerRangePadding(ab[0]);
this.upperRangePadding(ab[1]);
return this
};
aa.softLowerLimit=function(ab){if(!arguments.length){return this._softLowerLimit
}this._softLowerLimit=ab;
return this
};
aa._reconcileLimits=function(ab){if(!ab.length){return
}if(!dv.util.isUndefined(this._softLowerLimit)){ab[0]=Math.min(ab[0],this._softLowerLimit);
ab[1]=Math.max(ab[1],this._softLowerLimit)
}if(!dv.util.isUndefined(this._lowerLimit)){ab[0]=dv.util.isFunction(this._lowerLimit)?this._lowerLimit(ab[0],ab[1]):this._lowerLimit
}if(!dv.util.isUndefined(this._upperLimit)){ab[1]=dv.util.isFunction(this._upperLimit)?this._upperLimit(ab[0],ab[1]):this._upperLimit
}};
aa.labels=function(ab){if(!arguments.length){return this._labels
}this._labels=ab;
return this
};
aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.continuous().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).reverse(this.reverse()).domain(ac).includeInDomain(this.includeInDomain()).upperLimit(this.upperLimit()).lowerLimit(this.lowerLimit()).upperRangePadding(this.upperRangePadding()).lowerRangePadding(this.lowerRangePadding()).softLowerLimit(this.softLowerLimit()).range(this.range().slice(0)).trainingProperties(ab).scaleIndex(this._scaleIndex);
ad._naturalDomain=this._naturalDomain;
return ad
};
aa.invert=function(ab){return this._d3Scale.invert(ab[this.mapping()])
};
aa.invertFromProp=function(ab){return this._d3Scale.invert(ab[this.property()])
};
aa.copy=aa._copy;
return aa
});
dv.scale.linear=dv.scale.continuous.extend(function(){function aa(){this._super(d3.scale.linear())
}aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.linear().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ac).includeInDomain(this.includeInDomain()).upperLimit(this.upperLimit()).lowerLimit(this.lowerLimit()).upperRangePadding(this.upperRangePadding()).lowerRangePadding(this.lowerRangePadding()).softLowerLimit(this.softLowerLimit()).range(this.range().slice(0)).reverse(this.reverse()).trainingProperties(ab).scaleIndex(this._scaleIndex);
ad._naturalDomain=this._naturalDomain;
return ad
};
aa.copy=aa._copy;
return aa
});
dv.scale.gradient=dv.scale.continuous.extend(function(){function aa(){this._super(d3.scale.linear());
this._innerScale=d3.scale.linear().range([0,1]);
this.colors=this.range;
this._controlPoints=["0%","50%","100%"];
this.colors(["#FA5A50","#E1E1E1","#5FAF69"])
}aa._adjustOuterDomain=function(){var ab=this;
this._d3Scale.domain(dv.util.map(this._controlPoints,function(ad,ac){return dv.util.isPercentString(ad)?ab._innerScale.invert(parseInt(ad,10)/100):ad
}))
};
aa.controlPoints=function(ab){if(!arguments.length){return this._controlPoints
}this._controlPoints=ab;
this._adjustOuterDomain();
return this
};
aa.domain=function(ab){if(!arguments.length){return this._innerScale.domain()
}if(!this._innerScale){return this
}ab=this._reverse?ab.reverse():ab;
this._innerScale.domain(ab);
this._adjustOuterDomain();
return this
};
aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.gradient().property(this.property()).mapping(this.mapping()).domain(ac).upperLimit(this.upperLimit()).lowerLimit(this.lowerLimit()).includeInDomain(this.includeInDomain()).upperRangePadding(this.upperRangePadding()).lowerRangePadding(this.lowerRangePadding()).softLowerLimit(this.softLowerLimit()).range(this.range().slice(0)).controlPoints(this.controlPoints()).reverse(this.reverse()).trainingProperties(ab).scaleIndex(this._scaleIndex);
ad._naturalDomain=this._naturalDomain;
return ad
};
aa.copy=aa._copy;
return aa
});
dv.scale.time=dv.scale.continuous.extend(function(){function aa(){this._super(d3.time.scale());
this._parse=function(ab){return(ab instanceof Date)?ab:Date.parse(ab)
}
}aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.time().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ac).includeInDomain(this.includeInDomain()).upperLimit(this.upperLimit()).lowerLimit(this.lowerLimit()).upperRangePadding(this.upperRangePadding()).lowerRangePadding(this.lowerRangePadding()).softLowerLimit(this.softLowerLimit()).range(this.range().slice(0)).reverse(this.reverse()).trainingProperties(ab).scaleIndex(this._scaleIndex);
ad._naturalDomain=this._naturalDomain;
return ad
};
aa.copy=aa._copy;
aa._reconcileLimits=function(ad,ac,ab){if(!dv.util.isUndefined(this._softLowerLimit)){ad[0]=Math.min(ad[0],this._softLowerLimit);
ad[1]=Math.max(ad[1],this._softLowerLimit)
}if(!dv.util.isUndefined(this._lowerLimit)){ad[0]=dv.util.isFunction(this._lowerLimit)?this._parse(this._lowerLimit(new Date(ac),new Date(ab))):this._lowerLimit
}if(!dv.util.isUndefined(this._upperLimit)){ad[1]=dv.util.isFunction(this._upperLimit)?this._parse(this._upperLimit(new Date(ac),new Date(ab))):this._upperLimit
}};
return aa
});
dv.scale.time.utc=dv.scale.continuous.extend(function(){function aa(){this._super(d3.time.scale.utc());
this._parse=function(ab){return(ab instanceof Date)?ab:Date.parse(ab)
}
}aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.time.utc().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ac).includeInDomain(this.includeInDomain()).upperLimit(this.upperLimit()).lowerLimit(this.lowerLimit()).upperRangePadding(this.upperRangePadding()).lowerRangePadding(this.lowerRangePadding()).softLowerLimit(this.softLowerLimit()).range(this.range().slice(0)).reverse(this.reverse()).trainingProperties(ab).scaleIndex(this._scaleIndex);
ad._naturalDomain=this._naturalDomain;
return ad
};
aa.copy=aa._copy;
aa._reconcileLimits=function(ad,ac,ab){if(!dv.util.isUndefined(this._softLowerLimit)){ad[0]=Math.min(ad[0],this._softLowerLimit);
ad[1]=Math.max(ad[1],this._softLowerLimit)
}if(!dv.util.isUndefined(this._lowerLimit)){ad[0]=dv.util.isFunction(this._lowerLimit)?this._parse(this._lowerLimit(new Date(ac),new Date(ab))):this._lowerLimit
}if(!dv.util.isUndefined(this._upperLimit)){ad[1]=dv.util.isFunction(this._upperLimit)?this._parse(this._upperLimit(new Date(ac),new Date(ab))):this._upperLimit
}};
return aa
});
dv.scale.ordinal=dv.scale.extend(function(){function aa(){this._super(d3.scale.ordinal());
this._defaultPadding=0.1;
this._defaultOuterPadding=0;
this._rangeExtent=[];
this._rangeBandsSet=false
}aa._mapToD3Scale=function(af){var ad=this.domain(),ac=-1,ag=ad.length,ab=-1;
while(++ac<ag){var ae=ad[ac];
if(ae===af||dv.util.isDate(ae)&&ae.getTime()===af.getTime()){ab=ac;
break
}}return(ab<0)?undefined:this._d3Scale(af)
};
aa.calculateDomain=function(ai,am){var ad={};
var ak=[],aj=this.trainingProperties();
am=am||{};
for(var ae=0;
ae<aj.length;
ae++){var ac=aj[ae];
for(var ag=0;
ag<ai.length;
ag++){var al=ai[ag].values;
if(!am.filter||!am.filter.call(this,ai[ag].key)){for(var ah=0;
ah<al.length;
ah++){var ab=al[ah];
if(!this._includeInDomain(ab,ah)){continue
}if(this.scaleIndex()!==0){ab[this.property()+"-index"]=this.scaleIndex()
}var af=this._parse.call(this,ab[ac]);
if(!dv.util.isUndefined(af)&&!ad.hasOwnProperty(af)){ad[af]=af;
ak.push(af)
}}}}}return ak.length?ak:[]
};
aa.unionDomain=function(ad,ac){if(!ad||!(ad instanceof dv.scale.ordinal)){dv.log.error({msg:"The supplied scale is not ordinal.",data:{scale:ad,isReversed:ac}})
}var ab=ad.domain();
if(ab&&!dv.util.isArray(ab)){throw new Error("The supplied domain is not an array")
}if(ab){this.reverse(ac||this._reverse);
this.domain(this.domain()?dv.util.union(this.domain(),ab):ab)
}return this
};
aa.unionRange=function(ab){if(ab&&!dv.util.isArray(ab)){throw new Error("The supplied range is not an array")
}if(ab){this.range(this.range()?dv.util.union(this.range(),ab):ab)
}return this
};
aa.invertValue=function(ad){var ab=this.range().indexOf(ad),ac=this.domain();
if(ab<0){throw new Error("The supplied value does not exist in the specified range.")
}return ac[ab%ac.length]
};
aa.reverse=function(ac){if(!arguments.length){return this._reverse
}if(this._reverse!=ac){this._reverse=ac;
var ab=this._d3Scale.domain()||[];
this._d3Scale.domain(ab.reverse())
}return this
};
aa.padding=function(ab){if(!arguments.length){return dv.util.isUndefined(this._padding)?this._defaultPadding:this._padding
}this._padding=ab;
if(this._rangeBandsSet){this._d3Scale.rangeBands(this.rangeExtent(),this._padding,this.outerPadding())
}return this
};
aa.outerPadding=function(ab){if(!arguments.length){return dv.util.isUndefined(this._outerPadding)?(dv.util.isUndefined(this._padding)?this._defaultOuterPadding:this.padding()):this._outerPadding
}this._outerPadding=ab;
if(this._rangeBandsSet){this._d3Scale.rangeBands(this.rangeExtent(),this.padding(),this._outerPadding)
}return this
};
aa.rangeBands=function(ab){if(!arguments.length){return this._d3Scale.range()
}this._rangeBandsSet=true;
this._d3Scale.rangeBands(ab,this.padding(),this.outerPadding());
this.rangeExtent(ab);
return this
};
aa.rangeBand=function(){return this._d3Scale.rangeBand()
};
aa.range=function(ab){if(!arguments.length){return this._d3Scale.range()
}if(!this._d3Scale){return this
}if(!dv.util.isValidValue(ab,["isArray"])){dv.log.error({msg:"The supplied range is not an array",data:{range:ab}})
}this._d3Scale.range(ab);
this.rangeExtent([ab[0],ab[ab.length-1]]);
return this
};
aa.rangeExtent=function(ab){if(!arguments.length){return this._rangeExtent
}if(!dv.util.isValidValue(ab,["isArray"])){dv.log.error({msg:"The supplied range extent is not an array",data:{range:ab}})
}this._rangeExtent=ab;
return this
};
aa.values=function(ab){if(!arguments.length){return this._d3Scale.range()
}if(!dv.util.isValidValue(ab,["isArray"])){dv.log.error({msg:"The supplied values is not an array",data:{range:ab}})
}return this.range(ab)
};
aa.drop=function(ab){if(!arguments.length){return this._drop
}this._drop=ab;
return this
};
aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.ordinal().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ac).includeInDomain(this.includeInDomain()).range(this.range().slice(0)).rangeExtent(this.rangeExtent().slice(0)).reverse(this.reverse()).padding(this._padding).outerPadding(this._outerPadding).trainingProperties(ab).scaleIndex(this._scaleIndex);
if(this._rangeBandsSet){ad.rangeBands(this.rangeExtent().slice(0))
}return ad
};
aa.copy=aa._copy;
return aa
});
dv.scale.color=dv.scale.ordinal.extend(function(){var ab=["#8CC350","#5A6EAA","#D755A5","#1EBED7","#F0A01E","#9B8CE6","#3CB5A0","#3287D2","#F0557D","#C3D250","#EB782D","#78B4F5","#5FAF69","#AA5FA5","#FA5A50","#F5C841"];
function aa(){this._super();
this.range(ab)
}aa._copy=function(){var ad=this.domain().slice(0),ac=this.trainingProperties();
if(this.reverse()){ad.reverse()
}if(!dv.util.isUndefined(ac)){ac=ac.slice(0)
}var ae=dv.scale.ordinal().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ad).range(this.range()).rangeExtent(this.rangeExtent()).includeInDomain(this.includeInDomain()).reverse(this.reverse()).padding(this._padding).outerPadding(this._outerPadding).trainingProperties(ac).scaleIndex(this._scaleIndex);
if(this._rangeBandsSet){ae.rangeBands(this.rangeExtent().slice(0)).padding(this._padding).outerPadding(this._outerPadding)
}return ae
};
aa.copy=aa._copy;
return aa
});
dv.scale.shape=dv.scale.ordinal.extend(function(){var ab=["circle","cross","diamond","square","triangle-down","triangle-up"];
function aa(){this._super();
this.range(ab)
}aa._copy=function(){var ad=this.domain().slice(0),ac=this.trainingProperties();
if(this.reverse()){ad.reverse()
}if(!dv.util.isUndefined(ac)){ac=ac.slice(0)
}var ae=dv.scale.ordinal().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ad).includeInDomain(this.includeInDomain()).range(this.range().slice(0)).rangeExtent(this.rangeExtent().slice(0)).reverse(this.reverse()).padding(this._padding).outerPadding(this._outerPadding).trainingProperties(ac).scaleIndex(this._scaleIndex);
if(this._rangeBandsSet){ae.rangeBands(this.rangeExtent().slice(0)).padding(this._padding).outerPadding(this._outerPadding)
}return ae
};
aa.copy=aa._copy;
return aa
});
dv.scale.linetype=dv.scale.ordinal.extend(function(){var ab=["solid","dashed","dotted","dotdash","longdash","twodash"];
function aa(){this._super();
this.range(ab)
}aa._copy=function(){var ad=this.domain().slice(0),ac=this.trainingProperties();
if(this.reverse()){ad.reverse()
}if(!dv.util.isUndefined(ac)){ac=ac.slice(0)
}var ae=dv.scale.ordinal().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ad).includeInDomain(this.includeInDomain()).range(this.range().slice(0)).rangeExtent(this.rangeExtent().slice(0)).reverse(this.reverse()).padding(this._padding).outerPadding(this._outerPadding).trainingProperties(ac).scaleIndex(this._scaleIndex);
if(this._rangeBandsSet){ae.rangeBands(this.rangeExtent().slice(0)).padding(this._padding).outerPadding(this._outerPadding)
}return ae
};
aa.copy=aa._copy;
return aa
});
dv.scale.size=dv.scale.continuous.extend(function(){function aa(){this._super();
this.to([2,10])
}aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}var ad=dv.scale.size().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ac).includeInDomain(this.includeInDomain()).upperLimit(this.upperLimit()).lowerLimit(this.lowerLimit()).upperRangePadding(this.upperRangePadding()).lowerRangePadding(this.lowerRangePadding()).softLowerLimit(this.softLowerLimit()).range(this.range().slice(0)).reverse(this.reverse()).trainingProperties(ab).scaleIndex(this._scaleIndex);
ad._naturalDomain=this._naturalDomain;
return ad
};
aa.copy=aa._copy;
return aa
});
dv.scale.identity=dv.scale.ordinal.extend(function(){function aa(ab){this._super(d3.scale.ordinal())
}aa.mapToProp=function(ab){return ab[this.property()]
};
aa.domain=function(ab){if(!arguments.length){return this._d3Scale.domain()
}if(!this._d3Scale){return this
}ab=this._reverse?ab.reverse():ab;
this._d3Scale.domain(ab);
this._d3Scale.range(ab);
return this
};
aa.range=function(){if(!arguments.length){return this._d3Scale.range()
}return this
};
aa.labels=function(ab){if(!arguments.length){return this._labels
}this._labels=ab;
return this
};
aa._copy=function(){var ac=this.domain().slice(0),ab=this.trainingProperties();
if(this.reverse()){ac.reverse()
}if(!dv.util.isUndefined(ab)){ab=ab.slice(0)
}return dv.scale.identity().isDefault(this.isDefault()).property(this.property()).mapping(this.mapping()).domain(ac).includeInDomain(this.includeInDomain()).range(this.range().slice(0)).reverse(this.reverse()).trainingProperties(ab).scaleIndex(this._scaleIndex)
};
aa.copy=aa._copy;
return aa
});
dv.svg=dv.svg||{};
dv.svg.text=function(){var aa=I,af=H,ab=w,ae=s,ac=B;
function ad(ag){return ag.select(function(ai,ah){return ae.call(this,ai,ah)?this:null
}).attr("x",function(ai,ah){return aa.call(this,ai,ah)
}).attr("y",function(ai,ah){return af.call(this,ai,ah)
}).text(function(ai,ah){return ab.call(this,ai,ah)
})
}ad.x=function(ag){if(!arguments.length){return aa
}aa=ag;
return ad
};
ad.y=function(ag){if(!arguments.length){return af
}af=ag;
return ad
};
ad.label=function(ag){if(!arguments.length){return ab
}ab=ag;
return ad
};
ad.defined=function(ag){if(!arguments.length){return ae
}ae=ag;
return ad
};
ad.duration=function(ag){if(!arguments.length){return ac
}ac=ag;
return ad
};
return ad
};
dv.svg.text.radial=function(){var af=I,aa=H,ab=w,ae=s,ac=B;
function ad(ah){var ag=function(ak,aj){return af.call(this,ak,aj)+g
},ai=function(ak,aj){return aa.call(this,ak,aj)
};
return ah.select(function(ak,aj){return ae.call(this,ak,aj)?this:null
}).attr("x",function(ak,aj){return ai(ak,aj)*Math.cos(ag(ak,aj))
}).attr("y",function(ak,aj){return ai(ak,aj)*Math.sin(ag(ak,aj))
}).text(function(ak,aj){return ab.call(this,ak,aj)
})
}ad.angle=function(ag){if(!arguments.length){return af
}af=ag;
return ad
};
ad.radius=function(ag){if(!arguments.length){return aa
}aa=ag;
return ad
};
ad.label=function(ag){if(!arguments.length){return ab
}ab=ag;
return ad
};
ad.defined=function(ag){if(!arguments.length){return ae
}ae=ag;
return ad
};
ad.duration=function(ag){if(!arguments.length){return ac
}ac=ag;
return ad
};
return ad
};
function I(aa){return aa[0]
}function H(aa){return aa[1]
}function w(aa){return aa[2]
}function s(){return true
}function B(){return 0
}dv.svg.rect=function(){var ab=P,aa=O,ae=o,ac=n,af=E;
function ad(ah,ag){if(af.call(this,ah,ag)){return J(ab.call(this,ah,ag),aa.call(this,ah,ag),ae.call(this,ah,ag),ac.call(this,ah,ag))
}return null
}ad.x0=function(ag){if(!arguments.length){return ab
}ab=ag;
return ad
};
ad.x1=function(ag){if(!arguments.length){return aa
}aa=ag;
return ad
};
ad.y0=function(ag){if(!arguments.length){return ae
}ae=ag;
return ad
};
ad.y1=function(ag){if(!arguments.length){return ac
}ac=ag;
return ad
};
ad.defined=function(ag){if(!arguments.length){return af
}af=ag;
return ad
};
return ad
};
function P(aa){return aa[0]
}function O(aa){return aa[1]
}function o(aa){return aa[2]
}function n(aa){return aa[3]
}function E(){return true
}function J(ab,aa,ad,ac){return"M"+ab+","+ad+"L"+aa+","+ad+"L"+aa+","+ac+"L"+ab+","+ac+"Z"
}dv.svg.symbol=function(){var ac=L,ab=S,aa=Y,af=X,ae=f;
function ad(ah,ag){if(ae.call(this,ah,ag)){return(K[ac.call(this,ah,ag)]||K.circle)(ab.call(this,ah,ag),aa.call(this,ah,ag),af.call(this,ah,ag))
}return null
}ad.x=function(ag){if(!arguments.length){return aa
}aa=ag;
return ad
};
ad.y=function(ag){if(!arguments.length){return af
}af=ag;
return ad
};
ad.type=function(ag){if(!arguments.length){return ac
}ac=d3.functor(ag);
return ad
};
ad.size=function(ag){if(!arguments.length){return ab
}ab=d3.functor(ag);
return ad
};
ad.defined=function(ag){if(!arguments.length){return ae
}ae=ag;
return ad
};
return ad
};
dv.svg.symbol.radial=function(){var ac=L,ab=S,af=Y,aa=X,ae=f;
function ad(ak,ai){if(ae.call(this,ak,ai)){var ah=af.call(this,ak,ai)+g,aj=aa.call(this,ak,ai),ag=aj*Math.cos(ah),al=aj*Math.sin(ah);
return(K[ac.call(this,ak,ai)]||K.circle)(ab.call(this,ak,ai),ag,al)
}return null
}ad.angle=function(ag){if(!arguments.length){return af
}af=ag;
return ad
};
ad.radius=function(ag){if(!arguments.length){return aa
}aa=ag;
return ad
};
ad.type=function(ag){if(!arguments.length){return ac
}ac=d3.functor(ag);
return ad
};
ad.size=function(ag){if(!arguments.length){return ab
}ab=d3.functor(ag);
return ad
};
ad.defined=function(ag){if(!arguments.length){return ae
}ae=ag;
return ad
};
return ad
};
d3.svg.symbolTypes=d3.keys(K);
var K={circle:function(ab,aa,ad){var ac=Math.sqrt(ab/Math.PI);
return"M"+aa+","+(ad+ac)+"A"+ac+","+ac+" 0 1,1 "+aa+","+(ad-ac)+"A"+ac+","+ac+" 0 1,1 "+aa+","+(ad+ac)+"Z"
},cross:function(ab,aa,ad){var ac=Math.sqrt(ab/5)/2;
return"M"+(aa+-3*ac)+","+(ad-ac)+"H"+(aa-ac)+"V"+(ad+-3*ac)+"H"+(aa+ac)+"V"+(ad-ac)+"H"+(aa+3*ac)+"V"+(ad+ac)+"H"+(aa+ac)+"V"+(ad+3*ac)+"H"+(aa-ac)+"V"+(ad+ac)+"H"+(aa-3*ac)+"Z"
},diamond:function(ab,aa,ae){var ac=Math.sqrt(ab/(2*t)),ad=ac*t;
return"M"+aa+","+(ae-ac)+"L"+(aa+ad)+","+ae+" "+aa+","+(ae+ac)+" "+(aa-ad)+","+ae+"Z"
},square:function(ab,aa,ad){var ac=Math.sqrt(ab)/2;
return"M"+(aa-ac)+","+(ad-ac)+"L"+(aa+ac)+","+(ad-ac)+" "+(aa+ac)+","+(ad+ac)+" "+(aa-ac)+","+(ad+ac)+"Z"
},"triangle-down":function(ab,aa,ae){var ad=Math.sqrt(ab/C),ac=ad*C/2;
return"M"+aa+","+(ae+ac)+"L"+(aa+ad)+","+(ae-ac)+" "+(aa-ad)+","+(ae-ac)+"Z"
},"triangle-up":function(ab,aa,ae){var ad=Math.sqrt(ab/C),ac=ad*C/2;
return"M"+aa+","+(ae-ac)+"L"+(aa+ad)+","+(ae+ac)+" "+(aa-ad)+","+(ae+ac)+"Z"
}};
function S(){return 64
}function L(){return"circle"
}function Y(aa){return aa[0]
}function X(aa){return aa[1]
}function f(aa){return true
}dv.svg.errorBar=function(){var ac=R,ab=Q,ae=r,ad=p,af=v;
function aa(ah,ag){if(af.call(this,ah,ag)){return d(ac.call(this,ah,ag),ab.call(this,ah,ag),ae.call(this,ah,ag),ad.call(this,ah,ag))
}return null
}aa.x0=function(ag){if(!arguments.length){return ac
}ac=ag;
return aa
};
aa.x1=function(ag){if(!arguments.length){return ab
}ab=ag;
return aa
};
aa.y0=function(ag){if(!arguments.length){return ae
}ae=ag;
return aa
};
aa.y1=function(ag){if(!arguments.length){return ad
}ad=ag;
return aa
};
aa.defined=function(ag){if(!arguments.length){return af
}af=ag;
return aa
};
return aa
};
function R(aa){return aa[0]
}function Q(aa){return aa[1]
}function r(aa){return aa[2]
}function p(aa){return aa[3]
}function v(){return true
}function d(ac,ab,ae,ad){var aa=ac+((ab-ac)/2);
return"M"+ac+","+ae+"L"+ab+","+ae+"M"+aa+","+ae+"L"+aa+","+ad+"M"+ac+","+ad+"L"+ab+","+ad
}var C=Math.sqrt(3),t=Math.tan(30*Math.PI/180);
var g=-Math.PI/2;
dv.svg.poly=function(){var ad=b,aa=D,ab=k;
function ac(af,ae){if(ad.call(this,af,ae)){return M(aa.call(this,af,ae),ab.call(this,af,ae))
}return null
}ac.xs=function(ae){if(!arguments.length){return aa
}aa=ae;
return ac
};
ac.ys=function(ae){if(!arguments.length){return ab
}ab=ae;
return ac
};
ac.defined=function(ae){if(!arguments.length){return ad
}ad=ae;
return ad
};
return ac
};
dv.svg.poly.radial=function(){var ad=b,ac=D,ab=k;
function aa(aj,ag){if(ad.call(this,aj,ag)){var an=ac.call(this,aj,ag);
var ai=ab.call(this,aj,ag);
var ak=d3.max([an.length,ai.length]);
var ah="M";
for(var af=0;
af<ak;
af++){if(af>0){ah+="L"
}var ao=an[af]+g,ae=ai[af],am=ae*Math.cos(ao),al=ae*Math.sin(ao);
ah+=(af<an.length?am:"0");
ah+=",";
ah+=(af<ai.length?al:"0")
}ah+="Z";
return ah
}return null
}aa.angles=function(ae){if(!arguments.length){return ac
}ac=ae;
return aa
};
aa.radii=function(ae){if(!arguments.length){return ab
}ab=ae;
return aa
};
aa.defined=function(ae){if(!arguments.length){return ad
}ad=ae;
return ad
};
return aa
};
function b(aa){return true
}function D(aa){return aa[0]
}function k(aa){return aa[1]
}function M(ab,ad){var aa=d3.max([ab.length,ad.length]);
var ae="M";
for(var ac=0;
ac<aa;
ac++){if(ac>0){ae+="L"
}ae+=(ac<ab.length?ab[ac]:"0");
ae+=",";
ae+=(ac<ad.length?ad[ac]:"0")
}ae+="Z";
return ae
}dv.util={};
dv.util.filterAndZip=function(ab,ai,ah){var aj=[],al=[];
if(!ai){for(var aa in ab){aj=ab[aa];
break
}}else{aj=ab[ai]
}var ac=-1,ae=aj.length;
while(++ac<ae){var ak=aj[ac];
if(!ah||ak==ah){var ag={};
for(var af in ab){if(af==="data"){ag[af]={};
for(var ad in ab[af]){ag[af][ad]=ab[af][ad][ac]
}}else{ag[af]=ab[af][ac]
}}al.push(ag)
}}return al
};
dv.util.binaryCompare=function(ab,aa,af,ae,ad){var ag=ae;
if(arguments.length<4){ag=0
}if(arguments.length<5){ad=ab.length
}while(ag<ad){var ac=(ag+ad)>>1;
if(aa<af(ab[ac])){ad=ac
}else{ag=ac+1
}}if(ag==ae||Math.abs(af(ab[ag])-aa)<Math.abs(af(ab[ag-1])-aa)){return ag
}else{return ag-1
}};
dv.util.uniqueValues=function(ac,aa){var ab=[];
dv.util.each(ac,function(ah,ae){var af=-1,ai=ab.length,ag=false;
while(++af<ai){var ad=ab[af];
if(aa(ah,ad)){ag=true;
break
}}if(!ag){ab.push(ac[af])
}});
return ab
};
dv.util.scaleRange=function(ab,aa){if(arguments.length===1){return ab.rangeExtent?ab.rangeExtent():ab.range()
}if(ab.rangeExtent){ab.rangeBands(aa)
}else{ab.range(aa)
}return ab
};
dv.util.minRangeDistance=function(ae,ab){var ad=Number.MAX_VALUE,ac,aa;
dv.util.each(ab,function(af){dv.util.each(af.values,function(ag){ac=ag.panel.xScale(ag).mapValue(ag[ae]);
if(!dv.util.isUndefined(aa)){ad=Math.min(ad,Math.abs(ac-aa))
}aa=ac
})
});
return ad
};
dv.util.scaleRangeNoReverse=function(aa){return aa.rangeExtent?aa.rangeExtent():dv.util.scaleExtent(aa.range())
};
dv.util.scaleExtent=function(ab){var ac=ab[0],aa=ab[ab.length-1];
return ac<aa?[ac,aa]:[aa,ac]
};
dv.util.merge=function(ac,ab){var aa={};
var ad;
for(ad in ac){aa[ad]=ac[ad]
}for(ad in ab){aa[ad]=ab[ad]
}return aa
};
dv.util.getPercentValue=function(ab,aa){return(dv.util.isPercentString(ab))?(aa*parseInt(ab,10)/100):ab
};
dv.util.isPercentString=function(aa){return(typeof aa==="string"&&/^(-?[0-9]+)%$/.test(aa))
};
dv.util.isValidValue=function(ac,ab){for(var aa=0;
aa<ab.length;
aa++){if(dv.util[ab[aa]](ac)){return true
}}return false
};
dv.util.identity=function(aa){return aa
};
dv.util.clamp=function(ac,ab,aa){return Math.min(Math.max(ac,ab),aa)
};
dv.util.clone=function(aa){if(!dv.util.isObject(aa)){return aa
}return dv.util.isArray(aa)?aa.slice():dv.util.extend({},aa)
};
dv.util.isArray=function(aa){if(Array.isArray){return Array.isArray(aa)
}return Object.prototype.toString.call(aa)=="[object Array]"
};
dv.util.isObject=function(aa){return aa===Object(aa)
};
dv.util.isFunction=function(aa){return Object.prototype.toString.call(aa)=="[object Function]"
};
dv.util.isUndefined=function(aa){return aa===void 0
};
dv.util.isFinite=function(aa){return isFinite(aa)&&!isNaN(parseFloat(aa))
};
dv.util.isDate=function(aa){return aa instanceof Date
};
dv.util.isEmpty=function(aa){return Object.keys(aa).length===0
};
dv.util.extend=function(aa){dv.util.each(Array.prototype.slice.call(arguments,1),function(ab){for(var ac in ab){aa[ac]=ab[ac]
}});
return aa
};
dv.util.each=function(af,ae,ad){if(af==null){return
}if(Array.prototype.forEach&&af.forEach===Array.prototype.forEach){af.forEach(ae,ad)
}else{if(af.length===+af.length){for(var ac=0,aa=af.length;
ac<aa;
ac++){if(ae.call(ad,af[ac],ac,af)==={}){return
}}}else{for(var ab in af){if(dv.util.has(af,ab)){if(ae.call(ad,af[ab],ab,af)==={}){return
}}}}}};
dv.util.has=function(ab,aa){return Object.prototype.hasOwnProperty.call(ab,aa)
};
dv.util.uniq=function(ag,af,ae,ad){if(dv.util.isFunction(af)){ad=ae;
ae=af;
af=false
}var ab=ae?dv.util.map(ag,ae,ad):ag;
var ac=[];
var aa=[];
dv.util.each(ab,function(ai,ah){if(af?(!ah||aa[aa.length-1]!==ai):!dv.util.contains(aa,ai)){aa.push(ai);
ac.push(ag[ah])
}});
return ac
};
dv.util.union=function(){return dv.util.uniq(Array.prototype.concat.apply(Array.prototype,arguments))
};
dv.util.contains=function(ab,aa){if(ab==null){return false
}if(Array.prototype.indexOf&&ab.indexOf===Array.prototype.indexOf){return ab.indexOf(aa)!=-1
}return dv.util.any(ab,function(ac){return ac===aa
})
};
dv.util.any=function(ad,ac,ab){if(!ac){ac=dv.util.identity
}var aa=false;
if(ad==null){return aa
}if(Array.prototype.some&&ad.some===Array.prototype.some){return ad.some(ac,ab)
}dv.util.each(ad,function(ag,ae,af){if(aa||(aa=ac.call(ab,ag,ae,af))){return{}
}})
};
dv.util.sortBy=function(ae,ad,aa){var ac=function(af){return dv.util.isFunction(af)?af:function(ag){return ag[af]
}
};
var ab=ac(ad);
return dv.util.pluck(dv.util.map(ae,function(ah,af,ag){return{value:ah,index:af,criteria:ab.call(aa,ah,af,ag)}
}).sort(function(ai,ah){var ag=ai.criteria;
var af=ah.criteria;
if(ag!==af){if(ag>af||ag===void 0){return 1
}if(ag<af||af===void 0){return -1
}}return ai.index<ah.index?-1:1
}),"value")
};
dv.util.pluck=function(ab,aa){return dv.util.map(ab,function(ac){return ac[aa]
})
};
dv.util.map=function(ad,ac,ab){var aa=[];
if(ad===null){return aa
}if(Array.prototype.map&&ad.map===Array.prototype.map){return ad.map(ac,ab)
}dv.util.each(ad,function(ag,ae,af){aa[aa.length]=ac.call(ab,ag,ae,af)
});
return aa
};
dv.util.reduce=function(ae,ad,aa,ac){var ab=arguments.length>2;
if(ae===null){ae=[]
}if(Array.prototype.reduce&&ae.reduce===Array.prototype.reduce){if(ac){ad=dv.util.bind(ad,ac)
}return ab?ae.reduce(ad,aa):ae.reduce(ad)
}dv.util.each(ae,function(ah,af,ag){if(!ab){aa=ah;
ab=true
}else{aa=ad.call(ac,aa,ah,af,ag)
}});
if(!ab){throw new TypeError("Reduce of empty array with no initial value")
}return aa
};
dv.util.bind=function(ac,ab){if(ac.bind===Function.prototype.bind&&Function.prototype.bind){return Function.prototype.bind.apply(ac,Array.prototype.slice.call(arguments,1))
}var aa=Array.prototype.slice.call(arguments,2);
return function(){return ac.apply(ab,aa.concat(Array.prototype.slice.call(arguments)))
}
};
dv.util.noop=function(){};
dv.util.each(["Arguments","String","Number","RegExp"],function(aa){dv.util["is"+aa]=function(ab){return toString.call(ab)=="[object "+aa+"]"
}
});
dv.util.validateParam=function(ad,ac,ab,af){if(ac==="isString"){if(dv.util.isString(ad)){if(dv.util.isArray(ab)&&(ab.indexOf(ad.toLowerCase())!==-1)){return ad.toLowerCase()
}}return af
}else{if(ac==="isNumber"){if(dv.util.isNumber(ad)){if(dv.util.isArray(ab)&&(ad<=ab[1]&&ad>=ab[0])){return ad
}}return af
}else{if(ac==="isFunction"){if(dv.util.isFunction(ad)){return ad
}return af
}else{if(ac==="isDimension"){if(ad==="x"||ad==="X"){return"x"
}if(ad==="y"||ad==="Y"){return"y"
}if(ad===["x","y"]||ad===["X","y"]||ad===["x","Y"]||ad===["X","Y"]){return["x","y"]
}return af
}else{if(ac==="isRange"){var aa=ab[0],ae=ab[1];
if(dv.util.isArray(ad)&&ad.length===2){if(dv.util.isNumber(ad[0])&&dv.util.isNumber(ad[1])){aa=Math.max(Math.min(ad[0],ad[1]),ab[0]);
ae=Math.min(Math.max(ad[0],ad[1]),ab[1])
}return[aa,ae]
}return af
}}}}}};
dv.util=dv.util||{};
dv.util.svg={};
dv.util.svg.getDasharray=function(aa){if(aa.indexOf(",")!=-1||aa.indexOf(" ")!=-1){return aa
}if(m.hasOwnProperty(aa)){return m[aa]
}throw new Error("The dashed line format is invalid")
};
var m={solid:"",dashed:"7,4",dotted:"2,3",dotdash:"2,3,7,4",longdash:"11,4",twodash:"5,2,11,2"};
dv.container=dv.extend(function(){var ab={x:dv.scale.linear,y:dv.scale.linear,yMin:dv.scale.linear,yMax:dv.scale.linear,xMin:dv.scale.linear,xMax:dv.scale.linear,color:dv.scale.color,fill:dv.scale.color,stroke:dv.scale.color,alpha:dv.scale.linear,shape:dv.scale.shape,size:dv.scale.size,radius:dv.scale.linear,group:dv.scale.ordinal,linetype:dv.scale.linetype,label:dv.scale.identity};
function aa(){this._aes={}
}aa.render=function(){throw new Error("render() must be implemented in a subclass")
};
aa._calculateStats=function(){throw new Error("_calculateStats() must be implemented in a subclass")
};
aa._handlePositions=function(){throw new Error("_handlePositions() must be implemented in a subclass")
};
aa.getTrainedScale=function(ac){throw new Error("getTrainedScale() must be implemented in a subclass")
};
aa.getExplicitScalesMap=function(){return this._aes
};
aa._normalizeData=function(ad){if(ad.hasOwnProperty("data")&&!dv.util.isArray(ad.data)){return ad
}var ag={},ae=this.getExplicitScalesMap(),af,ac=this;
dv.util.each(ae,function(ak,ai){for(var aj in ak){af=ak[aj];
if(!(af instanceof dv.scale.constant)){var ah=ad[af.mapping()];
if(dv.util.isArray(ah)){ag[af.property()]=ah
}}}});
ag.data=ad;
return ag
};
aa.map=function(ae,ac,af,ad){if(!af){af=ab[ae]().copy().isDefault(true)
}if(!af){throw new Error("There is no default scale associated with this property. Either the property isn't valid or the scale default doesn't exist.")
}if(arguments.length<4){ad=0
}if(!this._aes[ae]){this._aes[ae]={}
}this._aes[ae][ad]=af.property(ae).mapping(ac).scaleIndex(ad);
return this
};
aa.set=function(ac,ae){if(!this._aes[ac]){this._aes[ac]={}
}var ad=this._aes[ac][0]=dv.scale.constant();
if(dv.util.isFunction(ae)){ad.map=ad.mapToProp=ae
}else{ad.value(ae)
}return this
};
aa.on=function(ae,af,ad){if(arguments.length<3){ad=false
}var ac=af&&dv.util.isFunction(af);
if(ac){this.eventMap=this.eventMap||{};
this.eventMap[ae]={callback:af,capture:ad}
}else{if(this.eventMap){delete this.eventMap[ae]
}this.unregisterEventMap=this.unregisterEventMap||{};
this.unregisterEventMap[ae]=ad
}this._removeRegisteredEvents();
this._addRegisteredEvents();
return this
};
aa.position=function(ac){if(!arguments.length){return(this._chart&&!this._position)?this._chart.position():this._position
}this._position=ac;
return this
};
aa.delay=function(ac){if(!arguments.length){return(this._chart&&dv.util.isUndefined(this._delay))?this._chart.delay():this._delay
}this._delay=d3.functor(ac);
return this
};
aa.duration=function(ac){if(!arguments.length){return(this._chart&&dv.util.isUndefined(this._duration))?this._chart.duration():this._duration
}this._duration=d3.functor(ac);
return this
};
aa.ease=function(ac){if(!arguments.length){return(this._chart&&dv.util.isUndefined(this._ease))?this._chart.ease():this._ease
}this._ease=ac;
return this
};
return aa
});
dv.coord=dv.extend(function(){function aa(){this._flip=false
}aa.flip=function(ab){if(!arguments.length){return this._flip
}this._flip=ab;
return this
};
aa.startX=function(ab){if(!arguments.length){return this._startX
}if(!dv.util.isValidValue(ab,["isFinite","isPercentString"])){dv.log.error({msg:"Invalid value type, startX/startAngle must be a number or percent string",data:{val:ab}})
}this._startX=ab;
return this
};
aa.endX=function(ab){if(!arguments.length){return this._endX
}if(!dv.util.isValidValue(ab,["isFinite","isPercentString"])){dv.log.error({msg:"Invalid value type, endX/endAngle must be a number or percent string",data:{val:ab}})
}this._endX=ab;
return this
};
aa.startY=function(ab){if(!arguments.length){return this._startY
}if(!dv.util.isValidValue(ab,["isFinite","isPercentString"])){dv.log.error({msg:"Invalid value type, startY/innerRadius must be a number or percent string",data:{val:ab}})
}this._startY=ab;
return this
};
aa.endY=function(ab){if(!arguments.length){return this._endY
}if(!dv.util.isValidValue(ab,["isFinite","isPercentString"])){dv.log.error({msg:"Invalid value type, endY/outerRadius must be a number or percent string",data:{val:ab}})
}this._endY=ab;
return this
};
return aa
});
dv.coord.cartesian=dv.coord.extend(function(){function aa(){this._super();
this.startX(0);
this.endX(0);
this.startY(0);
this.endY(0);
this._type="cartesian"
}aa._translatePercentToX=function(af,ad){var ab=dv.util.scaleRange(af),ae=this._translatePercent(ad,ab,this.startX(),this.endX()),ac=Math.abs(ab[1]-ab[0])*3;
return dv.util.clamp(ae,ab[0]-ac,ab[1]+ac)
};
aa._translatePercentToY=function(af,ad){var ab=dv.util.scaleRange(af),ae=this._translatePercent(ad,ab,this.startY(),this.endY()),ac=Math.abs(ab[1]-ab[0])*3;
return dv.util.clamp(ae,ab[1]-ac,ab[0]+ac)
};
aa._translatePercent=function(ad,ac,ae,ab){return(((ac[1]-ac[0])-ab-ae)*ad+ae+ac[0])
};
aa._translatePercentArrToY=function(ad,ac){var ab=this;
return dv.util.map(ac,function(ae){return ab._translatePercentToY(ad,ae)
})
};
aa._translatePercentArrToX=function(ad,ac){var ab=this;
return dv.util.map(ac,function(ae){return ab._translatePercentToX(ad,ae)
})
};
aa._text=function(){var ab=this;
function ac(){var ad=dv.svg.text();
if(ab._flip){return ad.x(function(af,ae){return ab._translatePercentToY(af.panel.yOuterScale(),ac.y()(af,ae))
}).y(function(af,ae){return ab._translatePercentToX(af.panel.xOuterScale(),ac.x()(af,ae))
})
}else{return ad.x(function(af,ae){return ab._translatePercentToX(af.panel.xOuterScale(),ac.x()(af,ae))
}).y(function(af,ae){return ab._translatePercentToY(af.panel.yOuterScale(),ac.y()(af,ae))
})
}}ac.x=function(ad){if(!arguments.length){return this._x
}this._x=ad;
return this
};
ac.y=function(ad){if(!arguments.length){return this._y
}this._y=ad;
return this
};
return ac
};
aa._point=function(){var ac=this,ab={};
ab.renderer=dv.svg.symbol().x(function(ae,ad){return ae.bounds.x
}).y(function(ae,ad){return ae.bounds.y
});
ab.getBounds=function(ae,ad){if(!ae.hasOwnProperty("y")){ae.y=0
}if(!ae.hasOwnProperty("x")){ae.x=0
}if(!ab._defined(ae,ad)){return null
}if(ac._flip){ae.bounds={x:ac._translatePercentToY(ae.panel.yOuterScale(),ab.y()(ae,ad)),y:ac._translatePercentToX(ae.panel.xOuterScale(),ab.x()(ae,ad))}
}else{ae.bounds={x:ac._translatePercentToX(ae.panel.xOuterScale(),ab.x()(ae,ad)),y:ac._translatePercentToY(ae.panel.yOuterScale(),ab.y()(ae,ad))}
}return ae
};
ab.getPath=function(ad){return(ad===null||ad.bounds===undefined)?null:ab.renderer(ad)
};
ab.x=function(ad){if(!arguments.length){return this._x
}this._x=ad;
return ab
};
ab.y=function(ad){if(!arguments.length){return this._y
}this._y=ad;
return ab
};
ab.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ab
};
aa._line=function(){var ac=this,ab={};
ab.renderer=d3.svg.line().x(function(ae,ad){return ae.bounds.x
}).y(function(ae,ad){return ae.bounds.y
});
ab.getBounds=function(af,ad){var ae=[];
dv.util.each(af,function(ah,ag){if(!ah.hasOwnProperty("y")){ah.y=0
}if(!ah.hasOwnProperty("x")){ah.x=0
}if(ab._defined(ah,ag)){if(ac._flip){ah.bounds={x:ac._translatePercentToY(ah.panel.yOuterScale(),ab.y()(ah,ag)),y:ac._translatePercentToX(ah.panel.xOuterScale(),ab.x()(ah,ag))}
}else{ah.bounds={x:ac._translatePercentToX(ah.panel.xOuterScale(),ab.x()(ah,ag)),y:ac._translatePercentToY(ah.panel.yOuterScale(),ab.y()(ah,ag))}
}ae.push(af[ag])
}});
return ae
};
ab.getPath=function(ad){return(ad===null)?null:ab.renderer(ad)
};
ab.x=function(ad){if(!arguments.length){return this._x
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.x must be a function",data:{val:ad}})
}this._x=ad;
return this
};
ab.y=function(ad){if(!arguments.length){return this._y
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.y must be a function",data:{val:ad}})
}this._y=ad;
return this
};
ab.defined=function(ad){if(!arguments.length){return this._defined
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.defined must be a function",data:{val:ad}})
}this._defined=ad;
return this
};
return ab
};
aa._area=function(){var ab=this,ac={};
ac.renderer=d3.svg.area();
ac.getBounds=function(af,ad){var ae=[];
ac.setupRenderer();
dv.util.each(af,function(ai,ag){if(!ai.hasOwnProperty("y")){ai.y=0
}if(!ai.hasOwnProperty("x")){ai.x=0
}if(ac._defined(ai,ag)){var ah=dv.util.clone(ai);
ah.bounds={x:ab._translatePercentToX(ai.panel.xOuterScale(),ac.x()(ai,ag)),y0:ab._translatePercentToY(ai.panel.yOuterScale(),ac.y0()(ai,ag)),y1:ab._translatePercentToY(ai.panel.yOuterScale(),ac.y1()(ai,ag))};
ae.push(ah)
}});
return ae
};
ac.getPath=function(ad){ac.setupRenderer();
return(ad===null)?null:ac.renderer(ad)
};
ac.setupRenderer=function(){if(ab._flip){ac.renderer.x(null).y0(null).y1(null).y(function(ae,ad){return ae.bounds.x
}).x0(function(ae,ad){return ae.bounds.y0
}).x1(function(ae,ad){return ae.bounds.y1
})
}else{ac.renderer.y(null).x0(null).x1(null).x(function(ae,ad){return ae.bounds.x
}).y0(function(ae,ad){return ae.bounds.y0
}).y1(function(ae,ad){return ae.bounds.y1
})
}};
ac.x=function(ad){if(!arguments.length){return this._x
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, area.x must be a function",data:{val:ad}})
}this._x=ad;
return this
};
ac.y0=function(ad){if(!arguments.length){return this._y0
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, area.y0 must be a function",data:{val:ad}})
}this._y0=ad;
return this
};
ac.y1=function(ad){if(!arguments.length){return this._y1
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, area.y1 must be a function",data:{val:ad}})
}this._y1=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, area.defined must be a function",data:{val:ad}})
}this._defined=ad;
return this
};
return ac
};
aa._rect=function(){var ab=this,ac={};
ac.renderer=dv.svg.rect().x0(function(ae,ad){return ae.bounds.x0
}).x1(function(ae,ad){return ae.bounds.x1
}).y0(function(ae,ad){return ae.bounds.y0
}).y1(function(ae,ad){return ae.bounds.y1
});
ac.getBounds=function(ah,ad){var af=dv.util.clone(ah);
var ag=af[ah.panel.xScale(ah).property()];
if(dv.util.isArray(ag)){af.x0=ag[0];
af.x1=ag[1]
}var ae=af[ah.panel.yScale(ah).property()];
if(dv.util.isArray(ae)){af.y0=ae[0];
af.y1=ae[1]
}if(!ac._defined(af,ad)){return null
}if(ab._flip){af.bounds={x0:ab._translatePercentToY(ah.panel.yOuterScale(),ac.y0()(af,ad)),x1:ab._translatePercentToY(ah.panel.yOuterScale(),ac.y1()(af,ad)),y0:ab._translatePercentToX(ah.panel.xOuterScale(),ac.x0()(af,ad)),y1:ab._translatePercentToX(ah.panel.xOuterScale(),ac.x1()(af,ad))}
}else{af.bounds={x0:ab._translatePercentToX(ah.panel.xOuterScale(),ac.x0()(af,ad)),x1:ab._translatePercentToX(ah.panel.xOuterScale(),ac.x1()(af,ad)),y0:ab._translatePercentToY(ah.panel.yOuterScale(),ac.y0()(af,ad)),y1:ab._translatePercentToY(ah.panel.yOuterScale(),ac.y1()(af,ad))}
}return af
};
ac.getPath=function(ad){return(ad===null)?null:ac.renderer(ad)
};
ac.x0=function(ad){if(!arguments.length){return this._x0
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.x0 must be a function",data:{val:ad}})
}this._x0=ad;
return this
};
ac.x1=function(ad){if(!arguments.length){return this._x1
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.x1 must be a function",data:{val:ad}})
}this._x1=ad;
return this
};
ac.y0=function(ad){if(!arguments.length){return this._y0
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.y0 must be a function",data:{val:ad}})
}this._y0=ad;
return this
};
ac.y1=function(ad){if(!arguments.length){return this._y1
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.y1 must be a function",data:{val:ad}})
}this._y1=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}if(!dv.util.isValidValue(ad,["isFunction"])){dv.log.error({msg:"Invalid value, line.defined must be a function",data:{val:ad}})
}this._defined=ad;
return this
};
return ac
};
aa._errorBar=function(){var ab=this,ac={};
ac.renderer=dv.svg.errorBar().x0(function(ae,ad){return ae.bounds.x0
}).x1(function(ae,ad){return ae.bounds.x1
}).y0(function(ae,ad){return ae.bounds.y0
}).y1(function(ae,ad){return ae.bounds.y1
});
ac.getBounds=function(af,ad){var ae=dv.util.clone(af);
if(!ac._defined(ae,ad)){return null
}if(ab._flip){ae.bounds={x0:ab._translatePercentToY(af.panel.yOuterScale(),ac.y0()(ae,ad)),x1:ab._translatePercentToY(af.panel.yOuterScale(),ac.y1()(ae,ad)),y0:ab._translatePercentToX(af.panel.xOuterScale(),ac.x0()(ae,ad)),y1:ab._translatePercentToX(af.panel.xOuterScale(),ac.x1()(ae,ad))}
}else{ae.bounds={x0:ab._translatePercentToX(af.panel.xOuterScale(),ac.x0()(ae,ad)),x1:ab._translatePercentToX(af.panel.xOuterScale(),ac.x1()(ae,ad)),y0:ab._translatePercentToY(af.panel.yOuterScale(),ac.y0()(ae,ad)),y1:ab._translatePercentToY(af.panel.yOuterScale(),ac.y1()(ae,ad))}
}return ae
};
ac.getPath=function(ad){return(ad===null)?null:ac.renderer(ad)
};
ac.x0=function(ad){if(!arguments.length){return this._x0
}this._x0=ad;
return this
};
ac.x1=function(ad){if(!arguments.length){return this._x1
}this._x1=ad;
return this
};
ac.y0=function(ad){if(!arguments.length){return this._y0
}this._y0=ad;
return this
};
ac.y1=function(ad){if(!arguments.length){return this._y1
}this._y1=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ac
};
aa._poly=function(){var ab=this,ac={};
ac.renderer=dv.svg.poly().xs(function(ae,ad){return ae.bounds.x
}).ys(function(ae,ad){return ae.bounds.y
});
ac.getBounds=function(af,ad){var ae=dv.util.clone(af);
if(ac._defined(af,ad)){if(ab._flip){ae.bounds={x:ab._translatePercentArrToY(af.panel.yOuterScale(),ac.ys()(af,ad)),y:ab._translatePercentArrToX(af.panel.xOuterScale(),ac.xs()(af,ad))}
}else{ae.bounds={x:ab._translatePercentArrToX(af.panel.xOuterScale(),ac.xs()(af,ad)),y:ab._translatePercentArrToY(af.panel.yOuterScale(),ac.ys()(af,ad))}
}}return ae
};
ac.getPath=function(ad){return(ad===null)?null:ac.renderer(ad)
};
ac.xs=function(ad){if(!arguments.length){return this._xs
}this._xs=ad;
return this
};
ac.ys=function(ad){if(!arguments.length){return this._ys
}this._ys=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ac
};
return aa
});
dv.coord.polar=dv.coord.extend(function(){function aa(){this._super();
this.innerRadius=this.startY;
this.outerRadius=this.endY;
this.startAngle=this.startX;
this.endAngle=this.endX;
this.innerRadius(0);
this.outerRadius(0);
this.startAngle(0);
this.endAngle(360);
this._type="polar"
}aa._transformAngleRadiusToXY=function(ac,ab){ac+=-1.570796327;
return[ab*Math.cos(ac),ab*Math.sin(ac)]
};
aa._translatePercentToRadius=function(ac,ad){var ab=Math.abs(ac[1]-ac[0])/2,af=dv.util.getPercentValue(this.innerRadius(),ab),ae=dv.util.getPercentValue(this.outerRadius(),ab);
return(ab-ae-af)*ad+af
};
aa._translatePercentToTheta=function(af,ad){var ag=360,ab=dv.util.getPercentValue(this.startAngle(),ag),ac=dv.util.getPercentValue(this.endAngle(),ag),ae=(ac-ab)*ad+ab;
return ae*0.017453293
};
aa._translatePercentArrToRadius=function(ac,ad){var ab=this;
return dv.util.map(ad,function(ae){return ab._translatePercentToRadius(ac,ae)
})
};
aa._translatePercentArrToTheta=function(ad,ac){var ab=this;
return dv.util.map(ac,function(ae){return ab._translatePercentToTheta(ad,ae)
})
};
aa._getRadiusRange=function(ae,ad){var ac=dv.util.scaleRange(ae),ab=dv.util.scaleRange(ad);
return[0,Math.min(Math.abs(ac[1]-ac[0]),Math.abs(ab[1]-ab[0]))]
};
aa._text=function(){var ab=this;
function ac(){var ad=dv.svg.text.radial();
if(ab._flip){return ad.angle(function(af,ae){return ab._translatePercentToTheta(af.panel.yOuterScale(),ac.y()(af,ae))
}).radius(function(af,ae){return ab._translatePercentToRadius(ab._getRadiusRange(af.panel.xOuterScale(),af.panel.yOuterScale()),ac.x()(af,ae))
})
}else{return ad.angle(function(af,ae){return ab._translatePercentToTheta(af.panel.xOuterScale(),ac.x()(af,ae))
}).radius(function(af,ae){return ab._translatePercentToRadius(ab._getRadiusRange(af.panel.xOuterScale(),af.panel.yOuterScale()),ac.y()(af,ae))
})
}}ac.x=function(ad){if(!arguments.length){return this._x
}this._x=ad;
return this
};
ac.y=function(ad){if(!arguments.length){return this._y
}this._y=ad;
return this
};
return ac
};
aa._point=function(){var ac=this,ab={};
ab.renderer=dv.svg.symbol.radial().angle(function(ae,ad){return ae.bounds.x
}).radius(function(ae,ad){return ae.bounds.y
});
ab.getBounds=function(af,ae){if(!af.hasOwnProperty("y")){af.y=0
}if(!af.hasOwnProperty("x")){af.x=0
}if(ab._defined(af,ae)){var ad=ac._getRadiusRange(af.panel.xOuterScale(),af.panel.yOuterScale());
if(ac._flip){af.bounds={x:ac._translatePercentToTheta(af.panel.xOuterScale(),ab.y()(af,ae)),y:ac._translatePercentToRadius(ad,ab.x()(af,ae))}
}else{af.bounds={x:ac._translatePercentToTheta(af.panel.xOuterScale(),ab.x()(af,ae)),y:ac._translatePercentToRadius(ad,ab.y()(af,ae))}
}}return af
};
ab.getPath=function(ad){return(ad===null||dv.util.isUndefined(ad.bounds))?null:ab.renderer(ad)
};
ab.x=function(ad){if(!arguments.length){return this._x
}this._x=ad;
return this
};
ab.y=function(ad){if(!arguments.length){return this._y
}this._y=ad;
return this
};
ab.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ab
};
aa._line=function(){var ac=this,ab={};
ab.renderer=d3.svg.line.radial().angle(function(ae,ad){return ae.bounds.x
}).radius(function(ae,ad){return ae.bounds.y
});
ab.getBounds=function(af,ad){var ae=[];
dv.util.each(af,function(ai,ah){var ag=ac._getRadiusRange(ai.panel.xOuterScale(),ai.panel.yOuterScale());
if(!ai.hasOwnProperty("y")){ai.y=0
}if(!ai.hasOwnProperty("x")){ai.x=0
}if(ab._defined(ai,ah)){if(ac._flip){ai.bounds={x:ac._translatePercentToTheta(ai.panel.xOuterScale(),ab.y()(ai,ah)),y:ac._translatePercentToRadius(ag,ab.x()(ai,ah))}
}else{ai.bounds={x:ac._translatePercentToTheta(ai.panel.xOuterScale(),ab.x()(ai,ah)),y:ac._translatePercentToRadius(ag,ab.y()(ai,ah))}
}ae.push(af[ah])
}});
return ae
};
ab.getPath=function(ad){return(ad===null)?null:ab.renderer(ad)
};
ab.x=function(ad){if(!arguments.length){return this._x
}this._x=ad;
return this
};
ab.y=function(ad){if(!arguments.length){return this._y
}this._y=ad;
return this
};
ab.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ab
};
aa._area=function(){var ab=this,ac={};
ac.renderer=d3.svg.area.radial();
ac.getBounds=function(af,ad){var ae=[];
ac.setupRenderer();
dv.util.each(af,function(aj,ah){var ag=ab._getRadiusRange(aj.panel.xOuterScale(),aj.panel.yOuterScale());
if(!aj.hasOwnProperty("y")){aj.y=0
}if(!aj.hasOwnProperty("x")){aj.x=0
}if(ac._defined(aj,ah)){var ai=dv.util.clone(aj);
if(ab._flip){ai.bounds={x:ab._translatePercentToRadius(ag,ac.x()(aj,ah)),y0:ab._translatePercentToTheta(aj.panel.xOuterScale(),ac.y0()(aj,ah)),y1:ab._translatePercentToTheta(aj.panel.xOuterScale(),ac.y1()(aj,ah))}
}else{ai.bounds={x:ab._translatePercentToTheta(aj.panel.xOuterScale(),ac.x()(aj,ah)),y0:ab._translatePercentToRadius(ag,ac.y0()(aj,ah)),y1:ab._translatePercentToRadius(ag,ac.y1()(aj,ah))}
}ae.push(ai)
}});
return ae
};
ac.getPath=function(ad){ac.setupRenderer();
return(ad===null)?null:ac.renderer(ad)
};
ac.setupRenderer=function(){if(ab._flip){ac.renderer.angle(null).innerRadius(null).outerRadius(null).radius(function(ae,ad){return ae.bounds.x
}).startAngle(function(ae,ad){return ae.bounds.y0
}).endAngle(function(ae,ad){return ae.bounds.y1
})
}else{ac.renderer.radius(null).startAngle(null).endAngle(null).angle(function(ae,ad){return ae.bounds.x
}).innerRadius(function(ae,ad){return ae.bounds.y0
}).outerRadius(function(ae,ad){return ae.bounds.y1
})
}};
ac.x=function(ad){if(!arguments.length){return this._x
}this._x=ad;
return this
};
ac.y0=function(ad){if(!arguments.length){return this._y0
}this._y0=ad;
return this
};
ac.y1=function(ad){if(!arguments.length){return this._y1
}this._y1=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ac
};
aa._rect=function(){var ab=this,ac={};
ac.renderer=d3.svg.arc().startAngle(function(ae,ad){return ae.bounds.x0
}).endAngle(function(ae,ad){return ae.bounds.x1
}).innerRadius(function(ae,ad){return ae.bounds.y0
}).outerRadius(function(ae,ad){return ae.bounds.y1
});
ac.getBounds=function(ag,ae){var af=dv.util.clone(ag);
if(!ac._defined(af,ae)){return null
}var ad=ab._getRadiusRange(ag.panel.xOuterScale(),ag.panel.yOuterScale());
if(ab._flip){af.bounds={x0:ab._translatePercentToTheta(ag.panel.yOuterScale(),ac.y0()(af,ae)),x1:ab._translatePercentToTheta(ag.panel.yOuterScale(),ac.y1()(af,ae)),y0:ab._translatePercentToRadius(ad,ac.x0()(af,ae)),y1:ab._translatePercentToRadius(ad,ac.x1()(af,ae))}
}else{af.bounds={x0:ab._translatePercentToTheta(ag.panel.xOuterScale(),ac.x0()(af,ae)),x1:ab._translatePercentToTheta(ag.panel.xOuterScale(),ac.x1()(af,ae)),y0:ab._translatePercentToRadius(ad,ac.y0()(af,ae)),y1:ab._translatePercentToRadius(ad,ac.y1()(af,ae))}
}return af
};
ac.getPath=function(ad){return(ad===null)?null:ac.renderer(ad)
};
ac.x0=function(ad){if(!arguments.length){return this._x0
}this._x0=ad;
return this
};
ac.x1=function(ad){if(!arguments.length){return this._x1
}this._x1=ad;
return this
};
ac.y0=function(ad){if(!arguments.length){return this._y0
}this._y0=ad;
return this
};
ac.y1=function(ad){if(!arguments.length){return this._y1
}this._y1=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ac
};
aa._poly=function(){var ab=this,ac={};
ac.renderer=dv.svg.poly.radial().angles(function(ae,ad){return ae.bounds.x
}).radii(function(ae,ad){return ae.bounds.y
});
ac.getBounds=function(ag,ae){var af=dv.util.clone(ag);
if(ac._defined(ag,ae)){var ad=ab._getRadiusRange(ag.panel.xOuterScale(),ag.panel.yOuterScale());
if(ab._flip){af.bounds={x:ab._translatePercentArrToTheta(ag.panel.xOuterScale(),ac.ys()(ag,ae)),y:ab._translatePercentArrToRadius(ad,ac.xs()(ag,ae))}
}else{af.bounds={x:ab._translatePercentArrToTheta(ag.panel.xOuterScale(),ac.xs()(ag,ae)),y:ab._translatePercentArrToRadius(ad,ac.ys()(ag,ae))}
}}return af
};
ac.getPath=function(ad){return(ad===null)?null:ac.renderer(ad)
};
ac.xs=function(ad){if(!arguments.length){return this._xs
}this._xs=ad;
return this
};
ac.ys=function(ad){if(!arguments.length){return this._ys
}this._ys=ad;
return this
};
ac.defined=function(ad){if(!arguments.length){return this._defined
}this._defined=ad;
return this
};
return ac
};
return aa
});
dv.guide=dv.extend(function(){function aa(){this._renderer=null
}aa._render=function(){dv.log.warn({msg:"dv.guide._render should not be called directly, try using dv.guide.legend.render or dv.guide.axis.render"})
};
aa._scale=function(ab){if(!arguments.length){return this.__scale
}this.__scale=ab;
return this
};
aa.orientation=function(ab){if(!arguments.length){return this._orientation
}this._orientation=ab;
return this
};
aa._parent=function(ab){if(!arguments.length){return this.__parent
}this.__parent=ab;
return this
};
aa.scaleIndex=function(ab){if(!arguments.length){return this._scaleIndex
}this._scaleIndex=ab;
return this
};
aa.title=function(ab){if(!arguments.length){return this._title
}this._title=ab;
return this
};
return aa
});
dv.guide.axes=dv.extend(function(){function aa(){this._axes={};
this._emptyTickFormat=function(){return""
}
}aa._initializeAxisRenderers=function(){this._eachAxis(function(ad,ac,ab){if(!ab.hasOwnProperty("_orientation")&&ad==="x"){ab._orientation="bottom"
}if(!ab.hasOwnProperty("_orientation")&&ad==="y"){ab._orientation="left"
}if(this._chart._coord.flip()){switch(ab._orientation){case"top":ab._orientation="right";
break;
case"right":ab._orientation="top";
break;
case"bottom":ab._orientation="left";
break;
case"left":ab._orientation="bottom";
break
}}})
};
aa._measure=function(ac){var ad=this._chart._g.select(".panels"),ab=this._chart._axisLabelContainer;
this._eachAxis(function(ah,ag,af){var ae=this._changeScaleRangeToLocal(ac.getOuterScale(ah));
if(!(this._chart._coord instanceof dv.coord.polar)&&af!=="none"){af._chart(this._chart)._scale(ae[ag])._parent(ad)._labelParent(ab);
ac.margins(af._measure(ac.margins(),ac.bounds(),ac))
}});
return this
};
aa._getAllOrientations=function(){var ab={};
this._eachAxis(function(ae,ad,ac){ab[ac._orientation]=ae
});
return ab
};
aa._render=function(ad,ac,ab){this._eachAxis(function(ah,ag,af){var ae=this._changeScaleRangeToLocal(ab.getOuterScale(ah));
if(this._chart._coord instanceof dv.coord.polar||af==="none"){ad.selectAll(".axis-"+ah+".axis-index-"+ag).transition().duration(this._chart._duration).style("opacity",0).remove();
this._chart._chartContainer.select(".axes-labels .axis-"+ah+".axis-index-"+ag).transition().duration(this._chart._duration).style("opacity",0).remove()
}else{af._chart(this._chart)._parent(ad)._scale(ae[ag])._labelParent(ac)._render(ad,ab,ab.bounds())
}});
return this
};
aa._measureTitles=function(ac){var ab=this._chart._axisLabelContainer;
this._eachAxis(function(ag,af,ae){if(ae!=="none"){var ad=ae._chart(this._chart)._measureAxisTitle(ab,ag,af);
ac.left+=ad.left;
ac.top+=ad.top;
ac.right-=ad.right;
ac.bottom-=ad.bottom
}});
return ac
};
aa._renderTitles=function(ab){var ac=this._chart._axisLabelContainer;
this._eachAxis(function(af,ae,ad){if(ad==="none"||!ad.title()){ac.selectAll(".axis-title-"+af+".axis-title-index-"+ae).transition().duration(this._chart._duration).style("opacity",0).remove()
}else{ad._chart(this._chart)._renderAxisTitle(ac,ab,af,ae)
}})
};
aa._changeScaleRangeToLocal=function(ac){var ad=ac.range();
var ab=ac.innerScaleGroup();
for(var ae in ab){dv.util.scaleRange(ab[ae],[ad[0],ad[1]])
}return ab
};
aa._eachAxis=function(ac){for(var ae in this._axes){var ad=this._axes[ae];
for(var ab in ad){ac.call(this,ae,+ab,ad[ab])
}}};
aa._add=function(ab,ac,ad){ad=ad===undefined?0:ad;
var ae=this._axes[ab];
if(!ae){this._axes[ab]=ae={}
}ae[ad]=ac;
return this
};
aa._axes=function(ab){if(!arguments.length){return this._axes
}this._axes=ab;
return this
};
aa._get=function(ab){return this._axes[ab]
};
aa._empty=function(){for(var ab in this._axes){delete this._axes[ab]
}this._axes={};
return this
};
aa._chart=function(ab){if(!arguments.length){return this._chart
}this._chart=ab;
return this
};
return aa
});
dv.guide.axis=dv.guide.extend(function(){function ab(){this._ticks=d3.functor(5);
this._tickInterval=undefined;
this._labelGroup=null;
this._htmlLabels=false
}function aa(ad,ac){return ad+"%"
}ab._measure=function(ae,ac,ad){var ak=this._getAxisOffset(ac),ag=dv.util.scaleRange(this._scale()),al=this._ticks.call(this,Math.abs(ag[1]-ag[0])),ah,ao=this;
var ai=this._parent().append("g").classed("temp-axis",true);
if(this._shouldDrawAxisLabels(ad)){ah=this._constructLabelGroup(this.__labelParent,ak,true)
}var am=this._constructD3Axis(ah,ac,al,ad);
var af=this._measureAxis(ai,ak,am);
var aj={left:af.x+ak[0],top:af.y+ak[1],right:af.x+af.width+ak[0],bottom:af.y+af.height+ak[1]};
if(ah){ah.selectAll("span").each(function(){var au=this,ap=d3.select(this),at=ao._htmlLabels?ap.html():ap.text();
if(at){var ar=ao._orientation==="right"?au.offsetWidth/2:0,aq=ao._orientation==="bottom"?au.offsetHeight/2:0,av=[au.parentNode.parentNode.offsetLeft+au.parentNode.offsetLeft+ar,au.parentNode.parentNode.offsetTop+au.parentNode.offsetTop+aq];
aj.left=Math.min(av[0],aj.left);
aj.top=Math.min(av[1],aj.top);
aj.right=Math.max(av[0]+ar,aj.right);
aj.bottom=Math.max(av[1]+aq,aj.bottom)
}})
}ai.remove();
if(ah){ah.remove()
}var an={};
an.left=Math.abs(Math.min(aj.left-ac.left,0));
an.top=Math.abs(Math.min(aj.top-ac.top,0));
an.right=Math.max(aj.right-ac.right,0);
an.bottom=Math.max(aj.bottom-ac.bottom,0);
return this._unionAxisPadding(an,ae)
};
ab._render=function(ah,ad,aj){if(!this._scale()){throw new Error("The axis does not have a scale associated with it.")
}var ag=dv.util.scaleRange(this._scale()),ai=this._ticks.call(this,Math.abs(ag[1]-ag[0])),af;
var ae=this._getAxisOffset(aj);
if(this._shouldDrawAxisLabels(ad)){af=this._constructLabelGroup(this.__labelParent,ae)
}else{this.__labelParent.selectAll(".axis-"+this._scale().property()+".axis-index-"+this._scale().scaleIndex()).remove()
}var ac=this._constructD3Axis(af,aj,ai,ad);
this._renderAxis(this._parent(),ad.bounds(),ae,ac,af);
return this
};
ab._shouldDrawAxisLabels=function(ac){var af=ac.facet(),ae=this._scale().property(),ad=this.orientation();
return(af._isFree(ae)&&af._showAllPanelLabelsIfFree())||ac.visibleAxisLabelOrientations()[ad]
};
ab._unionAxisPadding=function(ac,ad){ad.left=Math.max(ad.left,ac.left);
ad.top=Math.max(ad.top,ac.top);
ad.right=Math.max(ad.right,ac.right);
ad.bottom=Math.max(ad.bottom,ac.bottom);
return ad
};
ab._constructLabelGroup=function(ae,ad,af){var ag=".axis-"+this._scale().property()+".axis-index-"+this._scale().scaleIndex()+(af?" .temp-axis":"");
var ac=ae.selectAll(ag).data([0]);
ac.enter().append("div").classed("axis-"+this._scale().property()+" axis-index-"+this._scale().scaleIndex(),true).classed("temp-axis",af).style("left",ad[0]+"px").style("top",ad[1]+"px");
if(dv.ANIMATION){ac.transition().delay(this._chart().delay()).duration(this._chart().duration()).ease(this._chart().ease()).style("left",ad[0]+"px").style("top",ad[1]+"px")
}else{ac.style("left",ad[0]+"px").style("top",ad[1]+"px")
}return ac
};
ab._getAxisOffset=function(ac){switch(this._orientation){case"bottom":return[0,ac.bottom];
case"left":return[ac.left,0];
case"top":return[0,ac.top];
case"right":return[ac.right,0]
}};
ab._constructD3Axis=function(ag,aj,ai,ac){var ah=dv.util.isUndefined(this._tickSize)?this._getDefaultTickSize(aj):this._tickSize,af=dv.util.isUndefined(this._minorTickSize)?this._getDefaultTickSize(aj):this._minorTickSize,ae;
if(this._orientation==="left"){ae="right"
}if(this._orientation==="right"){ae="left"
}if(this._orientation==="top"){ae="bottom"
}if(this._orientation==="bottom"){ae="top"
}if(this._scale().property()==="x"){var ad=dv.util.scaleRange(this._scale());
ad[0]+=this._chart().coord().startX();
ad[1]-=this._chart().coord().endX();
if(this._scale() instanceof dv.scale.ordinal){this._scale().rangeBands(ad)
}else{this._scale().range(ad)
}}return dv.svg.axis()._orient(ae)._labelParent(ag)._panel(ac)._ticks(dv.util.isUndefined(ai)?5:ai,this._tickInterval)._tickSize(ah,af,ah)._tickDx(dv.util.isUndefined(this._tickDx)?this._getDefaultTickDx():this._tickDx)._tickDy(dv.util.isUndefined(this._tickDy)?this._getDefaultTickDy():this._tickDy)._tickAnchor(dv.util.isUndefined(this._tickAnchor)?this._getDefaultTickAnchor():this._tickAnchor)._tickFormat(dv.util.isUndefined(this._tickFormat)&&this._chart().position()==="fill"&&this._scale().property()==="y"?aa:this._tickFormat)._tickValues(this._tickValues)._htmlLabels(this._htmlLabels)._tickSubdivide(this._tickSubdivide)._scale(this._scale()._d3Scale)
};
ab._renderAxis=function(ah,ag,ae,ac,ad){var af=ah.selectAll(".axis-"+this._scale().property()+".axis-index-"+this._scale().scaleIndex()).data([0]);
ac._labelParent(ad);
af.enter().append("g").classed("axis axis-"+this._scale().property()+" axis-index-"+this._scale().scaleIndex(),true).attr("transform","translate("+ae[0]+","+ae[1]+")");
if(dv.ANIMATION){af=af.transition().delay(this._chart().delay()).duration(this._chart().duration()).ease(this._chart().ease())
}af.attr("transform","translate("+ae[0]+","+ae[1]+")").call(ac)
};
ab._measureAxis=function(ae,ad,ac){ae.attr("transform","translate("+ad[0]+","+ad[1]+")").call(ac);
return ae.node().getBBox()
};
ab._measureAxisTitle=function(ae,aj,ag){var af={left:0,top:0,right:0,bottom:0};
if(this._title){var ah=ae.append("div").classed("temp-axis-title",true),ad=this._titleOrientation||this._orientation,ai=this._createAxisTitle(ah,ad,aj,ag),ac=ai.node().getBoundingClientRect();
if(ad==="top"||ad==="bottom"){af[ad]+=ac.height
}else{af[ad]+=ac.width
}ah.remove()
}return af
};
ab._renderAxisTitle=function(am,aj,ad,ak){var ac,al=6,ai=0,ae=this._titleOrientation||this._orientation,ah;
if(!this._title){return
}var ag=am.selectAll(".axis-title-"+ad+".axis-title-index-"+ak).empty(),af=this._createAxisTitle(am,ae,ad,ak);
if(dv.ANIMATION){ah=af.transition().duration(this._chart().duration()).delay(this._chart().delay()).ease(this._chart().ease())
}this._positionAxisTitle((ag||!dv.ANIMATION)?af:ah,aj[ae],ae);
if(ah){ah.style("opacity",1)
}else{af.style("opacity",1)
}};
ab._createAxisTitle=function(ad,ac,ag,ae){var af=ad.selectAll(".axis-title-"+ag+".axis-title-index-"+ae).data([ab]);
af.enter().append("div").classed("axis-title axis-title-"+ag+" axis-title-index-"+ae,true).style("opacity",dv.ANIMATION?0:1).style("position","absolute");
return af.text(this._title).classed({top:ac==="top",bottom:ac==="bottom",left:ac==="left",right:ac==="right"})
};
ab._positionAxisTitle=function(ae,ad,ac){ae.style("left",function(){var af=0;
return ad[0]+af+"px"
}).style("top",function(){var af=0;
if(ac==="top"){af=-this.offsetHeight
}if(ac==="right"||ac==="left"){af=-this.offsetHeight/2
}return ad[1]+af+"px"
})
};
ab._getDefaultTickSize=function(ac){if(this._orientation==="bottom"){return d3.functor(ac.bottom-ac.top)
}else{if(this._orientation==="left"){return d3.functor(ac.right-ac.left)
}else{if(this._orientation==="top"){return d3.functor(ac.bottom-ac.top)
}else{return d3.functor(ac.right-ac.left)
}}}};
ab._getDefaultTickDx=function(){return(this._orientation==="bottom"||this._orientation==="top")?d3.functor(0):d3.functor(-12)
};
ab._getDefaultTickDy=function(){return(this._orientation==="bottom"||this._orientation==="top")?d3.functor(-12):d3.functor(0)
};
ab._getDefaultTickAnchor=function(){if(this._orientation==="left"){return d3.functor("end")
}if(this._orientation==="right"){return d3.functor("start")
}return d3.functor("middle")
};
ab._labelParent=function(ac){if(!arguments.length){return this.__labelParent
}this.__labelParent=ac;
return this
};
ab.ticks=function(ad,ac){if(!arguments.length){return dv.util.isFinite(this._tickInterval)?[this._ticks,this._tickInterval]:this._ticks
}if(arguments.length>1){this._ticks=function(){return ad
};
this._tickInterval=ac
}else{this._ticks=d3.functor(ad);
this._tickInterval=undefined
}return this
};
ab.tickSubdivide=function(ac){if(!arguments.length){return this._tickSubdivide
}this._tickSubdivide=ac;
return this
};
ab.tickSize=function(ac){if(!arguments.length){return this._tickSize
}this._tickSize=d3.functor(ac);
return this
};
ab.minorTickSize=function(ac){if(!arguments.length){return this._minorTickSize
}this._minorTickSize=d3.functor(ac);
return this
};
ab.tickDx=function(ac){if(!arguments.length){return this._tickDx
}this._tickDx=d3.functor(ac);
return this
};
ab.htmlLabels=function(ac){if(!arguments.length){return this._htmlLabels
}this._htmlLabels=ac;
return this
};
ab.tickDy=function(ac){if(!arguments.length){return this._tickDy
}this._tickDy=d3.functor(ac);
return this
};
ab.tickAnchor=function(ac){if(!arguments.length){return this._tickAnchor
}this._tickAnchor=d3.functor(ac);
return this
};
ab.tickFormat=function(ad){if(!arguments.length){var ac=this._scale()._d3Scale;
if(this._tickFormat){return this._tickFormat
}if(ac.tickFormat){return ac.tickFormat(ac)
}return function(ae){return ae
}
}this._tickFormat=ad;
return this
};
ab.tickValues=function(ac){if(!arguments.length){return this._tickValues
}this._tickValues=ac;
return this
};
ab.titleOrientation=function(ac){if(!arguments.length){return this._titleOrientation
}this._titleOrientation=ac;
return this
};
ab._chart=function(ac){if(!arguments.length){return this.__chart
}this.__chart=ac;
return this
};
return ab
});
dv.svg.axis=function(){var at=d3.scale.linear(),aj="bottom",ap=d3.functor(6),ao=d3.functor(6),ai=d3.functor(6),al=d3.functor(0),ak=d3.functor(0),ag=d3.functor("start"),ac=[10],aa=null,ab=false,au,am=0,aq;
function af(aw,av){aw.attr("transform",function(ax){return"translate("+av(ax)+",0)"
})
}function ae(av,aw){av.attr("transform",function(ax){return"translate(0,"+aw(ax)+")"
})
}function ar(ay,aw,av){var ax=d3.select(ay).select("span").node().offsetWidth;
var az=av==="end"?-ax:av==="middle"?-ax/2:0;
return aw+az
}function an(az,ax,aw){var av=d3.select(az).select("span").node().offsetHeight;
var ay=aw==="top"?0:aw==="middle"?-av/2:-av;
return ax+ay
}function ah(ax,aB,aw){var aC=[];
if(aw&&aB.length>1){var aE=dv.util.scaleExtent(ax.domain()),az=-1,av=aB.length,aA=(aB[1]-aB[0])/++aw,ay,aD;
while(++az<av){for(ay=aw;
--ay>0;
){if((aD=+aB[az]-ay*aA)>=aE[0]){aC.push(aD)
}}}for(--az,ay=0;
++ay<aw&&(aD=+aB[az]+ay*aA)<aE[1];
){aC.push(aD)
}}return aC
}function ad(ax){var av=function(aB,aE,aC,aD,aA){var aF={};
switch(aA){case"top":aF.top=an(aB,-ak.call(aB,aE,aC),"top");
aF.left=aD(aE)+ar(aB,al.call(aB,aE,aC),ag.call(aB,aE,aC));
break;
case"bottom":aF.top=an(aB,ak.call(aB,aE,aC),"bottom");
aF.left=aD(aE)+ar(aB,al.call(aB,aE,aC),ag.call(aB,aE,aC));
break;
case"right":aF.top=aD(aE)+an(aB,ak.call(aB,aE,aC),"middle");
aF.left=ar(aB,al.call(aB,aE,aC),ag.call(aB,aE,aC));
break;
case"left":aF.top=aD(aE)+an(aB,ak.call(aB,aE,aC),"middle");
aF.left=ar(aB,-al.call(aB,aE,aC),ag.call(aB,aE,aC));
break
}aF.top=(isNaN(aF.top)?0:aF.top)+"px";
aF.left=(isNaN(aF.left)?0:aF.left)+"px";
var az=ag.call(aB,aE,aC);
d3.select(aB).classed({start:az==="start",middle:az==="middle",end:az==="end"});
return aF
};
var aw=function(aA,az){["top","left"].forEach(function(aB){aA.style(aB,function(aD,aC){return az[aC][aB]
})
})
};
var ay=function(aL,aG,aI){if(!aq){return
}var aF=au==null?(at.tickFormat?at.tickFormat.apply(at,ac):String):au,aK,aD,aH,aC;
aq.style("position","absolute");
aK=aq.selectAll(".axis-label").data(aL,String);
aD=aK.enter().append("div").classed("axis-label",true).style("opacity",0.000001).style("position","absolute");
aH=d3.transition(aK.exit()).style("opacity",0.000001).remove();
aC=d3.transition(aK).style("opacity",1);
aD.append("span");
var aB=aK.selectAll("span"),aO=function(aR,aQ,aP){return aF.call(this,aR,aP)
};
if(ab){aB.html(aO)
}else{aB.text(aO)
}var aN=[],aE=[],az=[],aM=[];
var aJ;
if(!at.ticks){var aA=at.rangeBand()/2;
aJ=function(aP){return aI(aP)+aA
}
}aD.each(function(aQ,aP){aN[aP]=av(this,aQ,aP,aJ||aG,aj)
});
aC.each(function(aQ,aP){aE[aP]=av(this,aQ,aP,aJ||aG,aj);
az[aP]=av(this,aQ,aP,aJ||aI,aj)
});
if(at.ticks){aH.each(function(aQ,aP){aM[aP]=av(this,aQ,aP,aI,aj)
})
}aw(aD,aN);
aw(aK,aE);
aw(aC,az);
if(at.ticks){aw(aH,aM)
}};
ax.each(function(){var aP=d3.select(this);
var aR=aa==null?(at.ticks?at.ticks.apply(at,ac):at.domain()):aa;
var aD=ah(at,aR,am),aB=aP.selectAll(".minor").data(aD,String),aL=aB.enter().insert("line","g").attr("class","tick minor").style("opacity",0.000001),aK=d3.transition(aB.exit()).style("opacity",0.000001).remove(),aA=d3.transition(aB).style("opacity",1);
var aO=aP.selectAll(".axis-tick").data(aR,String),aI=aO.enter().insert("g","path").classed("axis-tick",true).style("opacity",0.000001),aJ=d3.transition(aO.exit()).style("opacity",0.000001).remove(),aE=d3.transition(aO).style("opacity",1),az;
var aH=dv.util.scaleRangeNoReverse(at);
path=aP.selectAll(".domain").data([0]);
pathEnter=path.enter().append("path").attr("class","domain");
pathUpdate=d3.transition(path);
var aM=at.copy(),aN=this.__chart__||aM;
this.__chart__=aM;
aI.append("line").attr("class","tick");
var aC=aI.select("line"),aQ=aE.select("line");
switch(aj){case"bottom":az=af;
aL.attr("y2",function(aT,aS){return ao.call(this,aT,aS,panel)
});
aA.attr("x2",0).attr("y2",function(aT,aS){return ao.call(this,aT,aS,panel)
});
aC.attr("y2",function(aT,aS){return ap.call(this,aT,aS,panel)
});
aQ.attr("x2",0).attr("y2",function(aT,aS){return ap.call(this,aT,aS,panel)
});
pathUpdate.attr("d",function(aT,aS){return"M"+aH[0]+","+ai.call(this,aT,aS,panel)+"V0H"+aH[1]+"V"+ai.call(this,aT,aS,panel)
});
break;
case"top":az=af;
aL.attr("y2",function(aT,aS){return -ao.call(this,aT,aS,panel)
});
aA.attr("x2",0).attr("y2",function(aT,aS){return -ao.call(this,aT,aS,panel)
});
aC.attr("y2",function(aT,aS){return -ap.call(this,aT,aS,panel)
});
aQ.attr("x2",0).attr("y2",function(aT,aS){return -ap.call(this,aT,aS,panel)
});
pathUpdate.attr("d",function(aT,aS){return"M"+aH[0]+","+-ai.call(this,aT,aS,panel)+"V0H"+aH[1]+"V"+-ai.call(this,aT,aS,panel)
});
break;
case"left":az=ae;
aL.attr("x2",function(aT,aS){return -ao.call(this,aT,aS,panel)
});
aA.attr("x2",function(aT,aS){return -ao.call(this,aT,aS,panel)
}).attr("y2",0);
aC.attr("x2",function(aT,aS){return -ap.call(this,aT,aS,panel)
});
aQ.attr("x2",function(aT,aS){return -ap.call(this,aT,aS,panel)
}).attr("y2",0);
pathUpdate.attr("d",function(aT,aS){return"M"+-ai.call(this,aT,aS,panel)+","+aH[0]+"H0V"+aH[1]+"H"+-ai.call(this,aT,aS,panel)
});
break;
case"right":az=ae;
aL.attr("x2",function(aT,aS){return ao.call(this,aT,aS,panel)
});
aA.attr("x2",function(aT,aS){return ao.call(this,aT,aS,panel)
}).attr("y2",0);
aC.attr("x2",function(aT,aS){return ap.call(this,aT,aS,panel)
});
aQ.attr("x2",function(aT,aS){return ap.call(this,aT,aS,panel)
}).attr("y2",0);
pathUpdate.attr("d",function(aT,aS){return"M"+ai.call(this,aT,aS,panel)+","+aH[0]+"H0V"+aH[1]+"H"+ai.call(this,aT,aS,panel)
});
break
}if(at.ticks){aI.call(az,aN);
aE.call(az,aM);
aJ.call(az,aM);
aL.call(az,aN);
aA.call(az,aM);
aK.call(az,aM)
}else{var aG=aM.rangeBand()/2,aF=function(aS){return aM(aS)+aG
};
aI.call(az,aF);
aE.call(az,aF)
}ay(aR,aN,aM)
})
}ad._scale=function(av){if(!arguments.length){return at
}at=av;
return ad
};
ad._orient=function(av){if(!arguments.length){return aj
}aj=av;
return ad
};
ad._ticks=function(){if(!arguments.length){return ac
}ac=arguments;
return ad
};
ad._tickValues=function(av){if(!arguments.length){return aa
}aa=av;
return ad
};
ad._tickFormat=function(av){if(!arguments.length){return au
}au=av;
return ad
};
ad._htmlLabels=function(av){if(!arguments.length){return ab
}ab=av;
return ad
};
ad._tickSize=function(av,ay,aw){if(!arguments.length){return ap
}var ax=arguments.length-1;
ap=d3.functor(av);
ao=ax>1?d3.functor(ay):ap;
ai=ax>0?d3.functor(arguments[ax]):ap;
return ad
};
ad._tickDx=function(av){if(!arguments.length){return al
}al=av;
return ad
};
ad._tickDy=function(av){if(!arguments.length){return ak
}ak=av;
return ad
};
ad._tickAnchor=function(av){if(!arguments.length){return ag
}ag=av;
return ad
};
ad._tickSubdivide=function(av){if(!arguments.length){return am
}am=+av;
return ad
};
ad._panel=function(av){if(!arguments.length){return panel
}panel=av;
return ad
};
ad._labelParent=function(av){if(!arguments.length){return aq
}aq=av;
return ad
};
return ad
};
dv.guide.legends=dv.extend(function(){function aa(){this._legArr=[];
this.__hide=false;
this._ad={left:0,right:0,width:0,height:0}
}aa._render=function(ad){this._w=0;
this._h=0;
if(!this.__hide){var ae=ad.el.select(".legends"),ac=this;
var ab=ae.selectAll(".legend").data(this._legArr);
ab.exit().transition().duration(ad.duration).style("opacity",0).remove();
var af=ab.enter().append("g").classed("legend",true);
if(dv.ANIMATION){af.style("opacity",0)
}ab.each(function(am,al){var an={},ag=am.props[0],ai=ac._getScale(ad,am.props[0]),aj=ai.domain();
for(var ak=0;
ak<am.props.length;
ak++){var ah=am.props[ak],ao=ac._getScale(ad,am.props[ak]);
if(ao.hasSameDomain(aj)){an[ah]=ad.scales[ah]
}else{throw new Error("Can't render single legend from multiple domains")
}}am.guide._render(d3.select(this),an,{dims:ac._ad,renderOpts:ad});
ac._w+=am.guide._getUsedWidth();
ac._h+=am.guide._getUsedHeight();
ac._ad=am.guide._getAdjustedDimensions(ac._ad)
})
}return this
};
aa._getScale=function(ac,ae){var ab=ac.scales[ae],ad;
if(ae===undefined||ab===undefined||ab[0]===undefined){throw new Error("A '"+ae+"'' legend has been called for, but '"+ae+" hasn't been mapped to data.")
}return ab[0]
};
aa._add=function(ab){this._legArr.push(ab);
return this
};
aa._remove=function(ae){for(var ag in ae){var ah=ae[ag];
for(var ad=0;
ad<this._legArr.length;
ad++){var af=this._legArr[ad].props,ab=true;
for(var ac=0;
ac<af.length;
ac++){if(af[ac]===ah){af.splice(ac,1);
ac--
}if(af.length===0){ab=false
}}if(!ab){this._legArr.splice(ad,1);
ad--
}}}};
aa._legends=function(ab){if(!arguments.length){return this._legArr
}this._legArr=ab;
return this
};
aa._allowedDimensions=function(ab){if(!arguments.length){return this._ad
}this._ad=ab;
return this
};
aa._getWidth=function(){return this._w
};
aa._getHeight=function(){return this._h
};
aa._hide=function(ab){if(!arguments.length){return this.__hide
}this.__hide=ab;
return this
};
aa._empty=function(){for(var ab=0;
ab<this._legArr.length;
ab++){delete this._legArr[ab]
}this._legArr=[];
return this
};
return aa
});
dv.guide.legend=dv.guide.extend(function(){function ae(){this._overlay=false;
this._orientation="top";
this._vGap=5;
this._hGap=15;
this._defaultPadding=this._padding={top:10,left:10,right:10,bottom:10};
this._swatchWidth=15;
this._swatchHeight=10;
this._innerPadding=5;
this._spanPercent=0.75;
this._lineHeight=0;
this._entriesWidth=[]
}ae._render=function(ah,ap,at){var ai=ah,am=at.dims,ar=this;
this._renderingOptions=at.renderOpts;
this._scales=ap;
this._transformData=[];
this._width=am.width-this._padding.left-this._padding.right;
this._height=am.height-this._padding.top-this._padding.bottom;
var an=this._drawEntries(ah);
this._legendWidths=ab.call(this,an);
var ao=ac.call(this,Math.min(this._legendWidths.length,Math.floor(this._width/this._swatchWidth)));
var aj=ad.call(this,ao);
var al=aj.offsets;
ao=aj.cols;
this._width=this._width-ao.padding+(this._hGap*(ao.data.length-1));
this._height=this._lineHeight+al[al.length-1].y;
an.each(function(aw,au){var av=d3.select(this);
if(dv.ANIMATION){av=av.transition().duration(ar._renderingOptions.duration).delay(ar._renderingOptions.delay).ease(ar._renderingOptions.ease)
}av.attr("transform","translate("+al[au].x+", "+al[au].y+")")
});
if(!this._renderingOptions.firstRender){ai=ah.transition().duration(this._renderingOptions.duration).style("opacity",1)
}var ak=(this._orientation==="right")?am.left+am.width-this._width-this._padding.right:am.left+this._padding.left;
var aq=(this._orientation==="bottom")?am.top+am.height-this._height-this._padding.bottom:am.top+this._padding.top;
ai.attr("transform","translate("+(ak)+","+(aq)+")");
if(this._renderingOptions.firstRender){ai.transition().duration(this._renderingOptions.duration).style("opacity",1)
}};
ae._drawEntries=function(al){var ai=this,ak=[];
this._entryWidths=[];
for(var am in this._scales){ak=this._scales[am][0].domain();
break
}var ah=al.selectAll(".legend-entry").data(ak);
ah.exit().transition().duration(this._renderingOptions.duration).style("opacity",0).remove();
var aj=ah.enter().append("g").classed("legend-entry",true);
aj.append("path");
aj.append("text").classed("legend-entry-label",true);
aj.append("text").classed("legend-entry-value",true);
ah.select("path").attr("d",function(ao,an){return af.call(ai,ao,an)
}).call(function(an){an.attr("style","");
if(ai._scales.hasOwnProperty("fill")){an.style("fill",function(ap,ao){return ai._scales.fill[0].mapValue(ap)
})
}if(ai._scales.hasOwnProperty("stroke")){an.style("stroke",function(ap,ao){return ai._scales.stroke[0].mapValue(ap)
}).style("stroke-width",2)
}if(ai._scales.hasOwnProperty("linetype")){an.style("stroke-dasharray",function(ap,ao){return dv.util.svg.getDasharray(ai._scales.linetype[0].mapValue(ap))
});
if(!ai._scales.hasOwnProperty("stroke")){an.style("stroke","#000")
}an.style("stroke-width",2)
}if(ai._scales.hasOwnProperty("size")){an.style("stroke-width",function(ap,ao){return ai._scales.size[0].mapValue(ap)
})
}}).each(function(ao,an){ai._entryWidths[an]=this.getBBox().width
});
ah.select("text.legend-entry-label").attr("x",this._swatchWidth+this._innerPadding).attr("y",10).text(function(ao,an){if(dv.util.isUndefined(ai._labels)){return ao
}else{return ai._labels[an%ai._labels.length]
}}).each(function(ao,an){ai._entryWidths[an]+=ai._innerPadding+this.getBBox().width
});
ah.select("text.legend-entry-value").attr("y",10).attr("x",function(ao,an){return ai._entryWidths[an]+ai._innerPadding
}).text(function(ao,an){if(dv.util.isUndefined(ai._values)){return""
}else{return ai._values[an]
}}).style("fill",function(ao,an){if(!dv.util.isUndefined(ai._scales.stroke)){return ai._scales.stroke[0].mapValue(ao)
}else{if(!dv.util.isUndefined(ai._scales.fill)){return ai._scales.fill[0].mapValue(ao)
}}return
}).each(function(ap,an){var ao=this.getBBox().width;
ai._entryWidths[an]+=ao+((ao>0)?ai._innerPadding:0)
});
return ah
};
function ab(ah){var ai=this;
ah.each(function(ak,aj){ai._entryWidths[aj]=Math.min(ai._entryWidths[aj],ai._width);
ai._lineHeight=Math.max(ai._lineHeight,this.getBBox().height)
});
return ai._entryWidths
}function ad(ao){var aq=0,ap=0,an,ai=0,aj=false,am=0,ah=0,ak=[];
for(var al=0;
al<this._legendWidths.length;
al++){aq+=((ap===0)?0:this._hGap)+this._legendWidths[al];
if(ap<ao.data.length&&aq<=this._width){if(this._legendWidths[al]<=ao.data[ap]+ai){ah+=((ap===0)?0:this._hGap);
ak.push({x:ah,y:am});
ah+=ao.data[ap]+ai;
ai=0
}else{if((an=this._legendWidths[al]-ao.data[ap])<=ao.padding){ao.padding-=an;
ao.data[ap]=this._legendWidths[al];
return ad.call(this,ao)
}else{if((ap+1<ao.data.length)&&this._legendWidths[al]>=ao.data[ap]+(ao.data[ap+1]*this._spanPercent)+ai){if(ap+1<=ao.data.length){ai+=((ap===0)?0:this._hGap)+ao.data[ap];
aq-=((ap===0)?0:this._hGap)+this._legendWidths[al];
al--
}else{aq=aq-this._legendWidths[al]+ai+ao.data[ap];
ai=0;
ah+=((ap===0)?0:this._hGap);
ak.push({x:ah,y:am});
ah+=ao.data[ap]+ai;
ap++
}}else{ao=ac.call(this,ao.data.length-1);
return ad.call(this,ao)
}}}ap++
}else{if(ap+1===ao.data.length&&ao.data.length>1){ao=ac.call(this,ao.data.length-1);
return ad.call(this,ao)
}else{if(ap===ao.data.length){aj=true
}am+=this._lineHeight+this._vGap;
aq=ah=0;
ap=0;
ai=0;
al--
}}}if(ap===ao.data.length){aj=true
}if(!aj){ao=ac.call(this,ao.data.length-1);
return ad.call(this,ao)
}return{offsets:ak,cols:ao}
}function ac(aj){var ak={data:[],padding:this._width},ai=0,ah=0;
if(this._isVAligned()){aj=Math.ceil(this._legendWidths.length/Math.floor(this._height/(this._lineHeight+this._vGap)))
}for(ah=0;
ah<aj;
ah++){ai+=this._legendWidths[ah]+this._hGap
}ai-=this._hGap;
if(ai>this._width&&aj>1){return ac.call(this,aj-1)
}ak.data=this._legendWidths.slice(0,aj);
ak.padding-=ai;
if(ak.padding<0){ak.padding=0
}return ak
}function ag(ah,ak,ai,aj){return"M"+ah+","+ak+"L"+(ah+ai)+","+ak+"L"+(ah+ai)+","+(ak+aj)+"L"+ah+","+(ak+aj)+"Z"
}function aa(ai,ak,ah,aj){var al=((ak+aj)>>1);
return"M"+ai+","+al+"L"+ah+","+al
}function af(ai,ah){if(this._scales.hasOwnProperty("fill")){return ag.call(this,0,0,this._swatchWidth,this._swatchHeight)
}else{return aa.call(this,0,0,this._swatchWidth,this._swatchHeight)
}}ae._getAdjustedDimensions=function(aj){if(this._overlay){return aj
}var ah=this._padding.left+this._width+this._padding.right,ai=this._padding.top+this._height+this._padding.bottom;
if(this._orientation==="left"){aj.left+=ah;
aj.width-=ah
}else{if(this._orientation==="top"){aj.top+=ai;
aj.height-=ai
}else{if(this._orientation==="right"){aj.width-=ah
}else{if(this._orientation==="bottom"){aj.height-=ai
}}}}return aj
};
ae._getUsedWidth=function(){if(this._overlay){return 0
}else{return(this._isVAligned()?this._width+this._padding.left+this._padding.right:0)
}};
ae._getUsedHeight=function(){if(this._overlay){return 0
}else{return(this._isVAligned()?0:this._height+this._padding.top+this._padding.bottom)
}};
ae._isVAligned=function(){return(this._orientation==="left"||this._orientation==="right")
};
ae.vGap=function(ah){if(!arguments.length){return this._vGap
}this._vGap=ah;
return this
};
ae.hGap=function(ah){if(!arguments.length){return this._hGap
}this._hGap=ah;
return this
};
ae.padding=function(ah){if(!arguments.length){return this._padding
}this._padding=dv.util.merge(this._defaultPadding,ah);
return this
};
ae.align=function(ah){if(!arguments.length){return this._align
}this._align=ah;
return this
};
ae.labels=function(ah){if(!arguments.length){return this._labels
}this._labels=ah;
return this
};
ae.values=function(ah){if(!arguments.length){return this._values
}this._values=ah;
return this
};
ae.overlay=function(ah){if(!arguments.length){return this._overlay
}this._overlay=ah;
return this
};
return ae
});
dv.guide.custom=dv.guide.extend(function(){function aa(ab){this._render=function(){dv.log.warn({msg:"empty render function on custom guide"});
return this
};
this._getAdjustedDimensions=function(ac){return ac
};
this._getUsedWidth=function(){return 0
};
this._getUsedHeight=function(){return 0
}
}aa.setFunc=function(ac,ab){this[ac]=ab;
return this
};
return aa
});
dv.geom=dv.container.extend(function(){function aa(){this._super();
this._defaultAes={};
this._behaviorsLayer=null;
this._dodgePadding=0;
this._initializeDefaultAes()
}aa._initializeDefaultAes=function(){this._defaultAes.x=1;
this._defaultAes.y=1;
this._defaultAes.shape="circle";
this._defaultAes.linetype="solid"
};
aa._prerender=function(ab){this._trainedScales={};
this._chart=ab;
this.normalizedData(this._normalizeData(this.data()));
this._calculateStats();
this._inheritChartAesthetics(ab)
};
aa._inheritChartAesthetics=function(ab){for(var ae in ab._aes){var ad=ab._aes[ae];
if(!this._aes[ae]){this._aes[ae]={}
}for(var ac in ad){if(!this._aes[ae][ac]){this._aes[ae][ac]=ad[ac]
}}}};
aa._trainScales=function(){};
aa._createDefaultScales=function(){for(var ab in this._defaultAes){if(!this._aes.hasOwnProperty(ab)){this._aes[ab]={};
this._aes[ab][0]=dv.scale.constant().value(this._defaultAes[ab]).property(ab)
}delete this._defaultAes[ab]
}};
aa._render=function(ac){var ab=this;
this._geomGroup=d3.select(ac);
var ad=this._geomGroup.selectAll(".series").data(this._nestData);
ad.exit().call(ab.exitSeriesGroup,ab);
ad.enter().append("g").classed("series",true);
ad.call(ab.updateGroups,ab.enterPen,ab.pen,ab.enterPen,ab).call(ab.updateDataPoints,ab.enterPen,ab.pen,ab.enterPen,ab);
ab._renderBehaviors(ab._geomGroup);
ab.unregisterEventMap=null
};
aa._renderBehaviors=function(ac){var ab=this;
if(this._behaviors&&this._behaviors.length){this._behaviorsLayer=ac.select(".behavior-layer");
if(this._behaviorsLayer.empty()){this._behaviorsLayer=ac.append("g").classed("behavior-layer",true)
}else{this._behaviorsLayer.node().parentNode.appendChild(this._behaviorsLayer.node())
}dv.util.each(this._behaviors,function(ad){ad._geom(ab)._render(ab._behaviorsLayer)
})
}};
aa.updateGroups=function(ae,af,ad,ab,ac){ae.each(function(ak,aj){var an=0,am=0,ao=d3.select(this),ah=ao.attr("transform");
if(ac._chart._coord instanceof dv.coord.polar){var ap=ak.values[0],ag=dv.util.scaleRange(ap.panel.xOuterScale()),ai=dv.util.scaleRange(ap.panel.yOuterScale()),ar=(ag[0]+ag[1])/2,al=(ai[0]+ai[1])/2,aq=ac._chart._coord.flip();
an=aq?al:ar;
am=aq?ar:al
}if(ah&&dv.ANIMATION){ao=ao.transition().duration(function(au,at){return ac.duration().call(this,au,at)
})
}ao.attr("transform","translate("+an+","+am+")")
})
};
aa.updateDataPoints=function(ae,ac,af,aj,ak){var ad=ac.call(ak),ag=af.call(ak),ah=aj.call(ak);
var ab=ae.selectAll("."+ak._dataPointStyleClass).data(function(al){return ak.getValues(al)
});
ab.exit().transition().delay(function(an,am,al){return ak.delay().call(this,an,am,al)
}).duration(function(an,am,al){return ak.duration().call(this,an,am,al)
}).ease(ak.ease()).each(function(){this.__exiting__=true
}).attrTween("d",ah.pathTween).remove();
ab.enter().append("path").each(function(an,am,al){ak.setPreviousState.call(this,ad,ah,an,am,al)
}).attr("class",function(an,am,al){return"datum-"+am+" series-"+al
}).call(ak.attributes,ak).attr("d",ad.path);
var ai=ab.call(ak.attributes,ak).call(ak._removeRegisteredEvents,ak).call(ak._addRegisteredEvents,ak).each(function(){this.__exiting__=false
});
if(dv.ANIMATION){ai=ai.transition().delay(function(an,am,al){return ak.delay().call(this,an,am,al)
}).duration(function(an,am,al){return ak.duration().call(this,an,am,al)
}).ease(ak.ease()).attrTween("d",ag.pathTween)
}else{ai.each(function(ao,am,al){var an=ag.bounds(ao,am,al);
if(an){ao.bounds=an.bounds
}}).attr("d",ag.path)
}ai.call(ak.addEachFunction,ak)
};
aa.addEachFunction=function(ac,ab){if(ab._each){if(!dv.util.isUndefined(ab._each.start)){if(dv.ANIMATION){ac.each("start",function(af,ae,ad){ab._each.start.call(this,af,ae,ad)
})
}else{ac.each(function(af,ae,ad){ab._each.start.call(this,af,ae,ad)
})
}}if(!dv.util.isUndefined(ab._each.end)){if(dv.ANIMATION){ac.each("end",function(af,ae,ad){ab._each.end.call(this,af,ae,ad)
})
}else{ac.each(function(af,ae,ad){ab._each.end.call(this,af,ae,ad)
})
}}}};
aa.exitSeriesGroup=function(ac,ab){ab.exitSeries(ac,ab.enterPen,ab)
};
aa.setPreviousState=function(ae,ab,af,ac){var ad=ae.bounds(af,ac);
this.__previousBounds__=ad;
this.__exitTransition__=ab
};
aa.pathTween=function(ac,ae,ah,ad,ab){var ag,af=d3.select(ae);
if(ae.__exiting__){ag=ae.__exitTransition__.path(ah,ad);
ae.__exiting__=false
}else{ag=ac.getPath(ac.getBounds(ah,ad))
}if(ag===null){af.remove();
return null
}return d3.interpolate(af.attr("d"),ag)
};
aa._calculateStats=function(){};
aa._handlePositions=function(){if(this.position()!=="stack"&&this.position()!=="fill"&&this.position()!=="dodge"){return
}var ab=this.position(),af=this._addGroupLayerToNestedData(),ac=this._chart.coord().flip(),ae=function(ai){var ah=ad.getExplicitScales(ai)[ai],ag=false;
return function(al,aj){for(var ak in ah){ag=ah[ak]._includeInDomain(al,aj);
if(ag){break
}}return ag?al[ai]:0
}
},ad=this;
dv.util.each(af,function(aj){var ai=ae("x"),ah=ae("y");
if(ab==="stack"){d3.layout.stack().x(ai).y(ah).values(function(ak){return ak.values
})(aj.values)
}else{if(ab==="fill"){d3.layout.stack().x(ai).y(ah).offset(function(ap){var ar=ap.length,ak=ap[0].length,al=1/ar,an,am,aq,ao=[];
for(am=0;
am<ak;
++am){for(an=0,aq=0;
an<ar;
an++){aq+=ap[an][am][1]
}if(aq){for(an=0;
an<ar;
an++){ap[an][am][1]/=aq
}}else{for(an=0;
an<ar;
an++){ap[an][am][1]=0
}}}for(am=0;
am<ak;
++am){ao[am]=0
}return ao
}).values(function(ak){return ak.values
})(aj.values)
}else{if(ab==="dodge"){var ag=aj.values.length;
dv.util.each(aj.values,function(al,ak){dv.util.each(al.values,function(am){am.dodge={groupIndex:ak,numGroups:ag}
})
})
}}}})
};
aa._addGroupLayerToNestedData=function(){var ac=[],ad={},ab={};
dv.util.each(this._nestData,function(ah,af){var aj=/(.*) ~ .*/g.exec(ah.key)[1],ae=/.* ~ (.*)/g.exec(ah.key)[1],ai,ag;
if(!ad.hasOwnProperty(aj)){ac.push({key:aj,values:[]});
ad[aj]=ac.length-1
}ai=ac[ad[aj]];
if(!ab.hasOwnProperty(ah.key)){ai.values.push({key:ae,values:[]});
ab[ah.key]=ai.values.length-1
}ag=ai.values[ab[ah.key]];
ag.values=ag.values.concat(ah.values)
});
return ac
};
aa.exit=function(ab){d3.select(ab).selectAll(".series").call(this.exitSeriesGroup,this)
};
aa.exitSeries=function(ad,ab,ac){ad.selectAll("."+ac._dataPointStyleClass).transition().delay(function(ag,af,ae){return ac.delay().call(this,ag,af,ae)
}).duration(function(ag,af,ae){return ac.duration().call(this,ag,af,ae)
}).ease(ac.ease()).each(function(){this.__exiting__=true
}).attrTween("d",ab.call(ac).pathTween).remove().each("end",function(ah,ag){var af=this.parentNode;
if(af&&af.childNodes&&!af.childNodes.length){var ae=af.parentNode;
if(ae&&ae.childNodes&&ae.childNodes.length<=1){d3.select(ae).remove()
}else{d3.select(af).remove()
}}})
};
aa.coord=function(){return this.chart().coord()
};
aa._addRegisteredEvents=function(ac,ab){if(!ab){ab=this
}if(!ab._geomGroup){return
}ac=(!ac?ab._geomGroup.selectAll(".series").selectAll("."+this._dataPointStyleClass):ac);
ab=ab||this;
dv.util.each(ab.eventMap,function(ae,ad){ac.on(ad,function(ah,ag,af){ab.eventMap[ad].callback.call(this,ah,ag,af,d3.event)
},ae.capture)
});
dv.util.each(ab._chart.eventMap,function(ae,ad){ac.on(ad+".dvchart",function(ai,ag){var ah=d3.event,af=ab._chart._interactionGroup.select(".interaction-canvas").node();
if(ab._shouldDispatchChartEvent(ah,af)){ab._chart.eventMap[ad].callback.call(af,ah)
}},ae.capture)
});
dv.util.each(ab._behaviors,function(ad){if(ad._addRegisteredEvents){ad._addRegisteredEvents()
}})
};
aa._removeRegisteredEvents=function(ac,ab){if(!ab){ab=this
}if(!ab._geomGroup){return
}ac=ac||ab._geomGroup.selectAll("."+this._dataPointStyleClass);
ab=ab||this;
dv.util.each(ab.unregisterEventMap,function(ad,ae){ac.on(ae,null,ad)
});
dv.util.each(ab._chart.unregisterEventMap,function(ad,ae){ac.on(ae+".dvchart",null,ad)
});
dv.util.each(ab._behaviors,function(ad){if(ad._removeRegisteredEvents){ad._removeRegisteredEvents()
}})
};
aa._shouldDispatchChartEvent=function(ag,ad){var ab=true;
if(ag.type==="mouseout"||ag.type==="mouseover"){var ac=ag.relatedTarget;
if(!ac){ac=(ag.type==="mouseout")?ag.toElement:ag.fromElement
}var af=d3.select(ac);
if(af&&!af.empty()){var ae=af.attr("class");
ab=!((af.node()===ad)||(ae&&ae.indexOf("-geom")>=0))
}}return ab
};
aa.getExplicitScalesMap=function(){var ad=dv.util.clone(this._chart.getExplicitScalesMap());
for(var af in this._aes){var ab=this._aes[af],ae=ad[af]||{},ac=dv.util.extend({},ae,ab);
ad[af]=ac
}return ad
};
aa.getExplicitScale=function(ad,ac){if(ad==="group"){return this._getGroup()
}var ab=this._aes[ad];
var ae=this.chart()._aes[ad];
if(ac!==undefined&&ab&&ab[ac]){return ab[ac]
}if(ac!==undefined&&ae&&ae[ac]){return ae[ac]
}if(ab&&ab[0]!==undefined){return ab[0]
}if(ae&&ae[0]!==undefined){return ae[0]
}return null
};
aa.getExplicitScales=function(ae){if(!dv.util.isArray(ae)){ae=[ae]
}var ab={},ad=-1,ah=ae.length;
while(++ad<ah){var ag=ae[ad],ac=this._aes[ag],af=this.chart()._aes[ag]||{};
ab[ag]=dv.util.extend({},af,ac)
}return ab
};
aa.getTrainedScale=function(ac,ab){return this.chart().getTrainedScale(ac,ab)
};
aa.getScale=function(ac,ab){return this.getExplicitScale(ac,ab)
};
aa.getScales=function(ab){return this.getExplicitScales(ab)
};
aa.hasScale=function(ac,ab){if(this.getExplicitScale(ac,ab)){return true
}return false
};
aa._dodgeAdjust=function(ag){var ab=ag.dodge.groupIndex,ae=ag.dodge.numGroups,ac=ag.panel.xScale(ag).rangeBand(),ad=(ae>1)?ac/(ae-1)*this._dodgePadding:0,af=(ac-(ad*(ae-1)))/ae;
return(af+ad)*ab+(af/2)
};
aa.applyAttributeValue=function(ad,ac,ab,af){var ae=ac.getScale(af,0);
ad.style(ab,function(ai,ah,ag){return ae?ae.mapToProp(dv.util.isArray(ai)?ai[0]:ai,ah,ag):null
})
};
aa._getGroup=function(){if(this._aes.hasOwnProperty("group")){return this._aes.group[0]
}var ae=this.chart()._getGroup();
if(ae&&ae.property()==="group"){return ae
}var ac=-1,ab=dv.DEFAULT_CATEGORICAL_AES.length-1;
while(ac++<ab){var ad=this._aes[dv.DEFAULT_CATEGORICAL_AES[ac]];
if(ad&&ad[0]&&!dv.util.isUndefined(ad[0].mapping())){return ad[0]
}}return ae
};
aa.each=function(ac,ab){var ad,ae;
if(!arguments.length){return this._each
}this._each=this._each||{};
if(arguments.length<2){ae=ac;
ad="end"
}else{ae=ab;
ad=ac
}this._each[ad]=ae;
return this
};
aa.dodgePadding=function(ab){if(!arguments){return this._dodgePadding
}this._dodgePadding=ab;
return this
};
aa.behaviors=function(ab){if(!arguments.length){return this._behaviors
}this._behaviors=ab;
return this
};
aa.stat=function(ab){if(!arguments.length){return this._stat
}this._stat=ab;
return this
};
aa.chart=function(ab){if(!arguments.length){return this._chart
}this._chart=ab;
return this
};
aa.normalizedData=function(ab){if(!arguments.length){return this._normalizedData
}this._normalizedData=ab;
return this
};
aa.data=function(ab){if(!arguments.length){return this._data?this._data:this.chart().data()
}this._data=ab;
return this
};
return aa
});
dv.geom.point=dv.geom.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.point
}aa._dataPointStyleClass="point-geom";
aa._initializeDefaultAes=function(){this._super();
this._defaultAes.shape="circle";
this._defaultAes.size=7
};
aa.getValues=function(ab){return ab.values
};
aa.exitSeriesGroup=function(ac,ab){ab.exitSeries(ac,ab.enterPen,ab)
};
aa.attributes=function(ac,ab){ac.attr("style","").classed(ab._dataPointStyleClass,true).call(ab.applyAttributeValue,ab,"opacity","alpha").call(ab.applyAttributeValue,ab,"stroke","stroke").call(ab.applyAttributeValue,ab,"fill","fill")
};
aa.getHighlightColor=function(ae,ac){var ad=this.getScale("fill"),ab=this.getScale("stroke");
if(ab&&!(ab instanceof dv.scale.constant)){return ab.mapToProp(ae,ac)
}if(ad&&!(ad instanceof dv.scale.constant)){return ad.mapToProp(ae,ac)
}return ab?ab.mapToProp(ae,ac):"#8CC350"
};
aa.enterPen=function(){var ac=this,ab,ad=function(af,ae){return af.panel.yScale(af).reverse()?1:0
};
if(this.position()==="dodge"){ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ac._dodgeAdjust(ag),af)
}
}else{ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
}
}return this._decoratePen(ab,ad)
};
aa.pen=function(){var ac=this,ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
},ad;
switch(this.position()){case"identity":ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapToProp(af,ae)+ag.rangeBand()/2,ae)
};
break;
case"stack":ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapValue(af.y0+af.y),ae)
};
break;
case"dodge":ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ac._dodgeAdjust(ag),af)
};
ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapToProp(af,ae)+ag.rangeBand()/2,ae)
};
break;
case"fill":ad=function(af,ae){return(af.y+af.y0)
};
break
}return this._decoratePen(ab,ad)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))&&dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac,ab))
};
aa._decoratePen=function(ac,ag){var af=this.getScale("shape"),ab=this.getScale("size"),ad=this;
var ae=this.coord()._point().x(ac).y(ag).defined(this._defined);
ae.renderer.type(function(ai,ah){return af.mapToProp(ai,ah)
}).size(function(ai,ah){return Math.pow(ab.mapToProp(ai,ah),2)
});
return{bounds:function(ai,ah){return ae.getBounds(ai,ah)
},pathTween:function(ai,ah){return ad.pathTween(ae,this,ai,ah)
},path:function(ai,ah){return ae.getPath(ae.getBounds(ai,ah))
}}
};
return aa
});
dv.geom.text=dv.geom.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.text;
this._dx=d3.functor(0);
this._dy=d3.functor(0);
this._textFormat=function(ab){return ab
};
this._textAnchor="start"
}aa._dataPointStyleClass="text-geom";
aa.dx=function(ab){if(!arguments.length){return this._dx
}this._dx=d3.functor(ab);
return this
};
aa.dy=function(ab){if(!arguments.length){return this._dy
}this._dy=d3.functor(ab);
return this
};
aa.textAnchor=function(ab){if(!arguments.length){return this._textAnchor
}this._textAnchor=ab;
return this
};
aa.textFormat=function(ab){if(!arguments.length){return this._textFormat
}this._textFormat=d3.functor(ab);
return this
};
aa.getValues=function(ab){return ab.values
};
aa.updateDataPoints=function(ae,ac,af,aj,al){var ak=al.getScale("alpha"),ad=ac.call(al),ag=af.call(al),ah=aj.call(al);
var ab=ae.selectAll("."+al._dataPointStyleClass).data(function(am){return al.getValues(am)
});
ab.exit().transition().delay(function(ao,an,am){return al.delay().call(this,ao,an,am)
}).duration(function(ao,an,am){return al.duration().call(this,ao,an,am)
}).ease(al.ease()).call(ah).each("end.transition",function(ao,an){var am=this.parentNode;
if(am){am.removeChild(this)
}});
ab.enter().append("text").attr("class",function(ao,an,am){return"datum-"+an+" series-"+am
}).call(al.attributes,al).call(ad);
var ai=ab.call(al.attributes,al).call(al._removeRegisteredEvents,al).call(al._addRegisteredEvents,al);
if(dv.ANIMATION){ai=ai.transition().delay(function(ao,an,am){return al.delay().call(this,ao,an,am)
}).duration(function(ao,an,am){return al.duration().call(this,ao,an,am)
}).ease(al.ease())
}ai.call(ag).call(al.addEachFunction,al)
};
aa.exitSeriesGroup=function(ac,ab){ab.exitSeries(ac,ab.enterPen,ab)
};
aa.exitSeries=function(ad,ab,ac){ad.selectAll("."+ac._dataPointStyleClass).transition().delay(function(ag,af,ae){return ac.delay().call(this,ag,af,ae)
}).duration(function(ag,af,ae){return ac.duration().call(this,ag,af,ae)
}).ease(ac.ease()).call(ab.call(ac)).remove().each("end.transition",function(ag,af){var ae=this.parentNode;
if(ae.parentNode){ae.removeChild(this)
}if(ae&&ae.childNodes&&!ae.childNodes.length){d3.select(ae).remove()
}})
};
aa.attributes=function(ac,ab){ac.attr("style","").classed(ab._dataPointStyleClass,true).call(ab.applyAttributeValue,ab,"stroke","stroke").call(ab.applyAttributeValue,ab,"fill","fill").call(ab.applyAttributeValue,ab,"opacity","alpha").call(ab.applyAttributeValue,ab,"font-size","size").attr("text-anchor",ab._textAnchor)
};
aa.enterPen=function(){var ad=this,ac=this._dx,ae=function(ag,af){return ag.panel.yScale(ag).reverse()?1:0
},ab;
if(this.position()==="dodge"){ab=function(ai,ah,ag){var af=ai.panel.xScale(ai);
return af.mapValueToPercent(af.mapToProp(ai,ah)+ad._dodgeAdjust(ai)+ac(ai,ah,ag),ah)
}
}else{ab=function(ai,ah,ag){var af=ai.panel.xScale(ai);
return af.mapValueToPercent(af.mapToProp(ai,ah)+af.rangeBand()/2+ac(ai,ah,ag),ah)
}
}return this._decoratePen(ab,ae)
};
aa.pen=function(){var ae=this,ad=this._dx,ac=this._dy,ab=function(aj,ai,ah){var ag=aj.panel.xScale(aj);
return ag.mapValueToPercent(ag.mapToProp(aj,ai)+ag.rangeBand()/2+ad(aj,ai,ah),ai)
},af;
switch(this.position()){case"identity":af=function(ai,ah,ag){var aj=ai.panel.yScale(ai);
return aj.mapValueToPercent(aj.mapToProp(ai,ah)+ac(ai,ah,ag)+aj.rangeBand()/2,ah)
};
break;
case"stack":af=function(ai,ah,ag){var aj=ai.panel.yScale(ai);
return aj.mapValueToPercent(aj.mapValue(ai.y0+ai.y,ah)+ac(ai,ah,ag),ah)
};
break;
case"dodge":ab=function(aj,ai,ah){var ag=aj.panel.xScale(aj);
return ag.mapValueToPercent(ag.mapToProp(aj,ai)+ae._dodgeAdjust(aj)+ad(aj,ai,ah),ai)
};
af=function(ai,ah,ag){var aj=ai.panel.yScale(ai);
return aj.mapValueToPercent(aj.mapToProp(ai,ah)+ac(ai,ah,ag)+aj.rangeBand()/2,ah)
};
break;
case"fill":af=function(ai,ah,ag){var aj=ai.panel.yScale(ai);
return(ai.y+ai.y0)+aj.mapValueToPercent(ac(ai,ah,ag)+dv.util.scaleRange(aj)[0],ah)
};
break
}return this._decoratePen(ab,af)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))&&dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac,ab))
};
aa._decoratePen=function(ab,af){var ad=this.getScale("label"),ac=this;
var ae=this.coord()._text().x(ab).y(af);
return ae().label(function(ai,ah,ag){return ac._textFormat.call(this,ad.mapToProp(ai,ah),ah,ag)
}).defined(this._defined)
};
return aa
});
dv.geom.line=dv.geom.extend(function(){function aa(){this._super();
this._tension=0.7;
this._interpolate="linear";
this._rendererClass=dv.geom.line
}aa._dataPointStyleClass="line-geom";
aa.tension=function(ab){if(!arguments.length){return this._tension
}this._tension=ab;
return this
};
aa.interpolate=function(ab){if(!arguments.length){return this._interpolate
}this._interpolate=ab;
return this
};
aa._render=function(ac){this._super(ac);
var ab=this.getScale("size");
if(ab&&ab.to&&!ab.to()){ab.to([2,8])
}};
aa.getValues=function(ab){return[ab.values]
};
aa.exitSeriesGroup=function(ac,ab){ab.exitSeries(ac,ab.enterPen,ab)
};
aa.attributes=function(ac,ab){var ad=ab.getScale("linetype",0);
ac.attr("style","").classed(ab._dataPointStyleClass,true).call(ab.applyAttributeValue,ab,"stroke","stroke").call(ab.applyAttributeValue,ab,"opacity","alpha").call(ab.applyAttributeValue,ab,"stroke-width","size").style("stroke-dasharray",function(ag,af,ae){return ad?dv.util.svg.getDasharray(ad.mapToProp(ag[0],af,ae)):null
}).style("fill","none")
};
aa.getHighlightColor=function(ad,ac){var ab=this.getScale("stroke",0);
return ab?ab.mapToProp(ad,ac):"#8CC350"
};
aa.enterPen=function(){var ac=this,ab,ad=function(af,ae){return af.panel.yScale(af).reverse()?1:0
};
if(this.position()==="dodge"){ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ac._dodgeAdjust(ag),af)
}
}else{ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
}
}return this._decoratePen(ab,ad)
};
aa.pen=function(){var ac=this,ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
},ad;
switch(this.position()){case"identity":ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapToProp(af,ae)+ag.rangeBand()/2,ae)
};
break;
case"stack":ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapValue(af.y0+af.y),ae)
};
break;
case"dodge":ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ac._dodgeAdjust(ag),af)
};
ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapToProp(af,ae)+ag.rangeBand()/2,ae)
};
break;
case"fill":ad=function(af,ae){return(af.y+af.y0)
};
break
}return this._decoratePen(ab,ad)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))&&dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac,ab))
};
aa._decoratePen=function(ab,ae){var ac=this;
var ad=this.coord()._line().x(ab).y(ae).defined(this._defined);
ad.renderer.tension(this.tension()).interpolate(this.interpolate());
return{bounds:function(ag,af){return ad.getBounds(ag,af)
},pathTween:function(ag,af){return ac.pathTween(ad,this,ag,af)
},path:function(ag,af){return ad.getPath(ad.getBounds(ag,af))
}}
};
return aa
});
dv.geom.area=dv.geom.extend(function(){function aa(){this._super();
this._tension=0.7;
this._interpolate="linear";
this._rendererClass=dv.geom.area;
this._baseline=0
}aa._dataPointStyleClass="area-geom";
aa._initializeDefaultAes=function(){this._super()
};
aa._trainScales=function(){if(this._baseline!==undefined){var ab=this.getExplicitScales("y")["y"];
for(var ad in ab){var ac=ab[ad];
if(ac instanceof dv.scale.continuous){ac.softLowerLimit(this._baseline)
}}}this._super()
};
aa.tension=function(ab){if(!arguments.length){return this._tension
}this._tension=ab;
return this
};
aa.interpolate=function(ab){if(!arguments.length){return this._interpolate
}this._interpolate=ab;
return this
};
aa.getValues=function(ab){return[ab.values]
};
aa.pathTween=function(ap,an,ak,af,ad){var ae=ak,ac,ao=an.__previousBounds__,am=[],ah,ab=this.enterPen.call(this,ad),aj,ag,ai=this.getScale("x").domain(),al=-1;
ac=ap.getBounds(ak,af);
ac.coord=this.coord();
if(ao&&ao.coord&&(ac.coord._type!==ao.coord._type)||ac.coord.flip()!=ao.coord.flip()){ao=this.enterPen.call(this,ad).bounds(ak,af)
}ah=Math.max(ac.length,ao.length);
while(++al<ah){aj=(al<ac.length)?ac[al]:null;
ag=(al<ao.length)?ao[al]:null;
if(!ag){aj.x=ai[ai.length-1];
ag=ab.bounds([aj],af)[0]
}else{if(!aj){aj=ab.bounds([ag],af)[0]
}}am.push(d3.interpolateObject(ag.bounds,aj.bounds))
}an.__previousBounds__=ac;
return function(aq){if(aq===1){am=am.splice(0,ac.length)
}var ar=[];
dv.util.each(am,function(at,av){var au={};
au.bounds=at(aq);
ar.push(au)
});
return ap.getPath(ar)
}
};
aa.exitSeriesGroup=function(ac,ab){ab.exitSeries(ac,ab.enterPen,ab)
};
aa.attributes=function(ac,ab){ac.attr("style","").classed(ab._dataPointStyleClass,true).call(ab.applyAttributeValue,ab,"opacity","alpha").call(ab.applyAttributeValue,ab,"fill","fill")
};
aa.getHighlightColor=function(ad,ab){var ac=this.getScale("fill");
return ac?ac.mapToProp(ad,ab):"#8CC350"
};
aa.getBaseline=function(ac){var ab=ac.domain()[0];
if(self._baseline!==undefined){return self._baseline
}return ab<0?0:ab
};
aa.enterPen=function(){var ac=this,ab,ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapValue(ac.getBaseline(ag)),ae)
};
if(this.position()==="dodge"){ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ac._dodgeAdjust(ag),af)
}
}else{ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
}
}return this._decoratePen(ab,ad,ad)
};
aa.pen=function(){var ab=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+af.rangeBand()/2,ag)
},ae,ad,ac=this;
switch(this.position()){case"identity":ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ac.getBaseline(ah)),af)
};
ad=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapPropToPercent(ag,af)
};
break;
case"stack":ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ag.y0),af)
};
ad=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ag.y0+ag.y),af)
};
break;
case"dodge":ab=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+ac._dodgeAdjust(ah),ag)
};
ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ac.getBaseline(ah)),af)
};
ad=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapPropToPercent(ag,af)
};
break;
case"fill":ae=function(ag,af){return ag.y0
};
ad=function(ag,af){return(ag.y+ag.y0)
};
break
}return this._decoratePen(ab,ae,ad)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))&&dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac))
};
aa._decoratePen=function(ab,af,ae){var ac=this;
var ad=this.coord()._area().x(ab).y0(af).y1(ae).defined(this._defined);
ad.renderer.tension(this.tension()).interpolate(this.interpolate());
return{bounds:function(ai,ag){var ah=ad.getBounds(ai,ag);
if(ah){ah.coord=ac.coord()
}return ah
},pathTween:function(ah,ag){return ac.pathTween(ad,this,ah,ag)
},path:function(ah,ag){return ad.getPath(ad.getBounds(ah,ag))
}}
};
aa.baseline=function(ab){if(!arguments.length){return this._baseline
}this._baseline=ab;
return this
};
return aa
});
dv.geom.rect=dv.geom.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.rect
}aa._dataPointStyleClass="bar-geom";
aa._initializeDefaultAes=function(){this._super();
this._defaultAes.yMin=1;
this._defaultAes.yMax=1;
this._defaultAes.xMin=1;
this._defaultAes.xMax=1;
delete this._defaultAes.x;
delete this._defaultAes.y
};
aa._trainScales=function(){var ac=this.getExplicitScales(["yMin","xMin"]),ae=ac.yMin,ag=ac.xMin,af;
for(af in ae){var ad=this._aes.y;
if(!ad){this._aes.y=ad={}
}if(!ad[af]){ad[af]=ae[af].copy().property("y").mapping("y")
}ad[af].trainingProperties(["yMin","yMax"])
}for(af in ag){var ab=this._aes.x;
if(!ab){this._aes.x=ab={}
}if(!ab[af]){ab[af]=ag[af].copy().property("x").mapping("x")
}ab[af].trainingProperties(["xMin","xMax"])
}};
aa.getValues=function(ab){return ab.values
};
aa._render=function(ag){var ah=this.getExplicitScales(["yMin","yMax","y","xMin","xMax","x"]),ae;
for(ae in ah.yMin){var ad=ah.yMin[ae],ab=ah.yMax[ae],ac=ah.y[ae];
if(ac){ab.range(ac.range()).domain(ac.domain());
ad.range(ac.range()).domain(ac.domain())
}}for(ae in ah.xMin){var aj=ah.xMin[ae],af=ah.xMax[ae],ai=ah.x[ae];
if(ai){af.range(ai.range()).domain(ai.domain());
aj.range(ai.range()).domain(ai.domain())
}}this._super(ag)
};
aa.pathTween=function(ak,ai,ah,ae,ac){var ad=ah,ab,aj=ai.__previousBounds__,ag=this.coord()._type;
if(ai.__exiting__){ab=ai.__exitTransition__.bounds(ah,ae)
}else{ab=ak.getBounds(ah,ae)
}if((aj&&aj.coord&&ag!==aj.coord)){aj=ai.__exitTransition__.bounds(ah,ae)
}if(!ab||!aj){return null
}ab.coord=ag;
var af=d3.interpolateObject(aj.bounds,ab.bounds);
ai.__previousBounds__=ab;
return function(al){ad.bounds=af(al);
return ak.getPath(ad)
}
};
aa.attributes=function(ac,ab){ac.attr("style","").classed(ab._dataPointStyleClass,true).call(ab.applyAttributeValue,ab,"fill","fill").call(ab.applyAttributeValue,ab,"stroke","stroke").call(ab.applyAttributeValue,ab,"opacity","alpha")
};
aa.enterPen=function(){var ad=function(af,ae){return af.panel.yScale(af).reverse()?1:0
},ac=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapValue(dv.util.isArray(ag.x)?ag.x[0]:ag.xMin,af))
},ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapValue(dv.util.isArray(ag.x)?ag.x[1]:ag.xMax,af))
};
return this._decoratePen(ac,ab,ad,ad)
};
aa.pen=function(){var ac=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapValue(dv.util.isArray(ah.x)?ah.x[0]:ah.xMin,ag))
},ab=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapValue(dv.util.isArray(ah.x)?ah.x[1]:ah.xMax,ag))
},ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(dv.util.isArray(ag.y)?ag.y[0]:ag.yMin,af))
},ad=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(dv.util.isArray(ag.y)?ag.y[1]:ag.yMax,af))
};
return this._decoratePen(ac,ab,ae,ad)
};
aa._defined=function(ad,ac){var ab=ad.panel.xScale(ad),ae=ad.panel.yScale(ad);
return dv.util.isFinite(ab.mapValue(dv.util.isArray(ad.x)?ad.x[0]:ad.xMin,ac))&&dv.util.isFinite(ab.mapValue(dv.util.isArray(ad.x)?ad.x[1]:ad.xMax,ac))&&dv.util.isFinite(ae.mapValue(dv.util.isArray(ad.y)?ad.y[0]:ad.yMin,ac))&&dv.util.isFinite(ae.mapValue(dv.util.isArray(ad.y)?ad.y[1]:ad.yMax,ac))
};
aa._decoratePen=function(ae,ad,ag,af){var ab=this;
var ac=this.coord()._rect().x0(ae).x1(ad).y0(ag).y1(af).defined(this._defined);
return{bounds:function(aj,ah){var ai=ac.getBounds(aj,ah);
if(ai){ai.bounds.coord=ab.coord()._type
}return ai
},pathTween:function(aj,ai,ah){return ab.pathTween(ac,this,aj,ai,ah)
},path:function(ai,ah){return ac.getPath(ac.getBounds(ai,ah))
}}
};
return aa
});
dv.geom.tile=dv.geom.rect.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.tile
}aa._dataPointStyleClass="tile-geom";
aa._initializeDefaultAes=function(){this._super();
this._defaultAes.y=1;
this._defaultAes.x=1
};
aa.getValues=function(ab){return ab.values
};
aa.enterPen=function(){var ad=function(af,ae){return af.panel.yScale(af).reverse()?1:0
},ac=function(af,ae){return af.panel.xScale(af).mapPropToPercent(af,ae)
},ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand(),af)
};
return this._decoratePen(ac,ab,ad,ad)
};
aa.pen=function(){var ac=function(ag,af){return ag.panel.xScale(ag).mapPropToPercent(ag,af)
},ab=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+af.rangeBand(),ag)
},ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapPropToPercent(ag,af)
},ad=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapToProp(ag,af)+ah.rangeBand(),af)
};
return this._decoratePen(ac,ab,ae,ad)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))&&dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac,ab))
};
aa._decoratePen=function(ae,ad,ag,af){var ab=this;
var ac=this.coord()._rect().x0(ae).x1(ad).y0(ag).y1(af).defined(this._defined);
return{bounds:function(aj,ah){var ai=ac.getBounds(aj,ah);
if(ai){ai.bounds.coord=ab.coord()._type
}return ai
},pathTween:function(aj,ai,ah){return ab.pathTween(ac,this,aj,ai,ah)
},path:function(ai,ah){return ac.getPath(ac.getBounds(ai,ah))
}}
};
return aa
});
dv.geom.bar=dv.geom.rect.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.bar;
this._baseline=0
}aa._dataPointStyleClass="bar-geom";
aa._initializeDefaultAes=function(){this._super();
this._defaultAes.y=1;
this._defaultAes.x=1
};
aa._trainScales=function(){if(this._baseline!==undefined){var ab=this.getExplicitScales("y")["y"];
for(var ad in ab){var ac=ab[ad];
if(ac instanceof dv.scale.continuous){ac.softLowerLimit(this._baseline)
}}}};
aa.getValues=function(ab){return ab.values
};
aa.getBaseline=function(ac){var ab=ac.domain()[0];
if(self._baseline!==undefined){return self._baseline
}return ab<0?0:ab
};
aa.enterPen=function(){var ab=this,ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ab.getBaseline(ah)),af)
},ad,ac;
if(this.position()==="dodge"){ad=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+ab._dodgeAdjust(ah),ag)
};
ac=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+ab._dodgeAdjust(ah,true),ag)
}
}else{ad=function(ag,af){return ag.panel.xScale(ag).mapPropToPercent(ag,af)
};
ac=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+af.rangeBand(),ag)
}
}return this._decoratePen(ad,ac,ae,ae)
};
aa.pen=function(){var ad,ac,af,ae,ab=this;
switch(this.position()){case"identity":ad=function(ah,ag){return ah.panel.xScale(ah).mapPropToPercent(ah,ag)
};
ac=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)+ag.rangeBand(),ah)
};
af=function(ah,ag){var ai=ah.panel.yScale(ah);
return ai.mapValueToPercent(ai.mapValue(ab.getBaseline(ai)),ag)
};
ae=function(ah,ag){return ah.panel.yScale(ah).mapPropToPercent(ah,ag)
};
break;
case"stack":ad=function(ah,ag){return ah.panel.xScale(ah).mapPropToPercent(ah,ag)
};
ac=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)+ag.rangeBand(),ah)
};
af=function(ah,ag){var ai=ah.panel.yScale(ah);
return ai.mapValueToPercent(ai.mapValue(ah.y0),ag)
};
ae=function(ah,ag){var ai=ah.panel.yScale(ah);
return ai.mapValueToPercent(ai.mapValue(ah.y0+ah.y),ag)
};
break;
case"dodge":ad=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)+ab._dodgeAdjust(ai),ah)
};
ac=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)+ab._dodgeAdjust(ai,true),ah)
};
af=function(ah,ag){var ai=ah.panel.yScale(ah);
return ai.mapValueToPercent(ai.mapValue(ab.getBaseline(ai)),ag)
};
ae=function(ah,ag){return ah.panel.yScale(ah).mapPropToPercent(ah,ag)
};
break;
case"fill":ad=function(ah,ag){return ah.panel.xScale(ah).mapPropToPercent(ah,ag)
};
ac=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)+ag.rangeBand(),ah)
};
af=function(ah,ag){return ah.y0
};
ae=function(ah,ag){return(ah.y+ah.y0)
};
break
}return this._decoratePen(ad,ac,af,ae)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))&&dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac,ab))
};
aa._decoratePen=function(ae,ad,ag,af){var ab=this;
var ac=this.coord()._rect().x0(ae).x1(ad).y0(ag).y1(af).defined(this._defined);
return{bounds:function(aj,ah){var ai=ac.getBounds(aj,ah);
if(ai){ai.bounds.coord=ab.coord()._type
}return ai
},pathTween:function(aj,ai,ah){return ab.pathTween(ac,this,aj,ai,ah)
},path:function(ai,ah){return ac.getPath(ac.getBounds(ai,ah))
}}
};
aa._dodgeAdjust=function(ah,ag){var ab=ah.dodge.groupIndex,ae=ah.dodge.numGroups,ac=ah.panel.xScale(ah).rangeBand(),ad=(ae>1)?ac/(ae-1)*this._dodgePadding:0,af=(ac-(ad*(ae-1)))/ae;
return(af+ad)*ab+(ag?af:0)
};
aa.baseline=function(ab){if(!arguments.length){return this._baseline
}this._baseline=ab;
return this
};
return aa
});
dv.geom.barrange=dv.geom.bar.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.barrange
}aa._initializeDefaultAes=function(){this._super();
this._defaultAes.yMin=1;
this._defaultAes.yMax=1;
delete this._defaultAes.y
};
aa._trainScales=function(){var ab=this.getExplicitScales("yMin")["yMin"],ae,ad;
for(var ac in ab){if(!this._aes.y){this._aes.y={}
}ae=this._aes.y;
ad=ae[ac];
if(!ad){ae[ac]=ad=ab[ac].copy().property("y").mapping("y")
}ad.trainingProperties(["yMin","yMax"])
}};
aa._render=function(ac){var ab=this.getExplicitScales(["yMin","yMax","y"]),af=ab.yMin;
for(var ah in af){var ad=af[ah],ae=ab.yMax[ah],ag=ab.y[ah];
ae.range(ag.range()).domain(ag.domain());
ad.range(ag.range()).domain(ag.domain())
}this._super(ac)
};
aa.enterPen=function(){var ad=function(af,ae){return af.panel.yScale(af).reverse()?1:0
},ac=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapPropToPercent(ag,af)
},ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand(),af)
};
return this._decoratePen(ac,ab,ad,ad)
};
aa.pen=function(){var ac=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapPropToPercent(ah,ag)
},ab=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+af.rangeBand(),ag)
},ae=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ag.yMin,af),af)
},ad=function(ag,af){var ah=ag.panel.yScale(ag);
return ah.mapValueToPercent(ah.mapValue(ag.yMax,af),af)
};
return this._decoratePen(ac,ab,ae,ad)
};
aa._defined=function(ad,ac){var ab=ad.panel.xScale(ad),ae=ad.panel.yScale(ad);
return dv.util.isFinite(ab.mapToProp(ad,ac))&&dv.util.isFinite(ae.mapValue(ad.yMin,ac))&&dv.util.isFinite(ae.mapValue(ad.yMax,ac))
};
aa._decoratePen=function(ae,ad,ag,af){var ab=this;
var ac=this.coord()._rect().x0(ae).x1(ad).y0(ag).y1(af).defined(this._defined);
return{bounds:function(aj,ah){var ai=ac.getBounds(aj,ah);
if(ai){ai.bounds.coord=ab.coord()._type
}return ai
},pathTween:function(aj,ai,ah){return ab.pathTween(ac,this,aj,ai,ah)
},path:function(ai,ah){return ac.getPath(ac.getBounds(ai,ah))
}}
};
return aa
});
dv.geom.segment=dv.geom.line.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.segment
}aa.getValues=function(ab){return ab.values
};
aa.enterPen=function(){var ab=function(af,ae){var ad=af.panel.xScale(af);
return ad.mapValueToPercent(ad.mapToProp(af,ae)+ad.rangeBand()/2,ae)
},ac=function(ae,ad){return ae.panel.yScale(ae).reverse()?1:0
};
return this._decoratePen(ab,ac)
};
aa.pen=function(){var ab=function(af,ae){var ad=af.panel.xScale(af);
return ad.mapValueToPercent(ad.mapToProp(af,ae)+ad.rangeBand()/2,ae)
},ac=function(ae,ad){return ae.panel.yScale(ae).mapPropToPercent(ae,ad)
};
return this._decoratePen(ab,ac)
};
return aa
});
dv.geom.vline=dv.geom.segment.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.vline
}aa._dataPointStyleClass="vline-geom";
aa._render=function(ac){var ab=this;
dv.util.each(this._nestData,function(af,ae){var ad=[];
dv.util.each(af.values,function(am,ai){var al=am.panel.xScale(am),ak=am.panel.yScale(am),aj=ak.domain(),ag=am[al.property()];
if(dv.util.isArray(am)){am[0].x=ag;
am[1].x=ag
}else{var ah=[];
am.x=ag;
ah.push(am);
ah.push(dv.util.clone(am));
ad.push(ah)
}});
ab._nestData[ae].values=ad
});
this._super(ac)
};
aa.enterPen=function(){var ab=function(af,ae){var ad=af.panel.xScale(af);
return ad.mapValueToPercent(ad.mapToProp(af,ae)+ad.rangeBand()/2,ae)
},ac=function(ae,ad){return 0
};
return this._decoratePen(ab,ac)
};
aa.pen=function(){var ab=function(af,ae){var ad=af.panel.xScale(af);
return ad.mapValueToPercent(ad.mapToProp(af,ae)+ad.rangeBand()/2,ae)
},ac=function(ae,ad){return ad===0?0:1
};
return this._decoratePen(ab,ac)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.xScale(ac).mapToProp(ac,ab))
};
return aa
});
dv.geom.hline=dv.geom.segment.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.hline
}aa._dataPointStyleClass="hline-geom";
aa._render=function(ac){var ab=this;
dv.util.each(this._nestData,function(af,ae){var ad=[];
dv.util.each(af.values,function(al,ai){var ak=al.panel.xScale(al),aj=al.panel.yScale(al),ah=ak.domain(),am=al[aj.property()];
if(dv.util.isArray(al)){al[0].y=am;
al[1].y=am
}else{var ag=[];
al.y=am;
ag.push(al);
ag.push(dv.util.clone(al));
ad.push(ag)
}});
ab._nestData[ae].values=ad
});
this._super(ac)
};
aa.enterPen=function(){var ab=function(ae,ad){return ad===0?0:1
},ac=function(ae,ad){return ae.panel.yScale(ae).reverse()?1:0
};
return this._decoratePen(ab,ac)
};
aa.pen=function(){var ab=function(ae,ad){return ad===0?0:1
},ac=function(ae,ad){return ae.panel.yScale(ae).mapPropToPercent(ae,ad)
};
return this._decoratePen(ab,ac)
};
aa._defined=function(ac,ab){return dv.util.isFinite(ac.panel.yScale(ac).mapToProp(ac,ab))
};
return aa
});
dv.geom.ribbon=dv.geom.area.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.ribbon
}aa._initializeDefaultAes=function(){this._super();
this._defaultAes.yMin=1;
this._defaultAes.yMax=1;
delete this._defaultAes.y
};
aa._trainScales=function(){var ab=this.getExplicitScales("yMin")["yMin"],ae,ad;
for(var ac in ab){if(!this._aes.y){this._aes.y={}
}ae=this._aes.y;
ad=ae[ac];
if(!ad){ae[ac]=ad=ab[ac].copy().property("y").mapping("y")
}ad.trainingProperties(["yMin","yMax"])
}};
aa._render=function(ac){var ab=this.getExplicitScales(["yMin","yMax","y"]),af=ab.yMin;
for(var ah in af){var ad=af[ah],ae=ab.yMax[ah],ag=ab.y[ah];
ae.range(ag.range()).domain(ag.domain());
ad.range(ag.range()).domain(ag.domain())
}this._super(ac)
};
aa.enterPen=function(){var ac=this,ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
},ad=function(af,ae){return af.panel.yScale(af).reverse()?1:0
};
return this._decoratePen(ab,ad,ad)
};
aa.pen=function(){var ab=function(ag,af){var ae=ag.panel.xScale(ag);
return ae.mapValueToPercent(ae.mapToProp(ag,af)+ae.rangeBand()/2,af)
},ad=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapValue(af.yMin,ae))
},ac=function(af,ae){var ag=af.panel.yScale(af);
return ag.mapValueToPercent(ag.mapValue(af.yMax,ae))
};
return this._decoratePen(ab,ad,ac)
};
aa._defined=function(ad,ac){var ab=ad.panel.xScale(ad),ae=ad.panel.yScale(ad);
return dv.util.isFinite(ab.mapToProp(ad,ac))&&dv.util.isFinite(ae.mapValue(ad.yMin,ac))&&dv.util.isFinite(ae.mapValue(ad.yMax,ac))
};
aa._decoratePen=function(ab,af,ae){var ac=this;
var ad=this.coord()._area().x(ab).y0(af).y1(ae).defined(this._defined);
ad.renderer.tension(this.tension()).interpolate(this.interpolate());
return{bounds:function(ai,ag){var ah=ad.getBounds(ai,ag);
if(ah){ah.coord=ac.coord()
}return ah
},pathTween:function(ah,ag){return ac.pathTween(ad,this,ah,ag)
},path:function(ah,ag){return ad.getPath(ad.getBounds(ah,ag))
}}
};
return aa
});
dv.geom.errorbar=dv.geom.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.errorbar;
this._width=1
}aa._dataPointStyleClass="errorbar-geom";
aa._initializeDefaultAes=function(){this._super();
this._defaultAes.yMin=1;
this._defaultAes.yMax=1;
delete this._defaultAes.y
};
aa._trainScales=function(){var ab=this.getExplicitScales("yMin")["yMin"],ad;
for(var ac in ab){if(!this._aes.y){this._aes.y={}
}yScales=this._aes.y;
ad=yScales[ac];
if(!ad){yScales[ac]=ad=ab[ac].copy().property("y").mapping("y")
}ad.trainingProperties(["yMin","yMax"])
}};
aa.getValues=function(ab){return ab.values
};
aa.width=function(ab){if(!arguments.length){return this._width
}this._width=ab;
return this
};
aa.attributes=function(ac,ab){var ad=ab.getScale("linetype");
ac.attr("style","").classed(ab._dataPointStyleClass,true).call(ab.applyAttributeValue,ab,"stroke","stroke").call(ab.applyAttributeValue,ab,"opacity","alpha").call(ab.applyAttributeValue,ab,"stroke-width","size").style("stroke-dasharray",function(ag,af,ae){return ad?dv.util.svg.getDasharray(ad.mapToProp(ag[0],af,ae)):null
}).style("fill","none")
};
aa._render=function(ah){var ak=this.getScale("x");
if(!(ak instanceof dv.scale.ordinal)){var ac=Number.MAX_VALUE,aj,ae;
dv.util.each(this._nestData,function(al){dv.util.each(al.values,function(am){aj=am.panel.xScale(am).mapValue(am.x);
if(!dv.util.isUndefined(ae)){ac=Math.min(ac,Math.abs(aj-ae))
}ae=aj
})
});
this._maxWidthPixels=ac
}var ai=this.getExplicitScales(["yMin","yMax","y"]),ag=ai.yMin;
for(var af in ag){var ad=ag[af],ab=ai.yMax[af];
yScale=ai.y[af];
ab.range(yScale.range()).domain(yScale.domain());
ad.range(yScale.range()).domain(yScale.domain())
}this._super(ah)
};
aa.enterPen=function(){var ab=this,ad=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)-(ab._isOrdinal(ah)?0:ab._rangeBand(ah)/2),ag)
},ac=function(ah,ag){var af=ah.panel.xScale(ah);
return af.mapValueToPercent(af.mapToProp(ah,ag)+(ab._isOrdinal(ah)?ab._rangeBand(ah):ab._rangeBand(ah)/2),ag)
},ae=function(ag,af){return ag.panel.yScale(ag).reverse()?1:0
};
return this._decoratePen(ad,ac,ae,ae)
};
aa.pen=function(){var ab=this,ad=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)-(ab._isOrdinal(ai)?0:ab._rangeBand(ai)/2),ah)
},ac=function(ai,ah){var ag=ai.panel.xScale(ai);
return ag.mapValueToPercent(ag.mapToProp(ai,ah)+(ab._isOrdinal(ai)?ab._rangeBand(ai):ab._rangeBand(ai)/2),ah)
},af=function(ah,ag){var ai=ah.panel.yScale(ah);
return ai.mapValueToPercent(ai.mapValue(ah.yMin,ag))
},ae=function(ah,ag){var ai=ah.panel.yScale(ah);
return ai.mapValueToPercent(ai.mapValue(ah.yMax,ag))
};
return this._decoratePen(ad,ac,af,ae)
};
aa._isOrdinal=function(ab){return ab.panel.xScale(ab) instanceof dv.scale.ordinal
};
aa._rangeBand=function(ac){var ab=ac.panel.xScale(ac);
return(ab instanceof dv.scale.ordinal)?ab.range():this._maxWidthPixels*this._width
};
aa._defined=function(ad,ac){var ab=ad.panel.xScale(ad),ae=ad.panel.yScale(ad);
return dv.util.isFinite(ab.mapToProp(ad,ac))&&dv.util.isFinite(ae.mapValue(ad.yMin,ac))&&dv.util.isFinite(ae.mapValue(ad.yMax,ac))
};
aa._decoratePen=function(ae,ad,ag,af){var ab=this;
var ac=this.coord()._errorBar().x0(ae).x1(ad).y0(ag).y1(af).defined(this._defined);
return{bounds:function(ai,ah){return ac.getBounds(ai,ah)
},pathTween:function(ai,ah){return ab.pathTween(ac,this,ai,ah)
},path:function(ai,ah){return ac.getPath(ac.getBounds(ai,ah))
}}
};
return aa
});
dv.geom.poly=dv.geom.extend(function(){function aa(){this._super();
this._rendererClass=dv.geom.poly
}aa._dataPointStyleClass="poly-geom";
aa._initializeDefaultAes=function(){this._super();
this._defaultAes.size=1;
delete this._defaultAes.shape;
delete this._defaultAes.x;
delete this._defaultAes.y
};
aa._trainScales=function(){var ac=this.getExplicitScales(["yMin","xMin"]),ae;
for(ae in ac.yMin){var ad=this._aes.y;
if(!ad){this._aes.y=ad={}
}if(!ad[ae]){ad[ae]=yMinScale.copy().property("y").mapping("y")
}ad[ae].trainingProperties(["yMin","yMax"])
}for(ae in ac.xMin){var ab=this._aes.x;
if(!ab){this._aes.x=ab={}
}if(!ab[ae]){ab[ae]=xMinScale.copy().property("x").mapping("x")
}ab[ae].trainingProperties(["xMin","xMax"])
}};
aa.getValues=function(ab){return ab.values
};
aa.attributes=function(ae,ac){var af=ac.getScale("fill"),ad=ac.getScale("stroke"),ab=ac.getScale("alpha");
ae.attr("style","").classed(ac._dataPointStyleClass,true).call(ac.applyAttributeValue,ac,"stroke","stroke").call(ac.applyAttributeValue,ac,"fill","fill").call(ac.applyAttributeValue,ac,"opacity","alpha")
};
aa.exitSeriesGroup=function(ac,ab){ab.exitSeries(ac,ab.enterPen,ab)
};
aa.getHighlightColor=function(ae,ac){var ad=this.getScale("fill"),ab=this.getScale("stroke");
if(!(ab instanceof dv.scale.constant)){return ab.mapToProp(ae,ac)
}if(!(ad instanceof dv.scale.constant)){return ad.mapToProp(ae,ac)
}return ab.mapToProp(ae,ac)
};
aa.enterPen=function(){var ab=function(ae,ad){return ae.panel.xScale(ae).mapPropToPercent(ae,ad)
},ac=function(ae,ad){var af=ae.panel.yScale(ae);
return dv.util.map(ae[af.property()],function(){return af.reverse()?1:0
})
};
return this._decoratePen(ab,ac)
};
aa.pen=function(){var ab=function(ae,ad){return ae.panel.xScale(ae).mapPropToPercent(ae,ad)
},ac=function(ae,ad){return ae.panel.yScale(ae).mapPropToPercent(ae,ad)
};
return this._decoratePen(ab,ac)
};
aa._defined=function(ah,ae){var ad=ah.panel.xScale(ah).mapToProp(ah,ae),af=ah.panel.yScale(ah).mapToProp(ah,ae),ab=d3.max([ad.length,af.length]),ag=true;
for(var ac=0;
ac<ab&&ag;
ac++){ag=dv.util.isFinite(ad[ac])&&dv.util.isFinite(af[ac])
}return ag
};
aa._decoratePen=function(ab,ae){var ac=this;
var ad=this.coord()._poly().xs(ab).ys(ae).defined(this._defined);
return{bounds:function(ag,af){return ad.getBounds(ag,af)
},pathTween:function(ah,ag,af){return ac.pathTween(ad,this,ah,ag,af)
},path:function(ag,af){return ad.getPath(ad.getBounds(ag,af))
}}
};
return aa
});
dv.behavior=dv.extend(function(){function ab(){}var aa;
ab._testAndroidChromeBug141840=function(){if(aa===undefined){var ac=navigator.userAgent;
aa=/Android .* Chrome\/18+/.exec(ac)!==null||/Silk\/2./.exec(ac)!==null
}return aa
};
return ab
});
dv.behavior.inspector=dv.behavior.extend(function(){function ag(){this._size=undefined;
this._lastX=NaN;
this._visible=false;
this._inspector=null;
this._thickness=3;
this._orientation="bottom";
this._currentValue=null;
this._gutterPadding=-7;
this._calloutPadding={left:8,top:7,right:8,bottom:7};
this._label=this._defaultLabel();
this._underGeoms=false;
this._dragInspect=true;
this._pressTimer=null
}ag._render=function(ai){this._domain=ad.call(this);
var ak=0,aj=this._chart.facet().getPanel(0)._bounds;
if(this._size===undefined){this._size=aj.bottom-aj.top
}this._xGuide=dv.util.clone(this._chart._axes._get("x")[0]);
this._selection=ai;
this._inspector=ai.selectAll(".inspector").data([0]);
this._inspector.call(this._createInspector,this._orientation,aj,this._calloutPadding,this._thickness)
};
ag._createInspector=function(aq,ak,aj,am,ao){var ar=aq,ai=aq.enter();
ai=ai.append("g").classed("inspector",true);
ar.style("pointer-events","none").attr("opacity",0.000001).attr("transform","translate(0,"+aj.top+")");
var an=ai.append("g").classed("inspector-marker",true);
var al=an.append("g").classed("inspector-line-container",true);
al.append("path").classed("inspector-callout",true);
ar.select(".inspector-callout").attr("d",function(){var au=-3,at=au+5;
if(ak==="bottom"){au=aj.bottom-aj.top+2;
at=au-5
}return"M-5,"+au+"L5,"+au+"L0,"+at+"Z"
});
al.append("line").classed("inspector-line",true);
ar.select(".inspector-line").attr("y1",ak==="bottom"?0:4).attr("y2",ak==="bottom"?aj.bottom-aj.top-6:aj.bottom-aj.top).style("stroke-width",ao);
var ap=an.append("g").classed("inspector-tip",true);
ar.select(".inspector-tip").attr("transform","translate(0,"+(ak==="bottom"?aj.bottom-aj.top+2:-30)+")");
ap.append("rect").classed("inspector-tip-background",true);
ap.append("text").classed("inspector-tip-label",true);
ar.select(".inspector-tip-label").attr("x",am.left).attr("y","1em").attr("dy",am.top)
};
ag.moveToIndex=function(aj){var al=this._chart.getTrainedScale("x"),ak=this._domain[aj],ai=this._label.call(this,ak,aj),am=al.mapValue(ak);
ab.call(this,ak,ai,am)
};
ag.hide=function(){this._inspector.attr("opacity",0.000001);
this._visible=false;
return this
};
ag.show=function(){this._inspector.attr("opacity",1);
this._visible=true;
return this
};
ag._removeEvents=function(){this._chart.on("mousemove.inspector",null);
this._chart.on("mouseout.inspector",null);
this._chart.on("touchstart.inspector",null);
this._chart.on("touchmove.inspector",null);
this._chart.on("touchend.inspector",null)
};
ag.inspectorMove=function(ai){if(!arguments.length){return this._inspectorMove
}this._inspectorMove=ai;
return this
};
ag.inspectorOut=function(ai){if(!arguments.length){return this._inspectorOut
}this._inspectorOut=ai;
return this
};
ag.label=function(ai){if(!arguments.length){return this._label
}this._label=d3.functor(ai);
return this
};
ag.thickness=function(ai){if(!arguments.length){return this._thickness
}this._thickness=ai;
return this
};
ag.size=function(ai){if(!arguments.length){return this._size
}this._size=ai;
return this
};
ag.chart=function(ai){if(!arguments.length){return this._chart
}if(this._chart){this._removeEvents()
}this._chart=ai;
if(this._chart){ac.call(this)
}return this
};
ag.orientation=function(ai){if(!arguments.length){return this._orientation
}this._orientation=ai;
return this
};
function ad(){var ai=[],am=this._chart.getTrainedScale("x"),ar,aq=false,al=function(aw,av){return aq&&aw&&av?aw.getTime()===av.getTime():aw===av
},au=function(av){return am.mapValue(av)
},an=this._chart.data(),ao=-1,ak=this._chart._layers.length;
if(an.length){ai.concat(an[am.property()])
}while(++ao<ak){var at=this._chart._layers[ao],aj=at.getTrainedScale("x"),ap=at.data()[aj.property()];
if(ap&&ap!==an){ai=ai.concat(ap)
}aq=aq||(aj instanceof dv.scale.time||aj instanceof dv.scale.time.utc)
}return ai.length?dv.util.sortBy(dv.util.uniqueValues(ai,al),au):ai
}function ac(){this._chart.on("mousemove.inspector",dv.util.bind(ae,this));
this._chart.on("mouseout.inspector",dv.util.bind(af,this));
this._chart.on("touchstart.inspector",dv.util.bind(ah,this));
this._chart.on("touchmove.inspector",dv.util.bind(ae,this));
this._chart.on("touchend.inspector",dv.util.bind(aa,this))
}ag._defaultLabel=function(){var ai=this;
return function(ak){var aj=(ai._xGuide.tickFormat)?ai._xGuide.tickFormat():function(al){return al
};
return aj(ak)
}
};
ag.label=function(ai){if(!arguments.length){return this._label
}this._label=d3.functor(ai);
return this
};
ag.underGeoms=function(ai){if(!arguments.length){return this._underGeoms
}this._underGeoms=ai;
return this
};
ag.gutterPadding=function(ai){if(!arguments.length){return this._gutterPadding
}this._gutterPadding=ai;
return this
};
function ab(am,ak,ao){var an=0,aj=0;
if(this._lastX===ao){return
}this._inspector.attr("opacity",1);
this._inspector.select(".inspector-tip-label").text(ak).each(function(){var aq=this.getBBox();
an=Math.max(aq.width,an);
aj=Math.max(aq.height,aj)
});
var ap=this._chart.facet().getPanel(0).bounds(),al;
an+=this._calloutPadding.left+this._calloutPadding.right;
aj+=this._calloutPadding.top+this._calloutPadding.bottom;
al=ao-an/2;
if(al<ap.left+this._gutterPadding){al=ap.left+this._gutterPadding
}if(al+an>ap.right-this._gutterPadding){al=ap.right-this._gutterPadding-an
}this._inspector.select(".inspector-marker").attr("transform","translate("+al+",0)");
this._inspector.select(".inspector-tip-background").attr("width",an).attr("height",aj);
var ai=ao-al;
this._inspector.select(".inspector-line-container").attr("transform","translate("+ai+",0)")
}function ah(aj){if(!aj){return
}var ai=this;
this._dragInspect=false;
clearTimeout(this._pressTimer);
this._pressTimer=setTimeout(function(){ai._dragInspect=true;
ae.call(ai,aj)
},500);
return false
}function aa(ai){clearTimeout(this._pressTimer);
if(this._dragInspect){this._dragInspect=false
}af.call(this,ai)
}function ae(an){if(!an){return
}if(!this._dragInspect){clearTimeout(this._pressTimer);
return
}var am=an.touches?an.touches[0]:an;
var ar=this._chart.getTrainedScale("x"),aj=this._testAndroidChromeBug141840()?am.screenX:am.clientX,ai=aj-am.target.getBoundingClientRect().left+am.target.getBBox().x,al=dv.util.binaryCompare(this._domain,ai,function(at){return ar.mapValue(at)
}),ap=Math.min(Math.max(al||0,0),this._domain.length-1),aq=this._domain[ap],ao=this._label.call(this,aq,ap),ak=ar.mapValue(aq);
if(this._currentValue!=aq){if(this._inspectorMove){this._inspectorMove.call(this,ao,ap,ak,aq)
}ab.call(this,aq,ao,ak)
}this._currentValue=aq;
dv.cancelEvent(an)
}function af(ai){this._inspector.attr("opacity",0.000001);
if(this._inspectorOut){this._inspectorOut.call(this)
}this._currentValue=null;
dv.cancelEvent(ai)
}return ag
});
dv.behavior.brush=dv.behavior.extend(function(){function aa(ab){if(arguments.length&&!dv.util.isArray(ab)){this._dimensions=[this._dimensions]
}this._fluidDimensions=ab||["x","y"];
this._snap=false;
this._resizing=false
}aa.initializeBrush=function(ac){var ab=this;
this._brush=dv.brush(ac).on("brushstart.brush",function(){ab._onBrushStart.call(ab);
if(ab._brushStart){ab._brushStart.call(this,"start",ab._brush.extent(),ab)
}}).on("brush.brush",function(ad){ab._onBrushMove.call(ab);
if(ab._brushMove){ab._brushMove.call(this,"move",ab._brush.extent(),ab)
}}).on("brushend.brush",function(){ab._onBrushEnd.call(ab);
if(ab._brushEnd){ab._brushEnd.call(this,"end",ab._brush.extent(),ab)
}})
};
aa._removeEvents=function(){this._brush.on("brushstart.brush",null).on("brush.brush",null).on("brushend.brush",null)
};
aa._onBrushStart=function(){if(!this.snap()||this._fluidDimensions.length>1){return
}this._startPos=d3.mouse(this._brushContainer.node());
this._moving=d3.select(d3.event.sourceEvent.target).classed("extent")
};
aa._onBrushMove=function(){if(!this.snap()||this._fluidDimensions.length>1){return
}var ab=d3.mouse(this._brushContainer.node());
if(this._startPos[0]!==ab[0]||this._startPos[1]!==ab[1]){this._snapToDataPoints()
}};
aa._onBrushEnd=function(){if(!this.snap()||this._fluidDimensions.length>1){return
}var ab=d3.mouse(this._brushContainer.node());
if(!this._moving&&this._startPos[0]===ab[0]&&this._startPos[1]===ab[1]){this.clear()
}else{this._brushContainer.selectAll(".resize").style("display",null)
}};
aa._snapToDataPoints=function(){var af=this._brush.extent(),ab=[],ad=this._chart.getTrainedScale(this._fluidDimensions[0]),ac=[this._snapToNearestPoint(ad,af[0],0),this._snapToNearestPoint(ad,af[1],1)];
this._brush.extent([ac[0].value,ac[1].value]);
var ae=this._chart.plotBounds();
if(this._fluidDimensions==="x"){ab[0]=[ac[0].rangeValue,0];
ab[1]=[ac[1].rangeValue,ae.bottom-ae.top]
}else{ab[0]=[0,ac[0].rangeValue];
ab[1]=[ae.right-ae.left,ac[1].rangeValue]
}this._adjustBounds(this._brushContainer,ab)
};
aa._snapToNearestPoint=function(ac,am,ai){var ad={},aj;
if(ac instanceof dv.scale.ordinal||ac instanceof dv.scale.identity){var ae=dv.util.scaleRangeNoReverse(ac);
var ak=ae[1]-ae[0];
domain=ac.domain();
aj=Math.round(ac.invertValue(am)/ak-1)
}else{domain=dv.util.uniq(this._chart.data()[ac.mapping()]);
index=dv.util.binaryCompare(domain,am,function(an){return an
});
aj=Math.min(Math.max(index||0,0),domain.length-1)
}var al=domain[aj];
ad.value=al;
if(ai===0){if(aj===0){ad.rangeValue=ac.mapValue(al)
}else{var ab=domain[aj-1],ag=ac.mapValue(ab);
valueRange=ac.mapValue(al);
ad.rangeValue=valueRange-(valueRange-ag)/2
}}else{if(aj===domain.length-1){ad.rangeValue=ac.mapValue(al)
}else{var ah=domain[aj+1],af=ac.mapValue(ah);
valueRange=ac.mapValue(al);
ad.rangeValue=valueRange+(af-valueRange)/2
}}return ad
};
aa._adjustBounds=function(ac,ab){if(this._fluidDimensions==="x"){this._adjustBoundsX(ac,ab)
}if(this._fluidDimensions==="y"){this._adjustBoundsY(ac,ab)
}ac.selectAll(".resize").attr("transform",function(ad){return"translate("+ab[+(/e$/).test(ad)][0]+","+ab[+(/^s/).test(ad)][1]+")"
})
};
aa._adjustBoundsX=function(ac,ab){ac.select(".extent").attr("x",ab[0][0]);
ac.selectAll(".extent,.n>rect,.s>rect").attr("width",ab[1][0]-ab[0][0])
};
aa._adjustBoundsY=function(ac,ab){ac.select(".extent").attr("y",ab[0][1]);
ac.selectAll(".extent,.e>rect,.w>rect").attr("height",ab[1][1]-ab[0][1])
};
aa._setScales=function(){if(this._fluidDimensions.indexOf("x")>=0){var ab=this._chart.getTrainedScale("x");
this._brush.x(ab._d3Scale)
}if(this._fluidDimensions.indexOf("y")>=0){var ac=this._chart.getTrainedScale("y");
this._brush.y(ac._d3Scale)
}};
aa._render=function(){this._brushContainer=this._chart._parent.select(".interaction-group");
if(this._brush.empty()){this._brushContainer.classed("brush",true).call(this._brush)
}var ad=this._chart.plotBounds();
if(!this._brush.y()){var ab=ad.bottom-ad.top;
this._brushContainer.selectAll(".extent").attr("height",ab).attr("y",0);
this._brushContainer.selectAll(".resize rect").attr("height",ab).attr("y",0)
}if(!this._brush.x()){var ac=ad.right-ad.left;
this._brushContainer.selectAll(".extent").attr("width",ac).attr("x",0);
this._brushContainer.selectAll(".resize rect").attr("width",ac).attr("x",0)
}};
aa.empty=function(){return this._brush.empty()
};
aa.clear=function(){this._brushContainer.call(this._brush.clear())
};
aa.extent=function(ab){if(!arguments.length){return(this._brush)?this._brush.extent():null
}this._brushContainer.call(this._brush.extent(ab));
return this
};
aa.snap=function(ab){if(!arguments.length){return this._snap
}this._snap=(this._fluidDimensions.length>1)?false:ab;
return this
};
aa.brushStart=function(ab){if(!arguments.length){return this._brushStart
}this._brushStart=ab;
return this
};
aa.brushMove=function(ab){if(!arguments.length){return this._brushMove
}this._brushMove=ab;
return this
};
aa.brushEnd=function(ab){if(!arguments.length){return this._brushEnd
}this._brushEnd=ab;
return this
};
aa.chart=function(ab){if(!arguments.length){return this._chart
}this._chart=ab;
this.initializeBrush(this._chart);
if(this._chart){this._setScales()
}return this
};
return aa
});
dv.brush=function(ae){var aa=z(af,"brushstart","brush","brushend"),ah=null,ag=null,ai=Z[0],al=[[0,0],[0,0]],ab;
function af(am){am.each(function(){var ap=d3.select(this),ao=ap.selectAll(".background").data([0]),an=ap.selectAll(".extent").data([0]),ar=ap.selectAll(".resize").data(ai,String),aq;
ae.on("mousedown.brush",aj).on("touchstart.brush",aj)._g.style("cursor","crosshair");
ap.style("pointer-events","all");
an.enter().append("rect").attr("class","extent").style("cursor","move");
ar.enter().append("g").attr("class",function(at){return"resize "+at
}).style("cursor",function(at){return i[at]
}).append("rect").attr("x",function(at){return(/[e]$/).test(at)?-10:(/[w]$/).test(at)?2:null
}).attr("y",function(at){return(/^[ns]/).test(at)?-3:null
}).attr("width",10).attr("height",6).style("visibility","hidden");
ar.style("display",af.empty()?"none":null);
ar.exit().remove();
if(ah){aq=dv.util.scaleRangeNoReverse(ah);
ao.attr("x",aq[0]).attr("width",aq[1]-aq[0]);
ad(ap)
}if(ag){aq=dv.util.scaleRangeNoReverse(ag);
ao.attr("y",aq[0]).attr("height",aq[1]-aq[0]);
ac(ap)
}ak(ap)
})
}function ak(am){am.selectAll(".resize").attr("transform",function(an){return"translate("+al[+/e$/.test(an)][0]+","+al[+/^s/.test(an)][1]+")"
})
}function ad(am){am.select(".extent").attr("x",al[0][0]);
am.selectAll(".extent,.n>rect,.s>rect").attr("width",al[1][0]-al[0][0])
}function ac(am){am.select(".extent").attr("y",al[0][1]);
am.selectAll(".extent,.e>rect,.w>rect").attr("height",al[1][1]-al[0][1])
}function aj(){var aG=this,an=d3.select(d3.event.target),au=aa.of(aG,arguments),aB=d3.select(aG),aD=an.datum(),az=!/^(n|s)$/.test(aD)&&ah,ax=!/^(e|w)$/.test(aD)&&ag,ay=an.classed("extent"),aE,aF=av(),ao;
var ar=d3.select(window).on("mousemove.brush",at).on("mouseup.brush",am).on("touchmove.brush",at).on("touchend.brush",am).on("keydown.brush",aw).on("keyup.brush",aq);
if(ay){aF[0]=al[0][0]-aF[0];
aF[1]=al[0][1]-aF[1]
}else{if(aD&&(aD==="e"||aD==="w"||aD==="s"||aD==="n"||aD==="nw"||aD==="ne"||aD==="sw"||aD==="se")){var aC=+/w$/.test(aD),aA=+/^n/.test(aD);
ao=[al[1-aC][0]-aF[0],al[1-aA][1]-aF[1]];
aF[0]=al[aC][0];
aF[1]=al[aA][1]
}else{if(d3.event.altKey){aE=aF.slice()
}}}aB.style("pointer-events","none").selectAll(".resize").style("display",null);
d3.select("body").style("cursor",an.style("cursor"));
au({type:"brushstart"});
at();
a();
function av(){var aH=d3.event.changedTouches;
return aH?d3.touches(aG,aH)[0]:d3.mouse(aG)
}function aw(){if(d3.event.keyCode==32){if(!ay){aE=null;
aF[0]-=al[1][0];
aF[1]-=al[1][1];
ay=2
}a()
}}function aq(){if(d3.event.keyCode==32&&ay==2){aF[0]+=al[1][0];
aF[1]+=al[1][1];
ay=0;
a()
}}function at(){var aH=av(),aI=false;
if(ao){aH[0]+=ao[0];
aH[1]+=ao[1]
}if(!ay){if(d3.event.altKey){if(!aE){aE=[(al[0][0]+al[1][0])/2,(al[0][1]+al[1][1])/2]
}aF[0]=al[+(aH[0]<aE[0])][0];
aF[1]=al[+(aH[1]<aE[1])][1]
}else{aE=null
}}if(az&&ap(aH,ah,0)){ad(aB);
aI=true
}if(ax&&ap(aH,ag,1)){ac(aB);
aI=true
}if(aI){ak(aB);
au({type:"brush",mode:ay?"move":"resize"})
}}function ap(aP,aJ,aL){var aM=dv.util.scaleRangeNoReverse(aJ),aI=aM[0],aH=aM[1],aN=aF[aL],aQ=al[1][aL]-al[0][aL],aK,aO;
if(ay){aI-=aN;
aH-=aQ+aN
}aK=Math.max(aI,Math.min(aH,aP[aL]));
if(ay){aO=(aK+=aN)+aQ
}else{if(aE){aN=Math.max(aI,Math.min(aH,2*aE[aL]-aK))
}if(aN<aK){aO=aK;
aK=aN
}else{aO=aN
}}if(al[0][aL]!==aK||al[1][aL]!==aO){ab=null;
al[0][aL]=aK;
al[1][aL]=aO;
return true
}}function am(){at();
aB.style("pointer-events","all").selectAll(".resize").style("display",af.empty()?"none":null);
d3.select("body").style("cursor",null);
ar.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);
au({type:"brushend"});
a()
}}af.x=function(am){if(!arguments.length){return ah
}ah=am;
ai=Z[!ah<<1|!ag];
return af
};
af.y=function(am){if(!arguments.length){return ag
}ag=am;
ai=Z[!ah<<1|!ag];
return af
};
af.extent=function(ar){var ao,am,aq,ap,an;
if(!arguments.length){ar=ab||al;
if(ah){ao=ar[0][0],am=ar[1][0];
if(!ab){ao=al[0][0],am=al[1][0];
if(ah.invert){ao=ah.invert(ao),am=ah.invert(am)
}if(am<ao){an=ao,ao=am,am=an
}}}if(ag){aq=ar[0][1],ap=ar[1][1];
if(!ab){aq=al[0][1],ap=al[1][1];
if(ag.invert){aq=ag.invert(aq),ap=ag.invert(ap)
}if(ap<aq){an=aq,aq=ap,ap=an
}}}return ah&&ag?[[ao,aq],[am,ap]]:ah?[ao,am]:ag&&[aq,ap]
}ab=[[0,0],[0,0]];
if(ah){ao=ar[0],am=ar[1];
if(ag){ao=ao[0],am=am[0]
}ab[0][0]=ao,ab[1][0]=am;
if(ah.invert){ao=ah(ao),am=ah(am)
}if(am<ao){an=ao,ao=am,am=an
}al[0][0]=ao|0,al[1][0]=am|0
}if(ag){aq=ar[0],ap=ar[1];
if(ah){aq=aq[1],ap=ap[1]
}ab[0][1]=aq,ab[1][1]=ap;
if(ag.invert){aq=ag(aq),ap=ag(ap)
}if(ap<aq){an=aq,aq=ap,ap=an
}al[0][1]=aq|0,al[1][1]=ap|0
}return af
};
af.clear=function(){ab=null;
al[0][0]=al[0][1]=al[1][0]=al[1][1]=0;
return af
};
af.empty=function(){return(ah&&al[0][0]===al[1][0])||(ag&&al[0][1]===al[1][1])
};
return d3.rebind(af,aa,"on")
};
var i={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};
var Z=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];
function u(){}function U(aa){function ad(){var ag=ac,af=-1,ah=ag.length,ae;
while(++af<ah){if(ae=ag[af].on){ae.apply(this,arguments)
}}return aa
}var ac=[],ab=new d3.map();
ad.on=function(af,ah){var ae=ab.get(af),ag;
if(arguments.length<2){return ae&&ae.on
}if(ae){ae.on=null;
ac=ac.slice(0,ag=ac.indexOf(ae)).concat(ac.slice(ag+1));
ab.remove(af)
}if(ah){ac.push(ab.set(af,{on:ah}))
}return aa
};
return ad
}u.prototype.on=function(ac,ad){var ab=ac.indexOf("."),aa="";
if(ab>0){aa=ac.substring(ab+1);
ac=ac.substring(0,ab)
}return arguments.length<2?this[ac].on(aa):this[ac].on(aa,ad)
};
function z(ac){var aa=new u(),ab=0,ad=arguments.length;
while(++ab<ad){aa[arguments[ab]]=U(aa)
}aa.of=function(af,ae){return function(ag){var ah;
try{ah=ag.sourceEvent=d3.event;
ag.target=ac;
d3.event=ag;
aa[ag.type].apply(af,ae)
}finally{d3.event=ah
}}
};
return aa
}function a(){d3.event.stopPropagation();
d3.event.preventDefault()
}dv.behavior.zoom=dv.behavior.extend(function(){function aa(ab){if(arguments.length&&!dv.util.isArray(ab)){this._dimensions=[this._dimensions]
}this._fluidDimensions=ab||["x","y"];
this._zoom=d3.behavior.zoom();
this.scaleExtent([0,Infinity]);
this._underGeoms=false
}aa.initializeZoom=function(ac){var ab=this;
this._cacheAxes();
this._zoom.on("zoomstart.zoom",function(){if(ab._zoomStart){ab._zoomStart.call(this,"start",d3.event.scale,d3.event.translate,ab)
}}).on("zoom.zoom",function(){if(ab._zoomMove){ab._zoomMove.call(this,"move",d3.event.scale,d3.event.translate,ab)
}ab._refresh(d3.event.scale,d3.event.translate)
}).on("zoomend.zoom",function(){if(ab._zoomEnd){ab._zoomEnd.call(this,"end",d3.event.scale,d3.event.translate,ab)
}})
};
aa.underGeoms=function(ab){if(!arguments.length){return this._underGeoms
}this._underGeoms=ab;
return this
};
aa._cacheAxes=function(){this._axisCache={};
for(var ab in this._chart._axes._axes){this._axisCache[ab]=this._chart._axes._axes[ab]
}};
aa._removeEvents=function(){this._zoom.on("zoomstart.zoom",null).on("zoom.zoom",null).on("zoomend.zoom",null)
};
aa._refresh=function(af,ae){var ac=this,ab=[0,this._bounds.width-this._bounds.width*af],ad=[0,this._bounds.height-this._bounds.height*af];
if(af>=1){ae[0]=Math.min(ab[0],Math.max(ae[0],ab[1]));
ae[1]=Math.min(ad[0],Math.max(ae[1],ad[1]))
}else{ae[0]=(ae[0]<ab[0])?ab[0]:(ae[0]>ab[1])?ab[1]:ae[0];
ae[1]=(ae[1]<ad[0])?ad[0]:(ae[1]>ad[1])?ad[1]:ae[1]
}this._zoom.translate(ae);
setTimeout(function(){ac._chart._axes._axes=ac._axisCache;
ac._chart.duration(0);
ac._chart._finalizePlotBounds();
ac._chart._facet._render()
},0)
};
aa._setScales=function(){if(this._fluidDimensions.indexOf("x")>=0){var ab=this._chart.getTrainedScale("x");
this._zoom.x(ab._d3Scale)
}if(this._fluidDimensions.indexOf("y")>=0){var ac=this._chart.getTrainedScale("y");
this._zoom.y(ac._d3Scale)
}};
aa._render=function(ac){this._zoomContainer=ac.selectAll(".zoom-container").data([0]);
this._zoomContainer.enter().append("g").classed("zoom-container");
var ad=this._zoomContainer.selectAll(".zoom-pane").data([0]);
ad.enter().append("rect").classed("zoom-pane",true);
var ab=this._chart.facet().getPanel(0),ae=ab.bounds();
ad.attr("x",ae.left).attr("y",ae.top).attr("width",ae.width).attr("height",ae.height).call(this._zoom);
this._bounds=ae
};
aa.scale=function(ab){if(!arguments.length){return this._zoom.scale()
}this._zoom.scale(ab);
this._refresh(ab,this._zoom.translate());
return this
};
aa.scaleExtent=function(ab){if(!arguments.length){return this._zoom.scaleExtent()
}this._zoom.scaleExtent(ab);
return this
};
aa.translate=function(ab){if(!arguments.length){return this._zoom.translate()
}this._zoom.translate(ab);
this._refresh(this._zoom.scale(),ab);
return this
};
aa.zoomStart=function(ab){if(!arguments.length){return this._zoomStart
}this._zoomStart=ab;
return this
};
aa.zoomMove=function(ab){if(!arguments.length){return this._zoomMove
}this._zoomMove=ab;
return this
};
aa.zoomEnd=function(ab){if(!arguments.length){return this._zoomEnd
}this._zoomEnd=ab;
return this
};
aa.chart=function(ab){if(!arguments.length){return this._chart
}this._chart=ab;
this.initializeZoom(this._chart);
if(this._chart){this._setScales();
this._chart.clipPlot(true)
}return this
};
return aa
});
dv.behavior.rollover=dv.behavior.extend(function(){function aa(){this._selection=null;
this._showTooltip=this._defaultShowTooltip;
this._hideTooltip=this._defaultHideTooltip;
this._orientation="right";
this._tooltipPadding=10;
this._content=this._defaultContent;
this._lastSelectedTarget=null;
this._timer=null;
this._pressTimer=null;
this._dragInspect=true
}aa._render=function(ab){this._xGuides=this.__geom._chart._axes._get("x");
this._yGuides=this.__geom._chart._axes._get("y");
this._isPolar=(this.__geom.coord() instanceof dv.coord.polar);
this._selection=ab;
this._addEvents()
};
aa._addEvents=function(){var ab=this;
this.__geom.on("mouseover.rollover",function(ae,ad,ac){return ab._onMouseOver.call(this,ae,ad,ac,ab)
}).on("mouseout.rollover",function(ae,ad,ac){return ab._onMouseOut.call(this,ae,ad,ac,ab)
});
this.__geom._chart.on("tap.rollover",function(){return ab._onTap.call(ab,d3.event)
}).on("touchstart.rollover",function(){return ab._onTouchStart.call(ab,d3.event)
}).on("touchmove.rollover",function(){return ab._onTouchMove.call(ab,d3.event)
}).on("touchend.rollover",function(){return ab._onTouchEnd.call(ab,d3.event)
})
};
aa._removeEvents=function(){this.__geom.on("mouseover.rollover",null).on("mouseout.rollover",null);
this.__geom._chart.on("tap.rollover",null).on("touchstart.rollover",null).on("touchmove.rollover",null).on("touchend.rollover",null)
};
aa._getElementMetadata=function(ac,ad){var ab={d:ad.datum(),i:0,j:0};
ac._geomGroup.selectAll(".series ."+ac._dataPointStyleClass).each(function(ag,af,ae){if(ab.d===ag){ab.i=af;
ab.j=ae
}});
return ab
};
aa._defaultShowTooltip=function(af,ad,ac,ae,ab){ab._darkenGeom.call(this,af,ab);
ab._showTip.call(this,af,ad,ac,ab)
};
aa._defaultHideTooltip=function(af,ad,ac,ae,ab){ab._brightenGeom.call(this,af,ab);
ab._removeTip.call(this,af,ad,ac,ab)
};
aa._darkenGeom=function(ag,ab){var ad=d3.select(this),af,ae,ac=function(ah,ak,aj){if(ak[ah]){var ai=ab.__geom.getScale(ah).mapValue(ak[ah]);
aj.style(ah,d3.rgb(ai).darker(1).toString())
}};
ac("fill",ag,ad);
ac("stroke",ag,ad)
};
aa._brightenGeom=function(ag,ab){var ad=d3.select(this),af,ae,ac=function(ah,ak,aj){if(ak[ah]){var ai=ab.__geom.getScale(ah).mapValue(ak[ah]);
aj.style(ah,ai)
}};
ac("fill",ag,ad);
ac("stroke",ag,ad)
};
aa._showTip=function(ah,ae,ad,ab){var af=ab.__geom.chart()._chartContainer,ag=this.getBBox(),ai=dv.absoluteCoordinates(ab.__geom.chart(),[ag.x,ag.y],ah.panel),ac={height:ag.height,width:ag.width,x:ai[0],y:ai[1]};
dv.showTooltip(ac,af.select(".plot").node().getBBox(),ab.content().call(ab,ah,ae,ad),ab._orientation,ab._tooltipPadding,af)
};
aa._removeTip=function(ae,ad,ac,ab){dv.removeTooltip(ab.__geom.chart()._chartContainer)
};
aa._defaultContent=function(ah,ae,ac){var ai=this.__geom.getExplicitScale("group"),ad=ah[0]?ah[0]:ah,al=ad.panel.xScale(ad),aj=ad.panel.yScale(ad),ak=this._xGuides[al.scaleIndex()],ab=this._yGuides[aj.scaleIndex()],am=(ak.__scale&&ak.tickFormat()?ak.tickFormat():String),af=(ab.__scale&&ab.tickFormat()?ab.tickFormat():String),ag='<span class="metric-value">'+af(ad.data[aj.mapping()])+'</span><span class="metric-name">'+aj.mapping()+'</span><span class="metric-value">'+am(ad.data[al.mapping()])+'</span><span class="metric-name">'+al.mapping()+"</span>";
if(ai&&ai.mapping()){ag='<span class="series-name">'+ad.data[ai.mapping()]+"</span>"+ag
}return ag
};
aa._onMouseOver=function(ae,ad,ac,ab){ab._showTooltip.call(this,ae,ad,ac,d3.event,ab);
if(this._mouseOver){this._mouseOver.call(this,ae,ad,ac,d3.event)
}};
aa._onMouseOut=function(ae,ad,ac,ab){ab._hideTooltip.call(this,ae,ad,ac,d3.event,ab);
if(ab._mouseOut){ab._mouseOut.call(this,ae,ad,ac,d3.event)
}};
aa._onTap=function(ab){this._dragInspect=true;
this._onTouchMove.call(this,ab);
this._onTouchEnd.call(this,ab)
};
aa._onTouchStart=function(ac){var ab=this;
if(this._lastSelectedTarget){clearTimeout(ab._timer);
this._onTouchEnd.call(this,ac,0)
}this._dragInspect=false;
clearTimeout(this._pressTimer);
this._pressTimer=setTimeout(function(){ab._dragInspect=true;
ab._onTouchMove.call(ab,ac)
},500);
return false
};
aa._onTouchMove=function(ae){if(!this._dragInspect){clearTimeout(this._pressTimer);
return
}var ad=ae.touches?ae.touches[0]:ae,ag=d3.select(this._elementFromPoint(ad)),ab=this._lastSelectedTarget&&this._lastSelectedTarget.node()===ag.node();
if(!ag.empty()&&ag.classed(this.__geom._dataPointStyleClass)){if(this._lastSelectedTarget&&!ab){var af=this._lastSelectedTarget.datum();
this._brightenGeom.call(this._lastSelectedTarget.node(),af,this)
}if(!ab){var ac=this._getElementMetadata(this.__geom,ag);
this._showTooltip.call(ag.node(),ac.d,ac.i,ac.j,ae,this);
if(this._mouseOver){this._mouseOver.call(ag.node(),ac.d,ac.i,ac.j,ae)
}this._lastSelectedTarget=ag
}}dv.cancelEvent(ae)
};
aa._onTouchEnd=function(af,ac){var ab=this;
clearTimeout(this._pressTimer);
this._dragInspect=false;
var ae=af.touches?af.touches[0]:af;
if(arguments.length<2){ac=500
}if(this._lastSelectedTarget){var ad=function(){if(!ab._lastSelectedTarget){return
}var ag=ab._getElementMetadata(ab.__geom,ab._lastSelectedTarget);
ab._hideTooltip.call(ab._lastSelectedTarget.node(),ag.d,ag.i,ag.j,af,ab);
if(ab._mouseOut){ab._mouseOut.call(ab._lastSelectedTarget.node(),ag.d,ag.i,ag.j,af)
}ab._lastSelectedTarget=null
};
if(ac){timer=setTimeout(ad,ac)
}else{ad.call(this)
}}dv.cancelEvent(af)
};
aa._elementFromPoint=function(ac){var ab=[ac.clientX,ac.clientY];
if(this._testAndroidChromeBug141840()){ab=[ac.screenX,ac.screenY]
}return document.elementFromPoint(ab[0],ab[1])
};
aa.content=function(ab){if(!arguments.length){return this._content
}this._content=d3.functor(ab);
return this
};
aa.tooltipPadding=function(ab){if(!arguments.length){return this._tooltipPadding
}this._tooltipPadding=ab;
return this
};
aa.orientation=function(ab){if(!arguments.length){return this._orientation
}this._orientation=ab;
return this
};
aa.mouseOver=function(ab){if(!arguments.length){return this._mouseOver
}this._mouseOver=ab;
return this
};
aa.mouseOut=function(ab){if(!arguments.length){return this._mouseOut
}this._mouseOut=ab;
return this
};
aa.showTooltip=function(ab){if(!arguments.length){return this._showTooltip
}this._showTooltip=ab;
return this
};
aa.hideTooltip=function(ab){if(!arguments.length){return this._hideTooltip
}this._hideTooltip=ab;
return this
};
aa._geom=function(ab){if(!arguments.length){return this.__geom
}if(this.__geom&&this.__geom!==ab){this._removeEvents()
}this.__geom=ab;
return this
};
return aa
});
dv.behavior.voronoiRollover=dv.behavior.rollover.extend(function(){function aa(){this._super();
this._voronoiContainer=null;
this._points=null;
this._pointDetectionRadius=20;
this._numHitAreaVertices=12;
this._isPolar=false
}aa._render=function(ab){this._xGuides=this.__geom._chart._axes._get("x");
this._yGuides=this.__geom._chart._axes._get("y");
this._isPolar=(this.__geom.coord() instanceof dv.coord.polar);
this._selection=ab;
this._createTooltipContainer();
this._renderPolygons(this._getPolygonData(),ab);
this._addEvents()
};
aa._addEvents=function(){var ab=this;
this.__geom._chart.on("tap.rollover",function(){return ab._onTap.call(ab,d3.event)
}).on("touchstart.rollover",function(){return ab._onTouchStart.call(ab,d3.event)
}).on("touchmove.rollover",function(){return ab._onTouchMove.call(ab,d3.event)
}).on("touchend.rollover",function(){return ab._onTouchEnd.call(ab,d3.event)
})
};
aa._removeEvents=function(){this.__geom._chart.on("tap.rollover",null).on("touchstart.rollover",null).on("touchmove.rollover",null).on("touchend.rollover",null)
};
aa._createTooltipContainer=function(){this._voronoiContainer=this._selection.selectAll(".voronoiSelection-container").data([this]);
this._voronoiContainer.enter().append("g").classed("voronoiSelection-container",true)
};
aa._getPolygonData=function(){var ad=[],ae=this.__geom._nestData,ab=this;
this._points=[];
var ac=ab.__geom.coord()._point().x(function(ag,af){return ag.x
}).y(function(ag,af){return ag.y
}).defined(function(ag,af){return true
});
dv.util.each(this.__geom._nestData,function(ag,af){dv.util.each(ag.values,function(an,ai){var am={},al=an[0]?an[0]:an,ah=al.panel.xScale(al),ao=al.panel.yScale(al);
am.x=ah.mapValueToPercent(ah.mapToProp(al,ai)+ah.rangeBand()/2,ai)||0;
am.y=ao.mapValueToPercent(ao.mapValue(al.hasOwnProperty("y0")?(al.y+al.y0):al.y),ai)||0;
am.panel=al.panel;
var ak=ac.getBounds(am,ai);
if(ab._isPolar){var aj=ab.__geom.coord()._transformAngleRadiusToXY(ak.bounds.x,ak.bounds.y);
range.bounds.x=aj[0];
range.bounds.y=aj[1]
}ab._points.push({data:ak,rawData:al,seriesIndex:af,index:ai});
ad.push([ak.bounds.x,ak.bounds.y])
})
});
return d3.geom.voronoi(ad)
};
aa._renderPolygons=function(ag,al){var am=this,ad=this.__geom._nestData.length,af=this.__geom._nestData[0].values.length,ac=d3.select(al.node().parentNode),ak=0,aj=0,ai;
if(this._isPolar){var ah=this.__geom._nestData[0].values[0].panel,ab=dv.util.scaleRangeNoReverse(ah.xOuterScale()),ae=dv.util.scaleRangeNoReverse(ah.yOuterScale());
ak=(ab[0]+ab[1])/2;
aj=(ae[0]+ae[1])/2
}this._voronoiContainer.attr("transform","translate("+ak+","+aj+")");
var an=this._voronoiContainer.selectAll("path").data(ag);
an.exit().remove();
an.enter().append("path").attr("id",function(ap,ao){return"path-"+ao
}).classed("voronoi-overlay",true);
an.attr("d",function(ap,ao){return am._getPolygonPath(ap,ao,am)
}).on("mouseover.rollover",function(aq,ap,ao){return am._onMouseOver.call(this,aq.data,ap,ao,am)
}).on("mouseout.rollover",function(aq,ap,ao){return am._onMouseOut.call(this,aq.data,ap,ao,am)
}).call(this._removeRegisteredEvents,this).call(this._addRegisteredEvents,this);
an.exit().on("mouseover.rollover",null).on("mouseout.rollover",null).remove()
};
aa._addRegisteredEvents=function(ac,ab){if(!ab){ab=this
}if(!ab.__geom){return
}ac=ac||ab._voronoiContainer.selectAll(".voronoi-overlay");
dv.util.each(ab.__geom.eventMap,function(ae,ad){ac.on(ad,function(ag,af){ab.__geom.eventMap[ad].callback.call(this,ag,af,d3.event)
},ae.capture)
});
dv.util.each(ab.__geom._chart.eventMap,function(ae,ad){ac.on(ad+".dvchart",function(ai,ag){var ah=d3.event,af=ab.__geom._chart._interactionGroup.node();
if(ab._shouldDispatchChartEvent(ah,af)){ab.__geom._chart.eventMap[ad].callback.call(af,ah)
}},ae.capture)
})
};
aa._removeRegisteredEvents=function(ac,ab){if(!ab){ab=this
}if(!ab.__geom){return
}ac=ac||ab._voronoiContainer.selectAll(".voronoi-overlay");
dv.util.each(ab.unregisterEventMap,function(ad,ae){ac.on(ae,null,ad)
});
dv.util.each(ab.__geom._chart.unregisterEventMap,function(ad,ae){ac.on(ae+".dvchart",null,ad)
})
};
aa._shouldDispatchChartEvent=function(ag,ad){var ab=true;
if(ag.type==="mouseout"||ag.type==="mouseover"){var ac=ag.relatedTarget;
if(!ac){ac=(ag.type==="mouseout")?ag.toElement:ag.fromElement
}var af=d3.select(ac);
if(af&&!af.empty()){var ae=af.attr("class");
ab=!((af.node()===ad)||af.classed("voronoi-overlay"))
}}return ab
};
aa._getPolygonPath=function(ah,ag,ad){if(!ah){return null
}ah.data=ad._points[ag];
var ac=dv.util.clone(ah),ab=ad._points[ag],af=d3.geom.polygon(ad._getPolygonPoints(ab.data.bounds.x,ab.data.bounds.y)),ae=af.clip(ah);
return(ae.length)?("M"+ae.join("L")+"Z"):null
};
aa._getPolygonPoints=function(ag,ae){var ad=[];
for(var ac=360;
ac>0;
ac-=360/this._numHitAreaVertices){var af=ac*Math.PI/180,ab=Math.cos(af)*this._pointDetectionRadius+ag,ah=Math.sin(af)*this._pointDetectionRadius+ae;
ad.push([ab,ah])
}return ad
};
aa._defaultShowTooltip=function(af,ad,ac,ae,ab){ab._showPoint.call(this,af,ad,ac,ab);
ab._showTip.call(this,af,ad,ac,ab)
};
aa._defaultHideTooltip=function(af,ad,ac,ae,ab){ab._removePoint.call(this,af,ad,ac,ab);
ab._removeTip.call(this,af,ad,ac,ab)
};
aa._showPoint=function(ah,af,ae,aj){var ag=10,ai=ah.rawData,ad=aj.getGeomFromVoronoiIndex.call(aj,ai,af,ae);
if(!ad.empty()){var ab=ad.node().getBoundingClientRect(),ac={height:ab.height,width:ab.width,x:ab.x,y:ab.y};
ag=Math.max(ac.height,ac.width)/2+2.5
}aj._voronoiContainer.append("circle").classed("hover-point",true).attr("id","point-"+ae+"-"+af).attr("cx",ah.data.bounds.x).attr("cy",ah.data.bounds.y).attr("r",0).style("stroke",function(){return aj.__geom.getHighlightColor(ah.rawData,af)
}).style("pointer-events","none").transition().duration(350).attr("r",ag)
};
aa._removePoint=function(ae,ad,ac,ab){ab._voronoiContainer.selectAll("#point-"+ac+"-"+ad).transition().duration(350).attr("r",0).remove()
};
aa._showTip=function(aj,ag,af,an){var ak=an.__geom.chart()._chartContainer,ad,ai=aj.data,al=aj.rawData;
var ae=an.getGeomFromVoronoiIndex.call(an,al,ag,af);
if(ae.empty()){var ah=dv.absoluteCoordinates(an.__geom.chart(),[ai.bounds.x,ai.bounds.y],al.panel),am=10,ac=10;
ad={height:am,width:ac,y:ah[1]-am/2,x:ah[0]-ac/2}
}else{var ab=ae.node().getBBox();
ad={height:ab.height,width:ab.width,x:ab.x,y:ab.y}
}dv.showTooltip(ad,ak.select(".panels").node().getBBox(),an.content().call(an,al,ag,af),an._orientation,an._tooltipPadding,ak)
};
aa.getGeomFromVoronoiIndex=function(ad,ac,ab){return this.__geom.chart()._g.selectAll(".datum-"+ac+".series-"+ab).filter(function(ae){return ad===ae
})
};
aa._onMouseOver=function(ae,ad,ac,ab){ab._showTooltip.call(this,ae,ae.index,ae.seriesIndex,d3.event,ab);
if(ab._mouseOver){ab._mouseOver.call(this,ae.rawData,ae.index,ae.seriesIndex,d3.event)
}};
aa._onMouseOut=function(ae,ad,ac,ab){ab._hideTooltip.call(this,ae,ae.index,ae.seriesIndex,d3.event,ab);
if(ab._mouseOut){ab._mouseOut.call(this,ae.rawData,ae.index,ae.seriesIndex,d3.event)
}};
aa._onTouchMove=function(ad){if(!this._dragInspect){clearTimeout(this._pressTimer);
return
}var ac=ad.touches?ad.touches[0]:ad,af=d3.select(this._elementFromPoint(ac)),ab=this._lastSelectedTarget&&this._lastSelectedTarget.node()===af.node();
if(!af.empty()&&af.classed("voronoi-overlay")){if(this._lastSelectedTarget&&!ab){var ae=this._lastSelectedTarget.datum().data;
this._removePoint.call(af.node(),ae.rawData,ae.index,ae.seriesIndex,this)
}if(!ab){var ag=af.datum().data;
this._showTooltip.call(af.node(),ag,ag.index,ag.seriesIndex,ad,this);
if(this._mouseOver){this._mouseOver.call(af.node(),ag.rawData,ag.index,ag.seriesIndex,ad)
}this._lastSelectedTarget=af
}}dv.cancelEvent(ad)
};
aa._onTouchEnd=function(ae,ac){var ab=this;
clearTimeout(this._pressTimer);
if(this._dragInspect){this._dragInspect=false
}if(arguments.length<2){ac=500
}if(this._lastSelectedTarget){var ad=function(){if(!ab._lastSelectedTarget){return
}var af=ab._lastSelectedTarget.datum().data;
ab._hideTooltip.call(ab._lastSelectedTarget.node(),af,af.index,af.seriesIndex,ae,ab);
if(ab._mouseOut){ab._mouseOut.call(ab._lastSelectedTarget.node(),af.rawData,af.index,af.seriesIndex,ae)
}ab._lastSelectedTarget=null
};
if(ac){timer=setTimeout(ad,ac)
}else{ad.call(this)
}}dv.cancelEvent(ae)
};
aa.pointDetectionRadius=function(ab){if(!arguments.length){return this._pointDetectionRadius
}this._pointDetectionRadius=ab;
return this
};
aa.numHitAreaVertices=function(ab){if(!arguments.length){return this._numHitAreaVertices
}this._numHitAreaVertices=ab;
return this
};
return aa
});
dv.log=dv.log||{};
dv.log.NOCONSOLE=false;
dv.log.LVL_ERROR=0;
dv.log.ERROR="error";
dv.log.LVL_WARN=1;
dv.log.WARN="warn";
dv.log.LVL_DEBUG=2;
dv.log.DEBUG="debug";
dv.log.LOGLEVEL=dv.log.LVL_DEBUG;
dv.log.error=function(aa){return dv.log._message(dv.log.ERROR,aa)
};
dv.log.warn=function(aa){return dv.log._message(dv.log.WARN,aa)
};
dv.log.debug=function(aa){return dv.log._message(dv.log.DEBUG,aa)
};
dv.log.noConsole=function(aa){dv.log.NOCONSOLE=aa||false;
dv.log.console=window.console||dv.util.noop;
if(!dv.log.console.log||dv.log.NOCONSOLE){dv.log.console.log=dv.util.noop
}if(!dv.log.console.error||dv.log.NOCONSOLE){dv.log.console.error=dv.log.console.log
}if(!dv.log.console.warn||dv.log.NOCONSOLE){dv.log.console.warn=dv.log.console.log
}if(!dv.log.console.debug||dv.log.NOCONSOLE){dv.log.console.debug=dv.log.console.log
}};
dv.log._message=function(ab,aa){if(dv.log._isValidType(ab)){if(dv.log.LOGLEVEL>=dv.log["LVL_"+ab.toUpperCase()]){dv.log.console[ab](aa.msg,aa.data)
}if(ab===dv.log.ERROR){throw aa.msg+" Context Data: "+JSON.stringify(aa.data)
}}else{dv.log.console.log("Logging message with invalid type: "+ab)
}};
dv.log._isValidType=function(aa){return aa===dv.log.ERROR||aa===dv.log.WARN||aa===dv.log.DEBUG
};
dv.log.noConsole(false);
dv.panel=dv.extend(function(){function aa(){this._margins={left:0,top:0,right:0,bottom:0};
this._trainedScales={}
}aa.getTrainedScale=function(ab){if(ab==="x"){return this.xScale()
}if(ab==="y"){return this.yScale()
}return this._trainedScales[ab]
};
aa.getOuterScale=function(ab){if(ab==="x"){return this._xScale
}if(ab==="y"){return this._yScale
}return null
};
aa._updateRanges=function(ac){var ab=[ac.left,ac.right],ad=[ac.bottom,ac.top];
if(this._facet._chart.coord().flip()){this._xScale.range(ad);
this._yScale.range(ab)
}else{this._xScale.range(ab);
this._yScale.range(ad)
}};
aa.bounds=function(ab){if(!arguments.length){return this._bounds
}this._bounds=ab;
this._updateRanges(this._bounds);
return this
};
aa.margins=function(ab){if(!arguments.length){return this._margins
}this._margins=ab;
return this
};
aa.visibleAxisLabelOrientations=function(ab){if(!arguments.length){return this._visibleAxisLabelOrientations
}this._visibleAxisLabelOrientations=ab;
return this
};
aa.columnIndex=function(ab){if(!arguments.length){return this._columnIndex
}this._columnIndex=ab;
return this
};
aa.rowIndex=function(ab){if(!arguments.length){return this._rowIndex
}this._rowIndex=ab;
return this
};
aa.facetIndex=function(ab){if(!arguments.length){return this._facetIndex
}this._facetIndex=ab;
return this
};
aa.facetKey=function(ab){if(!arguments.length){return this._facetKey
}this._facetKey=ab;
return this
};
aa.xFacetTitle=function(ab){if(!arguments.length){return this._xFacetTitle
}this._xFacetTitle=ab;
return this
};
aa.yFacetTitle=function(ab){if(!arguments.length){return this._yFacetTitle
}this._yFacetTitle=ab;
return this
};
aa.xOuterScale=function(ab){if(!arguments.length){return this._xScale
}this._xScale=ab;
return this
};
aa.yOuterScale=function(ab){if(!arguments.length){return this._yScale
}this._yScale=ab;
return this
};
aa.xScale=function(ac){var ab=0;
if(ac&&ac.hasOwnProperty("x-index")){ab=ac["x-index"]
}return this._xScale.innerScaleGroup()[ab]
};
aa.yScale=function(ac){var ab=0;
if(ac&&ac.hasOwnProperty("y-index")){ab=ac["y-index"]
}return this._yScale.innerScaleGroup()[ab]
};
aa.facet=function(ab){if(!arguments.length){return this._facet
}this._facet=ab;
this._trainedScales={};
return this
};
return aa
});
dv.facet=dv.extend(function(){function aa(){this._numColumns=0;
this._numRows=0;
this._hGap=10;
this._vGap=10
}aa._prerender=function(){var ab=this;
this._trainedScales={};
this._panels=[];
this._rows=[];
this._columns=[];
this._panelsWithAxisLabels=[];
dv.util.each(ab._chart._layers,function(ac){ac._prerender(ab._chart);
ab._trainFacetGroups(ac)
});
this._configureFacets();
dv.util.each(ab._chart._layers,function(ac){ac._nestData=ab._nestFacet(ac);
ac._handlePositions();
ac._trainScales();
ac._createDefaultScales()
});
this._trainScales()
};
aa._trainScales=function(){var ac=this,ab,ah,af,ae,ag=function(ai){return function(aj){return ac._getFacetFromFacetKey(aj)!==ai.facetKey()
}
},ad=function(ai){return function(al,aj,ak){if(arguments.length<2){aj=0
}if(arguments.length<3){return(this._globalScales[al]===undefined)?null:this._globalScales[al][aj]
}if(!this._globalScales[al]){this._globalScales[al]={}
}this._globalScales[al][aj]=ak;
return ak
}
};
this._globalScales={};
this._positionScales={};
dv.util.each(this._panels,function(ai,aj){dv.util.each(ac._chart._layers,function(al){for(var an in al._aes){var ao=al._aes[an];
for(var am in ao){var ak=al.getScale(an,am);
if(!(ak instanceof dv.scale.constant)){if(ac._isFree.call(ac,an)){ab=ac._trainFreeScale(al,ai,an,am,ag(ai))
}else{ab=ac._trainScale(al,ad(al),an,am)
}if(!ai._trainedScales[an]){ai._trainedScales[an]={}
}ai._trainedScales[an][am]=ab;
ao[am].unionDomain(ab,ab.reverse());
ao[am].range(ab.range())
}}}})
});
dv.util.each(this._globalScales,function(ai,aj){dv.util.each(ai,function(al,ak){al.validateDomain()
})
})
};
aa._isFree=function(ad){var ab=ad==="x"||ad==="xMin"||ad==="xMax",ac=ad==="y"||ad==="yMin"||ad==="yMax";
return((ab&&(this._scales==="free"||this._scales==="free_x"))||(ac&&(this._scales==="free"||this._scales==="free_y")))
};
aa._trainScale=function(ae,ad,ah,ag,af){var ab=ad.call(this,ah,ag),ac={stack:ae.position()==="stack"&&ah==="y",fill:ae.position()==="fill"&&ah==="y",filter:af},ai;
if(ab){ai=ae._aes[ah][ag];
ai.domain(ai.calculateDomain(ae._nestData,ac));
ab.unionDomain(ai,ab.reverse());
ab.unionRange(ai.range())
}else{ae._aes[ah][ag].trainDomain(ae._nestData,ac);
ab=ae._aes[ah][ag].copy();
ad.call(this,ah,ag,ab)
}return ab
};
aa._render=function(){this._axes=this._chart._axes;
var ac=this._ensureColumnsAndRows();
this._adjustPlotBounds(ac[0],ac[1]);
this._configurePanels(ac[0],ac[1]);
this._axes._initializeAxisRenderers();
this._axes._measureTitles(this._chart._plotBounds);
var ab=this._measureMargins(ac[0],ac[1]);
this._layoutPanels(ac[0],ac[1],ab);
this._renderAxisTitles();
this._renderPanels()
};
aa._setVisibleAxisLabelOrientations=function(ac,ab,ag,af){var ah=ac.rowIndex(),ae=ac.columnIndex(),ad={left:ae===0,top:ah===0,right:(ae===ag)||(ac.facetIndex()===(af-1)),bottom:(ah===ab)||(ae>ag&&ah===ab-1)};
ac.visibleAxisLabelOrientations(ad)
};
aa._changeScaleRangeToLocal=function(ab){var ac=ab.range(),ad=ab.innerScaleGroup();
for(var ae in ad){dv.util.scaleRange(ad[ae],[ac[0],ac[1]]).applyRangePadding()
}return ad
};
aa._measureMargins=function(ak,ai){var ah=this._panels.length,ac=~~((ah-1)/ak),ae=(ah-1)%ak,aq=this._axes._getAllOrientations(),au={rows:[],cols:[]},ad=this._isFree("x"),ap=this._isFree("y"),an=this,af=this._panels[0];
if(af){this._changeScaleRangeToLocal(af.getOuterScale("x"));
this._changeScaleRangeToLocal(af.getOuterScale("y"))
}var at=-1;
while(++at<ah){var al=this._panels[at],ao=al.columnIndex(),aj=al.rowIndex();
this._setVisibleAxisLabelOrientations(al,ac,ae,ah);
al.margins({left:0,top:0,right:0,bottom:0});
if(aj>=au.rows.length){au.rows[aj]={left:0,top:0,right:0,bottom:0}
}if(ao>=au.cols.length){au.cols[ao]={left:0,top:0,right:0,bottom:0}
}this._panelsWithAxisLabels.push(al);
this._axes._measure(al);
var am=al.margins();
if(aq.right!==undefined&&!ap&&(at===(ah-1)&&ao<ak-1)){am.right=0
}if(aq.bottom!==undefined&&!ad&&(ao>=ae&&aj===ac-1)){am.bottom=0
}for(var ar in au){var ag=ar==="rows"?aj:ao;
var ab=au[ar][ag];
ab.left=Math.max(am.left,ab.left);
ab.top=Math.max(am.top,ab.top);
ab.right=Math.max(am.right,ab.right);
ab.bottom=Math.max(am.bottom,ab.bottom)
}}return au
};
aa._layoutPanels=function(ai,ap,ae){var aj=this._chart._plotBounds,an=(aj.right-aj.left)-(ai-1)*this._hGap,ab=(aj.bottom-aj.top)-(ap-1)*this._vGap,ad,al,am={x:0,y:0},ao=this,af,ac;
af=-1;
ac=ae.cols.length;
while(++af<ac){an-=ae.cols[af].left+ae.cols[af].right
}af=-1;
ac=ae.rows.length;
while(++af<ac){ab-=ae.rows[af].bottom+ae.rows[af].top
}ad=Math.max(an/ai,0);
al=Math.max(ab/ap,0);
var ak=this._chart._chartContainer.select(".axes-labels");
var ah=ak.selectAll(".panel-labels").data(this._panelsWithAxisLabels);
ah.enter().append("div");
ah.exit().remove();
ah.attr("class",function(ar,aq){return"panel-labels panel-"+ar.facetIndex()
});
var ag=this._chart._panelContainer.selectAll(".panel").data(this._panels);
ag.enter().append("g").classed("panel",true);
ag.exit().remove();
ag.each(function(ar,aq){ao._drawPanel.call(this,ao,ar,aq,aj,ae,ad,al,ai,ap,am);
ao._axes._render.call(ao._axes,d3.select(this),ak.select(".panel-labels.panel-"+ar.facetIndex()),ar)
})
};
aa._renderAxisTitles=function(){var ab=this.getColumn(0)[0].bounds(),ah=this.getRow(0)[0].bounds(),ag=this.getColumn(this._columns.length-1)[0].bounds(),ae=this.getRow(this._rows.length-1)[0].bounds(),ac=(ae.bottom-ah.top)/2+ah.top,ad=(ag.right-ab.left)/2+ab.left,af=this._chart.plotBounds();
this._axes._renderTitles({left:[af.left,ac],right:[af.right,ac],top:[ad,af.top],bottom:[ad,af.bottom]})
};
aa._renderPanels=function(){var ad=this._chart,ae=ad._plotBounds,ag=ad._g.select(".plot"),ah=ad._plotBounds;
var ab=function(ai){ai.attr("transform","translate(0,0)").each(function(aj){if(this.__previousData__&&(this.__previousData__._dataPointStyleClass!=aj._dataPointStyleClass)){this.__previousData__.exit(this)
}aj._render(this);
this.__previousData__=aj
})
};
var ac=function(ai){ai.each(function(aj){aj.exit(this,function(){ai.remove()
})
})
};
var af=ag.selectAll(".geom").data(ad._layers);
af.exit().call(ac);
af.enter().append("g").classed("geom",true);
af.call(ab)
};
aa._updatePanelTitle=function(ar,an,ad,af,al,ac,ap){var ak={left:0,top:0,width:0,height:0},ae=d3.select(this);
if(dv.util.isUndefined(an)){ar._removePanelTitle.call(this,ad);
return ak
}var am=ae.selectAll(".panel-title."+ad).data([0]);
var ao=am.enter().append("g").classed("panel-title "+ad,true).attr("transform","translate("+af+","+al+")");
var ag=ao.append("rect").classed("panel-title-bg",true);
var aj=ao.append("text").classed("panel-title-label",true).attr("text-anchor","middle");
if(dv.ANIMATION){am.transition().duration(ar._chart._duration).attr("transform","translate("+af+","+al+")")
}else{am.attr("transform","translate("+af+","+al+")")
}var ai=am.selectAll(".panel-title-label").text(an);
var ah=am.selectAll(".panel-title-bg");
var ab=ai.node().getBBox(),aq=0;
if(dv.ANIMATION){ai=ai.transition().duration(ar._chart._duration);
ah=ah.transition().duration(ar._chart._duration)
}switch(ad){case"top":x=ac/2;
y=ab.height;
ak.left=0;
ak.top=0;
ak.width=ac;
ak.height=ab.height+6;
break;
case"right":x=ap/2;
y=-ac+ab.height;
ak.left=ac-(ab.height+6);
ak.top=0;
ak.width=ab.height+6;
ak.height=ap;
aq=90;
break;
case"bottom":x=ac/2;
y=ap-6;
ak.left=0;
ak.top=ap-(ab.height+6);
ak.width=ac;
ak.height=ab.height+6;
break;
case"left":x=-ap/2;
y=0+(ab.height);
ak.left=0;
ak.top=0;
ak.width=ab.height+6;
ak.height=ap;
aq=270;
break
}ag.attr("x",ak.left).attr("y",ak.top).attr("width",ak.width).attr("height",ak.height);
aj.attr("transform","rotate("+aq+" 0,0)").attr("x",x).attr("y",y);
ai.attr("transform","rotate("+aq+" 0,0)").attr("x",x).attr("y",y);
ah.attr("x",ak.left).attr("y",ak.top).attr("width",ak.width).attr("height",ak.height);
return ak
};
aa._removePanelTitle=function(ab){d3.select(this).selectAll(".panel-title."+ab).remove()
};
aa._updatePanelBackground=function(ag,af,ae,ad,ab){var ac=d3.select(this).selectAll(".plot-bg").data([0]);
ac.enter().append("rect").classed("plot-bg",true).style("opacity",0.000001).attr("x",af).attr("y",ae).attr("width",ad).attr("height",ab);
if(dv.ANIMATION){ac=ac.transition().duration(ag._chart._duration)
}ac.attr("x",af).attr("width",ad).attr("height",ab).style("opacity",1)
};
aa._addToCollection=function(ab,ad,ac){if(!ab[ad]){ab[ad]=[]
}ab[ad].push(ac)
};
aa.getPanel=function(ab){return this._panels&&ab<this._panels.length?this._panels[ab]:null
};
aa.getRow=function(ab){return this._rows[ab]
};
aa.getColumn=function(ab){return this._columns[ab]
};
aa.getTrainedScale=function(ab){if(this._panels.length>0){return this.getPanel(0).getTrainedScale(ab)
}return this._trainedScales[ab]
};
aa.scales=function(ab){if(!arguments.length){return this._scales
}this._scales=ab;
return this
};
aa.space=function(ab){if(!arguments.length){return this._space
}this._space=ab;
return this
};
aa.titleFormat=function(ab){if(!arguments.length){return this._titleFormat
}this._titleFormat=d3.functor(ab);
return this
};
aa.hGap=function(ab){if(!arguments.length){return this._hGap
}this._hGap=ab;
return this
};
aa.vGap=function(ab){if(!arguments.length){return this._vGap
}this._vGap=ab;
return this
};
aa.chart=function(ab){if(!arguments.length){return this._chart
}this._chart=ab;
return this
};
return aa
});
dv.facet.scale=dv.extend(function(){function aa(){}aa.domain=function(){return this._innerScale.domain()
};
aa.range=function(ab){if(!arguments.length){return this._range
}this._range=ab;
return this
};
aa._applyPercentage=function(ab,ac){return this._range[0]+(this._range[1]-this._range[0])*ab.apply(this._innerScale,ac)
};
aa.mapPropToPercent=function(ac,ab){return this._innerScale.mapPropToPercent(ac)
};
aa.mapValueToPercent=function(ac,ab){return this._innerScale.mapValueToPercent(ac)
};
aa.mapToProp=function(ac,ab){return this._applyPercentage(this._innerScale.mapPropToPercent,[ac,ab])
};
aa.mapValue=function(ac,ab){return this._applyPercentage(this._innerScale.mapValueToPercent,[ac,ab])
};
aa.rangeBand=function(){return this._applyPercentage(this._innerScale.rangeBand)
};
aa.innerScaleGroup=function(ab){if(!arguments.length){return this._innerScaleGroup
}this._innerScaleGroup=ab;
return this
};
return aa
});
dv.facet.wrap=dv.facet.extend(function(){function aa(){this._super();
this._facetScale=null;
this._preferredAspectRatio=1;
this._titleOrientation="top"
}aa._prerender=function(){this._facetScale=dv.scale.ordinal().mapping(this._group).domain([]);
this._super()
};
aa._trainFacetGroups=function(ab){var ac=ab.data()[this._facetScale.mapping()];
if(ac){this._facetScale.domain(this._facetScale.domain().concat(ac))
}};
aa._trainFreeScale=function(ad,ab,ag,ae,af){var ac=function(aj,ah,ai){if(arguments.length<2){ah=0
}if(arguments.length<3){if(!ab._trainedScales[aj]){return undefined
}return ab._trainedScales[aj][ah]
}if(!ab._trainedScales[aj]){ab._trainedScales[aj]={}
}ab._trainedScales[aj][ah]=ai;
return ai
};
return this._trainScale(ad,ac,ag,ae,af)
};
aa._showAllPanelLabelsIfFree=function(){return true
};
aa._configureFacets=function(){this._facetKeys=this._facetScale.domain();
this._facetMap={}
};
aa._nestFacet=function(ak){var ao=this,aj=ak.normalizedData(),ae=dv.util.filterAndZip(aj),an=ak.getScale("group"),ac=this._group,ai=this._facetScale.domain(),ah,am;
if(an){ah=an.property();
am=ah?aj[ah]:null
}var ag=-1,ad=ae.length;
while(++ag<ad){var al=0,ap,af=ae[ag];
if(af.data.hasOwnProperty(ac)){al=ai.indexOf(af.data[ac]);
if(al>=0){ap=ai[al]+""
}}var ab=this._facetMap[al];
if(!ab){ab=dv.panel().facetIndex(al).facetKey(ap).xFacetTitle(ap).facet(this);
this._facetMap[al]=ab;
this._panels.push(ab)
}af.panel=ab
}return d3.nest().key(function(aq){var ar="";
ar+=(aq.data.hasOwnProperty(ac)?aq.data[ac]:".")+" ~ ";
ar+=(aq.hasOwnProperty(ah)?aq[ah]:".");
return ar
}).sortKeys(function(at,aq){var aw=ao._getGroupFromFacetKey(at),av=ao._getGroupFromFacetKey(aq),au=-1,ar=-1;
if(aw!=="."){au=am.indexOf(aw);
if(au<0){au=am.indexOf(Number(aw))
}}if(av!=="."){ar=am.indexOf(av);
if(ar<0){ar=am.indexOf(Number(av))
}}return ar<au?1:-1
}).entries(ae)
};
aa._getGroupFromFacetKey=function(ab){return(/.* ~ (.*)/g).exec(ab)[1]
};
aa._getFacetFromFacetKey=function(ab){return(/(.*) ~ .*/g).exec(ab)[1]
};
aa._ensureColumnsAndRows=function(){var af=this._panels.length,ag=Math.min(this._numColumns,af),ae=Math.min(this._numRows,af);
if(ag<1&&ae<1){var ah=this._chart._plotBounds,ad=ah.right-ah.left,ac=ah.bottom-ah.top,ab=Math.min(af,Math.ceil(Math.sqrt((af*1*ad)/(ac*this._preferredAspectRatio))));
ab=isNaN(ab)?1:ab;
return[ab,Math.ceil(af/ab)]
}if(ag<1&&ae>=1){ag=Math.ceil(af/ae)
}if(ag>=1&&ae<1){ae=Math.ceil(af/ag)
}return[ag,ae]
};
aa._adjustPlotBounds=function(ac,ab){return
};
aa._configurePanels=function(ak,ap){var an=this._chart._plotBounds,ah=an.right-an.left,ai=an.bottom-an.top,ae=(ah-((ak-1)*this._hGap))/ak,ao=(ai-((ap-1)*this._vGap))/ap;
var af=-1,ad=this._panels.length;
while(++af<ad){var ab=this._panels[af],ac=dv.facet.scale().innerScaleGroup(ab._trainedScales.x),am=dv.facet.scale().innerScaleGroup(ab._trainedScales.y),ag=af%ak,aj=~~(af/ak),al={left:0,top:0,right:ae,bottom:ao,width:ae,height:ao};
this._panels[af].xOuterScale(ac).yOuterScale(am).columnIndex(ag).rowIndex(aj).bounds(al);
this._addToCollection(this._rows,aj,ab);
this._addToCollection(this._columns,ag,ab)
}};
aa._drawPanel=function(an,ar,ap,aj,aq,at,af,ai,ag,ae){var ao=ar.columnIndex(),ah=ar.rowIndex(),al=aq.rows[ah],ak=aq.cols[ao],ac=an._titleOrientation;
if(ao===0){ae.x+=aj.left;
if(ah===0){ae.y+=aj.top
}}var am=ae.y+al.top,ad=ae.x+ak.left,au=(an._titleFormat?an._titleFormat.call(this,ar.xFacetTitle(),ap):ar.xFacetTitle());
var ab=an._updatePanelTitle.call(this,an,au,ac,ad,am,at,af);
ar.bounds({width:at,height:af,top:am+(ac==="top"?ab.height:0),left:ad+(ac==="left"?ab.width:0),right:ad+at+(ac==="right"?-ab.width:0),bottom:am+af+(ac==="bottom"?-ab.height:0)});
an._updatePanelBackground.call(this,an,ad,am,at,af);
if(ao===ai-1){ae.x=0;
ae.y+=al.top+af+al.bottom+an._vGap
}else{ae.x+=ak.left+at+ak.right+an._hGap
}};
aa.group=function(ab){if(!arguments.length){return this._group
}this._group=ab;
return this
};
aa.numColumns=function(ab){if(!arguments.length){return this._numColumns
}this._numColumns=ab;
return this
};
aa.numRows=function(ab){if(!arguments.length){return this._numRows
}this._numRows=ab;
return this
};
aa.preferredAspectRatio=function(ab){if(!arguments.length){return this._preferredAspectRatio
}this._preferredAspectRatio=ab;
return this
};
return aa
});
dv.facet.grid=dv.facet.extend(function(){function aa(){this._super();
this._xFacetScale=null;
this._yFacetScale=null
}aa._prerender=function(){this._xFacetScale=dv.scale.ordinal().mapping(this._xGroup).domain([]);
this._yFacetScale=dv.scale.ordinal().mapping(this._yGroup).domain([]);
this._super()
};
aa._trainFacetGroups=function(ab){var ad=ab.data()[this._xFacetScale.mapping()];
if(ad){this._xFacetScale.domain(this._xFacetScale.domain().concat(ad))
}var ac=ab.data()[this._yFacetScale.mapping()];
if(ac){this._yFacetScale.domain(this._yFacetScale.domain().concat(ac))
}};
aa._trainFreeScale=function(ae,ab,ah,af,ag){var ac=this;
var ad=function(an,al,am){if(arguments.length<2){al=0
}if(!ac._positionScales[an]){ac._positionScales[an]={}
}var ai=ac._positionScales[an];
if(!ai[al]){ai[al]=[]
}var ak=ai[al],aj=(an.indexOf("x")>=0)?ab.columnIndex():ab.rowIndex();
if(arguments.length<3){return ak[aj][al]
}ak[aj][al]=am;
return am
};
return this._trainScale(ae,ad,ah,ag)
};
aa._showAllPanelLabelsIfFree=function(){return false
};
aa._configureFacets=function(){var ah,ae,ad=this._xFacetScale.domain(),ai=this._yFacetScale.domain(),aj;
this._numColumns=Math.max(this._xFacetScale.domain().length,1);
this._numRows=Math.max(this._yFacetScale.domain().length,1);
var ag=-1,ac=this._numRows,al=0;
while(++ag<ac){yFacetIndex=ag;
if(ai&&ai.length>ag){ae=ai[ag]
}var af=-1,ak=this._numColumns;
while(++af<ak){xFacetIndex=af;
if(ad&&ad.length>af){ah=ad[af]
}aj=(ai.length?ae:".")+" ~ "+(ad.length?ah:".");
var ab=dv.panel().facetIndex(al++).facetKey(aj).columnIndex(xFacetIndex).rowIndex(yFacetIndex).xFacetTitle(ah).yFacetTitle(ae).facet(this);
this._panels.push(ab);
this._addToCollection(this._rows,yFacetIndex,ab);
this._addToCollection(this._columns,xFacetIndex,ab)
}}};
aa._nestFacet=function(am){var ap=this,al=am.normalizedData(),ag=dv.util.filterAndZip(al),ao=am.getScale("group"),ad=this._xFacetScale.domain(),ak=this._yFacetScale.domain(),aj,an;
if(ao){aj=ao.property();
an=aj?al[aj]:null
}var ai=-1,ae=ag.length;
while(++ai<ae){var ah=ag[ai],ac=0,af=0;
if(ah.data.hasOwnProperty(this._xGroup)){af=ad.indexOf(ah.data[this._xGroup]);
if(af<0){af=0
}}if(ah.data.hasOwnProperty(this._yGroup)){ac=ak.indexOf(ah.data[this._yGroup]);
if(ac<0){ac=0
}}panelIndex=(ac*this._numColumns)+af;
var ab=this._panels[panelIndex];
ah.panel=ab
}return d3.nest().key(function(aq){var ar="";
ar+=(aq.data.hasOwnProperty(ap._yGroup)?aq.data[ap._yGroup]:".")+" ~ ";
ar+=(aq.data.hasOwnProperty(ap._xGroup)?aq.data[ap._xGroup]:".")+" ~ ";
ar+=(aq.hasOwnProperty(aj)?aq[aj]:".");
return ar
}).sortKeys(function(at,aq){var aw=ap._getGroupFromFacetKey(at),av=ap._getGroupFromFacetKey(aq),au=-1,ar=-1;
if(aw!=="."){au=an.indexOf(aw);
if(au<0){au=an.indexOf(Number(aw))
}}if(av!=="."){ar=an.indexOf(av);
if(ar<0){ar=an.indexOf(Number(av))
}}return ar<au?1:-1
}).entries(ag)
};
aa._getGroupFromFacetKey=function(ab){return(/.* ~ .* ~ (.*)/g).exec(ab)[1]
};
aa._getFacetFromFacetKey=function(ab){return(/(.* ~ .*) ~ .*/g).exec(ab)[1]
};
aa._ensureColumnsAndRows=function(){return[this._numColumns,this._numRows]
};
aa._adjustPlotBounds=function(ae,ad){var ab=this._measureTitles(this._xFacetScale.domain(),"temp-column-titles",this._chart._g)+3,ac=this._measureTitles(this._yFacetScale.domain(),"temp-row-titles",this._chart._g)+3,af=this._chart._plotBounds;
this._xTitleHeight=ab;
this._yTitleWidth=ac;
this._chart._plotBounds.top+=ab;
this._chart._plotBounds.right-=ac
};
aa._measureTitles=function(ac,ab,ae){var ag=this._createTitlesContainer(ab,this._chart._g);
var ad=ag.selectAll(".panel-title").data(ac);
ad.enter().append("text").text(function(ai,ah){return ai
});
var af=ag.node().getBBox();
ag.remove();
return af.height
};
aa._createTitlesContainer=function(ac,ab){var ad=ab.selectAll("."+ac).data([0]);
ad.enter().append("g").classed(ac,true);
ad.exit().remove();
return ad
};
aa._configurePanels=function(al,aq){var ao=this._chart._plotBounds,aj=ao.right-ao.left,ak=ao.bottom-ao.top,af=(aj-((al-1)*this._hGap))/al,ap=(ak-((aq-1)*this._vGap))/aq,ad=0,ai=0,ah=0;
var ag=-1,ae=this._panels.length;
while(++ag<ae){var ab=this._panels[ag],ac=dv.facet.scale().innerScaleGroup(ab._trainedScales.x),an=dv.facet.scale().innerScaleGroup(ab._trainedScales.y),am={left:0,top:0,right:0+af,bottom:0+ap,width:af,height:ap};
this._panels[ag].xOuterScale(ac).yOuterScale(an).bounds(am);
ad+=af+this._hGap;
ah++;
if(ah>=al){ad=0;
ai+=ap+this._vGap;
ah=0
}}};
aa._drawPanel=function(ap,ah,af,ak,ae,ad,an,aj,aq,ao){var am=ah.columnIndex(),ai=ah.rowIndex(),al=ae.rows[ai],ab=ae.cols[am];
ao.x+=ab.left;
if(am===0){ao.x+=ak.left
}if(ai===0){var ac=(ap._titleFormat?ap._titleFormat.call(this,ah.xFacetTitle(),af):ah.xFacetTitle());
ao.y=al.top+ak.top;
ap._updatePanelTitle.call(this,ap,ac,"top",ao.x,ao.y-ap._xTitleHeight,ad,an)
}else{ap._removePanelTitle.call(this,"top")
}if(am===ap._numColumns-1){var ag=(ap._titleFormat?ap._titleFormat.call(this,ah.yFacetTitle(),af):ah.yFacetTitle());
ap._updatePanelTitle.call(this,ap,ag,"right",ao.x+ap._yTitleWidth,ao.y,ad,an)
}else{ap._removePanelTitle.call(this,"right")
}ah.bounds({width:ad,height:an,top:ao.y,left:ao.x,right:ao.x+ad,bottom:ao.y+an});
ap._updatePanelBackground.call(this,ap,ao.x,ao.y,ad,an);
ao.x+=ad+ab.right+ap._hGap;
if(am===ap._numColumns-1){ao.x=0;
ao.y+=al.top+an+al.bottom+ap._vGap
}};
aa.xGroup=function(ab){if(!arguments.length){return this._xGroup
}this._xGroup=ab;
return this
};
aa.yGroup=function(ab){if(!arguments.length){return this._yGroup
}this._yGroup=ab;
return this
};
aa.aggregate=function(ab){if(!arguments.length){return this._aggregate
}this._aggregate=ab;
return this
};
return aa
});
dv.chart=dv.container.extend(function(){function aa(){this._super();
this._firstRender=false;
this._data={};
this._coord=dv.coord.cartesian();
this._facet=dv.facet.wrap().chart(this);
this._layers=[];
this._behaviors=[];
this._legends=dv.guide.legends();
this._axes=dv.guide.axes()._chart(this);
this._delay=d3.functor(0);
this._duration=d3.functor(1000);
this._ease="cubic-in-out";
this._parent=null;
this._chartContainer=null;
this._svgContainer=null;
this._g=null;
this._axisLabelContainer=null;
this._panelContainer=null;
this._interactionGroup=null;
this._prerenderFunc=null;
this._postrenderFunc=null;
this._clipPlot=false;
this._width=NaN;
this._height=NaN;
this._plotWidth=NaN;
this._plotHeight=NaN;
this._calcWidth=NaN;
this._calcHeight=NaN;
this._calcPlotWidth=NaN;
this._calcPlotHeight=NaN;
this._defaultPadding=this._padding=this._plotBounds=this._guidesBounds={top:0,left:0,right:0,bottom:0};
this._position="identity"
}aa.render=function(){if(dv.util.isUndefined(this._data)||dv.util.isEmpty(this._data)){for(var ab=0;
ab<this._layers.length;
ab++){if(dv.util.isUndefined(this._layers[ab]._data)||dv.util.isEmpty(this._layers[ab]._data)){dv.log.error({msg:"Cannot render a chart with no data provided.",data:{chartData:this._data,geom:this._layers[ab]}})
}}}this._resolvePercentDimensions();
this._createChartContainer();
this._prerender();
this._renderLegends();
if(this._prerenderFunc){this._prerenderFunc.call(this)
}this._facet._render();
if(this._postrenderFunc){this._postrenderFunc.call(this)
}this._renderBehaviors();
this._clipGeoms();
this._cleanupGuides();
this.unregisterEventMap=null;
return this
};
aa._resolvePercentDimensions=function(){this._calcWidth=dv.util.getPercentValue(this._width,this._parent.node().offsetWidth);
this._calcHeight=dv.util.getPercentValue(this._height,this._parent.node().offsetHeight);
if(!dv.util.isFinite(this._calcWidth)){this._calcPlotWidth=dv.util.getPercentValue(this._plotWidth,this._parent.node().offsetWidth);
if(!dv.util.isFinite(this._calcPlotWidth)){this._calcWidth=this._parent.node().offsetWidth
}}else{this._calcPlotWidth=dv.util.getPercentValue(this._plotWidth,this._calcWidth)
}if(!dv.util.isFinite(this._calcHeight)){this._calcPlotHeight=dv.util.getPercentValue(this._plotHeight,this._parent.node().offsetHeight);
if(!dv.util.isFinite(this._calcPlotHeight)){this._calcHeight=this._parent.node().offsetHeight
}}else{this._calcPlotHeight=dv.util.getPercentValue(this._plotHeight,this._calcHeight)
}};
aa._finalizePlotBounds=function(){var ae=this._legends._allowedDimensions(),ac=this._legends._getWidth(),ad=this._legends._getHeight(),ab={left:Math.max(ae.left,this._padding.left),top:Math.max(ae.top,this._padding.top)};
if(!dv.util.isFinite(this._calcWidth)){this._calcWidth=this._calcPlotWidth+ac+this._padding.left+this._padding.right
}else{if(!dv.util.isFinite(this._calcPlotWidth)){this._calcPlotWidth=this._calcWidth-this._padding.left-this._padding.right-ac
}}if(!dv.util.isFinite(this._calcHeight)){this._calcHeight=this._calcPlotHeight+ad+this._padding.top+this._padding.bottom
}else{if(!dv.util.isFinite(this._calcPlotHeight)){this._calcPlotHeight=this._calcHeight-this._padding.top-this._padding.bottom-ad
}}this._calcPlotWidth=Math.min(this._calcPlotWidth,this._calcWidth-this._padding.left-this._padding.right-ac);
this._calcPlotHeight=Math.min(this._calcPlotHeight,this._calcHeight-this._padding.top-this._padding.bottom-ad);
ab.right=ab.left+this._calcPlotWidth;
ab.bottom=ab.top+this._calcPlotHeight;
this.plotBounds(ab);
if(this._coord instanceof dv.coord.cartesian){this._plotBounds.right-=this._coord.endX();
this._plotBounds.left+=this._coord.startX()
}this._chartContainer.style("width",this._calcWidth+"px").style("height",this._calcHeight+"px")
};
aa._prerender=function(){this._trainedScales={};
this._calculateStats();
this._facet._prerender();
var ab=this._normalizeData(this.data());
this.data(ab);
if(!this._axes._get("x")){this._axes._add("x",dv.guide.axis())
}if(!this._axes._get("y")){this._axes._add("y",dv.guide.axis())
}};
aa._createChartContainer=function(){this._chartContainer=this._parent.selectAll(".dv-chart-container").data([0]);
this._chartContainer.enter().append("div").classed("dv-chart-container",true);
this._svgContainer=this._chartContainer.selectAll("svg").data([0]);
this._svgContainer.enter().append("svg").style("height","100%").style("width","100%");
this._g=this._svgContainer.select(".group");
if(this._g.empty()){this._firstRender=true;
this._g=this._svgContainer.append("g").classed("group",true);
this._panelContainer=this._g.append("g").classed("panels",true);
this._interactionGroup=this._g.append("g").classed("interaction-group",true);
this._g.append("g").classed("behavior-under-geom",true);
this._g.append("g").classed("plot",true);
this._g.append("g").classed("behavior",true);
this._g.append("g").classed("legends",true);
this._interactionGroup.append("rect").classed("interaction-canvas",true).classed("background",true)
}if(!this._panelContainer){this._panelContainer=this._g.select(".panels")
}if(!this._interactionGroup){this._interactionGroup=this._g.select(".interaction-group")
}this._axisLabelContainer=this._chartContainer.selectAll(".axes-labels").data([0]);
this._axisLabelContainer.enter().append("div").classed("axes-labels",true)
};
aa._addRegisteredEvents=function(){var ab=this;
dv.util.each(ab.eventMap,function(ad,ac){ab._interactionGroup.on(ac,function(){var af=d3.event,ae=ab._interactionGroup.node();
if(ab._shouldDispatchChartEvent(af,ae)){ab.eventMap[ac].callback.call(ab._interactionGroup.node(),d3.event)
}},ad.capture)
});
dv.util.each(ab._layers,function(ac){ac._addRegisteredEvents()
})
};
aa._removeRegisteredEvents=function(){var ab=this;
dv.util.each(ab.unregisterEventMap,function(ac,ad){if(ab._interactionGroup){ab._interactionGroup.on(ad,null,ac)
}});
dv.util.each(ab._layers,function(ac){ac._removeRegisteredEvents()
})
};
aa._shouldDispatchChartEvent=function(af,ac){var ab=true;
if(af.type==="mouseout"||af.type==="mouseover"){var ae=d3.select(af.relatedTarget);
if(ae&&!ae.empty()){var ad=ae.attr("class");
ab=!(ad&&ad.indexOf("-geom")>=0)
}}return ab
};
aa._calculateStats=function(){};
aa._renderLegends=function(){var ad=(dv.util.isFinite(this._calcWidth)?this._calcWidth-this._padding.left-this._padding.right:this._calcPlotWidth),ab=(dv.util.isFinite(this._calcHeight)?this._calcHeight-this._padding.top-this._padding.bottom:this._calcPlotHeight),ac={left:this._padding.left,top:this._padding.top,width:ad,height:ab},ae={el:this._g,scales:this._facet._globalScales,firstRender:this._firstRender,duration:this._duration,delay:this._delay,ease:this._ease};
this._legends._allowedDimensions(ac)._render(ae);
this._finalizePlotBounds()
};
aa._cleanupGuides=function(){this._legends._empty();
this._axes._empty()
};
aa._setRanges=function(){var ad=this.plotBounds(),ac=this.getTrainedScale("y"),ae=this.getTrainedScale("x");
var ab=this.coord().flip()?[ad.bottom-ad.top,0]:[0,ad.right-ad.left],af=this.coord().flip()?[0,ad.right-ad.left]:[ad.bottom-ad.top,0];
dv.util.scaleRange(ae,ab);
dv.util.scaleRange(ac,af)
};
aa.plotBounds=function(ab){if(!arguments.length){return this._plotBounds
}this._plotBounds=ab;
return this
};
aa._renderBehaviors=function(){var ab=this._facet.getPanel(0),ae=ab._bounds,ad=this._g.select(".behavior").attr("transform","translate(0,0)"),af=this._g.select(".behavior-under-geom").attr("transform","translate(0, 0)");
this._interactionGroup.attr("transform","translate(0,0)").select(".interaction-canvas").attr("visibility","hidden").attr("width",ae.right-ae.left).attr("height",ae.bottom-ae.top).attr("x",ae.left).attr("y",ae.top);
var ac=this;
dv.util.each(this._behaviors,function(ag){if(ag.underGeoms&&ag.underGeoms()){ag.chart(ac)._render(af)
}else{ag.chart(ac)._render(ad)
}})
};
aa.guide=function(ai,ab,ah){if(!ai||ai===""){throw new Error("Property argument cannot be null or empty")
}if(ai==="all"){if(ab!=="none"){throw new Error("'all' can only be used to set all guides to 'none' (e.g. turn off all guides)")
}this._legends._hide(true);
this._axes._add("x","none",0);
this._axes._add("y","none",0)
}ai=dv.util.isArray(ai)?ai:[ai];
ah=dv.util.isUndefined(ah)?0:ah;
var ag=dv.guide.legend(),ad="";
for(var ac=0;
ac<ai.length;
ac++){var af=ab,ae=this._isPositionProperty(ai[ac]);
if(!ad){ad=ae?"axis":"legend"
}else{if(ae&&ad!="axis"){throw new Error("Cannot mix positional and non-positional guide types")
}}if(!af){af=ae?dv.guide.axis():ag
}else{if(!this._isValidGuideType(ai[ac],af)&&dv.util.isObject(af)){af=this._buildCustomGuide(af)
}}if(this._isValidGuideType(ai[ac],af)){if(af!=="none"){af.scaleIndex(ah)
}if(ae){this._axes._add(ai[ac],af,ah)
}else{if(af!=="none"){this._legends._add({props:ai,guide:af});
break
}else{this._legends._remove(ai)
}}}}return this
};
aa._isPositionProperty=function(ab){return(ab==="x"||ab==="y")
};
aa._isValidGuideType=function(ad,ab){var ac=this._isPositionProperty(ad);
return ab&&(ab==="none"||ab instanceof dv.guide.custom)||(ac&&ab instanceof dv.guide.axis)||(!ac&&ab instanceof dv.guide.legend)
};
aa._buildCustomGuide=function(ab){var ac=dv.guide.custom();
for(var ad in ab){ac.setFunc(ad,ab[ad])
}return ac
};
aa.getScale=function(ac,ab){if(arguments.length<2){ab=0
}if(ac==="group"){return this._getGroup()
}if(this._aes.hasOwnProperty(ac)){return this._aes[ac][ab]
}};
aa._getGroup=function(){if(this._aes.hasOwnProperty("group")){return this._aes.group[0]
}var ac=-1,ab=dv.DEFAULT_CATEGORICAL_AES.length-1;
while(ac++<ab){var ad=this._aes[dv.DEFAULT_CATEGORICAL_AES[ac]];
if(ad&&ad[0]&&!dv.util.isUndefined(ad[0].mapping())){return ad[0]
}}return null
};
aa._clipGeoms=function(){var ac=this;
var ae=this._parent.selectAll(".panel").selectAll("defs").data(function(ag){return ac._clipPlot?[ag]:[]
});
ae.enter().append("defs");
ae.exit().remove();
var ab=ae.selectAll("clipPath").data(function(ag){return[ag]
});
ab.enter().append("clipPath").classed("dv-clip",true);
ab.exit().remove();
ab.attr("id",function(ag){return"dv-clip"+ag._facetIndex
});
var af=ab.selectAll("rect").data(function(ag){return[ag]
});
af.enter().append("rect");
af.exit().remove();
af.attr("x",function(ag){return ag._bounds.left
}).attr("y",function(ag){return ag._bounds.top
}).attr("width",function(ag){return ag._bounds.width
}).attr("height",function(ag){return ag._bounds.height
});
if(ac._clipPlot){var ad=this._parent.selectAll(".series");
ad.attr("clip-path",function(ai){var ah=ai.values[0],ag=dv.util.isArray(ah)?ah[0].panel:ah.panel;
return"url(#dv-clip"+ag._facetIndex+")"
})
}};
aa.getTrainedScale=function(ab){return this._facet.getTrainedScale(ab)
};
aa.getExplicitScale=function(ac,ab){if(ab===undefined){ab=0
}return this._aes[ac][ab]
};
aa.parent=function(ab){if(!arguments.length){return this._parent?this._parent.node():null
}this._parent=d3.select(ab);
if(this._parent.empty()){throw new Error("The DV parent element was not found.")
}return this
};
aa.layers=function(ab){if(!arguments.length){return this._layers
}this._layers=ab;
return this
};
aa.behaviors=function(ab){if(!arguments.length){return this._behaviors
}this._behaviors=ab;
return this
};
aa.data=function(ab){if(!arguments.length){return this._data
}this._data=ab;
return this
};
aa.coord=function(ab){if(!arguments.length){return this._coord
}this._coord=ab;
return this
};
aa.facet=function(ab){if(!arguments.length){return this._facet
}this._facet=ab;
this._facet.chart(this);
return this
};
aa.getPlotBounds=function(ab){return this._plotBounds
};
aa.plotWidth=function(ab){if(!arguments.length){return this._plotWidth
}this._plotWidth=ab;
return this
};
aa.plotHeight=function(ab){if(!arguments.length){return this._plotHeight
}this._plotHeight=ab;
return this
};
aa.width=function(ab){if(!arguments.length){return this._width
}this._width=ab;
return this
};
aa.height=function(ab){if(!arguments.length){return this._height
}this._height=ab;
return this
};
aa.padding=function(ab){if(!arguments.length){return this._padding
}this._padding=dv.util.merge(this._defaultPadding,ab);
return this
};
aa.prerender=function(ab){if(!arguments.length){return this._prerenderFunc
}this._prerenderFunc=ab;
return this
};
aa.postrender=function(ab){if(!arguments.length){return this._postrenderFunc
}this._postrenderFunc=ab;
return this
};
aa.clipPlot=function(ab){if(!arguments.length){return this._clipPlot
}this._clipPlot=ab;
return this
};
return aa
})
})();
(function(c){function a(s,D){if(this instanceof a){return this
}var B=D||{},U=0,j=B.displayCount||-1,l=B.showNone,S={},v=(S.value=[]),Y=(S.origValue=[]),Q=(S.lowerBound=[]),F=(S.upperBound=[]),w=(S.series=[]),O=(S.series_name=[]),p=(S.metric_series=[]),M=(S.metric_series_name=[]),C=(S.date=[]),P=(S.category=[]),z=(S.label=[]),A=(S.groups=[]),o=(S.facets=[]),n=(S.cell=[]),V=(S.filter=[]),h=B.showMetrics||false,ad=(S.metric=[]);
var u,g,H,N,L,aa,E,W,J,R,r,X,I,ab,t,T,ac,K,q,ae,e,Z=s.metrics.length>1,G=false,k=false;
if(s.filters.length>1){s.filters.some(function(f,d,m){if(d>0&&!k){k=(f.data_store!==m[d-1].data_store)
}if(d>0&&!G){G=((f.info&&f.info.name||"")!==(m[d-1].info&&m[d-1].info.name||""))
}return G&&k
})
}for(R=0,r=s.metrics.length;
R<r;
++R){N=s.metrics[R];
E=(N.name||N.id||"")+"";
u=N.filter_ref;
g=N.date_ref;
I=(j>=0)?Math.min(j,u.length):u.length;
for(X=0;
X<I;
++X){L=s.filters[u[X]];
if(!L.facet_ref){L.facet_ref=[]
}ae=[];
e=[];
for(ac=0,K=L.facet_ref.length;
ac<K;
++ac){q=s.facets[L.facet_ref[ac]];
ae.push(q);
e.push(q.info&&q.info.name||"")
}if((L.info&&L.info.id===0)&&!l){if(I<u.length){++I
}continue
}aa=(L.info&&L.info.name||"")+"";
J=L.data_store_name||(L.data_store&&L.data_store.replace("dms/","")||"");
for(ab=0,t=g.length;
ab<t;
++ab){W=s.dates[g[ab]];
H=s.data[u[X]][g[ab]][R];
v[U]=("invalid"===H.status||"transform_error"===H.status||"calc_error"===H.status)?undefined:(+H.val||0);
Y[U]="invalid"===H.status?undefined:(+H.orig_val||0);
Q[U]=("invalid"===H.status||"transform_error"===H.status)?undefined:(+H.lower_bound||0);
F[U]=("invalid"===H.status||"transform_error"===H.status)?undefined:(+H.upper_bound||0);
C[U]=new Date(W.val);
P[U]=aa;
z[U]=E;
M[U]=((k)?J+"   ":"")+E;
p[U]=M[U]+":m"+N.ref_id;
T=[];
if(k){T.push(J)
}if(P[U].length){T.push(P[U])
}O[U]=T.join("   ");
if(O[U].length===0){O[U]=E
}else{if((h||Z||!G)&&E.length){O[U]+=" ("+E+")"
}}w[U]=O[U]+":m"+N.ref_id+"f"+L.ref_id;
A[U]=e;
V[U]=L;
ad[U]=N;
n[U]=H;
o[U]=ae;
++U
}}}return S
}var b=c.rs2dv;
a.noConflict=function(){c.rs2dv=b;
return this
};
a.prototype.convert=function(){return a.apply(null,arguments)
};
c.rs2dv=a;
if("function"===typeof define&&define.amd){define(function(){return a
})
}else{if("undefined"===typeof exports){c.rs2dv=a
}else{if("object"!==typeof module||!module.exports){exports.rs2dv=a
}else{module.exports=a
}}}}(this));
(function(d){var e={},b=d.dv||{},c=d.d3||{};
var a={};
a._options=null;
a._eventMap={};
a._changedOptions=null;
a.init=function(f){this._initDefaultOptions();
this.setOptions(f);
return this
};
a._initDefaultOptions=function(f){var h={dataAdapter:"standard",data:null,height:null,parent:null,width:null,autoResize:false,locale:"en-US",l10n:{}};
if(f){this._mergeOptions(h,f)
}this._options=h;
this._changedOptions={};
for(var g in h){this._changedOptions[g]=h[g]
}return this._options
};
a._mergeOption=function(g,f,h){switch(f){case"mappings":case"formats":g[f]=g[f]||{};
this._mergeOptions(g[f],h);
break;
default:g[f]=h;
break
}return g
};
a._mergeOptions=function(f,h){for(var g in h){this._mergeOption(f,g,h[g])
}return f
};
a._truncateLabel=function(g,h){var f=h||this.X_AXIS_LABEL_MAXLENGTH;
return(g.length>f)?g.substring(0,f)+"...":g
};
a._formatNumber=function(g,o,h){var f="",n,i,p=this._dataAdapter.l10n.numberFormat,m,j,k;
if(g=="currency"||g=="percent"){f=p[g].symbol;
if(o>=0){m=p[g].positivePattern
}else{m=p[g].negativePattern
}}else{if(o>=0){m="{number}"
}else{m=p.negativePattern
}}if(g=="percent"){o*=100
}o=Math.abs(o);
if(o>=100){k=3
}else{if(o>=10){k=(o%1)?3:2
}else{if(o>=1){k=(o%1)?3:1
}else{k=(o%1)?2:1
}}}if(h!=null){var l=c.formatPrefix(o);
j=l.scale(o).toFixed(h)+l.symbol
}else{if(o>=1000&&o<10000){j=c.format(",.0f")(o)
}else{j=c.format("."+k+"s")(o)
}}if(h&&o<Math.pow(10,-h)&&o>0){i=true;
j=Math.pow(10,-h)+""
}else{if(h==null&&o<0.01&&o>0){i=true;
j="0.01"
}}n=m.replace(/\{number\}/i,j).replace(/\{symbol\}/i,f).replace(/,/g,p.groupSeparator).replace(/\./,p.decimalSeparator);
if(i){n="<"+n
}return n
};
a._getPropMapping=function(f){return this._dataAdapter.mappings()[f]
};
a.setOption=function(f,g){if(!(f in this._options)){return false
}if("dataAdapter"===f&&"rs2dv"===g){g="rs"
}if("clickHandler"===f){this.on("click",g)
}this._mergeOption(this._options,f,g);
if(!this._changedOptions){this._changedOptions={}
}this._changedOptions[f]=g;
return true
};
a.getOption=function(g){var f=this._options;
if(g in f){return f[g]
}return null
};
a.setOptions=function(g){for(var f in g){this.setOption(f,g[f])
}};
a._preRender=function(){this._clearErrorMessage();
if("autoResize" in this._changedOptions){this._updateWindowResize()
}if("dataAdapter" in this._changedOptions){var h=this._changedOptions.dataAdapter;
if(!this._dataAdapter||(this._options.dataAdapter!==h)){var g=e.dataAdapter[h];
if(!g){throw new Error("No data adapters were found for data adapter type "+h)
}var f=g[this._type]||g.base||e.dataAdapter.standard.base;
this._dataAdapter=f()
}}this._dataAdapter.process(this._options,this._changedOptions)
};
a._render=function(){};
a._postRender=function(){this._changedOptions={}
};
a.render=function(){this.reset();
this._preRender();
this._render();
this._postRender();
return this
};
a.reset=function(){};
a._updateWindowResize=function(){if(this._options.autoResize){this._autoResizeHandler=this._autoResizeHandler||b.util.bind(this._onAutoResize,this);
e.windowResize.addHandler(this._autoResizeHandler)
}else{e.windowResize.removeHandler(this._autoResizeHandler)
}};
a._onAutoResize=function(){};
a.RESPONSIVE_WIDTH_THRESHOLD=400;
a._isSmallChart=function(f){return f<a.RESPONSIVE_WIDTH_THRESHOLD
};
a.handleError=function(g){var h=this._dataAdapter.l10n;
var f=h.labels.core.erroronrender;
if("invaliddata"===g.code){f=h.labels.core.nodata
}this._setErrorMessage(f);
return this
};
a._setErrorMessage=function(f){if(f&&f.length){c.select(this._options.parent).html('<div class="cv-error">'+f+"</div>")
}else{this._clearErrorMessage()
}};
a._clearErrorMessage=function(){c.select(this._options.parent).select(".cv-error").remove()
};
a.destroy=function(){this.reset();
e.windowResize.removeHandler(this._autoResizeHandler)
};
a.on=function(g,h){var f=h&&b.util.isFunction(h);
if(f){this._eventMap=this._eventMap||{};
this._eventMap[g]=h
}else{if(this._eventMap){delete this._eventMap[g]
}}return this
};
d.cloudViz=e;
e.d3=c;
e.dv=b;
e.rs2dv=d.rs2dv||{};
e.core=a;
e.localeDefinition=function(f,j,i){var k,g,h,l;
f=f.toLowerCase();
e._localeDefinitions=k=e._localeDefinitions||{};
if(arguments.length>1){g=f.split("-");
if(g.length<=1){throw new Error("A registered CloudViz locale must be a hyphenated language culture code (e.g. en-US).")
}h=[f,g[0],g.join("_")];
h.forEach(function(m){if(i==null){k[m]=j
}else{k[m]=k[f]||{};
k[m][i]=j
}})
}else{l=k[f];
if(!l){throw new Error("Locale definition for "+f+" not found.")
}return l
}};
if("function"===typeof define&&define.amd){define(function(){return e
})
}else{if("undefined"===typeof exports){d.cloudViz=e
}else{if("object"!==typeof module||!module.exports){exports.cloudViz=e
}else{module.exports=e
}}}}(this));
(function(a){a.cloudViz.seriesState=function(){var d={},b=[],c={};
d.isSeriesEnabled=function(j,e){if(!b){return true
}var f,g=b.length,h;
for(f=0;
f<g;
f++){h=b[f];
if(h.id===j&&h.type===e){return h.enabled
}}return false
};
d.doesSeriesStateExist=function(j,e){if(!b){return false
}var f,g=b.length,h;
for(f=0;
f<g;
f++){h=b[f];
if(h.id===j&&h.type===e){return true
}}return false
};
d._createStateObject=function(g,i,h,f){var e;
if(arguments.length<3){throw new Error("A state object requires a label and stateType.")
}if(arguments.length<4){f=true
}e={name:g,id:i,type:h,enabled:f};
this.dispatch("create",e);
return e
};
d.insertState=function(f,h,g,e){b.unshift(this._createStateObject.apply(this,arguments))
};
d.appendState=function(f,h,g,e){b.push(this._createStateObject.apply(this,arguments))
};
d.enableStateByIndex=function(f,e){if(f<b.length){var g=b[f];
if(g.enabled!==e){g.enabled=e;
this.dispatch("enableChange",g)
}}};
d.enableStateByTypeAndId=function(j,k,e){var f,g=b.length,h;
for(f=0;
f<g;
f++){h=b[f];
if(h.id===k&&h.type===j){this.enableStateByIndex(f,e)
}}};
d.removeStatesByType=function(f){var e=this;
if(b&&b.length){b=b.filter(function(g){if(g.type===f){e.dispatch("remove",g);
return false
}return true
})
}};
d.on=function(g,j){if(arguments.length<1){throw new Error("series state listeners require an eventType to be specified.")
}var f=g.indexOf("."),e="",h;
if(f>0){e=g.substring(f+1);
g=g.substring(0,f)
}h=c[g]||{};
if(!j){delete h[e]
}else{h[e]=j;
c[g]=h
}};
d.dispatch=function(e,h){var f=c[e];
if(f){for(var g in f){f[g].call(this,e,h)
}}};
d.getStateObjects=function(){return b
};
d.areSomeSeriesDisabled=function(){if(!b){return false
}return(Math.min.apply(null,b.map(function(e){return +e.enabled
}))===0)
};
d.areAllSeriesDisabled=function(){if(!b){return false
}return(Math.max.apply(null,b.map(function(e){return +e.enabled
}))===0)
};
return d
}
})(this);
(function(b){var c=b.cloudViz||{};
var a=c.util=c.util||{};
a.deepExtend=function(e){var d=Array.prototype.slice.call(arguments,1);
var f=-1,j=d.length;
while(++f<j){var g=d[f];
if(g){for(var h in g){if(g[h]&&g[h].constructor&&g[h].constructor===Object){e[h]=e[h]||{};
a.deepExtend(e[h],g[h])
}else{e[h]=g[h]
}}}}return e
};
a.createConstructor=function(d){function e(){var f=Object.create(d);
if("function"==typeof f.init){f.init.apply(f,arguments)
}return f
}e.prototype=d;
return e
};
a.namespace=function(g,f){var e=g.split(".");
var d=f||b;
e.forEach(function(h){var i=d[h];
if(!i){i=d[h]={}
}d=i
});
return d
}
}(this));
(function(e){var f=e.cloudViz||{},a=f.core||{},b=e.dv||{},c=e.d3||{},d=Object.create(a);
d.X_AXIS_LABEL_MAXLENGTH=25;
d.LEGEND_ORIENTATIONS=["top","right","left"];
d._chart=null;
d.clipIdCounter={count:0};
d._legend=null;
d._seriesState=null;
d.init=function(g){Object.getPrototypeOf(d).init.apply(this,arguments);
this._seriesState=f.seriesState();
return this
};
d._initDefaultOptions=function(g){var h={aspectRatio:null,colors:["#8cc350","#5a6eaa","#d755a5","#1ebed7","#f0a01e","#9b8ce6","#3cb5a0","#3287d2","#f0557d","#c3d250","#eb782d","#78b4f5","#5faf69","#aa5fa5","#fa5a50","#f5c841"],dateGranularity:undefined,flip:false,interactive:false,legendOrientation:null,legendVerticalWidth:110,legendVisible:true,targetValues:null,targetLabel:undefined,mappings:{x:"x",y:"y",series:"series",seriesLabel:"series"},plotHeight:null,plotWidth:null,preRender:null,xAxisTitle:"",yAxisTitle:"",precision:null};
if(g){this._mergeOptions(h,g)
}return Object.getPrototypeOf(d)._initDefaultOptions.call(this,h)
};
d.getChart=function(){return this._chart
};
d.enableSeriesByIndex=function(h,g){this._seriesState.enableStateByIndex(h,g)
};
d._highlight=function(h,g){h.classed("cv-highlight",g)
};
d._getYTitleFromLabels=function(h){var g=b.util.uniq(h);
if(g&&g.length===1){return g[0]
}return null
};
d._preRender=function(){Object.getPrototypeOf(d)._preRender.call(this);
try{this._createSeriesStates()
}catch(h){var g=new Error("The chart data is invalid");
g.code="invaliddata";
this.handleError(g)
}};
d._postRender=function(){Object.getPrototypeOf(d)._postRender.call(this);
var h=this._options,g=c.select(h.parent);
this._updateYAxisHitBox(g);
this._colorDualYAxes(h,g)
};
d._removeYAxisHitBox=function(g){g.selectAll(".axis-y .cv-axis-hitbox").remove()
};
d._colorDualYAxes=function(h,g){if(h.dualYAxis&&(!this._isNormalized||!this._isNormalized())&&(this._options.position==="identity"||this._options.position==="dodge")){g.selectAll(".axis-y.axis-index-0 span").style("color",h.colors[0]);
g.selectAll(".axis-y.axis-index-1 span").style("color",h.colors[1]);
g.selectAll(".axis-title-y.axis-title-index-0").style("color",h.colors[0]);
g.selectAll(".axis-title-y.axis-title-index-1").style("color",h.colors[1])
}};
d._createSeriesStates=function(){var k=this._options;
if("data" in this._changedOptions&&this._changedOptions.data){this._seriesState.removeStatesByType("standard");
var h=this._dataAdapter.data()[this._getPropMapping("series")],m=this._dataAdapter.data()[this._getPropMapping("seriesLabel")];
if(h){var j=h.reduce(function(o,q,p){if(o.ids.indexOf(q)<0){o.ids.push(q);
o.names.push(m?m[p]:q)
}return o
},{names:[],ids:[]}),l=j.ids.length;
while(l--){var g=j.names[l],n=j.ids[l];
this._seriesState.insertState(g||n,n,"standard")
}}}if("targetValues" in this._changedOptions){if(k.targetValues){this._seriesState.removeStatesByType("target");
this._seriesState.appendState(k.targetLabel||this._dataAdapter.l10n.labels.dvcore.target,"target","target")
}}};
d._createTargetHLines=function(){var q=this._options,n=this._chart,p=this;
if(q.targetValues&&q.targetValues.length){var h=n.layers(),o=b.geom.hline(),l=p._seriesState.isSeriesEnabled("target","target"),j={y:[],name:[]},k,g=q.targetValues.length,m=[0,this._isSmallChart()?24:6];
for(k=0;
k<g;
k++){j.y.push(q.targetValues[k])
}o.data(j).position("identity").map("y","y",b.scale.linear().includeInDomain(function(){if(!p._valuesAreFilterable()){return true
}return l
}).rangePadding(m)).each("start",function(s,r){c.select(this).attr("legend-type","target")
});
if(this._type==="line"){h.unshift(o)
}else{h.push(o)
}n.layers(h)
}};
d._updateYAxisHitBox=function(o){var q=this,s=this._options,h=this._chart.facet().getPanel(0);
if(h){var l=this._isSmallChart(),p=this._isNormalized&&this._isNormalized(),j=this._chart.getTrainedScale("y"),i=j&&j.naturalDomain()[0]<=0,k=h.bounds().left,n=j.range()[1],g=j.range()[0],m=o.selectAll(".axes-labels .axis-y.axis-index-0"),r=m.selectAll(".cv-axis-hitbox").data([0]);
if(s.interactive&&!l&&!p&&!i&&s.position==="identity"){r.enter().append("div").classed("cv-axis-hitbox",true);
r.on("click",function(){if(s.interactive&&!l){q._dataAdapter._forceZero=!q._dataAdapter._forceZero;
q._render(true);
q._postRender()
}});
if(this._legend!=="none"&&this._legend.isVertical()){k-=this._legend.orientation()==="left"?this._legend._getUsedWidth():0
}r.style("width",k+"px").style("height",(g-n)+"px").style("top",n+"px").style("left",(-k)+"px");
r.exit().on("click",null)
}else{this._removeYAxisHitBox(o)
}}else{this._removeYAxisHitBox(o)
}};
d._render=function(g){Object.getPrototypeOf(d)._render.apply(this,arguments);
var i=this._options,h;
try{if(!this._dataAdapter.isDataValid()){h=new Error("The chart data is invalid");
h.code="invaliddata";
throw h
}if(!i.parent){throw new Error("The chart options did not contain a parent")
}return this._draw(g)
}catch(j){this.handleError(j)
}};
d.reset=function(){Object.getPrototypeOf(d).reset.apply(this,arguments)
};
d.destroy=function(){Object.getPrototypeOf(d).destroy.apply(this,arguments);
if(this._options&&this._options.parent){c.select(this._options.parent).select(".cv-wrapper").remove()
}return this
};
d._isMappedAndExistsInData=function(h){var g=this._getPropMapping(h);
return g&&this._options.data[g]
};
d._setChartCoreOptions=function(){var o=this._options,i=this._chart,n=this,l=o.aspectRatio,h=o.width,m=o.height,k=c.select(o.parent);
i.data(this._dataAdapter.data()).width((l!==null&&m!==null)?m*l:h).height((l!==null&&h!==null)?h/l:m);
var g=k.selectAll(".cv-wrapper").data([0]);
g.enter().insert("div",":first-child").classed("cv-wrapper",true);
g.attr("data-chart-type",this._type);
g.classed({interactive:o.interactive,"right-overflow":(this._adjustClipWidth),"cv-small-chart":(this._isSmallChart())});
i.parent(g.node());
this._legend=this._buildLegend();
this._seriesState.on("enableChange.paths",function(p,q){n._preRender();
n._render(true);
n._postRender();
setTimeout(function(){n._updatePathStates()
},10)
});
if(!this._isSmallChart()){var j={left:10};
if(o.dualYAxis){j.right=10
}i.padding(j)
}else{i.padding({})
}};
d._draw=function(g){var j=this._chart,i=this._options,h=(g===undefined)?false:g;
if(!j){throw new Error("DV Chart was not created")
}this._setChartCoreOptions();
this._setChartTypeOptions();
this._createTargetHLines();
if(this._isSmallChart()){this._drawSmall()
}else{this._drawLarge()
}if(!h){j.duration(0)
}else{j.duration(1000)
}this._renderChart();
return this
};
d._drawBackground=function(){var k=this._options;
if(k.interactive){var p=c.select(k.parent).select(".cv-wrapper"),i=p.selectAll(".cv-bg").data([0]),j=this._legend==="none"?null:this._legend.orientation();
i.enter().insert("div",":first-child").classed("cv-bg",true);
var t=this._chart,h=c.select(k.parent).select(".cv-legend"),v=((this._legend!=="none"&&this._legend.isVertical())||h.empty())?0:1,B=1,q=t.padding(),l=t.facet().getPanel(t.facet()._panels.length-1).bounds(),o=t.plotBounds(),s=this._chart._legends&&this._chart._legends.hasOwnProperty("_w")?this._chart._legends._w:0,n=j==="left"||(!j&&this._legend.isVertical())?s:0,m=o.top-v-q.top,z=t._calcWidth-n-(j==="right"?s:0),u=(l.top+l.height)-o.top+v+q.top;
i.style("top",m+"px").style("left",n+"px").style("height",(u+B)+"px").style("width",z+"px");
if(this._legend!=="none"&&this._legend.isVertical()){var A=1,w=c.select(k.parent).selectAll(".cv-legend"),r=!h.empty()&&w.node().offsetHeight||0,g=(r>=u-A);
w.style("height",g?(u-A)+"px":null).classed("clipped",g)
}}};
d._drawClipping=function(){var m=this._chart,t=this._options,l=m._svgContainer,k=l.selectAll("defs").data([0]);
k.enter().insert("defs",":first-child");
var h="cv-clip"+(this.clipIdCounter.count++),j=k.selectAll(".cv-clip").data([0]);
j.enter().append("clipPath").classed("cv-clip",true).append("rect");
j.attr("id",h);
var o=j.selectAll("rect"),q=m.padding(),i=m.facet().getPanel(m.facet()._panels.length-1).bounds(),r=m.plotBounds(),p=r.left-q.left,n=r.top,g=r.right-p+q.right,s=(i.top+i.height)-r.top+1;
if(t.interactive){g-=1;
s-=1
}if(this._adjustClipHeight){s+=this._adjustClipHeight
}if(this._adjustClipWidth){g+=this._adjustClipWidth
}o.attr("x",p).attr("y",n).attr("width",Math.max(g,0)).attr("height",Math.max(s,0));
l.selectAll(".geom").attr("clip-path",null);
l.selectAll(".geom:not(.no-clip)").attr("clip-path","url(#"+h+")")
};
d._renderChart=function(){var g=this,h=this._options;
if("function"==typeof h.preRender){h.preRender(this.getChart())
}this._chart.render();
this._drawBackground();
this._drawClipping();
setTimeout(function(){g._updatePathStates()
},10)
};
d._onAutoResize=function(){this._draw(false)
};
d._setChartTypeOptions=function(){};
d._drawSmall=function(g){};
d._drawLarge=function(g){};
d._isSmallChart=function(){return Object.getPrototypeOf(d)._isSmallChart.apply(this,[this._getChartWidth()])
};
d._getChartWidth=function(){var h=this._options,g=c.select(h.parent),k=g.select(".cv-wrapper");
if(k.empty()){k=g
}if(h.plotWidth!==null&&!b.util.isPercentString(h.plotWidth)){return h.plotWidth
}else{if(h.width!==null&&!b.util.isPercentString(h.width)){return h.width
}}var j=k.node().offsetWidth;
var i=k.node().offsetHeight;
if(h.plotWidth!==null){return parseInt(h.plotWidth,10)/100*j
}else{if(h.width!==null){return parseInt(h.width,10)/100*j
}else{return(h.aspectRatio!==null&&i!==null)?i*h.aspectRatio:j
}}};
d._getChartHeight=function(){var g=this._options;
if(g.plotHeight!==null&&!b.util.isPercentString(g.plotHeight)){return g.plotWidth
}else{if(g.height!==null&&!b.util.isPercentString(g.height)){return g.height
}}var i=c.select(g.parent).node().offsetWidth;
var h=c.select(g.parent).node().offsetHeight;
if(g.plotHeight!==null){return parseInt(g.plotHeight,10)/100*h
}else{if(g.height!==null){return parseInt(g.height,10)/100*h
}else{return(g.aspectRatio!==null&&i!==null)?i/g.aspectRatio:h
}}};
d._constructScale=function(h,j){var i=j||b.scale.linear(),g=this._options;
if(g.interactive){i=this._adjustLimits(i)
}if(h==="y"&&this._dataAdapter._forceZero){this._applyForceZero(i)
}return i
};
d._applyForceZero=function(g){g.lowerLimit(function(i,h){return i<0?i:0
});
g.upperLimit(function(i,h){return h>0?h:0
});
return g
};
d._adjustLimits=function(i){var g=this,h=this._options;
i.includeInDomain(function(k,j){if(!g._valuesAreFilterable()){return true
}return g._seriesState.isSeriesEnabled(k.data[g._legend.mapping()],"standard")
});
return i
};
d._valuesAreFilterable=function(){return(this._options.interactive&&this._seriesState.areSomeSeriesDisabled()&&!this._seriesState.areAllSeriesDisabled())
};
d._getEnabledValues=function(k){var h=this,j=this._options,g=this._dataAdapter.data()[this._getPropMapping(k)];
if(!this._valuesAreFilterable()){return g
}var i=this._dataAdapter.data()[this._legend.mapping()];
g=g.filter(function(l,m){return(i[m]&&h._seriesState.isSeriesEnabled(i[m],"standard"))
});
return g
};
d._updatePathStates=function(){var g=this,h=this._options,i=c.select(h.parent);
i.selectAll(".plot .series [legend-group]").classed("path-inactive",function(){if(!h.interactive){return false
}var k=c.select(this),l=k.datum(),j=b.util.isArray(l)?l[0].data:l.data,m=j[g._getPropMapping("series")];
if(g._seriesState.doesSeriesStateExist(m,"standard")){return !g._seriesState.isSeriesEnabled(m,"standard")
}return k.classed("path-inactive")
});
if(h.targetValues){i.selectAll(".plot .series [legend-type]").classed("path-inactive",function(){if(!h.interactive){return false
}var k=c.select(this),j=k.attr("legend-type");
if(g._seriesState.doesSeriesStateExist("target",j)){return !g._seriesState.isSeriesEnabled("target",j)
}return k.classed("path-inactive")
})
}};
d._buildLegend=function(o,j){var m=null,p=this._options,g=c.select(p.parent).select(".cv-wrapper"),h=this._getPropMapping(o||"series"),i=this._getPropMapping(j||"seriesLabel");
if(h&&i&&h!==i){var l=this._dataAdapter.data(),k=l[h],n=l[i]||k;
m=[];
k.forEach(function(r,s,q){if(q.indexOf(r)===s){m.push(n[s])
}})
}if(!p.legendVisible){g.selectAll(".cv-legend").remove();
g.selectAll(".cv-bg").remove();
return"none"
}if(p.interactive){return this._buildInteractiveLegend(m)
}else{return this._buildStandardLegend(m)
}};
d._buildStandardLegend=function(l){var i=this._options,g=c.select(i.parent).select(".cv-wrapper");
this._legend=null;
g.selectAll(".cv-legend").remove();
g.selectAll(".cv-bg").remove();
var k,h=this.LEGEND_ORIENTATIONS.indexOf(i.legendOrientation)>-1?i.legendOrientation:"top";
switch(this._calculatedLegendOrientation){case"top":case"bottom":k={top:5,bottom:5,left:0,right:0};
break;
case"left":case"right":k={top:0,bottom:0,left:5,right:5};
break
}var j=b.guide.legend().orientation(h).padding(k);
if(l){j.labels(l)
}if(this._isSmallChart()){j.hGap(10).vGap(2)
}return j
};
d._buildInteractiveLegend=function(l){var j=this._options,i=this,h=c.select(j.parent).select(".cv-wrapper");
if(!this._legend){this._legend=f.interactiveLegend()
}var g=this._dataAdapter.data()[this._getPropMapping("series")],k=g.some(function(m,n,o){return m!==o[n-1]
});
if(!k){this._legend.remove();
h.selectAll(".path-inactive").classed("path-inactive",false);
return"none"
}this._legend.parent(h.node()).orientation(j.legendOrientation).chartWidth(this._getChartWidth()).chartHeight(this._getChartHeight()).chartPadding(this._chart.padding()).validOrientations(this.LEGEND_ORIENTATIONS).legendVerticalWidth(j.legendVerticalWidth).type(this._type).seriesState(this._seriesState);
if(l){if(this._getCategoryTotal){this._legend.totals(l.map(function(m){return this._getCategoryTotal(m)
}))
}}return this._legend
};
d._numXTicks=function(){return function(g){return Math.max(g/120,2)
}
};
d._yTitleFormat=function(j,h){var g=this._dataAdapter,n=g.yAxisTitle(),i=g.l10n,m=this._getYFormatType(j),l,k;
if("time"===m){if(!h){h=this._getEnabledValues("y")
}l=this._yTimeGranularity(h,b.guide.axis().ticks()());
l=i.time.plural[l.gran];
k=(n)?i.labels.dvcore.yAxisTimeWithTitle:i.labels.dvcore.yAxisTimeNoTitle;
n=k.replace(/\{time\}/i,l).replace(/\{title\}/i,n)
}return n
};
d._formatYValue=function(i,h,j,g){if(j&&j.divisor>0){i=i/j.divisor
}return this._formatNumber(h,i,g)
};
d._getYFormatType=function(g){var h=this._dataAdapter.formats().y;
if(!h){return"decimal"
}if(b.util.isArray(h)){if(!h[g]){return"decimal"
}return h[g]
}return h
};
d._yLabelFormat=function(k){var i=this._getYFormatType(k),g=this._dataAdapter,j=this._options,h=this;
return function(p,m){var o,n,l=g.l10n.time;
if("time"===i){n=g.getTimeGranularity(p,true);
l=(1!==+p)?l.plural:l.singular
}o=h._formatYValue(p,i,n,j.precision);
if(n&&n.gran){o+=" "+l[n.gran]
}return o
}
};
d._yTickFormat=function(k,h){var g=this,i=this._getYFormatType(k),j=this._options,l;
if("time"===i){if(!h){h=this._getEnabledValues("y")
}l=g._yTimeGranularity(h,b.guide.axis().ticks()())
}return function(n,m){if(!n){return""
}return g._formatYValue(n,i,l,j.precision)
}
};
d._yTimeGranularity=function(i,l){i=i&&i.filter(function(n){return isFinite(n)
})||[];
l=l||1;
if(!i.length){return null
}var h=Math.max.apply(null,i),j=Math.min.apply(null,i),g=c.scale.linear().domain([j,h]).ticks(l),m=g.length?(g.length>1)?g[1]-g[0]:h-g[0]:h,k=g.length?(m/g.length):m;
return this._dataAdapter.getTimeGranularity(k)
};
d._xTickAnchor=function(g){return function(o,j,p){var m=g.getTrainedScale("x"),h=b.util.scaleRange(m),l=20;
var k=m.mapValue(o)+m.rangeBand()/2;
if(k-h[0]<l){return"start"
}if(h[1]-k<l){return"end"
}return"middle"
}
};
d._checkNormalized=function(){var h=this._chart,g=this._dataAdapter.l10n;
if(this._isNormalized&&this._isNormalized()){h.guide("y","none",1);
h.guide("y",b.guide.axis().ticks(0).tickFormat(function(k,j){return""
}).title(g.labels.core.normalized));
h.padding({})
}};
d._formatTime=function(h,t,o){var u=this._dataAdapter.l10n.calendar;
var l={a:function(i){return u.weekdayAbbreviations[i.getDay()]
},A:function(i){return u.weekdays[i.getDay()]
},b:function(i){return u.monthAbbreviations[i.getMonth()]
},B:function(i){return u.months[i.getMonth()]
},p:function(i){return u.ampm[Math.floor(i.getHours()/12)]
}};
var s="",r=-1,m=0,g=t.length;
var q=function(){var i=t.substring(m,r);
if(i.length){s+=c.time.format(i)(h)
}};
while(++r<g){if(t.charCodeAt(r)==37){var k=t.charAt(r+1);
var p=l[k];
if(p){q();
s+=p(h);
r++;
m=r+1
}}}q();
if("hour"===o&&0===s.indexOf("0")){s=s.slice(1)
}return s
};
d._timeGranTemplate=function(g,i){var h;
switch(g){case"hour":h=i.hour;
break;
case"day":h=i.day;
break;
case"week":h=i.week;
break;
case"month":h=i.month;
break;
case"quarter":h=i.quarter;
break;
case"year":h=i.year;
break;
default:h=i.fallback;
break
}return h
};
d._timeSmallXFormat=function(){var h=this,g=h._dataAdapter,i=g.l10n.dateFormat.fullFormat;
return function(k,j){return h._formatTime(k,i.condensed)
}
};
d._timeXTickFormat=function(o){var q=this,r=q._options,m=this._chart,p=q._dataAdapter,j=new Date(0),n="",g="",h=p.l10n.dateFormat,l=h.mediumFormat,k=p?p.dateGranularity():"*",i=this._timeGranTemplate(k,h.shortFormat);
return function(z,u){var v,w,s,t;
z=new Date(z);
if(0===u){j=new Date(0);
n=null;
g=null
}if(o&&!o.call(this,z,u)){return""
}if("hour"===k&&j.getDate()!==z.getDate()){v=l.day
}if(("day"===k||"week"===k)&&j.getMonth()!==z.getMonth()){v=l.month
}if(("month"===k||"quarter"===k)&&j.getYear()!==z.getYear()){v=l.year
}j=z;
w=q._formatTime(z,i,k);
if(v){s="<br/>"+q._formatTime(z,v)
}else{s="<br/>&nbsp;"
}if(w===n&&(s===g||!v)){t=""
}else{t=(s)?w+s:w
}n=w;
g=s;
return t
}
};
e.cloudViz.dvcore=d
}(this));
(function(f){var e,c=[];
var b=function(h,i){var j=-1;
return function(){if(j>-1){window.clearTimeout(j)
}j=window.setTimeout(h,i)
}
};
var d=b(function(){c.forEach(function(h){h()
})
},30);
var g=function(h){if(c.indexOf(h)==-1){c.push(h)
}if(!e){window.addEventListener("resize",d);
e=true
}};
var a=function(i){var h=c.indexOf(i);
if(h>-1){c.splice(h,1)
}if(c.length===0&&e){window.removeEventListener("resize",d);
e=false
}};
f.cloudViz.windowResize={addHandler:g,removeHandler:a}
}(this));
(function(e){var f=e.cloudViz||{},d=f.dvcore||{},b=e.dv||{},c=e.d3||{},a=Object.create(d),g=-1;
a.init=function(h){Object.getPrototypeOf(a).init.apply(this,arguments);
this._type="line";
this._chart=b.chart();
this._displayPoints=null;
this._adjustClipHeight=6;
this._adjustClipWidth=6;
this._minTrendTickSpace=135;
this._showRibbons=false;
this._uniqueGroups=null;
return this
};
a._initDefaultOptions=function(){var h={normalized:false,filled:false,position:"identity",forceZero:null,dualYAxis:false,showAnomalies:false,mappings:{upperRangeBand:"upper",lowerRangeBand:"lower",forecast:"forecast"},formats:{x:"decimal",y:"decimal"}};
return Object.getPrototypeOf(a)._initDefaultOptions.call(this,h)
};
a.reset=function(){Object.getPrototypeOf(a).reset.apply(this,arguments);
var i=this._options;
var h=c.select(i.parent);
h.selectAll(".behavior").text("");
h.selectAll(".behavior-under-geom").text("");
this._chart.on("mousemove.inspector",null);
this._chart.on("mouseout.inspector",null);
h.selectAll(".axis-y.axis-index-1").remove()
};
a._setChartTypeOptions=function(){var k=this._chart,j=this._options,h=this,m=[b.geom.line().each("start",function(o,n){c.select(this).attr("legend-group",o[0]["stroke"])
}).map("stroke",this._getPropMapping("series"),b.scale.color().values(j.colors))];
this._uniqueGroups=b.util.uniq(k.data()[this._getPropMapping("series")]);
this._showRibbons=(this._uniqueGroups.length==1&&this._isMappedAndExistsInData("upperRangeBand")&&this._isMappedAndExistsInData("lowerRangeBand"));
if(this._showRibbons){m.unshift(b.geom.ribbon().map("yMin",this._getPropMapping("lowerRangeBand")).map("yMax",this._getPropMapping("upperRangeBand")).set("alpha",0.15).interpolate("cardinal"));
j.filled=false
}if(this._showRibbons&&this._isMappedAndExistsInData("forecast")){m.push(b.geom.line().map("y",this._getPropMapping("forecast")).set("alpha",0.5).set("linetype","dotted").interpolate("cardinal"))
}if(j.filled){m.push(b.geom.area().baseline(undefined).each("start",function(o,n){c.select(this).attr("legend-group",o[0]["fill"])
}).map("fill",this._getPropMapping("series"),b.scale.color().values(j.colors)).set("alpha",0.2))
}var l=b.geom.point().map("stroke",this._getPropMapping("series"),b.scale.color().values(j.colors)).set("fill","#fff").set("size",7);
m.push(l);
var i=this._getPropMapping("group")||this._getPropMapping("series");
k.layers(m).guide("stroke",this._legend).map("group",i).set("linetype",function(p,o,n){return(/::incomplete::$/).test(p.data[i])?"0,4,7,0":"solid"
}).position(j.position);
l.each("start",function(o,n){c.select(this).classed("point-hidden",!h._shouldDisplayPoint.call(h,o)).attr("legend-group",o.stroke).classed("line-point",true)
});
this._addBehaviors(k,j);
this._mapPositionScales(k,j)
};
a._shouldDisplayPoint=function(h){return(this._showRibbons)?this._isAnomalousDataPoint(h):this._shouldDisplayPoints()
};
a._shouldDisplayPoints=function(){if(this._displayPoints!==null){return this._displayPoints
}var j=this._options,k=this._chart,l=k.layers()[1]._nestData,h=Math.max.apply(null,l.map(function(m){return m.values.length
})),i=k.getTrainedScale("x").range();
return this._displayPoints=(j.showAnomalies&&this._showRibbons)||(((i[1]-i[0])/h)>=60)
};
a._isAnomalousDataPoint=function(h){return(h.data[this._getPropMapping("y")]>h.data[this._getPropMapping("upperRangeBand")]||h.data[this._getPropMapping("y")]<h.data[this._getPropMapping("lowerRangeBand")])
};
a._addBehaviors=function(m,k){var j=this,h=c.select(k.parent),i=this._dataAdapter,l=i.formats().x;
if(k.interactive){m.behaviors([b.behavior.inspector().gutterPadding(0).orientation("bottom").thickness(2).label(function(p){if(i.isOvertime()){var n=i.dateGranularity(),o=i.l10n.dateFormat.fullFormat;
return j._formatTime(p,j._timeGranTemplate(n,o),n)
}return j._formatNumber(l,p,k.precision)
}).inspectorMove(function(p,n,r,q){var o=m.getTrainedScale("stroke")[0];
j._highlightHoveredPoints.call(j,h,q,o);
h.selectAll(".axis-x .axis-label").style("opacity",0);
h.selectAll(".axis-x-title").style("opacity",0);
h.selectAll(".text-geom").style("opacity",0);
if(j._eventMap.mouseover){j._eventMap.mouseover.call(this,p,n,r,q,c.event)
}}).inspectorOut(function(){var n=m.getTrainedScale("stroke")[0];
j._highlightHoveredPoints.call(j,h,null,n);
h.selectAll(".axis-x .axis-label").style("opacity",1);
h.selectAll(".axis-x-title").style("opacity",1);
h.selectAll(".text-geom").style("opacity",1);
if(j._eventMap.mouseout){j._eventMap.mouseout.call(this,c.event)
}}).underGeoms(true)])
}};
a._highlightHoveredPoints=function(k,n,j){var i={},h=this,m=j.domain(),l=this._options;
k.selectAll(".line-point").each(function(t){var q=c.select(this),p=j.mapValue(t.stroke),r=h._dataValuesEqual.call(h,t.x,n),o=q.datum();
q.classed("point-hidden",r?false:!h._shouldDisplayPoint.call(h,t));
q.style("fill",r?p:"#FFF").style("opacity",r?1:"");
if(r){var s=q.datum().data[h._getPropMapping("series")];
i[s]={yVal:o.y,scaleIndex:m.indexOf(t.stroke)}
}});
k.selectAll(".cv-legend-entry").each(function(t){var w=t.id,q=i[w],p=c.select(this).select(".cv-legend-num");
if(!q){return p.text("")
}var u=h._getYFormatType(q.scaleIndex),v=q.yVal,z;
if("time"===u){var A=h._dataAdapter.l10n,s=h._yTimeGranularity(h._dataAdapter.getUniqueStrokeExtentByStroke(w),b.guide.axis().ticks()()),o=A.time.plural[s.gran],r=A.labels.dvcore.legendTime;
if(s&&s.divisor>0){v=v/s.divisor
}z=r.replace(/\{time\}/i,o).replace(/\{value\}/i,h._formatNumber(u,v,l.precision))
}else{z=h._formatNumber(u,v,l.precision)
}p.text(z)
})
};
a._dataValuesEqual=function(i,h){if(!i||!h){return false
}if(this._dataAdapter.isOvertime()&&i.getTime()===h.getTime()){return true
}return i===h
};
a._mapPositionScales=function(m,r){var l=[0,this._isSmallChart()?24:6],j=this._constructScale("y").rangePadding(l),i=this._getPropMapping("series"),p=this._getPropMapping("y"),h=this._getPropMapping("x"),q=this;
if(q._dataAdapter._forceZero===null&&r.filled){q._dataAdapter._forceZero=true;
this._applyForceZero(j)
}if(r.normalized||(r.dualYAxis&&(r.position==="identity"||r.position==="dodge"))){var n=q._dataAdapter.uniqueStrokeValues();
n.forEach(function(u,t){var s=(0===t)?j:j.copy();
s.includeInDomain(function(w,v){return w.data[i]===q._dataAdapter.uniqueStrokeValues()[t]
});
if(t>0){m.map("y",p,s,t)
}})
}else{var k=m.getExplicitScalesMap().y;
if(k){delete k[1]
}}var o=this._dataAdapter.isOvertime()?b.scale.time():b.scale.linear();
o.rangePadding([10,10]);
m.map("y",p,j,0);
m.map("x",h,this._constructScale("x",o))
};
a._xTickFormat=function(){var i=this,h=this._dataAdapter,j=this._options,k=h.formats().x;
return function(m,l){return i._formatNumber(k,m,j.precision)
}
};
a._drawSmall=function(){var t=this._options,o=this._chart,r=this,n=this._computeExtents(),k=c.extent(this._getEnabledValues("x")),m=this._getYFormatType(0),q=function(v,u){return v?r._formatNumber(m,v,t.precision):"0"
},j=b.guide.axis().tickSize(0).title(this._dataAdapter.xAxisTitle()).tickDy(n.y.length>1?-26:-14).tickAnchor(function(v,u){return u>0?"end":"start"
}),h=b.guide.axis().ticks(2).title(this._dataAdapter.yAxisTitle()),s=t.dualYAxis||(t.position==="stack"&&this._uniqueGroups.length>1);
if(!s){var l=[b.geom.point().data(n).set("stroke","none").map("y","y",b.scale.linear()).map("x","x",this._dataAdapter.isOvertime()?b.scale.time():b.scale.linear()).each("start",function(z,u){var w=z.panel.getTrainedScale("fill")[0],v=c.select(this);
v.style("fill",w.mapValue(z.data.fill)).attr("legend-group",z.data.fill)
}).map("group","fill").set("size",6),b.geom.text().data(n).set("stroke","none").map("y","y",b.scale.linear()).map("x","x",this._dataAdapter.isOvertime()?b.scale.time():b.scale.linear()).each("start",function(z,u){var w=z.panel.getTrainedScale("fill")[0],v=c.select(this);
v.style("fill",w.mapValue(z.data.fill)).attr("legend-group",z.data.fill);
if(this.parentNode){c.select(this.parentNode.parentNode).classed("no-clip",true).attr("clip-path",null)
}}).map("group","fill").set("size","11px").set("label",function(C,z,w){var v=C.panel.getTrainedScale("fill")[0].domain(),u=v.indexOf(C.data.fill),A=r._yTickFormat(u)(C.y);
if("time"===m){var B=r._yTimeGranularity(r._getEnabledValues("y"),b.guide.axis().ticks()());
A+=" "+r._dataAdapter.l10n.time.plural[B.gran]
}return A
}).textAnchor(function(v,u){return v.data&&v.data.anchor||"middle"
}).dy(function(v,u){return(n.y.length===1||v.y===n.y[1])?-8:15
}).dx(function(v,u){return(v.data&&v.data.anchor=="end")?3:0
})];
o.layers(o.layers().concat(l))
}o.map("fill",this._getPropMapping("series"),b.scale.color().values(t.colors));
if(this._dataAdapter.isOvertime()){j.tickValues(k).tickFormat(r._timeSmallXFormat());
if(s){h.tickFormat(this._yTickFormat(0))
}else{h.tickFormat(function(){return""
})
}}else{if(t.dualYAxis){var p=b.guide.axis().tickFormat(this._yTickFormat(1)).orientation("right").tickSize(15).tickDy(-8).tickAnchor("end").tickDx(4).ticks(3);
h.tickSize(15).tickDy(-8).tickAnchor("start").tickDx(4).ticks(3);
o.guide("y",p,1)
}else{var i=c.extent(this._dataAdapter.data()[this._getPropMapping("x")]);
j.tickValues(i).tickFormat(this._xTickFormat());
h.tickFormat(this._yTickFormat(0));
o.guide("y","none",1)
}}o.guide("x",j).guide("y",h);
this._checkNormalized()
};
a._numXTicks=function(){var h=this;
if(this._dataAdapter.isOvertime()){var i=this._chart._data[this._getPropMapping("x")].length;
return function(j){var l=0;
var k=Math.max(j/i,h._minTrendTickSpace);
return Math.max(Math.min(Math.floor(j/k),i),2)
}
}return Object.getPrototypeOf(a)._numXTicks.call(this)
};
a._drawLarge=function(){var q=this._options,m=this._chart,o=c.select(q.parent),n=false,k=this._dataAdapter.getUniqueStrokeExtent(0),j=this._dataAdapter.getUniqueStrokeExtent(1),l,i=b.guide.axis().ticks(this._numXTicks()).title(this._dataAdapter.xAxisTitle()).tickDy(-8).tickAnchor(this._xTickAnchor(m)),h=b.guide.axis().htmlLabels(true);
if(this._dataAdapter.isOvertime()){i.tickFormat(this._timeXTickFormat()).htmlLabels(true)
}else{i.tickFormat(this._xTickFormat())
}if(q.dualYAxis&&(q.position==="identity"||q.position==="dodge")){l=this._yTickFormat(0,k);
h.title(this._yTitleFormat(0,k));
var p=b.guide.axis().tickFormat(this._yTickFormat(1,j)).title(this._yTitleFormat(1,j)).orientation("right").tickSize(15);
h.tickSize(15);
m.guide("y",p,1)
}else{l=this._yTickFormat(0);
h.title(this._yTitleFormat(0));
m.guide("y","none",1)
}h.tickFormat(function(u,s){var r=c.select(this),t=h._scale();
if(t instanceof b.scale.linear&&u>0&&(s===0||(s===1&&n))){if(t.mapValue(u)<t.range()[0]-10||!q.interactive){r.classed("arrow-container",true)
}else{n=true;
r.classed("arrow-container",false);
return""
}}else{r.classed("arrow-container",false)
}return l.call(this,u,s)
});
m.guide("x",i).guide("y",h);
this._checkNormalized()
};
a._preRender=function(){Object.getPrototypeOf(a)._preRender.call(this);
this._displayPoints=null
};
a._computeExtents=function(){var m=-1,u=this._options,p=this._getEnabledValues("y"),k=this._getEnabledValues("x"),l=this._getEnabledValues("series"),h=p.length,t={x:[undefined,undefined],y:[undefined,undefined],fill:[undefined,undefined],anchor:[undefined,undefined]},o=null,r=null;
k.forEach(function(n,w){o=(o===null||o>n)?n:o;
r=(r===null||r<n)?n:r
});
while(++m<h){var q=p[m],s=k[m],j=l?l[m]:u.colors[0];
if(t.y[0]===undefined||q<t.y[0]){t.y[0]=q;
t.x[0]=s;
t.fill[0]=j;
t.anchor[0]=(+s==+o)?"start":(+s==+r)?"end":"middle"
}if(t.y[1]===undefined||q>t.y[1]){t.y[1]=q;
t.x[1]=s;
t.fill[1]=j;
t.anchor[1]=(+s==+o)?"start":(+s==+r)?"end":"middle"
}}if(t.y[0]===0){t.y.splice(0,1);
t.x.splice(0,1);
t.fill.splice(0,1);
t.anchor.splice(0,1)
}return t
};
a._isNormalized=function(){var i=this._options,h=this._isSmallChart()?1:2;
return i.normalized||(i.dualYAxis&&this._dataAdapter.uniqueStrokeValues().length>h&&(i.position==="identity"||i.position==="dodge"))
};
e.cloudViz.line=f.util.createConstructor(a)
}(this));
(function(e){var f=e.cloudViz||{},d=f.dvcore||{},b=e.dv||{},c=e.d3||{},a=Object.create(d);
a.init=function(g){Object.getPrototypeOf(a).init.apply(this,arguments);
this._type="point";
this._chart=b.chart();
return this
};
a.getSelected=function(){var h=[],g=c.select(this._options.parent).selectAll(".point-geom.cv-highlight");
g.each(function(i){h.push(i)
});
return h
};
a.setSelected=function(j){var g=this,i=[],h=c.select(this._options.parent).selectAll(".point-geom").filter(j);
h.each(function(k){i.push(k)
});
g._selectPoints(i);
return g
};
a._selectPoints=function(h,i){var g=this;
if(!i||!i.accumulate){if(!i||h.length!==0){c.select(g._options.parent).selectAll(".point-geom").each(function(j){if(h.indexOf(j)>=0){g._highlight(c.select(this),true)
}else{g._highlight(c.select(this),false)
}})
}else{if(i.noneSelected==="selectAll"){g._highlight(c.select(g._options.parent).selectAll(".point-geom"),true)
}}}else{if(i.action==="add"){c.select(g._options.parent).selectAll(".point-geom").each(function(j){if(h.indexOf(j)>=0){g._highlight(c.select(this),true)
}})
}else{if(i.action==="remove"){c.select(g._options.parent).selectAll(".point-geom").each(function(j){if(h.indexOf(j)>=0){g._highlight(c.select(this),false)
}})
}}}return g
};
a._initDefaultOptions=function(){var g={mappings:{size:"size"},sizeTitle:"",formats:{x:"decimal",y:"decimal",size:"decimal"},selectionEnabled:false,selectPolicyCB:function(){return{start:null,end:null,move:null}
},tooltipContent:null};
return Object.getPrototypeOf(a)._initDefaultOptions.call(this,g)
};
a._setChartTypeOptions=function(){var i=this._chart,h=this._options,j=[],g=this;
j[0]=b.geom.point().each("start",function(l,k){c.select(this).attr("legend-group",l.fill)
});
i.layers(j).map("x",this._getPropMapping("x"),this._constructScale("x").rangePadding([this._isSmallChart()?10:20,this._isSmallChart()?10:20])).map("y",this._getPropMapping("y"),this._constructScale("y").rangePadding([this._isSmallChart()?10:20,this._isSmallChart()?10:20])).map("fill",this._getPropMapping("series"),b.scale.color().values(h.colors)).guide("fill",this._legend).padding({left:10});
if(this._dataAdapter.isBubble()){j[0].map("size",this._getPropMapping("size"),b.scale.linear().to([9,60]))
}else{j[0].set("size",10).set("alpha",0.6)
}this._addBehaviors(i,j[0],h)
};
a._addBehaviors=function(j,l,o){var m=c.select(o.parent),h,n=this,i=this._getYFormatType(),k=function(s,r,p,q){if(!s.data.hasOwnProperty(r.mapping())){return""
}return'<span class="metric-value">'+p(s.data[r.mapping()])+'</span><span class="metric-name">'+q+"</span>"
},g=function(s,r,p){var t=[];
c.select(o.parent).selectAll(".point-geom").each(function(v,u){if(r[0][0]<=v.x&&r[1][0]>=v.x&&r[0][1]<=v.y&&r[1][1]>=v.y){if(n._seriesState.isSeriesEnabled(v.data.group,"standard")||n._seriesState.isSeriesEnabled(v.data[n._getPropMapping("series")],"standard")){t.push(v)
}}});
var q=n._options.selectPolicyCB.call();
n._selectPoints(t,q[s]);
if(n._eventMap.selectionStart&&s==="start"){n._eventMap.selectionStart.call(n,t)
}if(n._eventMap.selectionEnd&&s==="end"){n._eventMap.selectionEnd.call(n,t)
}};
if(o.selectionEnabled){j.behaviors([b.behavior.brush().brushStart(g).brushMove(g).brushEnd(g)])
}else{j.behaviors([])
}if(!this._isSmallChart()&&o.interactive){l.behaviors([b.behavior.voronoiRollover().pointDetectionRadius(25).content(function(u,r,q){if(o.tooltipContent){return o.tooltipContent.call(this,u,r,q)
}var v=this.__geom.getExplicitScale("group"),A=u.panel.xScale(u),w=u.panel.yScale(u),z=this._xGuides[A.scaleIndex()],p=this._yGuides[w.scaleIndex()],D=n._dataAdapter.l10n,B=(z.__scale&&z.tickFormat()?z.tickFormat():String),s=function(E){return n._formatNumber(i,E,o.precision)
},t=k(u,w,s,n._dataAdapter.yAxisTitle()||D.labels.point.yScale)+k(u,A,B,n._dataAdapter.xAxisTitle()||D.labels.point.xScale);
if(n._dataAdapter.isBubble()){var C=u.panel.getTrainedScale("size")[0];
t+=k(u,C,String,n._dataAdapter.sizeMetricName()||D.labels.point.sizeScale)
}if(v&&v.mapping()){t='<span class="series-name">'+u.data[v.mapping()]+"</span>"+t
}return t
}).mouseOver(function(s,q,p,r){clearTimeout(h);
m.selectAll(".point-geom").classed("cv-medium-duration",false).classed("cv-unselected",function(t){return s!==t
});
m.selectAll(".cv-legend-marker").classed("cv-unselected",function(t){return t.id!==s.fill
}).classed("cv-medium-duration",false);
if(n._eventMap.mouseover){n._eventMap.mouseover.call(this,s,q,p,r)
}}).mouseOut(function(s,q,p,r){h=setTimeout(function(){m.selectAll(".point-geom, .cv-legend-marker").classed("cv-unselected",false).classed("cv-medium-duration",true);
if(n._eventMap.mouseout){n._eventMap.mouseout.call(this,s,q,p,r)
}},400)
})])
}};
a._drawSmall=function(){var k=this._chart,h=c.extent(this._getEnabledValues("x")),i=this,g=this._dataAdapter,m=this._options,j=g.formats().x,l=this._getYFormatType();
k.guide("x",b.guide.axis().tickSize(0).tickValues(h).title(this._dataAdapter.xAxisTitle()).tickFormat(function(n){return i._formatNumber(j,n,m.precision)
}).tickAnchor(function(o,n){return n>0?"end":"start"
})).guide("y",b.guide.axis().ticks(2).title(this._dataAdapter.yAxisTitle()).tickDy(-8).tickFormat(function(n){return !n?"":i._formatNumber(l,n,m.precision)
}))
};
a._drawLarge=function(){var k=this._chart,i=function(n){return Math.max(2,Math.min(5,n/70))
},h=this,g=this._dataAdapter,m=this._options,j=g.formats().x,l=this._getYFormatType();
k.guide("x",b.guide.axis().ticks(this._numXTicks()).title(this._dataAdapter.xAxisTitle()).tickFormat(function(n){return h._formatNumber(j,n,m.precision)
})).guide("y",b.guide.axis().ticks(i).title(this._dataAdapter.yAxisTitle()).tickDy(-8).tickFormat(function(n){return !n?"":h._formatNumber(l,n,m.precision)
}))
};
a._postRender=function(){Object.getPrototypeOf(a)._postRender.call(this);
var j=this._options,k=this._chart,h=5,g=c.select(j.parent).select(".cv-wrapper"),i=g.selectAll(".cv-bubble-size-metric").data([0]);
if(this._dataAdapter.sizeMetricName()){i.enter().append("div").classed("cv-bubble-size-metric",true).html("<span>"+this._dataAdapter.sizeMetricName()+"</span>  <i></i> &ndash; <i></i>");
setTimeout(function(){var q=k.padding(),p=k.facet().getPanel(k.facet()._panels.length-1).bounds(),s=k.plotBounds(),o=i.selectAll("span"),n=s.right+q.right,m=p.top+p.height,l=n-i.node().offsetWidth-h,r=m-i.node().offsetHeight;
i.style("top",r+"px").style("left",l+"px")
},300)
}else{i.remove()
}};
e.cloudViz.point=f.util.createConstructor(a)
}(this));
(function(e){var f=e.cloudViz||{},d=f.dvcore||{},a=e.dv||{},b=e.d3||{},c=Object.create(d);
c.init=function(g){Object.getPrototypeOf(c).init.apply(this,arguments);
this._type="bar";
this._chart=a.chart();
this._minTickSpace=60;
return this
};
c._initDefaultOptions=function(){var g={normalized:false,position:"dodge",dualYAxis:false,clickHandler:null,formats:{x:"decimal",y:"decimal"},tooltipContent:null};
return Object.getPrototypeOf(c)._initDefaultOptions.call(this,g)
};
c.reset=function(){Object.getPrototypeOf(c).reset.apply(this,arguments);
var h=this._options,g=b.select(h.parent);
g.selectAll(".axis-y.axis-index-1").remove()
};
c._setChartTypeOptions=function(){var h=this._chart,g=this._options;
h.layers([a.geom.bar().each("start",function(k,j){b.select(this).attr("legend-group",k.fill)
})]).map("fill",this._getPropMapping("series"),a.scale.color().values(g.colors)).guide("fill",this._legend).position(g.position).coord(a.coord.cartesian().flip(g.flip));
h._layers[0].on("click",this._eventMap.click?this._eventMap.click:null);
this._addBehaviors(h.layers()[0],g);
this._mapPositionScales(h,g)
};
c._mapPositionScales=function(m,s){var i=this._isSmallChart(),l=[0,i?10:15],h=this._applyForceZero(this._constructScale("y")).rangePadding(l),j=this._getPropMapping("series"),r=this._getPropMapping("y"),g=this._getPropMapping("x"),o=i?Math.max(0.3,Math.min(0.6,this._getChartWidth()/this._dataAdapter.uniqueXValues().length/200)):Math.min(0.6,Math.max(0.05,this._getChartWidth()/4000)),n=i?0.3:0.5,q=this;
if(this._dataAdapter.isOvertime()){o=0.05
}if(s.normalized||(s.dualYAxis&&(this._options.position==="identity"||this._options.position==="dodge"))){var p=q._dataAdapter.uniqueFillValues();
p.forEach(function(v,t){var u=(0===t)?h:h.copy();
u.includeInDomain(function(z,w){return z.data[j]===q._dataAdapter.uniqueFillValues()[t]
});
if(t>0){m.map("y",r,u,t)
}})
}else{var k=m.getExplicitScalesMap().y;
if(k){delete k[1]
}}m.map("y",r,h,0);
m.map("x",this._getPropMapping("x"),a.scale.ordinal().padding(o).outerPadding(n).reverse(s.flip))
};
c._addBehaviors=function(k,j){var g=b.select(j.parent),l,h=this._dataAdapter,i=this;
if(!this._isSmallChart()&&j.interactive){k.behaviors([a.behavior.rollover().orientation(j.flip?"top":"right").content(function(s,p,n){if(j.tooltipContent){return j.tooltipContent.call(this,s,p,n)
}var t=this.__geom.getExplicitScale("group"),u=s.panel.yScale(s),q=i._yLabelFormat(u.scaleIndex()),r='<span class="metric-value">'+q(s.y)+'</span><span class="metric-name">'+s.data[i._getPropMapping("seriesLabel")]+"</span>",o=h.dateGranularity(),v=h.l10n.dateFormat.fullFormat,m=h.isOvertime()?i._formatTime(new Date(s.x),i._timeGranTemplate(o,v),o):s.x;
if(t&&t.mapping()){r='<span class="series-name">'+m+"</span>"+r
}return r
}).showTooltip(function(r,n,m,q,p){var o=b.select(this);
if(!o.classed("path-inactive")){p._showTip.call(this,r,n,m,p);
clearTimeout(l);
g.selectAll(".bar-geom").classed("cv-medium-duration",false).classed("cv-unselected",function(s){return r!==s
});
g.selectAll(".cv-legend-marker").classed("cv-unselected",function(s){return s.id!==r.fill
}).classed("cv-medium-duration",false);
if(i._eventMap.mouseover){i._eventMap.mouseover.call(this,r,n,m,q)
}}}).hideTooltip(function(r,n,m,q,p){var o=b.select(this);
if(!o.classed("path-inactive")){p._removeTip.call(this,r,n,m,p);
l=setTimeout(function(){g.selectAll(".bar-geom, .cv-legend-marker").classed("cv-unselected",false).classed("cv-medium-duration",true);
if(i._eventMap.mouseout){i._eventMap.mouseout.call(this,r,n,m,q)
}},400)
}})])
}};
c._drawSmall=function(){var j=this._chart,i=this._options,k,g=(i.flip)?undefined:10,h=this;
if(i.flip){k=a.guide.axis().tickDx(function(m,l){return b.select(this).select("span").node().offsetWidth
}).tickDy(function(m,l){return -b.select(this).select("span").node().offsetHeight
}).tickSize(0)
}else{k=a.guide.axis().tickSize(0).tickDy(function(m,l){return(l%2===0)?-8:-26
})
}if(this._dataAdapter.isOvertime()){k.tickValues(b.extent(this._dataAdapter.data()[this._getPropMapping("x")])).tickFormat(h._timeSmallXFormat()).tickAnchor(function(m,l){return l>0?"end":"start"
}).tickDx(function(n,m){var l=j.getTrainedScale("x").rangeBand()/2;
return m>0?l:-l
}).tickDy(-8)
}else{k.tickFormat(function(m,l){return h._truncateLabel(m,g)
})
}j.guide("x",k.title(this._dataAdapter.xAxisTitle())).guide("y",a.guide.axis().ticks(0).tickSize(0).tickFormat(function(m,l){return""
}).title(this._dataAdapter.yAxisTitle()));
this._checkNormalized()
};
c._drawLarge=function(){var m=this._chart,q=this._options,p=this,l=function(r){return Math.max(2,Math.min(5,r/75))
},i=a.guide.axis().tickSize(0),h=a.guide.axis().ticks(l),n;
if(q.dualYAxis&&(this._options.position==="identity"||this._options.position==="dodge")){var k=p._dataAdapter.getUniqueFillExtent(0),j=p._dataAdapter.getUniqueFillExtent(1);
h.tickSize(15).tickFormat(this._yTickFormat(0,k)).title(this._yTitleFormat(0,k));
n=a.guide.axis().ticks(l).tickFormat(this._yTickFormat(1,j)).title(this._yTitleFormat(1,j)).orientation("right").tickSize(15);
m.guide("y",n,1)
}else{h.tickFormat(this._yTickFormat(0)).title(this._yTitleFormat(0));
m.guide("y","none",1)
}if(q.flip){i.tickDx(-10)
}else{i.tickDy(function(s,r){return(r%2===0)?-8:-26
});
h.tickDx(-10);
if(n){n.tickDx(-10)
}}if(this._dataAdapter.isOvertime()){var g={},o=0;
m._data[this._getPropMapping("x")].forEach(function(s,r){if(!g[+new Date(s)]){o++;
g[+new Date(s)]=1
}});
i.tickDy(-8).tickFormat(this._timeXTickFormat(o)).htmlLabels(true)
}else{i.tickFormat(function(s,r){return p._truncateLabel(s)
})
}m.guide("x",i.title(this._dataAdapter.xAxisTitle())).guide("y",h);
this._checkNormalized()
};
c._timeXTickValidator=function(h){var g=this;
return function(o,k){var m=g._chart.getTrainedScale("x"),j=a.util.scaleRange(m),l=j[1]-j[0],n=Math.ceil(g._minTickSpace/(l/h));
return k%n===0
}
};
c._timeXTickFormat=function(g){return Object.getPrototypeOf(c)._timeXTickFormat.call(this,this._timeXTickValidator(g))
};
c._isNormalized=function(){var h=this._options,g=this._isSmallChart()?1:2;
return h.normalized||(h.dualYAxis&&this._dataAdapter.uniqueFillValues().length>g&&(h.position==="identity"||h.position==="dodge"))
};
e.cloudViz.bar=f.util.createConstructor(c)
}(this));
(function(d){var e=d.cloudViz||{},c=e.dvcore||{},a=d.dv||{},b=d.d3||{},f=Object.create(c);
f.init=function(g){Object.getPrototypeOf(f).init.apply(this,arguments);
this._type="donut";
this._chart=a.chart();
return this
};
f._initDefaultOptions=function(){var g={maxSlices:6,innerRadius:"45%",outerRadius:"35%",clickHandler:null,formats:{x:"decimal",y:"decimal"},tooltipContent:null};
return Object.getPrototypeOf(f)._initDefaultOptions.call(this,g)
};
f._buildLegend=function(){var g=this,h=this._options,j=Object.getPrototypeOf(f)._buildLegend.call(this,"x","x");
this._dataAdapter.processLabelData(j);
if(j!=="none"){if(this._dataAdapter.numberOfFacets()==1){var i=this._dataAdapter.labelData().cvtextvallabel.map(function(l,k){return g._yLabelFormat(0)(l)
});
j.values(i)
}if(!h.interactive&&(!h.legendOrientation||h.legendOrientation==="top")){j.padding({bottom:20})
}}return j
};
f._getSeriesTotal=function(k){var g=this._dataAdapter,n=g.data(),h=n[this._getPropMapping("y")],o=n[this._getPropMapping("series")],j,l=o.length,m=0;
for(j=0;
j<l;
++j){if(o[j]+""===k+""){m+=h[j]
}}return m
};
f._createSeriesStates=function(){var h=this._options;
if("data" in this._changedOptions&&this._changedOptions.data){this._seriesState.removeStatesByType("standard");
var k=a.util.uniq(this._dataAdapter.data()[this._getPropMapping("x")]);
var j=k.length;
while(j--){var g=k[j];
this._seriesState.insertState(g,g,"standard")
}}if("targetValues" in this._changedOptions){if(h.targetValues){this._seriesState.removeStatesByType("target");
this._seriesState.appendState(h.targetLabel||this._dataAdapter.l10n.labels.dvcore.target,"target","target")
}}};
f._getCategoryTotal=function(g){if(this._dataAdapter.numberOfFacets()!==1){return""
}var n=this._dataAdapter.data(),h=n[this._getPropMapping("y")],j=n[this._getPropMapping("x")],k,l=j.length,m=0;
for(k=0;
k<l;
++k){if(j[k]+""===g+""){m+=h[k]
}}return m
};
f._shouldHideLabels=function(g){var h=g.panel.bounds();
return g.y<=0.05||(Math.min(h.width,h.height)/2<80)
};
f._setChartTypeOptions=function(){var m=this._chart,i=this._dataAdapter,k=this._options,g=b.select(k.parent),j=this,h=k.colors.slice(0);
if(k.interactive){m.padding({top:10})
}if(i.showOtherCategory()){h.splice(k.maxSlices-1,0,"#ccc")
}var n=[a.geom.bar().position("fill").set("stroke","#fff").each("start",function(p,o){b.select(this).attr("legend-group",p.fill)
})];
n[0].on("click",this._eventMap.click?this._eventMap.click:null);
var l=j._dataAdapter.labelData();
n.push(a.geom.text().data(l).map("label","cvtextperclabel").set("stroke","none").position("fill").textAnchor(function(q,o){var p=(q.y0+q.y/2)*100;
if(p<50){return"start"
}if(p>50){return"end"
}return"middle"
}).each("start",function(p,o){b.select(this).classed("slice-label",true).classed("hidden",j._shouldHideLabels.call(j,p)).attr("dy",".35em").attr("legend-group",p.fill)
}).set("alpha",function(q,p,o){return j._shouldHideLabels.call(j,q)?0:1
}).dx(function(v,q){var r=v.panel.xOuterScale().range(),p=r[1]-r[0],o=p?p/2:0,s=a.util.getPercentValue(k.outerRadius,o),t=30,u=(v.y0+v.y/2)*100;
return o+s-t
}).dy(function(r,p){var o=-r.panel._bounds.width/2*r.y,q=(r.y0+r.y/2)*100;
if(q<10){o-=(10-q)/2
}if(q>90){o+=(10-(100-q))/2
}if(q<=50&&q>40){o+=(10-(50-q))/2
}if(q>50&&q<60){o-=(10-(q-50))/2
}return o
}));
m.layers(n).map("group","cvdonutorder").map("x",this._getPropMapping("series"),a.scale.ordinal()).map("y",this._getPropMapping("y"),this._constructScale("y")).map("fill",this._getPropMapping("x"),a.scale.color().values(h)).guide("fill",this._legend).guide(["x","y"],"none").coord(a.coord.polar().flip(true).innerRadius(k.innerRadius).outerRadius(k.outerRadius)).postrender(function(){var p=b.select(k.parent).select(".cv-wrapper"),q=p.selectAll(".cv-donut-facet-labels").data([0]),o=j._dataAdapter;
q.enter().append("div").classed("cv-donut-facet-labels",true);
q.exit().remove();
var r=q.selectAll(".cv-donut-facet-label").data(this.facet()._panels),s=r.enter().append("div").classed("cv-donut-facet-label",true);
r.each(function(C,w){var t=C.bounds(),G=b.select(this),B=Math.min(t.width,t.height)/2,A=t.height/2-B,D=a.util.getPercentValue(k.innerRadius,B),I=D<25?"small":D>50?"large":"medium",u=I==="large"?D*2:t.width,v=I==="large"?t.left+(t.width/2)-(u/2):t.left,E=(I==="large")?t.top+(t.height/2)-27:t.top+A-10;
G.style("top",E+"px").style("width",u+"px").style("left",v+"px").classed("cv-donut-small-facet cv-donut-medium-facet cv-donut-large-facet",false).classed("cv-donut-"+I+"-facet",true);
var z=G.selectAll(".cv-donut-label-number").data([0]);
z.enter().append("div").classed("cv-donut-label-number",true);
var H=j._getSeriesTotal(C.xFacetTitle());
z.text(j._yLabelFormat(C._facetIndex)(H));
var F=G.selectAll(".cv-donut-label-title").data([0]);
F.enter().append("div").classed("cv-donut-label-title",true);
F.text(o.yAxisTitle(C._facetIndex));
if(I==="medium"){z.style("top",t.height/2-A+"px")
}});
r.exit().remove()
});
this._addBehaviors(n[0],k)
};
f._addBehaviors=function(k,j){var g=b.select(j.parent),m,h=this._dataAdapter,i=this,l=function(p,o,n){if(!p.data.hasOwnProperty(o.mapping())){return""
}return'<span class="metric-value">'+n(p.data[o.mapping()])+'</span><span class="metric-name">'+o.mapping()+"</span>"
};
if(!this._isSmallChart()&&j.interactive){k.behaviors([a.behavior.rollover().content(function(t,q,o){if(j.tooltipContent){return j.tooltipContent.call(this,t,q,o)
}var u=this.__geom.getExplicitScale("group"),v=t.panel.yScale(t),r=i._yLabelFormat(v.scaleIndex()),s='<span class="metric-value">'+r(t.data[i._getPropMapping("y")])+'</span><span class="metric-name">'+t.data[i._getPropMapping("seriesLabel")]+"</span>",p=i._dataAdapter.dateGranularity(),w=h.l10n.dateFormat.fullFormat,n=a.util.isDate(t.fill)?i._formatTime(t.fill,i._timeGranTemplate(p,w),p):t.fill;
if(u&&u.mapping()){s='<span class="series-name">'+n+"</span>"+s
}return s
}).showTooltip(function(s,o,n,r,q){var p=b.select(this);
if(!p.classed("path-inactive")){q._showTip.call(this,s,o,n,q);
clearTimeout(m);
g.selectAll(".bar-geom").classed("cv-medium-duration",false).classed("cv-unselected",function(t){return s!==t
});
g.selectAll(".text-geom").classed("cv-medium-duration",false).classed("cv-unselected",function(t){return s.group!==t.group
}).classed("cv-selected",function(t){return s.group===t.group
});
g.selectAll(".cv-legend-marker").classed("cv-unselected",function(t){return t.id!==s.fill
}).classed("cv-medium-duration",false);
if(i._eventMap.mouseover){i._eventMap.mouseover.call(this,s,o,n,r)
}}}).hideTooltip(function(s,o,n,r,q){var p=b.select(this);
if(!p.classed("path-inactive")){q._removeTip.call(this,s,o,n,q);
m=setTimeout(function(){g.selectAll(".bar-geom, .cv-legend-marker").classed("cv-unselected",false).classed("cv-medium-duration",true);
g.selectAll(".text-geom").classed("cv-unselected cv-selected",false).classed("cv-medium-duration",true);
if(i._eventMap.mouseout){i._eventMap.mouseout.call(this,s,o,n,r)
}},400)
}})])
}};
f._drawSmall=function(){var h=this._chart,g=this._options;
h.facet(a.facet.wrap().group(this._getPropMapping("series")).scales("free").numColumns(1).titleFormat(undefined))
};
f._drawLarge=function(){var g=this._chart;
g.facet(a.facet.wrap().group(this._getPropMapping("series")).scales("free").numColumns(3).titleFormat(undefined))
};
d.cloudViz.donut=e.util.createConstructor(f)
}(this));
(function(a){a.cloudViz.interactiveLegend=function(){var v=10,w=110,q=110,n,e,f=["top","right","left"],s,i,d,l,c,h,k,p,u=true,g,o,b,t=null,j=null,m,r={};
r._render=function(z,B,A){this._initSVG(B);
this._sizeAndPositionLegendEntries();
this._positionLegend()
};
r._initSVG=function(A){b=d3.select(n).selectAll(".cv-legend").data([0]);
b.enter().append("div").classed("cv-legend",true);
o=this._createLegendEntries(b,A);
g=Math.floor(this._getLegendContainingWidth()/o.size());
if(f.indexOf(e)>-1){this._calculatedLegendOrientation=e
}else{this._calculatedLegendOrientation="top"
}var z=a.cloudViz.core._isSmallChart(s);
if(g<w&&!z&&(this._calculatedLegendOrientation=="top"||this._calculatedLegendOrientation=="bottom")){this._calculatedLegendOrientation="left"
}switch(this._calculatedLegendOrientation){case"top":case"bottom":g=Math.max(g,w);
b.style("height",null);
l=false;
break;
case"left":case"right":g=q;
l=true;
break
}f.forEach(dv.util.bind(function(B){b.classed(B,this._calculatedLegendOrientation===B)
},this))
};
r._getAdjustedDimensions=function(A){var z=b.node();
switch(this._calculatedLegendOrientation){case"top":A.top+=this._getUsedHeight();
break;
case"right":A.width-=this._getUsedWidth();
break;
case"left":A.left+=this._getUsedWidth();
break;
case"bottom":A.height-=this._getUsedHeight();
break
}return A
};
r._createLegendEntries=function(E,D){var G=this,H=p.getStateObjects(),B,C,A,z;
for(A in D){z=D[A][0];
m=z._mapping
}B=E.selectAll(".cv-legend-entry").data(H);
C=B.enter().append("div").attr("class",function(I){return"cv-legend-entry cv-legend-"+I.type+"-entry"
});
C.append("div").classed("cv-legend-title",true);
var F=C.append("div").classed("cv-legend-details",true);
F.append("div").classed("cv-legend-marker",true);
F.append("div").classed("cv-legend-num",true);
B.exit().on("click",null).remove();
B.each(function(K,I){var J=d3.select(this);
J.select(".cv-legend-title").text(K.name);
J.select(".cv-legend-num").text((c&&c.length>I)?c[I]:"");
J.select(".cv-legend-marker").attr("class","cv-legend-marker "+h).style("background-color",function(M){var L=z.mapValue(M.id);
return L?L:null
})
});
B.classed("inactive",function(J,I){return u&&!J.enabled
});
B.on("click",function(J,I){if(u){p.enableStateByIndex(I,!J.enabled)
}});
return B
};
r._onSeriesEnableChange=function(z,A){if(u){o.filter(function(B){return B.id===A.id&&B.type===A.type
}).classed("inactive",!A.enabled)
}};
r._positionLegend=function(){var z={top:0,left:0};
switch(this._calculatedLegendOrientation){case"bottom":z.top=i-b.node().offsetHeight;
break;
case"right":z.left=s-q;
break
}b.style("top",z.top+"px").style("left",z.left+"px")
};
r._sizeAndPositionLegendEntries=function(){if(l){o.each(function(J,H,I){d3.select(this).style("width",g+"px").select(".cv-legend-title").style("height",null)
})
}else{var C,z,G=0,A=false;
var F=o[0].length;
var E=F*g;
var B=this._getLegendContainingWidth();
var D=0;
if(E<B&&E+F>B){D=B-E
}b.style("width",(E>B&&!l)?B+"px":"");
o.each(function(K,I,J){C=d3.select(this);
var H=g;
if(D>0){H+=1;
D-=1
}C.style("width",H+"px");
z=C.select(".cv-legend-title").style("height",null).node().offsetHeight;
if(z!==G){A=true;
G=Math.max(z,G)
}});
if(A){o.selectAll(".cv-legend-title").style("height",G+"px")
}}};
r._getLegendContainingWidth=function(){return s
};
r._getUsedWidth=function(){return l?q+v:0
};
r._getUsedHeight=function(){if(l){return 0
}else{return b.node().offsetHeight||0
}};
r.destroy=function(){b.remove()
};
r.parent=function(z){if(!arguments.length){return n
}n=z;
return r
};
r.minLegendEntryWidth=function(z){if(!arguments.length){return w
}w=z;
return r
};
r.legendVerticalWidth=function(z){if(!arguments.length){return q
}q=+z;
return r
};
r.values=function(z){if(!arguments.length){return c
}c=z;
return r
};
r.type=function(z){if(!arguments.length){return h
}h=z;
return r
};
r.chartWidth=function(z){if(!arguments.length){return s
}s=z;
return r
};
r.chartHeight=function(z){if(!arguments.length){return i
}i=z;
return r
};
r.chartPadding=function(z){if(!arguments.length){return d
}d=z;
return r
};
r.seriesState=function(z){if(!arguments.length){return p
}p=z;
p.on("enableChange.legend",this._onSeriesEnableChange);
return r
};
r.validOrientations=function(z){if(!arguments.length){return f
}f=z;
return r
};
r.orientation=function(z){if(!arguments.length){return e
}e=z;
return r
};
r.interactive=function(z){if(!arguments.length){return u
}u=z;
return r
};
r.mapping=function(){return m
};
r.isVertical=function(){return l
};
return r
}
}(this));
(function(a){d3.anomaly=function(){var R={},am,J={x:"date",y:"deviation"},af,s=[50,25],m=true,ap=6,d=false,aa=null,ad,aq,I=7,ai,ab,i,Y=d3.dispatch("select","mouseover","mouseout"),ao,X=d3.time.scale(),W=d3.scale.linear(),C,e,c,k,D,V,Z,f,ac,aj,g,l,v;
var an=8,H=1,r=86400000;
d3.rebind(R,Y,"on");
R.data=function(p){if(!arguments.length){return am
}am=p;
v=null;
return R
};
R.mappings=function(p){if(!arguments.length){return J
}J=w(J,p);
return R
};
R.xUpperLimit=function(p){if(!arguments.length){return ab
}ab=p;
return R
};
R.xLowerLimit=function(p){if(!arguments.length){return i
}i=p;
return R
};
R.normalizePositive=function(p){if(!arguments.length){return d
}d=p;
return R
};
R.xTicks=function(ar,p){if(!arguments.length){return p!==undefined?[I,ai]:this.xTicks
}var at=!!(ar&&ar.constructor&&ar.call&&ar.apply);
I=(at)?d3.functor(ar):ar;
ai=at?p:undefined;
return this
};
R.bins=function(p){if(!arguments.length){return ap
}ap=p;
return R
};
R.size=function(p){if(!arguments.length){return s
}s=p;
return R
};
R.interactive=function(p){if(!arguments.length){return m
}m=p;
return R
};
R.parent=function(p){if(!arguments.length){return aa
}aa=p;
return R
};
R.anomalyWidth=function(){return ad
};
R.anomalyHeight=function(){return aq
};
R.layout=function(){if(!R.data()||!R.data().length){throw new A()
}if(!R.parent()){throw new K()
}ac=ak("x");
aj=ak("y");
Q();
M();
l=h();
k=L();
W.domain([V[0],V[V.length-1]]);
T();
l.attr("transform","translate("+af.left+","+af.top+")");
u(l,c,e);
S();
ah();
return R
};
R.nodes=function(p){if(!g){throw new Error("layout must be called before nodes may be requested.")
}g.selectAll(".anom-anomaly").each(p)
};
function w(p,ar){for(var at in ar){p[at]=ar[at]
}return p
}function T(){var p=l.append("g").classed("temp-axis",true);
u(p,s[0],s[1]);
af=U(p);
c=s[0]-af.left-af.right;
e=s[1]-af.top-af.bottom;
p.remove()
}function U(at){var au=at.node().getBBox(),ar=Math.abs(au.x),p=Math.abs(au.y);
return{left:ar,top:p,right:au.width-s[0]-ar,bottom:au.height-s[1]-p}
}function Q(){var p=j(am,function(aw){return Date.parse(aw[ac])
},[i,ab]);
var ar=j(am,function(aw){return aw[aj]
});
X.domain(p);
var av=X.ticks(I,ai);
var au=(+av[1])-(+av[0]);
p[1]=au+(+av[av.length-1]);
p[0]=(+av[0]>p[0])?(+av[0]-au):p[0];
X.domain(p);
f=X.ticks(I,ai);
var at=Math.max(Math.abs(ar[0]),Math.abs(ar[1]));
if(d){W.domain([0,at]);
C=d3.scale.linear().domain([-at,at])
}else{W.domain([-at,at]);
C=d3.scale.linear().domain(W.domain())
}C.domain([0,1/10,1/5,3/10,2/5,0.5,3/5,7/10,4/5,9/10,1].map(C.invert));
C.range(["#3C476F","#485485","#53659C","#6C7CAF","#99A2BC","#C5C5C5","#ACC997","#90C867","#7CBC4B","#6FA744","#64913E"])
}function j(au,p,at){var ar=[];
if(arguments.length<3||(at[0]===undefined&&at[1]===undefined)){ar=d3.extent(au,p)
}else{ar[0]=(at[0]===undefined)?d3.min(au,p):at[0];
ar[1]=(at[1]===undefined)?d3.max(au,p):at[1]
}return ar
}function M(){Z=d3.svg.brush().x(X).y(W).on("brushstart",N).on("brush",o).on("brushend",al)
}function N(ar){E()
}function o(ar){l.selectAll(".extent").style("opacity",1);
E()
}function al(ar){l.selectAll(".extent").style("opacity",0);
E()
}function E(){var ar=Z.extent(),p={left:Math.min(X(ar[0][0]),X(ar[1][0])),right:Math.max(X(ar[0][0]),X(ar[1][0])),top:Math.min(W(ar[0][1]),W(ar[1][1])),bottom:Math.max(W(ar[0][1]),W(ar[1][1]))};
var at=l.selectAll(".anom-anomaly").filter(function(av,au){return O({left:av.bounds.x,right:av.bounds.x+av.bounds.width,top:av.bounds.y,bottom:av.bounds.y+av.bounds.height},p)
});
if(v&&b(at[0],v[0])){return
}v=at;
Y.select(at)
}function b(au,at){if(au.length!=at.length){return false
}for(var p=0,ar=au.length;
p<ar;
p++){if(at.indexOf(au[p])===-1){return false
}}return true
}function O(ar,p){return !(p.left>ar.right||p.right<ar.left||p.top>ar.bottom||p.bottom<ar.top)
}function h(){g=d3.select(aa);
var ar=g.selectAll("svg").data([am]);
ar.enter().append("svg");
ar.exit().remove();
ar.attr("width",s[0]).attr("height",s[1]);
var p=ar.selectAll(".anom-container").data([0]);
p.enter().append("g").classed("anom-container",true);
return p
}function L(){V=W.ticks(ap);
var p=V[1]-V[0];
V.push(p+V[V.length-1]);
if(!d){V.unshift(V[0]-p)
}am=G(am);
n(am);
var ar=B(am);
F(V,ar);
return ar
}function G(at,p){var ar=X.domain();
return at.filter(function(av){var au=new Date(av[ac]);
return au>=ar[0]&&au<ar[1]
})
}function n(p){p.sort(function(at,ar){at=new Date(at[ac]);
ar=new Date(ar[ac]);
return at<ar?-1:at>ar?1:0
})
}function B(p){return d3.nest().key(function(av){var ar=Date.parse(av[ac]),au=0;
var at=-1,aw=f.length;
while(++at<aw){if(+f[at]>+ar){break
}au=at
}return +f[au]
}).entries(p)
}function F(p,ar){ar.forEach(function(at){at.values=d3.layout.histogram().bins(p).value(function(au){return d?Math.abs(au[aj]):au[aj]
})(at.values);
D=at.values[0].dx
})
}function P(ar){var ay=new Date(0),av=f.length,ax=Math.max(Math.ceil((f.length-1)/(ar/70)),1),aw=d3.time.format("%b %e, %Y"),au=d3.time.format("%b %e"),p=d3.time.format("%a %e"),at=d3.time.format("%I:%M %p");
return function(aB,az){var aA="";
if(az===av-1||(az%ax!==0)){return""
}else{if(az===0||ay.getYear()!==aB.getYear()){aA=aw(aB)
}else{if(ay.getMonth()!==aB.getMonth()){aA=au(aB)
}else{if(ay.getDate()!==aB.getDate()){aA=p(aB)
}else{if(ay.getHours()!==aB.getHours()){aA=at(aB)
}}}}}ay=aB;
return aA
}
}function u(ar,az,ax){var aw=f.length,aA=(f.length>1&&(+f[1]-+f[0]<=r)),au;
X.rangeRound([0,az]);
W.rangeRound([ax,0]);
var ay=ar.selectAll(".anom-axes").data([0]);
ay.enter().append("g").classed("anom-axes",true);
var av=ay.selectAll(".anom-axis").data(["x","y"]);
av.enter().append("g").attr("class",function(aB){return"anom-"+aB+" anom-axis"
});
var at=ay.selectAll(".anom-x").attr("transform","translate(0,"+ax+")").call(d3.svg.axis().scale(X).ticks(I,ai).orient("bottom").tickSize(-ax).tickPadding(20).tickFormat(P(az)));
at.selectAll("text").style("text-anchor","start");
at.selectAll("line").style("opacity",function(aC,aB){if(aB===aw-1){return 0
}if(aA&&(aC.getDay()===6||aC.getDay()===1)&&aC.getHours()===0&&aB<aw-1){return 0.3
}return null
});
var p=ay.selectAll(".anom-y").call(d3.svg.axis().scale(W).tickValues(V).orient("left").tickSize(-az).tickPadding(10).tickFormat(function(aC,aB){if(aB===0||aB===Math.floor(V.length/2)||aB===(V.length-1)){return(Math.round(aC*100000)/100000)+"%"
}return""
}));
if(!d){p.selectAll("line").filter(function(aC,aB){return aC===0
}).style("stroke-dasharray","4 4").style("opacity",0.7)
}}function ah(){var av=Math.round((V.length>1)?W(V[0])-W(V[1]):e)-1,az=Math.round(ae(av))-1;
var ax=l.selectAll(".anom-plot").data([k]);
ax.enter().append("g").classed("anom-plot",true);
ax.exit().remove();
var aw=ax.selectAll(".anom-column").data(function(aB){return aB
});
aw.enter().append("g").classed("anom-column",true);
aw.exit().remove();
aw.attr("transform",function(aB){return"translate("+X(+aB.key)+",0)"
});
var aA=aw.selectAll(".anom-row").data(function(aB){return aB.values
});
aA.enter().append("g").classed("anom-row",true);
aA.exit().remove();
aA.attr("transform",function(aC,aB){return"translate(0,"+(W(V[aB])-av)+")"
});
var ar=aA.selectAll(".anom-anomaly").data(function(aB){return aB
});
var ay=ar.enter().append("g").classed("anom-anomaly",true);
ar.attr("transform",function(aC,aB){var aD=t(d?Math.abs(aC[aj]):aC[aj]);
if(aC[aj]>=0){aD+=D
}aC.bounds={x:X(Date.parse(aC[ac]))+(aB*(az+H)+H),y:W(aD),width:az,height:av};
return"translate("+(aB*(az+H)+H)+",0)"
});
ar.exit().remove();
ay.append("rect").classed("anom-cell",true).attr("x",az/2).attr("y",av/2).attr("width",0).attr("height",0);
ar.selectAll(".anom-cell").attr("fill",function(aB){var aC=t(d?Math.abs(aB[aj]):aB[aj]);
if(d&&aB[aj]<0){aC*=-1
}return C(aC)
}).transition().duration(500).attr("x",0).attr("y",0).attr("width",az).attr("height",av);
var au=ay.append("g").classed("anom-select",true);
au.append("path").classed("outer-border",true);
au.append("path").classed("inner-border",true);
var at=ar.selectAll(".anom-select");
at.select(".outer-border").attr("d",q(0,0,az+0.5,av+0.5,1));
if(az>3){at.select(".inner-border").attr("d",q(0,0,az+1,av+1,2))
}var p=ay.append("rect").classed("anom-hit-area",true);
p.on("mouseover",function(aC,aB){Y.mouseover(this,aC,aB)
}).on("mouseout",function(aC,aB){Y.mouseout(this,aC,aB)
}).on("mousedown",function(aE,aB){Z.clear();
var aD=d3.mouse(l.node()),aF=X.invert(aD[0]),aC=W.invert(aD[1]);
Z.extent([[aF,aC],[aF,aC]])
}).on("click",function(aC,aB){Y.select(d3.select(this))
}).style("cursor","crosshair").style("opacity",0).attr("x",0).attr("y",0).attr("width",az).attr("height",av)
}function S(){var p=l.selectAll(".anom-plot").data([0]);
p.enter().append("g").classed("anom-plot",true);
p.exit().remove();
p.call(Z)
}function q(ar,av,au,p,at){return"M"+at+","+at+"L"+(au-at*2)+","+at+"L"+(au-at*2)+","+(p-at*2)+"L"+at+","+(p-at*2)+"z"
}function t(at){var p=-1,ar=V.length;
while(++p<ar){if(at>=0&&V[p]+D>at){return V[p]
}if(at<0&&V[p]+D>at){return V[p]+D
}}return V[0]
}function ae(ar){var p=((f.length>1)?X(f[1])-X(f[0]):c)-an,at=z();
ad=p/at;
return(ad>ar)?ar:ad
}function z(){var p=0;
k.forEach(function(ar){ar.values.forEach(function(at){p=Math.max(at.length,p)
})
});
return p
}function ak(p){if(J[p]===undefined){throw new ag(p)
}return J[p]
}function ag(p){this.type="MappingNotDefinedException";
this.message="The mapping for property "+p+" was not defined.";
this.toString=function(){return this.type+" - "+this.message
}
}function A(){this.type="EmptyDataException";
this.message="The data is empty or null";
this.toString=function(){return this.type+" - "+this.message
}
}function K(){this.type="ParentNotSpecifiedException";
this.message="A p was not specified for this visualization";
this.toString=function(){return this.type+" - "+this.message
}
}return R
}
}(this));
(function(e){var g=e.cloudViz||{},a=g.core||{},c=e.dv||{},d=e.d3||{},b=Object.create(a),f=400;
b.init=function(h){this._type="pathing";
this._initDefaultOptions();
this.setOptions(h);
this._pathLocked=null;
this._pathedObj=null;
this._activePaths=[];
this._lineLocked=null;
this._lastSide=0;
return this
};
b._initDefaultOptions=function(){var i="Visits",h={mappings:{},colors:["#3287d2","#9b8ce6","#d755a5","#fa5a50","#f0a01e","#c3d250","#5faf69","#1ebed7","#5a6eaa","#78b4f5","#aa5fa5","#f0557d","#e8782d","#f5c841","#8cc350","#3cb5a0","#286eaf","#826ee1","#b93282","#f04641","#e18c00","#a0b400","#50965a","#00a0be","#465a87","#4196e6","#964196","#dc3c69","#dc5f00","#e6b43c","#7daf4b","#32a08c"],nodeWidth:100,minNodeHeight:1,avgNodeHeight:30,padding:{top:80,left:30,right:30,bottom:20},metricName:i,minNodeHorzPadding:80,nodeVertPadding:34,iterations:32,pivotNode:null,collapseNode:null,expandNode:null,pathSelected:null};
return Object.getPrototypeOf(b)._initDefaultOptions.call(this,h)
};
b._onAutoResize=function(){this.render()
};
b.reset=function(){Object.getPrototypeOf(b).reset.apply(this,arguments)
};
b._preRender=function(){Object.getPrototypeOf(b)._preRender.apply(this);
var u=this._options,s=d.select(u.parent),r=u.padding;
var p=s.selectAll(".pathing-cv-info-wrapper").data([0]);
p.enter().insert("div",":first-child").classed("pathing-cv-info-wrapper",true);
var h=p.selectAll(".pathing-cv-wrapper").data([0]);
h.enter().insert("div",":first-child").classed("pathing-cv-wrapper",true);
var i=h.selectAll(".pathing-cv-container").data([0]);
i.enter().insert("div",":first-child").classed("pathing-cv-container",true);
var n=i.selectAll(".pathing-svg").data([0]);
n.enter().append("svg").classed("pathing-svg",true);
var t=n.selectAll(".pathing-svg-container").data([0]);
t.enter().append("g").classed("pathing-svg-container",true);
t.attr("transform","translate("+r.left+","+r.top+")");
var j=p.selectAll(".pathing-cv-info-pane").data([0]);
j.enter().append("div").classed("pathing-cv-info-pane",true);
j.exit().remove();
var m=j.selectAll(".info-pane-content").data([0]);
m.enter().append("div").classed("info-pane-content",true);
m.exit().remove();
var k=m.selectAll(".pathing-cv-info-title").data([0]);
k.enter().append("div").classed("pathing-cv-info-title",true);
k.exit().remove();
var l=m.selectAll(".pathing-cv-info-value").data([0]);
l.enter().append("div").classed("pathing-cv-info-value",true);
l.exit().remove();
var o=m.selectAll(".pathing-cv-info-paths").data([0]);
o.enter().append("div").classed("pathing-cv-info-paths",true);
o.exit().remove();
this._sizeChart();
this._createGradients(n);
var q=this._pathedObj;
if(this._changedOptions&&this._changedOptions.data&&q){if(this._isDataObjNode(q.data)){this._unlockNode(q.data,q.elem)()
}else{this._unlockLink(q.data,q.elem)()
}}else{i.on("mousemove.node",null).on("click.node",null).on("click.link",null);
this._removePathOverlays(i);
this._removeNodeOptions(true);
this._defaultInformation()
}},b._render=function(){Object.getPrototypeOf(b)._render.apply(this);
if(!this._dataAdapter.isValidPathingData()){return
}this._createDiagram();
var h=this._pathedObj;
if(this._activePaths.length&&h){if(this._isDataObjNode(h.data)){this._renderNodePaths(h.data,h.elem,true);
this._showNodeOptions(h.data,h.elem)
}else{this._renderLinkPaths(h.data,h.elem,true)
}}};
b._postRender=function(){Object.getPrototypeOf(b)._postRender.apply(this)
};
b._sizeChart=function(v){clearTimeout(this._wrapperAnimation);
clearTimeout(this._scrollAnimation);
var k=this._options,H=this._dataAdapter.data(),p=d.select(k.parent),B=this,u=p.selectAll(".pathing-cv-info-wrapper"),m=u.selectAll(".pathing-cv-wrapper"),s=m.selectAll(".pathing-cv-container"),j=u.selectAll(".pathing-cv-info-pane"),r=k.parent.offsetWidth,i=k.parent.offsetHeight,D=c.util.getPercentValue(k.width,r),w=c.util.getPercentValue(k.height,i),t=D-parseInt(j.style("width"),10),z=k.padding;
var C=H&&H.nodes||[],l=this._numColumns=C.length&&(Math.max.apply(null,C.map(function(I){return I.column
}))+1)||1,G=[],E=0;
H.nodes.forEach(function(J,I){if(G[J.column]){G[J.column]++
}else{G[J.column]=1
}});
E=G.length&&Math.max.apply(null,G)||0;
var q=t-2,A=w-2,h=(l*k.nodeWidth)+((l-1)*k.minNodeHorzPadding)+z.left+z.right,n=(E*k.avgNodeHeight)+(E*k.nodeVertPadding)+z.top+z.bottom,o=h>t,F=n>w;
m.classed("is-wider",o);
if(o){q=h;
A-=20
}m.classed("is-taller",F);
if(F){A=n;
q-=20
}u.style("width",D+"px").style("height",w+"px");
m.style("width",t+"px").style("height",w+"px");
s.style("width",q+"px").style("height",A+"px")
};
b._getInnerDimensions=function(){var j=this._options,l=j.padding,i=d.select(j.parent).select(".pathing-cv-container"),k=parseInt(i.style("width"),10),h=parseInt(i.style("height"),10);
return[k-l.right-l.left,h-l.top-l.bottom]
};
b._createDiagram=function(){var s=this._options,j=this._dataAdapter.data(),i=d.select(s.parent).selectAll(".pathing-cv-container"),o=parseInt(i.style("width"),10),r=parseInt(i.style("height"),10),q=this._path=d.pathing().nodeWidth(s.nodeWidth).nodePadding(s.nodeVertPadding).size(this._getInnerDimensions()).nodes(j.nodes).links(j.links).minNodeHeight(s.minNodeHeight).layout(s.interations);
if(!j.nodes.some(function(h){return h.column!==0
})){var p=q.nodeWidth(),n=s.padding;
j.nodes.forEach(function(h){h.x+=((o-n.left-n.right)/2)-(p/2)
})
}var m=this._updateLinks(q,j.links);
this._updateNodes(q,j.nodes,m,r);
var l=d.select(s.parent).select(".pathing-svg").node();
l.style.display="none";
var k=l.offsetHeight;
l.style.display=""
};
b._updateNodes=function(w,i,p,u){var v=this,z=this._options,m=d.select(z.parent).select(".pathing-svg-container"),l=this._options.onNodeSelect,r=this._options.padding,q=(!this._changedOptions||!this._changedOptions.data),h=(q)?0:f;
function t(B){var A=u-this.getBBox().height-r.bottom;
d.select(this).attr("transform","translate("+B.x+","+(B.y=Math.max(0,Math.min(A,d.event.y)))+")");
w.relayout();
p.attr("d",w.link())
}var o=m.selectAll(".node-container").data([0]);
o.enter().append("g").classed("node-container",true);
o.exit().remove();
var j=o.selectAll(".node").data(i,this._dataAdapter.nodeKey()),s=w.nodeWidth();
j.enter().append("g").classed("hide-node",true).attr("transform",function(A){return"translate("+A.x+",0)"
});
j.on("mouseover.node",function(B,A){v._showNodePaths(B,this)
}).on("mouseout.node",function(B,A){v._hideNodePaths()
}).on("click.node",function(B,A){v._activateNode(B,this)
});
var n=j.exit();
n.classed("hide-node",true).on("mouseover.node",null).on("mouseout.node",null).on("click.node",null).transition().duration(h).style("opacity",0).attr("transform",function(A){return"translate("+A.x+",0)"
});
setTimeout(function(){n.remove()
},h);
j.transition().duration(h).attr("transform",function(A){return"translate("+A.x+","+A.y+")"
});
var k=this._numColumns;
j.each(function(F,B){var E=d.select(this),D=E.classed("hide-node");
E.attr("class","node");
E.classed("hide-node",D);
E.classed("filter",F.id==="E_0");
E.classed("exit-filter",F.id==="X_0");
if(F.classname){E.classed(F.classname,true)
}var H=E.selectAll(".node-bg").data([F]);
H.enter().append("rect").classed("node-bg",true);
H.exit().remove();
H.attr("width",s);
H.transition().duration(h).attr("height",function(K){return K.dy
});
function J(N){var L=true,M=false,K=false;
if(k>1){M=(0===N.column);
K=(k-1===N.column);
L=!(M||K)
}d.select(this).attr("x",(L)?s/2:(M)?2:s-4).attr("text-anchor",(L)?"middle":(M)?"start":"end")
}function G(M){var L=20,N=10,K="\u2026";
if(M.length<L){return M
}return M.slice(0,L-N)+K+M.slice(M.length-N)
}var I=E.selectAll(".node-title").data([F]);
I.enter().append("text").classed("node-title",true).attr("y",-5).attr("transform",null);
I.exit().remove();
I.each(J);
I.text(function(K){return G(K.label)
});
var C=E.selectAll(".node-total").data([F]);
C.enter().append("text").classed("node-total",true).attr("y",15).attr("transform",null);
C.exit().remove();
C.each(J);
C.text(function(K){return d.format(",.0f")(K.value)
});
var A=E.selectAll(".node-hit-area").data([F]);
A.enter().append("rect").classed("node-hit-area",true);
A.exit().remove();
A.attr("height",function(K){return K.dy+4
}).attr("y",-4).attr("width",w.nodeWidth()).style("opacity",0);
setTimeout(function(){E.classed("hide-node",false)
},h)
})
};
b.gradientCounter={count:0};
b._updateLinks=function(u,p){var v=this._options,t=this,n=d.select(v.parent).select(".pathing-svg-container"),j=d.select(v.parent).selectAll("svg"),l=j.selectAll("defs").data([0]),q=(!this._changedOptions||!this._changedOptions.data),i=(q)?0:f;
l.enter().append("defs");
var r=l.selectAll(".path-fills").data([0]),s=r.enter().append("g").classed("path-fills",true);
var h=n.selectAll(".link-container").data([0]);
h.enter().append("g").classed("link-container",true);
h.exit().remove();
var k=n.selectAll(".path-overlay-container").data([0]);
k.enter().append("g").classed("path-overlay-container",true);
k.exit().remove();
var o=h.selectAll("path").data(p,this._dataAdapter.linkKey());
o.enter().append("path").classed("hide-link",true);
o.on("mouseover.link",function(z,w){t._showLinkPaths(z,this)
}).on("mouseout.link",function(z,w){t._hideLinkPaths()
}).on("click.link",function(z,w){t._activateLink(z,this)
});
var m=o.exit();
m.classed("hide-link",true).on("click.link",null).on("mouseover.link",null).on("mouseout.link",null);
setTimeout(function(){m.remove()
},i);
o.each(function(D,A){var C=d.select(this),w=C.classed("hide-link");
C.attr("class",function(E){return !E.source?"entry":!E.target?"exit":"link"
});
C.classed("hide-link",w);
if(C.classed("hide-link")){C.attr("d",u.link()(D));
setTimeout(function(){C.classed("hide-link",false)
},i)
}else{C.transition().duration(i).attr("d",u.link()(D))
}if(D.source&&"E_0"===D.source.id){C.classed("entry-path",true)
}else{if(D.target&&"X_0"===D.target.id){C.classed("exit-path",true)
}}var B=D.source&&"E_0"===D.source.id,z=D.target&&"X_0"===D.target.id;
C.classed("filter",B);
C.classed("exit-filter",z)
});
return o
};
b._createGradients=function(m){var t=m.selectAll("style").data([0]);
t.enter().append("style");
t.text(function(z){var w=".pathing-svg .exit { fill: url(#exitFill); } \n";
w+=".pathing-svg .entry { fill: url(#entryFill); } \n";
w+=".pathing-svg .exit:hover { fill: url(#exitHighlightFill); } \n";
w+=".pathing-svg .entry:hover { fill: url(#entryHighlightFill); } \n";
w+=".pathing-svg .pivot-entry { mask: url(#pivotEnterMask); } \n";
w+=".pathing-svg .pivot-exit { mask: url(#pivotExitMask); } \n";
w+=".pathing-svg .link-container .entry-path { fill: url(#entryGradient); } \n";
w+=".pathing-svg .link-container .exit-path { fill: url(#exitGradient); } \n";
return w
});
var j=m.selectAll("defs").data([0]);
j.enter().append("defs");
var s=j.selectAll(".bounce-fills").data([0]),u=s.enter().append("g").classed("bounce-fills",true);
var o=u.append("linearGradient").attr("id","pivotEnterGrad");
o.append("stop").attr("offset","0%").style("stop-color","#fff").style("stop-opacity",0);
o.append("stop").attr("offset","50%").style("stop-color","#fff").style("stop-opacity",0);
o.append("stop").attr("offset","70%").style("stop-color","#fff").style("stop-opacity",0.5);
o.append("stop").attr("offset","100%").style("stop-color","#fff").style("stop-opacity",1);
var q=u.append("mask").attr("id","pivotEnterMask").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("maskUnits","objectBoundingBox").attr("maskContentUnits","objectBoundingBox");
q.append("rect").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("fill","url(#pivotEnterGrad)");
var k=u.append("linearGradient").attr("id","pivotExitGrad").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","0%");
k.append("stop").attr("offset","0%").style("stop-color","#fff").style("stop-opacity",0);
k.append("stop").attr("offset","50%").style("stop-color","#fff").style("stop-opacity",0);
k.append("stop").attr("offset","70%").style("stop-color","#fff").style("stop-opacity",0.5);
k.append("stop").attr("offset","100%").style("stop-color","#fff").style("stop-opacity",1);
var n=u.append("mask").attr("id","pivotExitMask").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("maskUnits","objectBoundingBox").attr("maskContentUnits","objectBoundingBox");
n.append("rect").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("fill","url(#pivotExitGrad)");
var i=u.append("linearGradient").attr("id","entryGradient").attr("x1","0%").attr("y1","100%").attr("x2","100%").attr("y2","100%");
i.append("stop").attr("offset","0%").style("stop-color","#8cc350");
i.append("stop").attr("offset","100%").style("stop-color","#3287D2");
var p=u.append("linearGradient").attr("id","exitGradient").attr("x1","0%").attr("y1","100%").attr("x2","100%").attr("y2","100%");
p.append("stop").attr("offset","0%").style("stop-color","#3287D2");
p.append("stop").attr("offset","100%").style("stop-color","#cc2539");
var l=u.append("linearGradient").attr("id","exitFill").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");
l.append("stop").attr("offset","0%").style("stop-color","#FA5A50").style("stop-opacity",0.5);
l.append("stop").attr("offset","85%").style("stop-color","#FA5A50").style("stop-opacity",0.5);
l.append("stop").attr("offset","100%").style("stop-color","#FA5A50").style("stop-opacity",0.1);
var v=u.append("linearGradient").attr("id","exitHighlightFill").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");
v.append("stop").attr("offset","0%").style("stop-color","#FA5A50").style("stop-opacity",1);
v.append("stop").attr("offset","85%").style("stop-color","#FA5A50").style("stop-opacity",1);
v.append("stop").attr("offset","100%").style("stop-color","#FA5A50").style("stop-opacity",0.1);
var r=u.append("linearGradient").attr("id","entryFill").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");
r.append("stop").attr("offset","0%").style("stop-color","#58AF5E").style("stop-opacity",0.1);
r.append("stop").attr("offset","15%").style("stop-color","#58AF5E").style("stop-opacity",0.5);
r.append("stop").attr("offset","100%").style("stop-color","#58AF5E").style("stop-opacity",0.5);
var h=u.append("linearGradient").attr("id","entryHighlightFill").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");
h.append("stop").attr("offset","0%").style("stop-color","#58AF5E").style("stop-opacity",0.1);
h.append("stop").attr("offset","15%").style("stop-color","#58AF5E").style("stop-opacity",1);
h.append("stop").attr("offset","100%").style("stop-color","#58AF5E").style("stop-opacity",1)
};
b._setOptionContainerContent=function(h,l){var t=this._options,n="",j,r=0,p=h.classed("is-last-column"),o=this._dataAdapter,s=o.l10n.labels.pathing,m=[{id:"expand",label:s.expand,valid:(t.expandNode&&o.canExpandNode(l))},{id:"pivot",label:s.focus,valid:(t.pivotNode&&o.canPivotNode(l))},{id:"collapse",label:s.collapse,valid:(t.collapseNode&&o.canCollapseNode(l))}];
if(p){m.reverse()
}m=m.filter(function(i){return i.valid
});
if(t.expandNode||t.collapseNode||t.pivotNode){for(var k=0,q=m.length;
k<q;
++k){j=m[k];
n+='<a class="cv-node-option cv-node-option'+((p)?(q-r-1):r)+" cv-node-"+j.id+'"><i class="'+j.id+'"></i><span>'+j.label+"</span></a>";
++r
}}n='<div class="cv-node-options num-options-'+r+'">'+n+"</div>";
h.html(n)
};
b._activateNode=function(k,j){var h=this;
if(this._pathLocked&&k===this._pathLocked.data){h._unlockNode(k,j)();
var i=(d.mouse(j)[0]>=h._options.nodeWidth/2)?1:-1;
if(!k.isPivot||i===h._lastSide){return
}}this._setPathLocked({data:k,elem:j});
d.select(h._options.parent).select(".pathing-cv-container").on("click.node",null).on("click.link",null);
d.selectAll(".cv-node-active").classed("cv-node-active",false);
d.selectAll(".cv-link-active").classed("cv-link-active",false);
d.select(j).classed("cv-node-active",true);
this._renderNodePaths(k,j);
this._showNodeOptions(k,j);
this._showInformation(k,j);
this._scrollToElem(j);
setTimeout(function(){d.select(h._options.parent).select(".pathing-cv-container").on("click.node",h._unlockNode(k,j))
},10)
};
b._showNodePaths=function(i,h){if(this._pathLocked){return
}this._renderNodePaths(i,h)
};
b._renderNodePaths=function(m,k,j){var p=d.select(this._options.parent).select(".pathing-cv-container");
clearTimeout(this._hidePathOverlaysTimer);
p.on("mousemove.node",null);
if(this._pathedObj&&this._pathedObj.data===m&&!j){return
}this._setPathedObj({data:m,elem:k});
var n=0,q=this,i,r,o=this._dataAdapter.nodePaths(m);
function l(){r=q._activePaths=o.filter(function(t){var s=t.nodes.indexOf(m._pid);
return(n>0&&s+1<t.nodes.length)||(n<0&&s>0)
});
i=q._dataAdapter.nodePathData(r,m,n);
q._createPathOverlays(i)
}function h(){var s=0;
try{s=d.mouse(k)[0]
}catch(u){}var t=(s>=q._options.nodeWidth/2)?1:-1;
if(t!==n){q._lastSide=n=t;
l()
}}if(m.isPivot){if(j){n=q._lastSide;
l()
}else{h();
if(!q._pathLocked){p.on("mousemove.node",function(t,s){h()
})
}}}else{q._lastSide=0;
q._activePaths=o;
i=this._dataAdapter.nodePathData(o,m,n);
q._createPathOverlays(i)
}setTimeout(function(){p.classed("path-overlays",true)
},1)
};
b._showNodeOptions=function(n,l){var t=this,m=this._numColumns,r=d.select(this._options.parent).select(".pathing-cv-container"),p=r.node(),u=this._options,o=50,i=d.select(l).select(".node-bg").node(),s=p.getBoundingClientRect(),k=i.getBoundingClientRect(),q=k.top-s.top,j=k.left-s.left+(u.nodeWidth/2),h=r.select(".cv-path-node-options");
if(h.empty()){h=r.append("div").classed("cv-path-node-options",true).attr("node",n._pid)
}else{if(h.attr("node")==n._pid&&h.classed("is-open")){}else{this._removeNodeOptions();
o=300;
h=r.append("div").classed("cv-path-node-options",true).attr("node",n._pid)
}}h.classed("is-last-column",(m>1&&m-1===n.column)).style("top",q+"px").style("left",j+"px");
this._setOptionContainerContent(h,n);
setTimeout(function(){h.classed("is-open",true)
},o)
};
b._formatMetricValue=function(h){return this._formatNumber("decimal",h.value)+" "+this._options.metricName
};
b._formatPathInformation=function(k){var j=this._options,i=this,h=j.colors;
return function(r,m){var l=i._dataAdapter.getPathEnd(r),p=l?(l.value)?l.value:k:k,o="",q=r.values[0],n=q/p;
m=m%h.length;
o+='<span class="pathing-path-marker" style="background-color: '+h[m]+'"></span>';
o+='<span class="pathing-path-value"><span class="pathing-path-num">'+i._formatNumber("decimal",q)+'</span> <span class="pathing-path-perc">'+i._formatNumber("percent",n)+"</span></span>";
return o
}
};
b._highlightPath=function(k,l,j){var r=this._options,n=r.parent,m=d.event,o=!m||(m&&"click"===m.type),i=d.select(n).selectAll(".path-overlay-container"),h=d.select(n).selectAll(".pathing-cv-info-pane"),q=i.selectAll(".link.path"+l),p=i.selectAll(".link:not(.path"+l+")");
if(o){if(this._lineLocked===k){this._setLineLock(null);
return this._removeHightlightPath()
}this._setLineLock(k);
h.selectAll(".locked").classed("locked",false);
d.select(j).classed("locked",true)
}else{if(this._lineLocked){return
}}i.selectAll(".link.inactive").classed("inactive",false);
p.classed("inactive",true);
q.classed("active",true)
};
b._setLineLock=function(i){var h=this._options;
if(this._lineLocked===i){return
}this._lineLocked=i;
this._callPathSelected(i)
};
b._setPathedObj=function(h){this._pathedObj=h
};
b._setPathLocked=function(i){var h=this._options;
if(this._pathLocked===i){return
}this._pathLocked=i;
this._callPathSelected()
};
b._callPathSelected=function(j){var k={},h=this._options,i=this._pathLocked&&this._pathLocked.data||{};
if(j){k.path=j.nodes+""
}if("undefined"!==typeof i._pid){k.node=i._pid;
k.side=this._lastSide
}if("undefined"!==typeof i.source||"undefined"!==typeof i.target){k.source=(i.source)?i.source._pid:null;
k.target=(i.target)?i.target._pid:null
}if("function"==typeof h.pathSelected){h.pathSelected(k,this._pathLocked,j)
}};
b._removeHightlightPath=function(){if(this._lineLocked){return
}var i=this._options,j=i.parent,k=d.select(j).selectAll(".pathing-cv-info-pane"),h=d.select(j).selectAll(".path-overlay-container").selectAll(".link");
h.classed("inactive",false).classed("active",false);
k.selectAll(".locked").classed("locked",false)
};
b._showInformation=function(B,z){var n=this,h=this._options,v="",u=this._isDataObjNode(B),i=this._dataAdapter.l10n.labels.pathing,r=d.select(this._options.parent).select(".pathing-cv-info-pane"),j=r.selectAll(".pathing-cv-info-title"),C=r.selectAll(".pathing-cv-info-value"),A=r.selectAll(".pathing-cv-info-paths");
this._setLineLock(null);
this._removeHightlightPath();
var l,t=this._formatMetricValue(B),m=false;
if(u){l=B.label;
t=this._formatMetricValue(B);
m=(B.column==this._numColumns-1)
}else{var w=i.percOfNode;
if(!B.source){l=i.nodeEntries.replace(/\{label\}/i,B.target.label);
t=this._formatMetricValue(B)+'<span class="perc">'+w.replace(/\{perc\}/i,this._formatNumber("percent",B.value/B.target.value)).replace(/\{label\}/i,B.target.label)+"</span>"
}else{if(!B.target){l=i.nodeExits.replace(/\{label\}/i,B.source.label);
t=this._formatMetricValue(B)+'<span class="perc">'+w.replace(/\{perc\}/i,this._formatNumber("percent",B.value/B.source.value)).replace(/\{label\}/i,B.source.label)+"</span>"
}else{var p=this._dataAdapter,q=p.getPathDirection(p.data().paths[B.paths[0]]),s=(q<0)?B.target:B.source;
l=i.nodeToNode.replace(/\{source\}/i,B.source.label).replace(/\{target\}/i,B.target.label);
t=this._formatMetricValue(B)+'<span class="perc">'+w.replace(/\{perc\}/i,this._formatNumber("percent",B.value/s.value)).replace(/\{label\}/i,s.label)+"</span>"
}}}r.classed("is-last-column",m);
j.html(l);
C.html(t);
var k=A.selectAll(".pathing-cv-path-title").data([0]);
k.enter().append("span").classed("pathing-cv-path-title",true);
k.html(this._dataAdapter.activePathsTitle(this._activePaths));
var o=A.selectAll(".pathing-cv-path-info").data(this._activePaths);
o.enter().append("span").classed("pathing-cv-path-info",true);
o.on("click.line",function(E,D){n._highlightPath(E,D,this)
}).on("mouseover.line",function(E,D){n._highlightPath(E,D,this)
}).on("mouseout.line",function(E,D){n._removeHightlightPath()
}).html(this._formatPathInformation(B.value));
o.exit().on("click.line",null).on("mouseover.line",null).on("mouseout.line",null).remove()
};
b._defaultInformation=function(){this._setLineLock(null);
this._removeHightlightPath();
var m=d.select(this._options.parent).select(".pathing-cv-info-pane"),l=m.selectAll(".pathing-cv-info-title"),h=m.selectAll(".pathing-cv-info-value"),k=m.selectAll(".pathing-cv-info-paths"),j=this._dataAdapter.l10n.labels.pathing;
var i="<p>"+j.help1+"</p>";
i+="<p>"+j.help2+"</p>";
i+="<p>"+j.help3+"</p>";
i+='<p><span class="cv-node-option"><i class="pivot"></i></span><span class="cv-option-title">'+j.focus+"</span></p>";
i+="<p>"+j.focusHelp+"</p>";
i+='<p><span class="cv-node-option"><i class="expand"></i></span><span class="cv-option-title">'+j.expand+"</span></p>";
i+="<p>"+j.expandHelp+"</p>";
i+='<p><span class="cv-node-option"><i class="collapse"></i></span><span class="cv-option-title">'+j.collapse+"</span></p>";
i+="<p>"+j.collapseHelp+"</p>";
l.html(j.title);
h.html('<div class="help">'+i+"</div>");
k.html("")
};
b._scrollToElem=function(z){var k=this._options,n=d.select(this._options.parent).select(".pathing-cv-container"),o=n.node(),m=d.select(k.parent).select(".pathing-cv-wrapper"),s=d.select(z),A=(!s.selectAll(".node-bg").empty())?s.select(".node-bg").node():s.node(),w=o.getBoundingClientRect(),i=A.getBoundingClientRect(),q=i.top-w.top,l=i.left-w.left+(k.nodeWidth/2);
if(!m.classed("is-wider")&&!m.classed("is-taller")){return
}function h(B,C){return function(){var D=(B!==null)?d.interpolateNumber(m.node().scrollLeft,B):null,E=(C!==null)?d.interpolateNumber(m.node().scrollTop,C):null;
return function(F){if(D!==null){m.node().scrollLeft=D(F)
}if(E!==null){m.node().scrollTop=E(F)
}}
}
}var t=null,r=null;
if(m.classed("is-wider")){var v=parseInt(m.style("width"),10),u=parseInt(n.style("width"),10);
t=Math.min(u-v,Math.max(0,l-(v/2)))
}if(m.classed("is-taller")){var j=parseInt(m.style("height"),10),p=parseInt(n.style("height"),10);
r=Math.min(p-j,Math.max(0,q+40-(j/2)))
}d.transition().duration(300).tween("scroll",h(t,r))
};
b._unlockNode=function(j,i){var h=this;
return function(l,k){h._setPathLocked(null);
d.select(h._options.parent).select(".pathing-cv-container").on("click.node",null);
h._deactivateNode(d.event,j,i)
}
},b._deactivateNode=function(l,m,i){var k=d.select(l.target),h=this._options,j=m||{};
d.select(i).classed("cv-node-active",false);
this._removeNodeOptions(false);
this._defaultInformation();
this._hideNodePaths();
if("click"===l.type){if(!k.classed("cv-node-option")){k=d.select(k.node().parentNode)
}if(k.classed("cv-node-expand")&&("function"===typeof h.expandNode)){h.expandNode(j)
}if(k.classed("cv-node-collapse")&&("function"===typeof h.collapseNode)){h.collapseNode(j)
}if(k.classed("cv-node-pivot")&&("function"===typeof h.pivotNode)){h.pivotNode(j)
}}};
b._removeNodeOptions=function(i){var h=d.selectAll(".cv-path-node-options");
h.classed("is-open",false);
setTimeout(function(){h.remove()
},(i)?0:300)
};
b._hideNodePaths=function(){var h=d.select(this._options.parent).select(".pathing-cv-container");
h.on("mousemove.node",null);
if(this._pathLocked){return
}this._removePathOverlays(h)
};
b._activateLink=function(j,i){var h=this;
if(this._pathLocked&&j===this._pathLocked.data){h._unlockLink(j,i);
return
}this._setPathLocked({data:j,elem:i});
d.select(h._options.parent).select(".pathing-cv-container").on("click.node",null).on("click.link",null);
d.selectAll(".cv-node-active").classed("cv-node-active",false);
d.selectAll(".cv-link-active").classed("cv-link-active",false);
d.select(i).classed("cv-link-active",true);
this._removeNodeOptions();
this._renderLinkPaths(j,i);
this._showInformation(j,i);
this._scrollToElem(i);
setTimeout(function(){d.select(h._options.parent).select(".pathing-cv-container").on("click.link",h._unlockLink(j,i))
},10)
};
b._showLinkPaths=function(i,h){if(this._pathLocked){return
}this._renderLinkPaths(i,h)
};
b._renderLinkPaths=function(l,k,i){clearTimeout(this._hidePathOverlaysTimer);
if(this._pathedObj&&this._pathedObj.data===l&&!i){return
}this._setPathedObj({data:l,elem:k});
var h=this._dataAdapter;
this._activePaths=h.linkSortActivePaths(l);
this._createPathOverlays(h.linkPathData(this._activePaths));
var j=d.select(this._options.parent).select(".pathing-cv-container");
setTimeout(function(){j.classed("path-overlays",true)
},1)
};
b._unlockLink=function(j,i){var h=this;
return function(l,k){h._setPathLocked(null);
d.select(h._options.parent).select(".pathing-cv-container").on("click.link",null);
h._deactivateLink(d.event,j,i)
}
},b._deactivateLink=function(j,k,i){var h=d.select(this._options.parent).select(".pathing-cv-container");
d.select(i).classed("cv-link-active",false);
this._defaultInformation();
this._hideLinkPaths()
};
b._hideLinkPaths=function(){var h=d.select(this._options.parent).select(".pathing-cv-container");
if(this._pathLocked){return
}this._removePathOverlays(h)
};
b._createPathOverlays=function(i){var j=this._options,l=this._path,h=d.select(j.parent).select(".path-overlay-container"),k=h.selectAll("path").data(i);
k.enter().append("path");
k.exit().remove();
k.attr("class",function(n){var m=(n.pivotStart)?" pivot-entry":(n.pivotEnd)?" pivot-exit":"";
return"link path"+n.path+m
}).attr("d",l.link()).attr("style",function(o,m){var n=o.path%j.colors.length;
return"fill: "+j.colors[n]+";"
}).sort(function(n,m){if(!n&&!m){return 0
}if(!n){return 1
}if(!m){return -1
}return m.dy-n.dy
})
};
b._removePathOverlays=function(h){clearTimeout(this._hidePathOverlaysTimer);
this._setPathedObj(null);
this._hidePathOverlaysTimer=setTimeout(function(){h.classed("path-overlays",false)
},20)
};
b._isDataObjNode=function(h){return("undefined"!==typeof h._pid)
};
b.setActivePath=function(i){var p=this._options,n=this,j=this._dataAdapter.data();
i=i||{};
var m=("undefined"!==typeof i.node),l,h;
if(m){l=j.nodesById[i.node]
}else{l=j.links.filter(function(q){return((!q.source&&!i.source)||(q.source&&i.source&&q.source._pid+""===i.source))&&((!q.target&&!i.target)||(q.target&&i.target&&q.target._pid+""===i.target))
});
l=l.length&&l[0]||null
}h=(m)?".node":".link";
if(!l){return
}var k=false,o;
k=j.paths.some(function(q){o=q.nodes;
return q.nodes.toString()===i.path
});
d.select(p.parent).selectAll(h).each(function(r,q){if(r===l){if(m){n._activateNode(r,this)
}else{n._activateLink(r,this)
}if(!k){return
}d.select(p.parent).selectAll(".pathing-cv-path-info").filter(function(t,s){if(t.nodes.toString()===o.toString()){n._highlightPath(t,s,this)
}})
}})
};
e.cloudViz.pathing=g.util.createConstructor(b)
}(this));
(function(a){d3.pathing=function(){var c={},h=24,j=8,n=[1,1],p=[],g=[],l=NaN,k=0;
c.nodeWidth=function(t){if(!arguments.length){return h
}h=+t;
return c
};
c.nodePadding=function(t){if(!arguments.length){return j
}j=+t;
return c
};
c.nodes=function(t){if(!arguments.length){return p
}p=t;
return c
};
c.links=function(t){if(!arguments.length){return g
}g=t;
return c
};
c.size=function(t){if(!arguments.length){return n
}n=t;
return c
};
c.numColumns=function(){return l
};
c.minNodeHeight=function(t){if(!arguments.length){return k
}k=t;
return c
};
c.layout=function(t){f();
m();
d();
i(t);
e();
return c
};
c.relayout=function(){e();
return c
};
c.link=function(){var u=0.5;
function t(D){var B,A,F,z,w,M,L,J,H,G,E,I,C,v=5,K=15;
I=C=Math.min(D.dy+v,K);
if(D.source===null){B=D.target.x-I;
A=D.target.x;
J=D.target.y-v;
H=D.target.y+D.dy;
return"M"+B+","+J+"h"+I+"v"+(H-J)+"c-"+I+",0,-"+I+",-"+(C/2)+",-"+I+",-"+C+"z"
}if(D.target===null){B=D.source.x+D.source.dx;
A=D.source.x+D.source.dx+I;
J=D.source.y+D.source.dy-D.dy;
H=D.source.y+D.source.dy+v;
return"M"+A+","+H+"h-"+I+"v-"+(H-J)+"c"+I+",0,"+I+","+(C/2)+","+I+","+C+"V"+H+"z"
}B=D.source.x+D.source.dx,A=D.target.x,F=d3.interpolateNumber(B,A),z=F(u),w=F(1-u),M=w+((D.dy<15)?((D.source.y<D.target.y)?-1*D.dy:D.dy):0),L=z+((D.dy<15)?((D.source.y<D.target.y)?-1*D.dy:D.dy):0),J=D.source.y+D.sy,H=D.target.y+D.ty,G=H+D.dy,E=J+D.dy;
return"M"+B+","+J+"C"+z+","+J+" "+w+","+H+" "+A+","+H+"v"+D.dy+"C"+M+","+G+" "+L+","+E+" "+B+","+E+"Z"
}t.curvature=function(v){if(!arguments.length){return u
}u=+v;
return t
};
return t
};
function f(){p.forEach(function(t){t.sourceLinks=[];
t.targetLinks=[];
t.entryLinks=[];
t.exitLinks=[]
});
g.forEach(function(t){var u=t.source,v=t.target;
if(u!==null&&typeof u==="number"){u=t.source=p[t.source]
}if(v!==null&&typeof v==="number"){v=t.target=p[t.target]
}if(u!==null&&v!==null){u.sourceLinks.push(t);
v.targetLinks.push(t)
}else{if(u===null){v.entryLinks.push(t)
}else{u.exitLinks.push(t)
}}})
}function m(){p.forEach(function(u){if(u.hasOwnProperty("total")){u.value=u.total
}else{u.value=Math.max(d3.sum(u.sourceLinks,q)+d3.sum(u.exitLinks,q),d3.sum(u.targetLinks,q)+d3.sum(u.entryLinks,q))
}});
function t(u){return(u.sourceLinks&&u.sourceLinks.length)||(u.targetLinks&&u.targetLinks.length)||(u.exitLinks&&u.exitLinks.length)||(u.entryLinks&&u.entryLinks.length)
}p.sort(function(v,u){var w=t(v),z=t(u);
if(w&&!z){return -1
}if(z&&!w){return 1
}return u.value-v.value
})
}function d(){var u=0,v=[],t=n[0]-h;
p.forEach(function(w){w.x=w.column;
w.dx=h;
if(v.indexOf(w.column)<0){v.push(w.column);
w.columnIndex=v.length-1
}else{w.columnIndex=v.indexOf(w.column)
}});
l=v.length;
o(l>1?t/(l-1):t)
}function b(){p.forEach(function(t){if(!t.targetLinks.length){t.x=d3.min(t.sourceLinks,function(u){return u.target.x
})-1
}})
}function r(t){p.forEach(function(u){if(!u.sourceLinks.length){u.x=t-1
}})
}function o(t){p.forEach(function(u){u.x*=t
})
}function i(A){var t=d3.nest().key(function(D){return D.x
}).sortKeys(d3.ascending).entries(p).map(function(D){return D.values
});
function w(){var D=d3.min(t,function(E){var F=d3.sum(E,q)||1;
return(n[1]-(E.length-1)*j)/F
});
t.forEach(function(E){E.forEach(function(G,F){G.y=F;
G.dy=Math.max(k,G.value*D)
})
});
g.forEach(function(E){E.dy=E.value*D
})
}function v(E){t.forEach(function(F,G){F.forEach(function(H){if(H.targetLinks.length){var I=d3.sum(H.targetLinks,D)/d3.sum(H.targetLinks,q);
H.y+=(I-s(H))*E
}})
});
function D(F){return s(F.source)*F.value
}}function u(E){t.slice().reverse().forEach(function(F){F.forEach(function(G){if(G.sourceLinks.length){var H=d3.sum(G.sourceLinks,D)/d3.sum(G.sourceLinks,q);
G.y+=(H-s(G))*E
}})
});
function D(F){return s(F.target)*F.value
}}function C(){t.forEach(function(E){var H,D,G=0,I=E.length,F;
E.sort(z);
for(F=0;
F<I;
++F){H=E[F];
D=G-H.y;
if(D>0){H.y+=D
}G=H.y+H.dy+j
}D=G-j-n[1];
if(D>0){G=H.y-=D;
for(F=I-2;
F>=0;
--F){H=E[F];
D=H.y+H.dy+j-G;
if(D>0){H.y-=D
}G=H.y
}}})
}function z(E,D){return E.y-D.y
}w();
C();
for(var B=1;
A>0;
--A){u(B*=0.99);
C();
v(B);
C()
}}function e(){p.forEach(function(v){v.sourceLinks.sort(t);
v.targetLinks.sort(u)
});
p.forEach(function(w){var z=0,v=0;
w.entryLinks.forEach(function(A){A.ty=v;
v+=A.dy
});
w.sourceLinks.forEach(function(A){A.sy=z;
z+=A.dy
});
w.targetLinks.forEach(function(A){A.ty=v;
v+=A.dy
});
w.exitLinks.forEach(function(A){A.sy=z;
z+=A.dy
})
});
function u(w,v){return w.source.y-v.source.y
}function t(w,v){return w.target.y-v.target.y
}}function s(t){return t.y+t.dy/2
}function q(t){return t.value
}return c
}
}(this));
(function(f){var g=f.cloudViz||{},a=g.core||{},d=f.dv||{},e=f.d3||{},b=Object.create(a);
b.init=function(h){this._type="anomaly";
h=h||{};
this._initDefaultOptions();
this.setOptions(h);
this._initializeAnomaly();
return this
};
b._initDefaultOptions=function(h){var i={mappings:{x:"date",y:"deviation",category:"metric"},bins:12,xTicks:7,xTickInterval:undefined,xUpperLimit:undefined,xLowerLimit:undefined,normalizePositive:false,onMouseOverAnomaly:null,onMouseOutAnomaly:null,onSelectAnomalies:null};
return Object.getPrototypeOf(b)._initDefaultOptions.call(this,i)
};
b._render=function(){this._configureAnomaly();
this._anom.layout()
};
b._initializeAnomaly=function(){var i=this._options,j=i.mappings,h=this;
this._anom=e.anomaly().on("mouseover",function(l,m,k){h._anom.nodes(function(p,n){var o=e.select(this).transition().duration(750).style("opacity",p[j.category]===m[j.category]?0.8:0.2)
});
if(i.onMouseOverAnomaly){i.onMouseOverAnomaly.call(l,m,k)
}}).on("mouseout",function(l,m,k){h._anom.nodes(function(p,n){var o=e.select(this).transition().duration(750).style("opacity",1)
});
if(i.onMouseOutAnomaly){i.onMouseOutAnomaly.call(l,m,k)
}}).on("select",function(k){h._anom.nodes(function(m,l){e.select(this).classed("selected",false)
});
k.classed("selected",true);
if(i.onSelectAnomalies){i.onSelectAnomalies.call(k)
}})
};
b._configureAnomaly=function(){var i=this._options;
var j=d.util.getPercentValue(i.width,i.parent.offsetWidth);
var h=d.util.getPercentValue(i.height,i.parent.offsetHeight);
this._anom.data(c(i.data)).parent(i.parent).mappings(i.mappings).bins(i.bins).size([j,h]).xUpperLimit(i.xUpperLimit).xLowerLimit(i.xLowerLimit).normalizePositive(i.normalizePositive).xTicks(i.xTicks,i.xTickInterval)
};
b._onAutoResize=function(){this.render()
};
function c(o){var q=[],l=true;
for(var h in o){var r=o[h],p=-1,k=r.length;
while(++p<k){var m,j=r[p];
if(l){m={};
q.push(m)
}else{m=q[p]
}m[h]=j
}l=false
}return q
}b.chart=function(){return this._anom
};
f.cloudViz.anomaly=g.util.createConstructor(b)
}(this));
(function(a){d3.choropleth=function(){var j=["#fae6be","#eb782d","#dc283c","#640046"],c=["#c7b797","#b85e23","#a81e2e","#300022"],B=["#faf0c8","#d2dc73","#5faf69","#00505A"],e=["#c7bf9f","#a0a858","#437d4a","#002226"],m={},E,o=[],s,C,A,w,q,u,f,D,r,h,z,t,l=[0,1],b=(z-t)*l[0],d=(z-t)*l[1],v={},g=false,n={top:0,left:0,right:0,bottom:40};
m.layout=function(){var p=this;
if(!m.data()){throw new i()
}if(!m.parent()){throw new k()
}o=m.determineSize(f);
m.calcRange();
w=m.createSVGContainer();
if(typeof f.geoJson==="string"){d3.json(f.geoJson,function(F){p._layoutWithData.call(p,F)
})
}else{this._layoutWithData(f.geoJson)
}};
m._layoutWithData=function(p){m.drawGeos(p);
if(f.interactive){m.drawTooltip()
}m.drawLegend(f.theme,p)
};
m.determineSize=function(F){var H=F.parent,G=F.width?F.width:H.offsetWidth,p=F.height?F.height:H.offsetHeight;
G=G?G:700;
p=p?p:450;
return[G,p]
};
m.calcRange=function(){for(var p in f.data.values){if(typeof z=="undefined"){z=f.data.values[p];
t=f.data.values[p]
}if(f.data.values[p]>z){z=f.data.values[p]
}if(f.data.values[p]<t){t=f.data.values[p]
}}};
m.drawLegend=function(Z,I){var S=this,T=9,K=12,H=35,R=Math.min(o[0]-n.left,630)-25,W=(o[0]-n.left-R)/2,Q=R-(H*2)-(K*2),N=[],ad=[];
if(typeof Z!="undefined"&&Z=="salmonRun"){N=j;
ad=c
}else{N=B;
ad=e
}var F=q.selectAll(".legend").data([E]);
F.enter().append("g").classed("legend",true);
F.attr("transform","translate("+W+","+(o[1]-24)+")");
var p=F.selectAll("defs").data([Z]);
p.enter().append("defs");
p.exit().remove();
var X=p.selectAll("#defaultGradient-"+Z).data([Z]);
X.enter().append("linearGradient").attr("id","defaultGradient-"+Z);
X.exit().remove();
var V=p.selectAll("#darkGradient-"+Z).data([Z]);
V.enter().append("linearGradient").attr("id","darkGradient-"+Z);
V.exit().remove();
var M=["0%","33%","67%","100%"];
var O=function(ah,af,ae){var ag=ah.selectAll("stop").data(af);
ag.enter().append("stop").attr("class",function(aj,ai){return"stop"+ai
});
ag.attr("offset",function(ai){return ai
}).attr("stop-color",function(aj,ai){return ae[ai]
})
};
O(X,M,N);
O(V,M,ad);
var ac=F.selectAll(".grad-bg").data([E]);
ac.enter().append("rect").classed("grad-bg",true);
ac.attr("x",H+K).attr("y",0).attr("rx",T/2).attr("ry",T/2).attr("width",Q).attr("height",T);
var ab=F.selectAll(".grad-rect").data([E]);
ab.enter().append("rect").classed("grad-rect",true);
ab.classed("grad-rect",true).attr("x",H+K).attr("y",0).style("stroke","url(#darkGradient-"+Z+")").style("fill","url(#defaultGradient-"+Z+")").attr("width",Q).attr("height",T);
var J=A.selectAll(".legend-label").data([t,z]);
J.enter().append("div").attr("class",function(af,ae){return"legend-label "+(ae?"max":"min")
});
J.style("left",function(af,ae){return(ae?null:W+"px")
}).style("right",function(af,ae){return(ae?W+"px":null)
}).text(function(af,ae){return f.formatFunction(ae?z:t)
});
if(f.interactive){var G=d3.svg.brush().x(d3.scale.linear().range([0,Q])).extent(l).on("brushstart",function(){g=true
}).on("brushend",function(){g=false
}).on("brush",function(){l=G.extent();
q.selectAll(".grad-rect").attr("width",(l[1]-l[0])*Q).attr("x",(Q*l[0])+H+K);
m.drawGeos(I)
});
var L=9;
var U=26;
var P=F.selectAll(".brush").data([E]);
P.enter().append("g").classed("brush",true);
P.attr("transform","translate("+(H+K)+",0)").call(G);
var aa=P.selectAll(".resize");
var Y=aa.selectAll(".handle").data(function(ae){return ae
});
Y.enter().append("rect").classed("handle",true);
Y.attr("transform","translate("+-(L/2)+","+-L+")").attr("rx",L/3).attr("ry",L/3).attr("width",L).attr("height",U)
}};
m.drawTooltip=function(J){var G=this,H=J==null||J.value==null;
h=A.selectAll(".tooltip").data(H?[]:[J]);
h.enter().append("div").classed("tooltip",true);
h.exit().classed("visible",false);
setTimeout(function(){h.classed("visible",true)
},10);
var F=h.selectAll(".tooltip-back").data([J]);
F.enter().append("div").classed("tooltip-back",true);
var K=F.selectAll(".tt-name").data(function(L){return[L.name]
});
K.enter().append("p").classed("tt-name",true);
K.text(function(L){return L
});
var I=F.selectAll(".tt-value").data(function(L){return[L.value]
});
I.enter().append("p").classed("tt-value",true);
I.text(function(L){return f.formatFunction(L)
});
var p=F.selectAll(".tt-metric").data(typeof f.metric!=="undefined"?[f.metric]:[]);
p.enter().append("p").classed("tt-metric",true);
p.text(function(L){return L
});
p.exit().remove()
};
m.hideTooltip=function(){m.drawTooltip({})
};
m.showTooltip=function(p){if("value" in p&&p.value){m.drawTooltip(p)
}else{m.hideTooltip()
}};
m.drawGeos=function(I){var U=null,H,J,M,V=1,Q=Math.min(o[0],o[1]),T=o[0]-n.left-n.right,R=o[1]-n.top-n.bottom,Y=1,K=[0,0];
if(f.projection){D=d3.geo[f.projection]()
}else{D=d3.geo.equirectangular()
}D.scale(Y).translate(K);
var S=d3.geo.path().projection(D);
var L=S.bounds(I);
Y=0.95/Math.max((L[1][0]-L[0][0])/T,(L[1][1]-L[0][1])/R);
K=[(T-Y*(L[1][0]+L[0][0]))/2,(R-Y*(L[1][1]+L[0][1]))/2];
var X=(Y*((L[1][1]-L[0][1])/R))*R,F=(Y*((L[1][0]-L[0][0])/T))*T;
D.scale(Y).translate(K);
S=S.projection(D);
if(f.interactive){var p=d3.behavior.zoom(),P=4;
u.call(p.scaleExtent([1,P]).translate([T/2,R/2]).scale(1).on("zoom",function(){if(d3.event){var ah=d3.event.translate,ak=d3.event.scale,ae=T/2*ak,ac=R/2*ak,aa=ah[0]-ae,ai=ah[1]-ac,ad=F/6,aj=X/6,ag=-ae-ad,ab=T-ae+ad,af=-ac-aj,Z=R-ac+aj;
aa=Math.min(aa,ab);
aa=Math.max(aa,ag);
ai=Math.min(ai,Z);
ai=Math.max(ai,af);
ah[0]=aa+ae;
ah[1]=ai+ac;
p.translate(ah);
w.attr("transform","translate("+aa+","+ai+") scale("+ak+")")
}}))
}b=((z-t)*l[0])+t;
d=((z-t)*l[1])+t;
H=[b,((d-b)/3)+b,(((d-b)/3)*2)+b,d];
C.selectAll(".legend-label.min").text(function(aa,Z){return f.formatFunction(b)
});
C.selectAll(".legend-label.max").text(function(aa,Z){return f.formatFunction(d)
});
if(f.theme=="salmonRun"){U=d3.scale.linear().domain(H).range(j)
}else{U=d3.scale.linear().domain(H).range(B)
}var G=function(Z){if(typeof(E.values[Z.properties.GEO_ID])=="undefined"||E.values[Z.properties.GEO_ID]<b||E.values[Z.properties.GEO_ID]>d){return"#ddd"
}else{return U(E.values[Z.properties.GEO_ID])
}};
var N=function(ac,aa){if(g){return
}var ad=ac.properties.GEO_ID,Z=q.selectAll("#"+ad),ab=Z.node();
ab.parentNode.appendChild(ab);
Z.classed("selected",true);
m.showTooltip({name:ac.properties.name,id:ac.properties.GEO_ID,value:E.values[ac.properties.GEO_ID]})
};
var W=function(ad,ab){if(g){return
}var ae=ad.properties.GEO_ID,aa=q.selectAll("#"+ae),ac=aa.node(),Z=ac.parentNode;
aa.classed("selected",false);
m.hideTooltip()
};
var O=w.selectAll(".geo").data(I.features,function(Z){return Z.properties.GEO_ID
});
O.enter().append("path").classed("geo",true).attr("id",function(aa,Z){return aa.properties.GEO_ID
}).attr("vector-effect","non-scaling-stroke").on("mouseover.choro",f.interactive?N:null).on("mouseout.choro",f.interactive?W:null);
O.exit().on("mouseover.choro",null).on("mouseout.choro",null);
O.attr("d",S).style("fill",G)
};
m.createSVGContainer=function(){C=d3.select(s);
A=C.selectAll(".cv-choropleth").data([E]);
A.enter().append("div").classed("cv-choropleth",true);
A.style("width",o[0]+"px").style("height",o[1]+"px");
q=A.selectAll("svg").data([E]);
q.enter().append("svg").attr("width","100%").attr("height","100%");
q.exit().remove();
var G=q.selectAll("#plotClip").data([0]);
G.enter().append("clipPath").attr("id","plotClip").append("rect");
G.select("rect").attr("x",n.left).attr("y",n.top).attr("width",o[0]-n.left-n.right).attr("height",o[1]-n.top-n.bottom);
var H=q.selectAll(".container-bg").data([E]);
H.enter().append("rect").classed("container-bg",true).attr("width","100%").attr("height","100%");
u=q.selectAll(".zoom-container").data([E]);
u.enter().append("g").classed("zoom-container",true).attr("clip-path","url(#plotClip)");
var F=u.selectAll(".zoom-container-plot-bg").data([E]);
F.enter().append("rect").classed("zoom-container-plot-bg",true);
F.attr("x",n.left).attr("y",n.top).attr("width",o[0]-n.left-n.right).attr("height",o[1]-n.top-n.bottom);
var p=u.selectAll(".choro-container").data([E]);
p.enter().append("g").classed("choro-container",true);
return p
};
m.data=function(p){if(!arguments.length){return E
}E=p;
return m
};
m.parent=function(p){if(!arguments.length){return s
}s=p;
return m
};
m.options=function(p){if(!arguments.length){return f
}f=p;
return m
};
function i(){this.type="EmptyDataException";
this.message="The data is empty or null";
this.toString=function(){return this.type+" - "+this.message
}
}function k(){this.type="ParentNotSpecifiedException";
this.message="A parent was not specified for this visualization";
this.toString=function(){return this.type+" - "+this.message
}
}return m
};
d3.choropleth.gradIdCounter=0
}(this));
(function(e){var f=e.cloudViz||{},b=f.core||{},c=e.dv||{},d=e.d3||{},a=Object.create(b);
a.init=function(g){this._type="choropleth";
g=g||{};
this._initDefaultOptions();
this.setOptions(g);
this._initChoropleth();
return this
};
a._initDefaultOptions=function(g){var h={geoJson:null,theme:"sunnyDay",metric:"",projection:"equirectangular",format:"decimal",interactive:true};
return Object.getPrototypeOf(a)._initDefaultOptions.call(this,h)
};
a._render=function(){this._configure();
this._choro.layout()
};
a._initChoropleth=function(){this._choro=d.choropleth()
};
a._configure=function(){var h=this,i=this._options,g=this._dataAdapter;
i.formatFunction=function(j){return h._formatNumber(i.format,j)
};
i.metric=g.metric();
i.format=g.format();
i.data=g.data();
this._choro.data(this._options.data).parent(this._options.parent).options(this._options)
};
e.cloudViz.choropleth=f.util.createConstructor(a)
}(this));
(function(a){a.venn=function(h,c,m){m=m||{};
m.distance=m.distance||0;
m.maxIterations=m.maxIterations||500;
var l=m.lossFunction||a.lossFunction;
var e=m.layoutFunction||a.greedyLayout;
h=e(h,c,m.distance);
var j=new Array(2*h.length);
for(var g=0;
g<h.length;
++g){j[2*g]=h[g].x;
j[2*g+1]=h[g].y
}var d=0;
var k=a.fmin(function(n){d+=1;
var p=new Array(h.length);
for(var o=0;
o<h.length;
++o){p[o]={x:n[2*o],y:n[2*o+1],radius:h[o].radius,size:h[o].size}
}return l(p,c)
},j,m);
var f=k.solution;
for(g=0;
g<h.length;
++g){h[g].x=f[2*g];
h[g].y=f[2*g+1]
}return h
};
a.distanceFromIntersectArea=function(e,d,c){if(Math.min(e,d)*Math.min(e,d)*Math.PI<c){return Math.abs(e-d)
}return a.bisect(function(f){return window.circleIntersection.circleOverlap(e,d,f)-c
},0,e+d)
};
a.getDistanceMatrix=function(m,e,n){var o=[],k;
for(k=0;
k<m.length;
++k){o.push([]);
for(var h=0;
h<m.length;
++h){o[k].push(0)
}}for(k=0;
k<e.length;
++k){var l=e[k];
if(l.sets.length!==2){continue
}var g=l.sets[0],p=l.sets[1],f=Math.sqrt(m[g].size/Math.PI),d=Math.sqrt(m[p].size/Math.PI),c=a.distanceFromIntersectArea(f,d,l.size)+n;
o[g][p]=o[p][g]=c
}return o
};
a.greedyLayout=function(d,J,o){var h={},u,H,F;
for(H=0;
H<d.length;
++H){h[H]=[];
d[H].radius=Math.sqrt(d[H].size/Math.PI);
d[H].x=d[H].y=0
}for(H=0;
H<J.length;
++H){var w=J[H];
if(w.sets.length!==2){continue
}var p=w.sets[0],I=w.sets[1];
if(!h[p]||!h[I]){continue
}h[p].push({set:I,size:w.size});
h[I].push({set:p,size:w.size})
}var s=[];
for(u in h){if(h.hasOwnProperty(u)){var v=0;
for(H=0;
H<h[u].length;
++H){v+=h[u][H].size
}s.push({set:u,size:v})
}}if(!s.length){return d
}function z(j,i){return i.size-j.size
}s.sort(z);
var e={};
function t(i){return i.set in e
}function D(i,j){d[j].x=i.x;
d[j].y=i.y;
e[j]=true
}D({x:0,y:0},s[0].set);
var q=a.getDistanceMatrix(d,J,o);
for(H=1;
H<s.length;
++H){var E=s[H].set,c=h[E].filter(t);
u=d[E];
c.sort(z);
if(c.length===0){throw"Need overlap information for set "+u
}var G=[];
for(F=0;
F<c.length;
++F){var m=d[c[F].set],L=q[E][c[F].set];
G.push({x:m.x+L,y:m.y});
G.push({x:m.x-L,y:m.y});
G.push({y:m.y+L,x:m.x});
G.push({y:m.y-L,x:m.x});
for(var C=F+1;
C<c.length;
++C){var g=d[c[C].set],K=q[E][c[C].set];
var B=window.circleIntersection.circleCircleIntersection({x:m.x,y:m.y,radius:L},{x:g.x,y:g.y,radius:K});
for(var A=0;
A<B.length;
++A){G.push(B[A])
}}}var f=1e+50,r=G[0];
for(F=0;
F<G.length;
++F){d[E].x=G[F].x;
d[E].y=G[F].y;
var n=a.lossFunction(d,J);
if(n<f){f=n;
r=G[F]
}}D(r,E)
}return d
};
a.classicMDSLayout=function(f,g){var d=a.getDistanceMatrix(f,g,0);
var c=window.mds.classic(d);
for(var e=0;
e<f.length;
++e){f[e].x=c[e][0];
f[e].y=c[e][1];
f[e].radius=Math.sqrt(f[e].size/Math.PI)
}return f
};
a.lossFunction=function(k,d){var e=0;
function f(i){return i.map(function(n){return k[n]
})
}for(var h=0;
h<d.length;
++h){var c=d[h],l;
if(c.sets.length==2){var g=k[c.sets[0]],m=k[c.sets[1]];
if(g==null||m==null){l=0
}else{l=window.circleIntersection.circleOverlap(g.radius,m.radius,window.circleIntersection.distance(g,m))
}}else{l=window.circleIntersection.intersectionArea(f(c.sets))
}var j=(c.weight==null)?1:c.weight;
e+=j*(l-c.size)*(l-c.size)
}return e
};
a.scaleSolution=function(n,f,q,o){var j=function(s){var i=Math.max.apply(null,n.map(function(t){return t[s]+t.radius
})),r=Math.min.apply(null,n.map(function(t){return t[s]-t.radius
}));
return{max:i,min:r}
};
f-=2*o;
q-=2*o;
var d=j("x"),h=j("y"),g=(d.max-d.min),m=(h.max-h.min),l=g?f/g:0,c=m?q/m:0,e=Math.min(c,l);
for(var k=0;
k<n.length;
++k){var p=n[k];
p.radius=e*p.radius;
p.x=o+(p.x-d.min)*e;
p.y=o+(p.y-h.min)*e
}n.scaling=e;
return n
};
function b(d,c){var f=new Array(d[1].length||0);
for(var e=0;
e<f.length;
++e){f[e]=d[0]*d[1][e]+c[0]*c[1][e]
}return f
}a.bisect=function(e,m,l,p){p=p||{};
var j=p.maxIterations||100,k=p.tolerance||1e-10,h=e(m),g=e(l),o=l-m;
if(h*g>0){throw"initial bisect points must have opposite signs"
}if(h===0){return m
}if(g===0){return l
}for(var d=0;
d<j;
++d){o/=2;
var n=m+o,c=e(n);
if(c*h>=0){m=n
}if((Math.abs(o)<k)||(c===0)){return n
}}return m+o
};
a.fmin=function(B,C,k){k=k||{};
var t=k.maxIterations||C.length*200,l=k.nonZeroDelta||1.1,d=k.zeroDelta||0.001,G=k.minErrorDelta||0.00001,e=k.rho||1,F=k.chi||2,D=k.psi||-0.5,q=k.sigma||0.5,g=k.callback;
var n=C.length,o=new Array(n+1);
o[0]=C;
o[0].fx=B(C);
for(var A=0;
A<n;
++A){var v=C.slice();
v[A]=v[A]?v[A]*l:d;
o[A+1]=v;
o[A+1].fx=B(v)
}var r=function(i,f){return i.fx-f.fx
};
for(var c=0;
c<t;
++c){o.sort(r);
if(g){g(o)
}if(Math.abs(o[0].fx-o[n].fx)<G){break
}var p=new Array(n);
for(A=0;
A<n;
++A){p[A]=0;
for(var z=0;
z<n;
++z){p[A]+=o[z][A]
}p[A]/=n
}var u=o[n];
var E=b([1+e,p],[-e,u]);
E.fx=B(E);
var s=E;
if(E.fx<=o[0].fx){var w=b([1+F,p],[-F,u]);
w.fx=B(w);
if(w.fx<E.fx){s=w
}}else{if(E.fx>=o[n-1].fx){var h=false;
var m;
if(E.fx<=u.fx){m=b([1+D,p],[-D,u]);
m.fx=B(m);
if(m.fx<u.fx){s=m
}else{h=true
}}else{m=b([1-D*e,p],[D*e,u]);
m.fx=B(m);
if(m.fx<=E.fx){s=m
}else{h=true
}}if(h){for(A=1;
A<o.length;
++A){o[A]=b([1-q,o[0]],[q-1,o[A]]);
o[A].fx=B(o[A])
}}}}o[n]=s
}o.sort(r);
return{f:o[0].fx,solution:o[0]}
};
a.drawD3Diagram=function(i,h,e,s,r){r=r||{};
var g=d3.scale.category10(),k=r.circleFillColours||g,m=r.circleStrokeColours||k,p=r.circleStrokeWidth||function(t){return 0
},f=r.textFillColours||g,n=r.textStrokeColours||f,c=r.opacity||0.3,o=r.padding||6;
h=a.scaleSolution(h,e,s,o);
var j=i.append("svg").attr("width",e).attr("height",s);
var d=j.selectAll("circle").data(h).enter().append("g");
var l=d.append("circle").attr("r",function(t){return t.radius
}).style("fill-opacity",c).attr("cx",function(t){return t.x
}).attr("cy",function(t){return t.y
}).style("stroke",function(u,t){return m(t)
}).style("stroke-width",function(u,t){return p(t)
}).style("fill",function(u,t){return k(t)
});
var q=d.append("text").attr("x",function(t){return t.x
}).attr("y",function(t){return t.y
}).attr("text-anchor","middle").style("stroke",function(u,t){return n(t)
}).style("fill",function(u,t){return f(t)
}).text(function(t){return t.label
});
return{svg:j,nodes:d,circles:l,text:q}
};
a.updateD3Diagram=function(e,g){var d=e.select("svg"),f=parseInt(d.attr("width"),10),c=parseInt(d.attr("height"),10);
g=a.scaleSolution(g,f,c,6);
e.selectAll("circle").data(g).transition().duration(400).attr("cx",function(h){return h.x
}).attr("cy",function(h){return h.y
}).attr("r",function(h){return h.radius
});
e.selectAll("text").data(g).transition().duration(400).attr("x",function(h){return h.x
}).attr("y",function(h){return h.y
})
}
}(window.venn=window.venn||{}));
(function(a){var b=1e-10;
a.intersectionArea=function(q,C){var n=c(q);
var w=n.filter(function(i){return a.containedInCircles(i,q)
});
var z=0,o=0,v=[],u;
if(w.length>1){var A=a.getCenter(w);
for(u=0;
u<w.length;
++u){var l=w[u];
l.angle=Math.atan2(l.x-A.x,l.y-A.y)
}w.sort(function(j,i){return i.angle-j.angle
});
var e=w[w.length-1];
for(u=0;
u<w.length;
++u){var f=w[u];
o+=(e.x+f.x)*(f.y-e.y);
var h={x:(f.x+e.x)/2,y:(f.y+e.y)/2},k=null;
for(var r=0;
r<f.parentIndex.length;
++r){if(e.parentIndex.indexOf(f.parentIndex[r])>-1){var g=q[f.parentIndex[r]],E=Math.atan2(f.x-g.x,f.y-g.y),D=Math.atan2(e.x-g.x,e.y-g.y);
var t=(D-E);
if(t<0){t+=2*Math.PI
}var B=D-t/2,m=a.distance(h,{x:g.x+g.radius*Math.sin(B),y:g.y+g.radius*Math.cos(B)});
if((k===null)||(k.width>m)){k={circle:g,width:m,p1:f,p2:e}
}}}v.push(k);
z+=a.circleArea(k.circle.radius,k.width);
e=f
}}else{var d=q[0];
for(u=1;
u<q.length;
++u){if(q[u].radius<d.radius){d=q[u]
}}var s=false;
for(u=0;
u<q.length;
++u){if(a.distance(q[u],d)>Math.abs(d.radius-q[u].radius)){s=true;
break
}}if(s){z=o=0
}else{z=d.radius*d.radius*Math.PI;
v.push({circle:d,p1:{x:d.x,y:d.y+d.radius},p2:{x:d.x-b,y:d.y+d.radius},width:d.radius*2})
}}o/=2;
if(C){C.area=z+o;
C.arcArea=z;
C.polygonArea=o;
C.arcs=v;
C.innerPoints=w;
C.intersectionPoints=n
}return z+o
};
a.containedInCircles=function(d,f){for(var e=0;
e<f.length;
++e){if(a.distance(d,f[e])>f[e].radius+b){return false
}}return true
};
function c(m){var g=[];
for(var h=0;
h<m.length;
++h){for(var f=h+1;
f<m.length;
++f){var d=a.circleCircleIntersection(m[h],m[f]);
for(var e=0;
e<d.length;
++e){var l=d[e];
l.parentIndex=[h,f];
g.push(l)
}}}return g
}a.circleIntegral=function(e,d){var f=Math.sqrt(e*e-d*d);
return d*f+e*e*Math.atan2(d,f)
};
a.circleArea=function(e,d){return a.circleIntegral(e,d-e)-a.circleIntegral(e,-e)
};
a.distance=function(e,d){return Math.sqrt((e.x-d.x)*(e.x-d.x)+(e.y-d.y)*(e.y-d.y))
};
a.circleOverlap=function(h,g,i){if(i>=h+g){return 0
}if(i<=Math.abs(h-g)){return Math.PI*Math.min(h,g)*Math.min(h,g)
}var f=h-(i*i-g*g+h*h)/(2*i),e=g-(i*i-h*h+g*g)/(2*i);
return a.circleArea(h,f)+a.circleArea(g,e)
};
a.circleCircleIntersection=function(p,o){var l=a.distance(p,o),j=p.radius,i=o.radius;
if((l>=(j+i))||(l<=Math.abs(j-i))){return[]
}var m=(j*j-i*i+l*l)/(2*l),k=Math.sqrt(j*j-m*m),g=p.x+m*(o.x-p.x)/l,n=p.y+m*(o.y-p.y)/l,f=-(o.y-p.y)*(k/l),e=-(o.x-p.x)*(k/l);
return[{x:g+f,y:n-e},{x:g-f,y:n+e}]
};
a.getCenter=function(f){var d={x:0,y:0};
for(var e=0;
e<f.length;
++e){d.x+=f[e].x;
d.y+=f[e].y
}d.x/=f.length;
d.y/=f.length;
return d
}
}(window.circleIntersection=window.circleIntersection||{}));
(function(e){var f=e.cloudViz||{},b=f.core||{},c=e.dv||{},d=e.d3||{},a=Object.create(b);
a.init=function(h){var g=this;
this._type="venn";
h=h||{};
this._initDefaultOptions();
this.setOptions(h);
this._cvWrapper=null;
this._seriesState=f.seriesState();
this._seriesState.on("enableChange.venn",function(i,j){g._onEnableState(j)
});
this._dvColorScale=c.scale.ordinal();
return this
};
a._initDefaultOptions=function(g){var h={colors:["#8cc350","#d755a5","#1ebed7","#f0a01e","#9b8ce6","#3cb5a0","#3287d2","#f0557d","#c3d250","#eb782d","#78b4f5","#5faf69","#aa5fa5","#fa5a50","#f5c841","#5a6eaa"],legendVerticalWidth:110,duration:500,distance:0};
this._margins={top:0,left:0,right:0,bottom:0};
return Object.getPrototypeOf(a)._initDefaultOptions.call(this,h)
};
a._render=function(){this._id=Math.floor(Math.random()*10000);
this._determineSize();
this._initScales();
this._draw()
};
a._draw=function(){var i=this._options.data;
i.distance=this._options.distance;
this._initSVG();
this._createStates();
this._parsedSetNotation=this._parseSetNotation(i.notation);
this._overlapMap=this._createOverlapMap(i.sets,i.overlaps);
var h=this._drawLegend();
this._positionContainer(h);
var g=this._configureSets(i);
var j=this._generateOverlayCombinations(g,this._parsedSetNotation);
this._drawCircles(g,j)
};
a._onAutoResize=function(){this.render()
};
a._determineSize=function(h){var l=this._options,m=this._dataAdapter.data(),k=l.parent.offsetWidth,i=l.parent.offsetHeight,j=c.util.getPercentValue(l.width,k)||k,g=c.util.getPercentValue(l.height,i)||i;
this._size=[j,g]
};
a._initScales=function(){this._dvColorScale.range(this._options.colors)
};
a._parseSetNotation=function(h){var q=[];
if(!h){return q
}var o=h.split("|"),s=/\d+/g;
var m,g=o.length,l;
for(m=0;
m<g;
m++){l=o[m];
var p=l.match(s);
var k,r=[],t=p.length,n;
for(k=0;
k<t;
k++){r.push(+p[k])
}q.push(r)
}return q
};
a._initSVG=function(){var j=this._options,h=d.select(j.parent);
this._cvWrapper=h.selectAll(".cv-wrapper.cv-venn").data([0]);
this._cvWrapper.enter().append("div").classed("cv-wrapper cv-venn",true);
this._cvWrapper.style("width",this._size[0]+"px").style("height",this._size[1]+"px");
var g=this._cvWrapper.selectAll(".svg-wrapper").data([0]);
g.enter().append("div").classed("svg-wrapper",true);
var i=g.selectAll("svg").data([0]);
i.enter().append("svg");
this._d3Container=i.selectAll("g").data([0]);
this._d3Container.enter().append("g")
};
a._positionContainer=function(g){this._size[0]-=g.left+g.right;
this._size[1]-=g.top+g.bottom;
this._cvWrapper.select(".svg-wrapper").style({"margin-left":g.left+"px","margin-top":g.top+"px","margin-right":g.right+"px","margin-bottom":g.bottom+"px",height:this._size[1]+"px"});
this._cvWrapper.selectAll(".cv-legend").style("height",g.left||g.right?this._size[1]-1+"px":null)
};
a._configureSets=function(k){var j=this._options;
k=this._sanitizeOverlaps(k);
var m=e.venn.scaleSolution(e.venn.venn(k.sets,k.overlaps,{distance:k.distance}),this._size[0],this._size[1],7);
var g,h=m.length,l;
for(g=0;
g<h;
g++){l=m[g];
l.index=g
}return m
};
a._combine=function(m,h,g){if(arguments.length<3){g=m.length-1
}else{g--
}if(arguments.length<2){h=1
}var l=function(r,q,i,p){if(r===0){if(i.length>0){p[p.length]=i
}return
}for(var o=0;
o<q.length;
o++){l(r-1,q.slice(o+1),i.concat([q[o]]),p)
}return
};
var k=[];
for(var j=h;
j<=g+1;
j++){l(j,m,[],k)
}return k
};
a._intersect=function(h,g){var m=[];
for(var l=0;
l<h.length;
l++){for(var k=0;
k<g.length;
k++){if(h[l]==g[k]){m.push(h[l]);
break
}}}return m
};
a._union=function(h,g){var p={};
for(var o=h.length-1;
o>=0;
--o){p[h[o]]=h[o]
}for(var m=g.length-1;
m>=0;
--m){p[g[m]]=g[m]
}var n=[];
for(var l in p){if(p.hasOwnProperty(l)){n.push(p[l])
}}n.sort(function(j,i){return j-i
});
return n
};
a._generateOverlayCombinations=function(l,q){var t=this,k={},s=[],o=[];
q.sort(function(u,i){return i.length-u.length
});
q.forEach(function(v,u){var w=v.join("-");
s=s.concat(t._combine(v,1));
s.forEach(function(C,i){var z=C.join("-"),A=k[z]||{},B;
if(!A.fill){B=t._intersect(v,C);
A.fill=B.join("-")===w
}k[z]=A
})
});
for(var p in k){var n=p.split("-"),g=[],j,r=n.length;
for(j=0;
j<r;
j++){var m=l[n[j]];
if(m){g.push(l[n[j]])
}}var h={};
if(g.length>1){e.circleIntersection.intersectionArea(g,h)
}if(!g.length){h.area=0
}else{h.area=Math.PI*Math.pow(g[0].radius,2)
}o.push({key:p,fill:k[p].fill,area:h.area})
}o.sort(function(u,i){var v=i.area-u.area;
if(v){return v
}return u.key.length-i.key.length
});
return o
};
a._sanitizeOverlaps=function(n){var p=n.sets,i=n.overlaps,m=[],g,l,k,s,j,q,u,r=p.length,o=i.length,h={},t=function(w,v){return +w-+v
};
for(k=0;
k<o;
k++){q=i[k];
q.sets.sort(t);
h[q.sets.join("-")]=q
}for(g=0;
g<r;
g++){s=p[g];
for(l=g+1;
l<r;
l++){j=p[l];
u=false;
if(!h.hasOwnProperty(g+"-"+l)||h[g+"-"+l].size==="0"){m.push({sets:[g,l],size:0})
}}}n.overlaps=i.concat(m);
return n
};
a._createOverlapMap=function(o,h){var g={},l=function(j,i){return j-i
};
var m,r=o.length,q;
for(m=0;
m<r;
m++){q=o[m];
g[m]=q.size
}var k,n=h.length,p;
for(m=0;
m<n;
m++){p=h[m];
p.sets.sort(l);
g[p.sets.join("-")]=p.size
}return g
};
a._drawCircles=function(g,h){this._drawSetHitAreas(g);
this._createClipPaths(g,h);
this._drawFilledRegions(h);
this._drawPadding(g);
this._drawSetFills(g);
this._drawBorders(g);
this._makePlotFit(g)
};
a._drawSetHitAreas=function(i){var h=this,j=this._options;
var g=this._d3Container.selectAll(".set-hit-areas-container").data([i]);
g.enter().append("g").classed("set-hit-areas-container",true);
g.exit().remove();
var k=g.selectAll("circle").data(function(l){return l
});
k.enter().append("circle").attr("r",0).attr("cx",function(l){return l.x
}).attr("cy",function(l){return l.y
}).attr("tooltip",function(l){return l.tooltip
});
k.exit().remove();
k.sort(function(m,l){return l.radius-m.radius
}).on("mouseover",function(m,l){h._seriesState.enableStateByTypeAndId("standard",m.index,true)
}).on("mouseout",function(m,l){h._seriesState.enableStateByTypeAndId("standard",m.index,false)
}).transition().duration(j.duration).attr("r",function(l){return Math.max(l.radius-1,0)
}).attr("cx",function(l){return l.x
}).attr("cy",function(l){return l.y
})
};
a._createClipPaths=function(k,l){var i=this;
var g=this._cvWrapper.select("svg").selectAll("defs").data(l.length?[0]:[]);
g.enter().insert("defs",":first-child");
g.exit().remove();
var h=g.selectAll("clipPath").data(l);
h.enter().append("clipPath");
h.exit().remove();
h.attr("id",function(m){return"clip-"+i._id+"-"+m.key
});
var j=h.selectAll("circle").data(function(o){if(!o.key||!o.key.length){return[]
}var m=o.key.split("-"),n={circleIndex:m.shift()};
if(m.length){n.maskId=m.join("-")
}if(!k||!k[n.circleIndex]){return[]
}return[n]
});
j.enter().append("circle");
j.exit().remove();
j.attr("clip-path",function(m){return m.hasOwnProperty("maskId")?"url(#clip-"+i._id+"-"+m.maskId+")":null
}).attr("r",function(m){return k[m.circleIndex].radius
}).attr("cx",function(m){return k[m.circleIndex].x
}).attr("cy",function(m){return k[m.circleIndex].y
}).style("fill","#FFF")
};
a._drawFilledRegions=function(k){var g=this,i=this._options;
var h=this._d3Container.selectAll(".filled-regions").data(k?[k]:[]);
h.enter().append("g").classed("filled-regions",true);
h.exit().remove();
var j=h.selectAll(".fill-region").data(function(l){return l
});
j.enter().append("rect").classed("fill-region",true);
j.exit().remove();
j.attr("clip-path",function(l){return"url(#clip-"+g._id+"-"+l.key+")"
}).style("opacity",0.000001).attr("width",g._size[0]).attr("height",g._size[1]).classed("overlay",function(l){return l.fill
}).on("mouseover",function(m,l){g._seriesState.enableStateByTypeAndId("highlight","audience",true)
}).on("mouseout",function(m,l){g._seriesState.enableStateByTypeAndId("highlight","audience",false)
}).transition().delay(i.duration).duration(i.duration).style("opacity",1)
};
a._drawPadding=function(h){var i=this._options;
var g=this._d3Container.selectAll(".padding-container").data([h]);
g.enter().append("g").classed("padding-container",true);
g.exit().remove();
var j=g.selectAll("circle").data(function(k){return k
});
j.enter().append("circle").attr("r",0).attr("cx",function(k){return k.x
}).attr("cy",function(k){return k.y
});
j.exit().remove();
j.transition().duration(i.duration).attr("r",function(k){return k.radius
}).attr("cx",function(k){return k.x
}).attr("cy",function(k){return k.y
})
};
a._drawSetFills=function(i){var h=this,j=this._options;
var g=this._d3Container.selectAll(".set-fills-container").data([i]);
g.enter().append("g").classed("set-fills-container",true);
g.exit().remove();
var k=g.selectAll("circle").data(function(l){return l
});
k.enter().append("circle").attr("r",0).attr("cx",function(l){return l.x
}).attr("cy",function(l){return l.y
});
k.exit().remove();
k.style("fill",function(m,l){return h._dvColorScale.mapValue(l)
}).transition().duration(j.duration).attr("r",function(l){return Math.max(l.radius-3,0)
}).attr("cx",function(l){return l.x
}).attr("cy",function(l){return l.y
})
};
a._drawBorders=function(i){var h=this,j=this._options;
var g=this._d3Container.selectAll(".border-container").data([i]);
g.enter().append("g").classed("border-container",true);
g.exit().remove();
var k=g.selectAll("circle").data(function(l){return l
});
k.enter().append("circle").attr("r",0).attr("cx",function(l){return l.x
}).attr("cy",function(l){return l.y
});
k.exit().remove();
k.style("stroke",function(m,l){return h._dvColorScale.mapValue(l)
}).classed("predicted",function(l){return l.predicted
}).transition().duration(j.duration).attr("r",function(l){return l.radius
}).attr("cx",function(l){return l.x
}).attr("cy",function(l){return l.y
})
};
a._createStates=function(){var k=this._options,h=k.data.sets;
if("data" in this._changedOptions&&this._changedOptions.data){this._seriesState.removeStatesByType("standard");
this._seriesState.removeStatesByType("highlight");
this._seriesState.appendState(this._dataAdapter.l10n.labels.venn.definedAudience,"audience","highlight",false);
var g,j=h.length,l=[],m;
for(g=0;
g<j;
g++){m=h[g];
l.push(g);
this._seriesState.appendState(m.label||g,g,"standard",false)
}this._dvColorScale.domain(l)
}};
a._drawLegend=function(){var k=this._options,i=this;
if(!this._legend){this._legend=f.interactiveLegend()
}this._legend.parent(this._cvWrapper.node()).orientation("bottom").chartWidth(this._size[0]).chartHeight(this._size[1]).chartPadding({left:0,top:0,right:0,bottom:0}).validOrientations(["bottom","left"]).legendVerticalWidth(k.legendVerticalWidth).type("line").seriesState(this._seriesState).interactive(false).values(this._calculateValues(this._options.data.sets,this._overlapMap,this._parsedSetNotation))._render(null,{fill:[this._dvColorScale]});
var l=this._legend._getUsedWidth(),h=this._legend._getUsedHeight(),j=h!==0;
var g=this._cvWrapper.selectAll(".cv-legend-entry").on("mouseover",function(m){i._seriesState.enableStateByTypeAndId(m.type,m.id,true)
}).on("mouseout",function(m){i._seriesState.enableStateByTypeAndId(m.type,m.id,false)
});
if(j){g.style("width",function(n,m){return(i._size[0]/(i._options.data.sets.length+1))+"px"
})
}return{left:l,bottom:h,right:0,top:0}
};
a._onEnableState=function(g){this._cvWrapper.selectAll(".set-fills-container circle").style("display",function(j,h){return g.type==="standard"&&g.id===h&&g.enabled?"block":"none"
});
this._cvWrapper.selectAll(".border-container circle").classed("muted",function(j,h){return g.id!==h&&g.enabled
});
this._cvWrapper.selectAll(".filled-regions rect").classed("muted",function(j,h){return g.type==="standard"&&g.enabled
});
this._cvWrapper.selectAll(".padding-container circle").style("display",function(j,h){return g.type==="highlight"&&g.enabled?"none":"block"
});
this._cvWrapper.selectAll(".cv-legend-entry").classed("inactive",function(h){return g.enabled&&(h.id!==g.id||h.type!==g.type)
})
};
a._calculateValues=function(k,n,g){var h=[this._formatNumber("decimal",this._calculateHighlightedValue(k,n,g))],j,l=k.length,m;
for(j=0;
j<l;
j++){m=k[j];
h.push(m.sizeText?m.sizeText:this._formatNumber("decimal",m.size))
}return h
};
a._calculateHighlightedValue=function(h,k,g){var i=function(w,v,u,o){var s=this._combine(v,o,o);
var p,A=s.length,m,l=o%2?1:-1;
for(p=0;
p<A;
p++){m=s[p];
var n,t=m.length,q,r,z=[];
for(n=0;
n<t;
n++){q=m[n];
z=this._union(w[q],z)
}r=z.join("-");
u+=(k.hasOwnProperty(r)?k[r]:0)*l
}o++;
if(o<=w.length){u=i.call(this,w,v,u,o)
}return u
},j=function(n){var l=[],m;
for(m=0;
m<n;
m++){l.push(m)
}return l
};
return i.call(this,g,j(g.length),0,1)
};
a._makePlotFit=function(g){var h=this._options,j={x:0,y:0},l=0,k=0,i=4;
g.forEach(function(m){l=Math.max(l,m.x+m.radius);
k=Math.max(k,m.y+m.radius)
});
if(this._size[0]-l>this._size[1]-k){j.x=(this._size[0]-l)/2-i
}else{j.y=(this._size[1]-k)/2-i
}this._cvWrapper.select("g").attr("transform","translate("+j.x+","+j.y+")")
};
e.cloudViz.venn=f.util.createConstructor(a)
}(this));
(function(d){var e=d.cloudViz||{},a=e.core||{},b=d.dv||{},c=d.d3||{},f=Object.create(a);
f.init=function(g){this._type="sunburst";
this._hiddenNodes=[];
this._outRangeNodes=[];
this._invalidNodes=[];
this._initDefaultOptions();
this.setOptions(g);
return this
};
f._initDefaultOptions=function(){var h="Visits",g={otherColor:"#ccc",otherGrayColor:"#999",outRangeColor:"#5a5a5a",metricColor:"#fff",seqColors:["#faf0c8","#d2dc73","#5faf69","#00505A"],seqColorsHeat:["#5a6eaa","#3287d2","#3cb5a0","#5faf69","#8cc350","#c3d250","#f5c841","#f0a01e","#eb782d","#fa5a50"],colors:["#3287d2","#9b8ce6","#d755a5","#fa5a50","#f0a01e","#c3d250","#5faf69","#1ebed7","#5a6eaa","#78b4f5","#aa5fa5","#f0557d","#e8782d","#f5c841","#8cc350","#3cb5a0","#286eaf","#826ee1","#b93282","#f04641","#e18c00","#a0b400","#50965a","#00a0be","#465a87","#4196e6","#964196","#dc3c69","#dc5f00","#e6b43c","#7daf4b","#32a08c"],padding:{top:10,bottom:60,left:10,right:10}};
return Object.getPrototypeOf(f)._initDefaultOptions.call(this,g)
};
f._onAutoResize=function(){this.resize()
};
f.resize=function(){if(!c.select(this._options.parent).selectAll(".sunburst-cv").node()){return
}this._sizeChart();
this._render(true)
};
f.reset=function(){Object.getPrototypeOf(f).reset.apply(this,arguments)
};
f._preRender=function(){if(this._paths){var A=this._oldKeys=this._dataAdapter.getDataByPathKey(),O,S;
for(O in A){S=A[O];
A[O]={xo:S.x,dxo:S.dx,yo:S.y,dyo:S.dy}
}}Object.getPrototypeOf(f)._preRender.apply(this);
var u=this._options,l=this,H=this._dataAdapter,N=H.l10n.labels.sunburst,m=c.select(u.parent);
if(H.getSecondaryMetricIndex()){l._hideNode(H.data(),l._invalidNodes,function(k){return l._isInvalidNode(k)
})
}var L=this._hiddenNodes,J=H.getDataByPathKey();
this._hiddenNodes=[];
L.forEach(function(X,W){var k=H.getPathKey(X);
if(J[k]){l._hideNode(J[k],l._hiddenNodes)
}});
var w=this._zoomedPath;
this._zoomedPath=null;
if(w){w=J[H.getPathKey(w)];
this._zoomedPath=this._oldZoomed=w
}var E=this._lockedNode;
this._lockedNode=null;
if(E){if("path"===E.type){E.data=J[H.getPathKey(E.data)];
if(E.data){this._oldLockedNode=E
}}if("category"===E.type){var h=H.categories().some(function(k){if(E.data&&E.data.name===k.name){E.data=k;
return true
}return false
});
if(h){this._oldLockedNode=E
}}}var j=m.selectAll(".sunburst-cv").data([0]);
j.enter().insert("div",":first-child").classed("sunburst-cv",true);
var r=j.selectAll(".sunburst-cv-wrapper").data([0]);
r.enter().insert("div",":first-child").classed("sunburst-cv-wrapper",true);
var F=r.selectAll(".sunburst-cv-container").data([0]);
F.enter().insert("div",":first-child").classed("sunburst-cv-container",true);
var g=F.selectAll(".sunburst-svg").data([0]);
g.enter().append("svg").classed("sunburst-svg",true);
var C=g.selectAll(".sunburst-svg-container").data([0]);
C.enter().append("g").classed("sunburst-svg-container",true);
var i=r.selectAll(".sunburst-cv-label").data([0]);
i.enter().append("div").classed("sunburst-cv-label",true);
var G=i.selectAll(".sunburst-cv-label-wrap").data([0]);
G.enter().append("div").classed("sunburst-cv-label-wrap",true);
var p=G.selectAll(".sunburst-cv-label-metric").data([0]);
p.enter().append("div").classed("sunburst-cv-label-metric",true);
var q=G.selectAll(".sunburst-audiences").data([0]);
q.enter().append("div").classed("sunburst-audiences",true);
q.exit().remove();
var K=j.selectAll(".sunburst-cv-actions-pane").data([0]);
K.enter().append("div").classed("sunburst-cv-actions-pane",true);
K.exit().remove();
var I=K.selectAll(".actions-pane-zoomout").data([0]);
I.enter().append("div").classed("actions-pane-zoomout",true).classed("actions-pane-action",true);
I.html('<i class="icon zoomout"></i><span>'+N.zoomout+"</span>");
I.on("click",function(){l._zoomPath(H.data())
});
I.exit().remove();
var n=K.selectAll(".actions-pane-hidden").data([0]);
n.enter().append("div").classed("actions-pane-hidden",true).classed("actions-pane-action",true);
n.html('<i class="icon hide"></i><span>'+l._hideLabelText()+"</span>");
n.on("click",function(){l._unhidePaths()
});
n.exit().remove();
var B=r.selectAll(".sunburst-cv-sec-viz").data([0]);
var o=B.enter().append("div").classed("sunburst-cv-sec-viz",true);
o.append("span").classed("title",true);
var t=o.append("span").classed("bar",true);
t.append("span").classed("button",true).classed("color",true).append("span");
t.append("span").classed("button",true).classed("height",true).append("span");
t.append("span").classed("button",true).classed("both",true).append("span");
B.selectAll(".button.color").on("click",function(){H.setSecondaryMetricType("color");
l._secondaryMetricChanged()
}).selectAll("span").html(N.color);
B.selectAll(".button.height").on("click",function(){H.setSecondaryMetricType("height");
l._secondaryMetricChanged()
}).selectAll("span").html(N.height);
B.selectAll(".button.both").on("click",function(){H.setSecondaryMetricType("both");
l._secondaryMetricChanged()
}).selectAll("span").html(N.both);
B.exit().remove();
var D=r.selectAll(".sunburst-cv-secondary").data([0]);
D.enter().append("div").classed("sunburst-cv-secondary",true);
D.exit().remove();
var R=D.selectAll(".sunburst-cv-color").data([0]);
R.enter().append("div").classed("sunburst-cv-color",true);
R.exit().remove();
var M=j.selectAll(".sunburst-cv-info-pane").data([0]);
M.enter().append("div").classed("sunburst-cv-info-pane",true);
M.exit().remove();
var V=M.selectAll(".info-pane-content").data([0]);
V.enter().append("div").classed("info-pane-content",true);
V.exit().remove();
var P=V.selectAll(".info-pane-categories").data([0]);
P.enter().append("div").classed("info-pane-categories",true).append("div").classed("pane-title",true).append("span");
P.exit().remove();
var T=V.selectAll(".sunburst-audiences").data([0]);
T.enter().append("div").classed("sunburst-audiences",true).append("div").classed("pane-title",true).append("span").text(N.audience);
T.exit().remove();
var v=V.selectAll(".info-pane-actions").data([0]);
v.enter().append("div").classed("info-pane-actions",true);
v.exit().remove();
var z=V.selectAll(".info-pane-metrics").data([0]);
var U=z.enter().append("div").classed("info-pane-metrics",true);
U.append("div").classed("pane-title",true).classed("pri-metric",true).append("span");
U.append("div").classed("info-pane-metrics-labels",true).classed("pri-metric-labels",true);
U.append("div").classed("pane-title",true).classed("sec-metric",true).append("span");
U.append("div").classed("info-pane-metrics-labels",true).classed("sec-metrics-labels",true).append("span").classed("sec-metrics-help",true);
U.append("div").classed("pane-title",true).classed("rank-chart",true).append("span");
U.append("div").classed("info-pane-metrics-chart",true);
z.exit().remove();
var s=V.selectAll(".info-pane-extra").data([0]);
s.enter().append("div").classed("info-pane-extra",true);
s.exit().remove();
var Q=j.selectAll(".sunburst-cv-mobile-scroll").data([0]);
Q.enter().append("div").classed("sunburst-cv-mobile-scroll",true);
Q.html(N.mobilescroll);
Q.exit().remove();
this._sizeChart();
j.classed("hiddenpaths",!!this._hiddenNodes.length)
};
f._render=function(B){Object.getPrototypeOf(f)._render.apply(this);
var s=this,j=this._options,v=this._dataAdapter,D=v.data(),l=c.select(j.parent).selectAll(".sunburst-cv"),q=l.selectAll(".sunburst-cv-container"),u=q.selectAll(".sunburst-svg-container"),w=parseInt(q.style("width"),10),t=parseInt(q.style("height"),10),k=this._radius=Math.min(w,t)/2;
var o=this._isMobileSize(),n=(D.categories.length+1),r=this._ringDivisor=1/n,C=o?20:140,g=this._centerRadius=Math.ceil((C/2)/(Math.cos(Math.PI/4)));
u.attr("transform","translate("+(w/2)+","+(t/2)+")");
if(!B&&this._yScale){this._oldYScale=this._yScale
}if(!B&&this._xScale){this._oldXScale=this._xScale
}var F=this._xScale=c.scale.linear().domain(this._oldXScale?this._oldXScale.domain():[0,1]).range([0,2*Math.PI]),i=this._yScale=c.scale.linear().domain([0,r,1]).range([0,g,k]),m=this._arc=c.svg.arc().startAngle(function(G){return Math.max(0,Math.min(2*Math.PI,F(G.x)))
}).endAngle(function(G){return Math.max(0,Math.min(2*Math.PI,F(G.x+G.dx)))
}).innerRadius(function(G){return Math.max(0,i(G.y))
}).outerRadius(function(G){return Math.max(0,i(G.y+G.dy))
});
this._layoutPaths(B);
var p=c.select(j.parent).select(".sunburst-cv-label"),A=Math.ceil((g*Math.cos(Math.PI/4))*2),h=A,z=j.padding.top+Math.floor(t/2-h/2),E=j.padding.left+Math.floor(w/2-A/2);
if(!o){p.style("top",z+"px").style("left",E+"px").style("width",A+"px").style("height",h+"px")
}else{p.style("top","").style("left","").style("width","").style("height","")
}this._updateDetails(this._lockedNode);
if(v.isDataEmpty()){this._setErrorMessage(v.l10n.labels.core.nodata)
}else{if(v.isSizeEmpty()){this._setErrorMessage(v.l10n.labels.sunburst.emptyFirstMetric)
}else{this._clearErrorMessage()
}}};
f._getHiddenNodes=function(){return this._hiddenNodes.concat(this._outRangeNodes,this._invalidNodes)
};
f._adjustDataSize=function(i,j,l){var v=this._options,t=this,q=this._dataAdapter,h=i.depth-1,u=this._zoomedPath,s=0.15,n=q.getStackedMetricIndex();
if(h>=0&&i.metrics&&i.metrics[n]){i.y-=j;
var r=i.metrics[n].value,p=l[h],o=p.max,m=Math.min(0,p.min),k=c.scale.linear().domain([m,o]).range([s,1]),g=k(r)*i.dy;
if(o===m||(u&&u.depth>i.depth)){g=i.dy
}j+=(i.dy-g);
i.dy=g
}if(!i.children||!i.children.length){return
}i.children.forEach(function(w){t._adjustDataSize(w,j,l)
})
};
f._getLevelUniqueNodes=function(i,g,j){var n=this._dataAdapter,k=this._getHiddenNodes(),h=[],l=[],o=this,p=this._zoomedPath;
function m(q){if(p&&p.depth===q.depth&&p!==q){return
}if(q.depth===g){if(!j&&k.indexOf(q)>=0){return
}if(l.indexOf(q.name)>=0){return
}h.push(q);
l.push(q.name);
return
}if(!q.children||!q.children.length){return
}q.children.forEach(function(r){m(r)
})
}m(i);
return h||[]
};
f._layoutPaths=function(F){var j=this._options,o=this._arc,u=this,w=this._dataAdapter,G=w.data(),D=this._getHiddenNodes(),q=c.select(j.parent).selectAll(".sunburst-svg-container"),l=c.layout.partition().value(function(k){return(D.indexOf(k)<0)?k.size:0
}).sort(function(s,k){if(w.isOther(s)){return 1
}if(w.isOther(k)){return -1
}return k.size-s.size
});
if(F&&u._paths){u._paths.each(function(k){k.xo=k.x;
k.dxo=k.dx;
k.yo=k.y;
k.dyo=k.dy
})
}var A=l.nodes(G);
var B=this._paths=q.selectAll("path").data(A,w.getPathKey);
B.enter().insert("path",":first-child");
B.attr("data-sid",function(s,k){return s._sid
}).on("click",function(s,k){u._lockNode({data:s,type:"path"})
}).on("dblclick",function(s,k){u._zoomPath(s)
}).on("mouseenter",function(s,k){if(u._lockedNode||u._isTouch()){return
}u._highlightNode({data:s,type:"path"})
});
var E=B.exit().classed("removing",true);
setTimeout(function(){E.remove()
},501);
u.setColorScale();
this._updatePathColors();
u._buildColorSlider();
var z;
if(z=w.getStackedMetric()){var m=w.getStackedMetricIndex(),t=this._zoomedPath,h=false,v;
if(h){var i=u.getMetricCategoryMinMax(m);
v=Array.apply(null,new Array(G.categories.length)).map(function(){return i
})
}else{v=G.categories.map(function(s,k){return u.getMetricCategoryMinMax(m,k)
})
}u._adjustDataSize(G,0,v)
}if(this._oldKeys){var H,C,n=this._oldYScale,p=n.domain(),r=this._yScale,g=r.domain();
u._paths.each(function(k){H=w.getPathKey(k);
if(C=u._oldKeys[H]){k.xo=C.xo;
k.dxo=C.dxo;
k.yo=r.invert(n(C.yo));
if(w.isRoot(k)){k.dyo=r.invert(n(C.dyo))
}else{k.dyo=r.invert(n(p[1]+C.dyo))-g[1]
}}});
this._oldKeys=null
}B.each(function(s){var k=w.getPathKey(s);
if("undefined"===typeof s.xo){s.xo=s.x;
s.dxo=s.dx;
s.yo=0;
s.dyo=0
}});
B.transition().duration(500).attrTween("d",this._changeTween(true));
q.on("mouseleave",function(s,k){if(u._lockedNode||u._isTouch()){return
}u._unhighlightNode()
});
if(!F){if(this._oldLockedNode){this._lockNode(this._oldLockedNode)
}else{this._unlockNode()
}this._oldLockedNode=null;
this._updateZoomPathStyles(this._oldZoomed);
this._oldZoomed=null
}};
f._isMobileSize=function(){var h=this._options,i=h.parent.offsetWidth,g=b.util.getPercentValue(h.width,i);
return g<640
};
f._isTouch=function(){return"ontouchstart" in document.documentElement
};
f._postRender=function(){Object.getPrototypeOf(f)._postRender.apply(this)
};
f._sizeChart=function(t){var j=this._options,B=this._dataAdapter.data(),m=c.select(j.parent),z=this,s=m.selectAll(".sunburst-cv"),k=s.selectAll(".sunburst-cv-wrapper"),q=k.selectAll(".sunburst-cv-container"),i=s.selectAll(".sunburst-cv-info-pane"),g=s.selectAll(".sunburst-cv-mobile-scroll"),p=j.parent.offsetWidth,h=j.parent.offsetHeight,A=b.util.getPercentValue(j.width,p),u=b.util.getPercentValue(j.height,h),o=this._isMobileSize(),r=A+(o?0:-250),l=o?Math.min(r,u):u,v=j.padding;
var n=r-2-(v.left+v.right),w=l-2-(v.top+v.bottom);
s.style("width",A+"px").style("height",u+"px").classed("is-desktop",!o).classed("not-touch",!this._isTouch());
k.style("width",r+"px").style("height",l+"px");
q.style("width",n+"px").style("height",w+"px");
q.style("padding-top",v.top+"px").style("padding-left",v.left+"px");
g.style("top",(u-30)+"px").classed("visible",!s.node().scrollTop).classed("show",u<=l+130);
s.on("scroll",function(){g.classed("visible",!s.node().scrollTop)
})
};
f._buildColorSlider=function(){var j=this._options,B=this,D=this._dataAdapter,E=c.select(j.parent).selectAll(".sunburst-cv-color");
if(!D.getColorMetric()){return E.text("")
}var M=D.data(),F=D.getColorMetric(),t=this._colorExtent,H=B._colorExtentMin,I=B._colorExtentMax,u=c.select(j.parent).selectAll(".sunburst-cv-container"),s=parseInt(u.style("width"),10),L=s/2,q=D.seqColors(),n=Math.round(100/(q.length-1)),o=[],C=12,v=10,m=9,i=40,k=(C+(v*2)+2),z=L,w=z-(i*2)-(m*2);
q.forEach(function(O,N){o.push((N*n)+"%")
});
E.style("width",z+"px");
var K=E.selectAll(".legend-title").data([0]);
K.enter().insert("div",":first-child").classed("legend-title",true);
K.text(F.name);
var h=E.selectAll(".color-slider-legend").data([0]);
h.enter().append("div").classed("color-slider-legend",true);
h.style("width",z+"px").style("height",k+"px");
var A=h.selectAll(".color-slider").data([0]);
A.enter().append("svg").classed("color-slider",true).style("height",k+"px").style("width","100%");
var p=A.selectAll("style").data([0]);
p.enter().append("style");
p.text(function(O){var N=".sunburst-cv .sunburst-cv-color .grad-rect { fill: url(#backGradient); \n";
return N
});
var g=A.selectAll("defs").data([0]);
g.enter().append("defs");
var G=g.selectAll("#backGradient").data([0]);
G.enter().append("linearGradient").attr("id","backGradient");
var r=function(Q,O,N){var P=Q.selectAll("stop").data(O);
P.enter().append("stop").attr("class",function(S,R){return"stop"+R
});
P.attr("offset",function(R){return R
}).attr("stop-color",function(S,R){return N[R]
})
};
r(G,o,q);
var J=A.selectAll(".grad-rect").data([0]);
J.enter().append("rect").classed("grad-rect",true);
J.attr("x",i+m).attr("y",v).attr("rx",C/2).attr("ry",C/2).attr("width",w).attr("height",C);
var l=h.selectAll(".legend-label").data(["min","max"]);
l.enter().append("div").attr("class",function(N){return"legend-label "+N
});
l.style("left",function(N){return(N==="min"?0:i+(m*2)+w)+"px"
}).style("width",i+"px").text(function(O){var N=O==="min"?H:I;
N=(null===N)?(O==="min")?"-":"+":B._formatNumber(F.format,N);
return N
})
};
f._isNodeOutsideRange=function(k){var h=this._dataAdapter,i=this,j=k.children||[],g=j.some(function(l){return !i._isNodeOutsideRange(l)
});
return !g&&this.isOutsideRange(k)
};
f._isInvalidNode=function(g){return this._dataAdapter.isOther(g)
};
f._hideLabelText=function(){var h=this._hiddenNodes.length,i=this._dataAdapter.l10n.labels.sunburst,g=(h===1)?i.hidden:i["hidden2+"];
return g.replace(/\{value\}/i,h)
};
f._hideNode=function(j,i,h){var g=this;
if(i.indexOf(j)>-1){return
}if(h&&h(j)||!h){i.push(j)
}if(!j.children||!j.children.length){return
}j.children.forEach(function(k){g._hideNode(k,i,h)
})
};
f._hidePath=function(n,l,j){var i=this._options,g=this._dataAdapter,m=this._paths;
this._hideNode(n,l,j);
this._layoutPaths(true);
if(this._lockedNode&&l.indexOf(this._lockedNode.data)>-1){this._unlockNode()
}if(this._zoomedPath&&l.indexOf(this._zoomedPath)>-1){this._zoomPath(g.data())
}var h=this._hiddenNodes.length,k=c.select(i.parent);
k.selectAll(".actions-pane-hidden").selectAll("span").html(this._hideLabelText());
k.selectAll(".sunburst-cv").classed("hiddenpaths",!!h)
};
f._unhidePaths=function(){this._hiddenNodes=[];
this._layoutPaths(true);
c.select(this._options.parent).selectAll(".sunburst-cv").classed("hiddenpaths",false)
};
f._zoomPath=function(g){if(!this._canZoomIn(g)){return
}this._zoomedPath=g;
this._layoutPaths(true);
this._updateZoomPathStyles(g);
this._updateDetails(this._lockedNode)
};
f._updateZoomPathStyles=function(i){var h=this,g=c.select(this._options.parent).selectAll(".sunburst-cv");
g.classed("zoomed",i&&i.depth>0);
g.selectAll(".sunburst-cv-container").selectAll("path").each(function(j){c.select(this).classed("beyondzoom",j&&i&&j!==i&&j.depth>0&&(j.depth<=i.depth||!h._hasAncestorNode(j,i)));
c.select(this).classed("zoomed",j===i)
})
};
f._changeTween=function(i){var m=this._xScale,l=this._yScale,r=this._zoomedPath||this._dataAdapter.data(),g=this._arc,k=this._radius,h=this._ringDivisor,p=this._centerRadius,o=this._dataAdapter.categories(),n=c.interpolate(m.domain(),[r.x,r.x+r.dx]),j=c.interpolate(l.domain(),(r.y)?[0,h,r.y,1]:[0,h,1]),q=c.interpolate(l.range(),(r.y)?[0,p,p,k]:[0,p,k]);
return function(u,s){var t=c.interpolate({x:u.xo,dx:u.dxo,y:u.yo,dy:u.dyo},u);
return s?function(v){return i?g(t(v)):g(u)
}:function(v){m.domain(n(v));
l.domain(j(v)).range(q(v));
return i?g(t(v)):g(u)
}
}
};
f._updatePathColors=function(){var i=this,h=this._dataAdapter,k=this._getHiddenNodes(),g=c.select(this._options.parent).selectAll(".sunburst-cv"),j=g.classed("node-highlighted");
this._paths.style("fill",function(n){var m=c.select(this),l=j&&(!m.classed("highlighted"));
return i.getNodeColor(n,l)
}).classed("hidden",function(l){return k.indexOf(l)>=0
})
};
f._lockNode=function(j){var h=this,i=h._options,g=h._lockedNode;
if(g&&g.data===j.data&&g.type===j.type){return h._unlockNode(j)
}h._lockedNode=j;
h._highlightNode(j);
h._updateLockedState(j);
setTimeout(function(){c.select(h._options.parent).select(".sunburst-cv-wrapper").on("click.cvpath",function(){if(c.event&&c.event.target&&c.event.target.nodeName==="path"){return
}h._unlockNode()
})
},10)
};
f._unlockNode=function(i){var g=this,h=g._options;
g._lockedNode=null;
g._updateLockedState();
if(i&&!g._isTouch()){g._highlightNode(i)
}else{g._unhighlightNode()
}c.select(g._options.parent).select(".sunburst-cv-container").on("click.cvpath",null)
};
f._highlightNode=function(m){var j=this,k=m&&m.type||"path",l=m&&m.data||null,i=this._getAncestorNodes(l),h={};
h.category=function(o){return o.depth===l.index+1
};
h.item=function(o){return o&&l&&o.name===l.name
};
h.path=function(o){return i.indexOf(o)>=0||(j._lockedNode&&o.parent===l)
};
var g=c.select(this._options.parent).selectAll(".sunburst-cv");
g.classed("node-highlighted",true);
g.selectAll(".sunburst-cv-container").selectAll("path").each(function(o){c.select(this).classed("highlighted",h[k](o))
});
if(!j._lockedNode){g.selectAll(".info-pane-category").each(function(n){c.select(this).classed("disabled","category"===k&&n!==l)
})
}this._updateDetails(m);
this._updatePathColors()
};
f._unhighlightNode=function(){this._removeHighlights();
this._updateDetails()
};
f._removeHighlights=function(){var g=c.select(this._options.parent);
g.selectAll(".sunburst-cv").classed("node-highlighted",false).selectAll("path").classed("highlighted",false);
g.selectAll(".info-pane-category").classed("disabled",false);
this._updatePathColors()
};
f._secondaryMetricChanged=function(){var o=this,l=this._dataAdapter,p=l.l10n.labels.sunburst,i=l.getSecondaryMetricIndex();
o._outRangeNodes=[];
if(i){o._hidePath(l.data(),o._invalidNodes,function(m){return o._isInvalidNode(m)
})
}else{o._invalidNodes=[];
o._layoutPaths(true)
}var h=c.select(this._options.parent);
h.selectAll(".sunburst-cv").classed("secondary-metric",!!i);
var n=h.selectAll(".sunburst-cv-sec-viz");
n.selectAll(".button").classed("active",false);
var k=l.getSecondaryMetricType();
if(k){n.selectAll(".button."+k).classed("active",true)
}var j=l.getSecondaryMetric(),g=j&&j.name||null;
n.selectAll(".title").html(g?p.mapmetric.replace(/\{metric\}/i,g):"");
this._updateDetails(this._lockedNode);
this._updateMetricState()
};
f._updateDetails=function(g){if(g&&g.type==="item"){return
}this._setChartMetrics(g);
this._setDetailsMetrics(g);
this._setDetailsAudiences(g);
this._setDetailsCategories(g);
this._setDetailsActions(g)
};
f._setDetailsCategories=function(o){var s=this,q=this._dataAdapter,t=q.l10n.labels.sunburst,k=q.data(),m=q.categories(),h=c.select(this._options.parent).select(".info-pane-categories"),p=Math.max(0,s._zoomedPath?s._zoomedPath.depth-1:0),n=o&&o.type==="path"&&s._lockedNode?[]:m.slice(p),l=n.length,i=o||{},g=h.selectAll(".info-pane-category").data(n),r=g.enter().append("div").classed("info-pane-category",true).classed("inactive",true);
h.select(".pane-title").select("span").text((1===l.length)?t.category:t["category2+"]);
g.each(function(w,v){var u=c.select(this);
u.text("");
s._createRingMarker(u,l,v);
u.append("span").classed("name",true).html(w&&w.name||"");
u.append("span").classed("top",true).html("("+t.topresults.replace(/\{value\}/i,w.top)+")");
if(i.type==="path"){u.classed("disabled",!s._lockedNode&&i.data&&i.data.depth-1!==v-p)
}else{if(s._lockedNode&&s._lockedNode.type==="category"){u.classed("disabled",w!==s._lockedNode.data)
}}});
setTimeout(function(){r.classed("inactive",false)
},1);
var j=g.exit().classed("inactive",true).on("mouseenter",null).on("mouseleave",null).on("click",null);
setTimeout(function(){j.remove()
},400);
g.on("mouseenter",function(v,u){if(s._lockedNode||s._isTouch()){return
}s._highlightNode({data:v,type:"category"})
});
g.on("mouseleave",function(v,u){if(s._lockedNode||s._isTouch()){return
}s._unhighlightNode()
});
g.on("click",function(v,u){s._lockNode({data:v,type:"category"})
});
h.classed("empty",!n.length)
};
f._setDetailsAudiences=function(p){var t=this,r=this._dataAdapter,q=p&&p.type||"",j=p&&p.data||null,o=q==="category",k=r.data(),h=o?this._getLevelUniqueNodes(k,j.index+1,false):this._getAncestorNodes(j),m=o?function(v,u){return u
}:function(v,u){return v&&v.depth||0
},l=r.categories(),g=c.select(this._options.parent).selectAll(".sunburst-audiences"),n=h&&h[0]||k,i=k===n,s=(!h||i)?[]:h.slice();
g.each(function(A){var C=c.select(this),w=s.slice();
var B=c.select(C.node().parentNode).classed("sunburst-cv-label-wrap");
if(!o&&!B){if(!t._lockedNode){w=[]
}w.reverse()
}else{if(o&&B){w=[]
}}var v=C.selectAll(".sunburst-audience").data(w,m),u=v.enter().append("span").classed("sunburst-audience",true).classed("inactive",true);
u.append("span").classed("marker",true).style("background-color","#dcdcdc");
u.append("span").classed("category",true);
u.append("span").classed("name",true);
v.each(function(G,E){var D=c.select(this),F=l[G.depth-1];
D.select(".marker").style("background-color",t.getNodeColor(G));
D.select(".category").classed("hidden",o||B).text(!o&&F&&F.name||"");
D.select(".name").text(G.name);
D.classed("to-remove",false).attr("my-name",G.name).attr("my-depth",G.depth);
D.on("mouseenter",function(J,I){if(t._isTouch()){return
}t._highlightNode({data:J,type:"item"})
});
D.on("mouseleave",function(J,I){if(t._isTouch()){return
}if(t._lockedNode){t._highlightNode(t._lockedNode)
}else{t._unhighlightNode()
}});
if(B){return
}var H=c.select(D.node().cloneNode(true)).style("height","").classed("test",true).classed("inactive",false);
C.node().appendChild(H.node());
D.attr("my-height",parseInt(H.style("height"),10));
H.remove()
});
v.order();
setTimeout(function(){v.each(function(F,E){var D=c.select(this);
D.classed("inactive",false);
if(B){return
}D.style("height",D.attr("my-height")+"px")
})
},1);
var z=v.exit().classed("inactive",true).style("height","").classed("to-remove",true).on("mouseenter",null).on("mouseleave",null).on("click",null);
setTimeout(function(){z.each(function(F,E){var D=c.select(this);
if(D.classed("to-remove")){D.remove()
}})
},400);
C.classed("empty",!w.length)
})
};
f._setDetailsActions=function(w){var p=this,q=this._dataAdapter,z=q.data(),s=c.select(this._options.parent).select(".info-pane-actions");
var B=s.selectAll(".info-pane-actions-chart").data([0]);
B.enter().append("div").classed("info-pane-actions-chart",true).classed("info-pane-actions-pane",true);
var g=s.selectAll(".info-pane-actions-extra").data([0]);
g.enter().append("div").classed("info-pane-actions-extra",true).classed("info-pane-actions-pane",true);
function v(){p._zoomPath(p._lockedNode.data)
}function i(){p._zoomPath(z)
}function m(){p._hidePath(p._lockedNode.data,p._hiddenNodes)
}function n(){var C=p._lockedNode.data,D=p._hiddenNodes;
if(!C){return
}p._hidePath(z,D,function(E){return E.name===C.name||D.indexOf(E.parent)>=0
})
}var l=[],h=q.l10n.labels.sunburst;
if(w&&w.type==="path"&&p._lockedNode){var u=w.data,k=p._canZoomIn(u),o=u===z;
if(!p._lockedNode){if(!o){l.push({click:false,icon:"more",label:h.moreAction})
}if(k){l.push({click:false,icon:"zoomin",label:h.zoomAction})
}}else{if(!o){if(k){l.push({click:v,className:"zoomin",icon:"zoomin",label:h.zoomin})
}else{if(p._canZoomOut(u)){l.push({click:i,className:"zoomout",icon:"zoomout",label:h.zoomout})
}}l.push({click:m,className:"hide",icon:"hide",label:h.hide});
l.push({click:n,className:"hideallname",icon:"hide",label:h.hideall})
}}}var j=p._getExtraActions(w),r=!!l.length,A=!!j.length;
s.classed("full-width",(!r&&A)||(!A&&r));
s.classed("empty",(!r&&!A));
p._buildActionsPane(B,l);
p._buildActionsPane(g,j);
var t=s.selectAll(".hideallname");
t.on("mouseenter",function(){if(p._isTouch()){return
}p._highlightNode({data:p._lockedNode.data,type:"item"})
});
t.on("mouseleave",function(D,C){if(p._isTouch()){return
}if(p._lockedNode){p._highlightNode(p._lockedNode)
}else{p._unhighlightNode()
}})
};
f._buildActionsPane=function(h,j){var i=h.selectAll(".info-pane-action").data(j);
var k=i.enter().append("a").classed("info-pane-action",true).classed("inactive",true);
k.append("i").classed("icon",true);
k.append("span");
i.each(function(n,m){var l=c.select(this);
l.select(".icon").attr("class","icon").classed(n.icon,true);
l.select("span").text(n.label);
l.attr("class","info-pane-action"+(l.classed("inactive")?" inactive":"")+(n.click||n.href?" action":" help"));
if(n.click){l.on("click",n.click)
}else{l.on("click",null)
}if(n.href){l.attr("href",n.href)
}else{l.attr("href",null)
}if(n.className){l.classed(n.className,true)
}var o=c.select(l.node().cloneNode(true)).style("height","").classed("test",true).classed("inactive",false);
h.node().appendChild(o.node());
l.attr("my-height",parseInt(o.style("height"),10));
o.remove()
});
setTimeout(function(){i.each(function(n,m){var l=c.select(this);
l.style("height",l.attr("my-height")+"px").classed("inactive",false)
})
},1);
var g=i.exit().classed("inactive",true).style("height","").classed("to-remove",true).on("click",null);
setTimeout(function(){g.each(function(n,l){var m=c.select(this);
if(m.classed("to-remove")){m.remove()
}})
},400);
return !!j.length
};
f._setDetailsMetrics=function(p){var t=this,i=c.select(this._options.parent).select(".info-pane-metrics"),j=i.select(".pri-metric-labels"),h=i.select(".sec-metrics-labels"),q=i.select(".info-pane-metrics-chart"),r=this._dataAdapter,l=r.data(),g=l.metrics.slice(0,1),s=l.metrics.slice(1),n=r.categories(),u=r.l10n.labels.sunburst,o=p&&p.type==="path"?p.data:null,k=o||l,m=o&&o.children&&o.children.length&&this._lockedNode;
i.classed("total",!m);
i.selectAll(".pane-title").each(function(A,w){var z=c.select(this),v=z.select("span");
if(z.classed("pri-metric")){return v.text(u.primarymetric)
}if(z.classed("sec-metric")){z.classed("hidden",!s.length);
return v.text(!s.length?"":(s.length===1)?u.secondarymetric:u["secondarymetric2+"])
}if(z.classed("rank-chart")){v.text((m)?n[o.depth]&&n[o.depth].name:"")
}});
i.selectAll(".sec-metrics-help").each(function(w,v){c.select(this).text(s.length===1?u.secondarymetrichelp:u["secondarymetrichelp2+"]).classed("hidden",!s.length)
});
this._setNodeMetricLabels(j,k,g,!!o);
this._setNodeMetricLabels(h,k,s,!!o);
this._setNodeMetricChart(q,this._lockedNode?o:null)
};
f._setChartMetrics=function(k){var g=c.select(this._options.parent).select(".sunburst-cv-label-wrap"),j=this._dataAdapter.data(),h=j.metrics.slice(),i=k&&k.type==="path"?k.data:j;
if(h.length>1){h.length=1
}this._setNodeMetricLabels(g,i,h,false)
};
f._setNodeMetricLabels=function(g,i,n,k){var p=this,o=this._dataAdapter,j=o.data(),q=o.l10n.labels.sunburst,h=g.classed("pri-metric-labels")||g.classed("sunburst-cv-label-wrap"),l=g.selectAll(".sunburst-cv-label-metric").data(n),m=l.enter().append("div").classed("sunburst-cv-label-metric",true);
k=(i&&i.children&&i.children.length&&this._lockedNode)?k:false;
l.each(function(w,z){var G=c.select(this),I=p.getNodeValue(i,h?z:z+1),F=p.getNodeValue(j,h?z:z+1),s="percent"===w.format,t=(o.isOther(i)&&!h)||(0===F),D=s?I:I/p.getNodeValue(j,h?z:z+1),u=h||(z+1)===o.getSecondaryMetricIndex(),C=k&&u,H=null!==I&&!s&&!t&&i!==j;
G.classed("active",u);
var E=G.selectAll(".sunburst-cv-label-icon").data([w]);
E.enter().append("i");
E.each(function(J){c.select(this).attr("class","sunburst-cv-label-icon icon").classed(w.icon||(h?"donut":"stack"),true)
});
var v=G.selectAll(".sunburst-cv-label-number").data([w]);
v.enter().append("span").classed("sunburst-cv-label-number",true);
v.html(t?"":p._formatValue(w,I)).classed("hidden",t);
var r=G.selectAll(".sunburst-cv-label-name").data([w]);
r.enter().append("span").classed("sunburst-cv-label-name",true).append("span");
r.select("span").html(H?q.percmetric.replace(/\{percent\}/i,p._formatNumber("percent",D)).replace(/\{metric\}/i,w.name):w.name);
var B=p.getMetricMaskNum(h?z:z+1);
var A=r.selectAll(".sunburst-cv-label-marker").data([w]);
A.enter().insert("svg",":first-child").classed("sunburst-cv-label-marker",true).append("rect").attr("width",12).attr("height",12);
A.classed("hidden",!C).select("rect").attr("style",(null===B)?"":"mask: url(#diagmask"+B+");");
G.on("click",h?null:function(){o.setSecondaryMetricIndex(z+1);
p._secondaryMetricChanged()
})
});
l.exit().remove()
};
f._formatValue=function(j,l,i){if("time"!==j.format){return this._formatNumber(j.format,l)
}var h=l,g=this._dataAdapter,k=i?g.l10n.time.abbreviation:(1===h)?g.l10n.time.singular:g.l10n.time.plural,m=g.getTimeGranularity(h,true);
return this._formatNumber(j.format,h/m.divisor)+" "+k[m.gran]
};
f._setNodeMetricChart=function(s,E){var v=this,z=this._dataAdapter,P=z.data(),L=v._getHiddenNodes(),l=E&&E.children||[],j=l.filter(function(R){return L.indexOf(R)<0
}),r=[],q=[],I=[],A=[],B=[],M=[],g={x:r,y:q,fill:I,metric:A,format:M,node:B};
function m(R,S){return 0===S||S===z.getSecondaryMetricIndex()
}var F=P.metrics.slice(),w=F.filter(m),D=w.map(function(R){return R.name
});
j.reverse().forEach(function(S){var R;
F.forEach(function(T,U){if(!m(T,U)){return
}if(null!==(R=v.getNodeValue(S,U))){q.push(R);
r.push(S.name);
I.push(T.name);
A.push(T.name);
M.push(T.format);
B.push(S)
}})
});
var O=!!q.length;
var k=s.selectAll(".info-pane-chart-svg").data([0]);
k.enter().append("div").classed("info-pane-chart-svg",true);
k.exit().remove();
s.classed("hidden",!O);
if(O){var H=15,K=25,C=0.05,i=w.length,G=j.length,u=(i*H)+K,Q=K/u,n=Math.ceil((i*G*H)/(1-Q));
k.style("height",n+"px");
var t=b.chart().layers([b.geom.bar().map("group","fill").set("fill",function(S,R){return v.getNodeColor(S.data.node)
}).each("start",function(T,S){var R=v.getMetricMaskNum(D.indexOf(T.data.metric));
c.select(this).attr("mask",(null===R)?"":"url(#diagmask"+R+")")
}).on("click",function(R){v._selectChildFromRanked(R)
}).dodgePadding(C),b.geom.text().map("label","y").map("group","fill").set("fill","#4b4b4b").textFormat(function(S,R){return S?v._formatValue({format:this.__data__.data.format},S,true):""
}).textAnchor("start").set("fill","#4b4b4b").dx(4).dy(5).on("click",function(R){v._selectChildFromRanked(R)
})]).coord(b.coord.cartesian().flip(true)).data(g).position("dodge").guide("x",b.guide.axis().tickDx(function(S,R){return c.select(this).select("span").node().offsetWidth
}).tickDy(function(S,R){return((-i*H)/2)-(c.select(this).select("span").node().offsetHeight/2)
}).tickSize(0).tickAnchor("end")).guide("y",b.guide.axis().ticks(0).tickSize(0).tickFormat(function(S,R){return""
})).map("x","x",b.scale.ordinal().padding(Q)).width("100%").height(n).duration(400).padding({top:2,right:65}).parent(k.node());
D.forEach(function(S,R){var T=b.scale.linear().lowerLimit(0);
T.includeInDomain(function(V,U){return V.data.metric===D[R]
});
t.map("y","y",T,R)
});
t.render();
var p=k.select("svg").selectAll("defs").data([0]);
p.enter().append("defs");
var h=[45];
var N=p.selectAll("pattern").data(h);
var o=N.enter().append("pattern").attr("id",function(S,R){return"diag"+R
}).attr("patternUnits","userSpaceOnUse").attr("width","3").attr("height","3").attr("patternTransform",function(S,R){return"rotate("+S+" 2 2)"
});
o.append("rect").attr("x","0").attr("y","0").attr("width","3").attr("height","3").attr("style","fill:#fff;");
o.append("path").attr("d","M -1,0 l 10,0").attr("style","stroke:#222; fill:none; stroke-width: 3px;");
var J=p.selectAll("mask").data(h);
J.enter().append("mask").attr("id",function(S,R){return"diagmask"+R
}).attr("x","0").attr("y","0").append("rect").attr("x","0").attr("y","0").attr("width","100%").attr("height","1").attr("style",function(S,R){return"stroke:none; fill:url(#diag"+R+")"
});
p.selectAll("mask").selectAll("rect").attr("height",n)
}else{k.style("height","0px")
}};
f._selectChildFromRanked=function(m){var g=this._lockedNode.data,h=m.data.x;
if(!g||!g.children||!g.children.length){return
}var j,l=g.children.length,n,k=null;
for(j=0;
j<l;
++j){if((n=g.children[j]).name===h){k=n;
break
}}if(k){this._lockNode({data:k,type:"path"})
}};
f._createRingMarker=function(j,n,l){var o=j.append("svg").classed("category-ring",true),p=o.append("g").attr("transform","translate(12,12)"),k=parseInt(o.style("width"),10),r=k/2,q=2,s=1,h=r-(q*n)-(s*(n-1)),u,t,m;
for(m=0;
m<n;
++m){u=h+((q+s)*m);
t=u+q;
p.append("path").classed("active",m===l).attr("d",c.svg.arc().innerRadius(u).outerRadius(t).startAngle(0).endAngle(2*Math.PI))
}};
f._canZoomIn=function(i){var h=this._dataAdapter.data(),g=this._zoomedPath;
return(i!==h&&i!==g)||(i===h&&h!==g&&!!g)
};
f._canZoomOut=function(g){return g===this._zoomedPath
};
f._getAncestorNodes=function(i){var h=[],g=i;
if(!i){return h
}while(g.parent){h.push(g);
g=g.parent
}if(!h.length){h=[i]
}return h
};
f._hasAncestorNode=function(i,g){if(!i||!g||i.depth<g.depth||i===g){return false
}var h=i;
while(h.parent){if(h.parent===g){return true
}h=h.parent
}return false
};
f._getInfoPaneHeight=function(i){var g=0,h;
c.selectAll(i.node().childNodes).each(function(k,j){h=c.select(this);
g+=parseInt(h.style("height"),10)+parseInt(h.style("padding-bottom"),10)+parseInt(h.style("padding-top"),10)
});
return g
};
f._updateLockedState=function(h){var g=this;
if(g._eventMap["sunburst.locked"]){g._eventMap["sunburst.locked"].call(this,h,g._dataAdapter.data())
}};
f._updateMetricState=function(){var h=this,g=h._dataAdapter;
if(h._eventMap["sunburst.metric"]){h._eventMap["sunburst.metric"].call(this,g.getSecondaryMetricIndex(),g.getSecondaryMetricType(),g.data())
}};
f._getExtraActions=function(h){var g=this;
if(g._eventMap["sunburst.actions"]){return g._eventMap["sunburst.actions"].call(this,h,!!this._lockedNode,g._dataAdapter.data())
}return[]
};
f.getNodeValue=function(h,g){if(!h){return 0
}if(h.metrics&&h.metrics.length&&h.metrics[g]&&"undefined"!==typeof h.metrics[g].value){return h.metrics[g].value
}if(g>0){return null
}if("undefined"!==typeof h.size){return h.size
}return h.value
};
f.getMetricCategoryMinMax=function(k,j){var g,n=this,l=this._dataAdapter,h=l.data(),i=this._getHiddenNodes(),p=this._zoomedPath;
function m(q){if(p&&p.depth===q.depth&&p!==q){return
}if("undefined"===typeof j||q.depth===j+1){if(l.isOther(q)){return
}if(i.indexOf(q)>=0){return
}var o=n.getNodeValue(q,k);
if("undefined"===typeof g){g={min:o,max:o}
}else{g.min=Math.min(g.min,o);
g.max=Math.max(g.max,o)
}if(j){return
}}if(!q.children||!q.children.length){return
}q.children.forEach(function(r){m(r)
})
}m(h);
return g||null
};
f.getNodeColor=function(k,g){var h=this._dataAdapter,j=this.getColorScale(k),i;
if(!k.depth){return h.metricColor()
}if(h.isOther(k)){i=h.otherColor()
}else{if(h.getColorMetric()){i=this.isOutsideRange(k)?h.outRangeColor():j(k.metrics[h.getColorMetricIndex()].value)
}else{i=j(k.name)
}}if(g){i=this._grayColor(i,k)
}return i
};
f._grayColor=function(m,l){var g=this._dataAdapter;
if(g.isOther(l)){return g.otherGrayColor()
}var j=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,i=m&&m.match(j);
if(!i){return m
}var h=[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)],k=Math.round((0.21*h[0])+(0.71*h[1])+(0.07*h[2]));
return"#"+((1<<24)+(k<<16)+(k<<8)+k).toString(16).slice(1)
};
f.getMetricMaskNum=function(g){return(g===0)?null:0
};
f.isOutsideRange=function(k){var h=this._dataAdapter,i=h.getColorMetric(),g=h.getColorMetricIndex();
if(!i||!k||!k.metrics||"percent"!==i.format){return false
}var j=k.metrics[g].value;
return j>this._colorExtentMax||j<this._colorExtentMin
};
f.getColorScale=function(i){var g=this._dataAdapter,h;
if(!(h=g.getColorMetric())){return this._colorScale
}if("percent"===h.format){return this._colorScale
}return this._categoryColorScales[i.depth-1]
};
f._createColorScale=function(r,n,j,m){var p=this._dataAdapter,g=p.seqColors(),l=((n-j)*r[0])+j,s=((n-j)*r[1])+j,o=s-l,h=g.length-1;
if(m){this._colorExtent=r;
this._colorExtentMin=l;
this._colorExtentMax=s
}var q=[l];
for(var k=1;
k<h;
++k){q.push(((o/h)*k)+l)
}q.push(s);
return c.scale.linear().domain(q).range(g).clamp(true)
};
f.setColorScale=function(l){l=l||[0,1];
var i=this,g=this._dataAdapter,m=g.data(),k;
if(!(k=g.getColorMetric())){this._colorScale=c.scale.ordinal().domain(g.uniques()).range(g.colors());
return
}var j=g.getColorMetricIndex(),h;
if("percent"===k.format){h=i.getMetricCategoryMinMax(j);
this._colorScale=this._createColorScale(l,h.max,h.min,true);
return
}h=m.categories.map(function(o,n){return i.getMetricCategoryMinMax(j,n)
});
this._categoryColorScales=h.map(function(p,n){return i._createColorScale(l,p.max,p.min,!n)
});
this._colorExtentMin=null;
this._colorExtentMax=null
};
d.cloudViz.sunburst=e.util.createConstructor(f)
}(this));
(function(e){var f=e.cloudViz||{},a=f.core||{},c=e.dv||{},d=e.d3||{},b=Object.create(a);
b.init=function(g){this._type="flower";
this._initDefaultOptions();
this.setOptions(g);
this.colorScale=c.scale.color()._d3Scale;
return this
};
b._initDefaultOptions=function(){var g={animationDuration:500,labelFormatter:null,clickHandler:null,onlyUseThreePetalLengths:true,isEmotionChart:true,mouseoverCallback:[null,null],horizontalPadding:70,verticalPadding:30,text_offset:5};
return Object.getPrototypeOf(b)._initDefaultOptions.call(this,g)
};
b._onAutoResize=function(){this._render()
};
b.resize=function(){this._render()
};
b.reset=function(){Object.getPrototypeOf(b).reset.apply(this,arguments)
};
b._preRender=function(){Object.getPrototypeOf(b)._preRender.apply(this)
};
b._setUpLayer=function(g,h){this["layer"+h]=g.selectAll(".flower-cv-svg-group-layer"+h).data([0]);
this["layer"+h].enter().append("g").classed("flower-cv-svg-group-layer"+h,true)
};
b.sprintf=function(g,h){return g.replace(/\{([\w]+)\}/ig,function(j,i){return h[i]
})
};
b._render=function(){Object.getPrototypeOf(b)._render.apply(this);
var m=this;
this._parent=d.select(this._options.parent);
var D=this._parent.selectAll(".cv-wrapper.cv-flower").data([0]);
D.enter().append("div").classed("cv-wrapper cv-flower",true);
var u=D.selectAll(".flower-cv-svg").data([0]);
u.enter().append("svg").classed("flower-cv-svg",true);
this._svg_group=u.selectAll(".flower-cv-svg-group").data([0]);
this._svg_group.enter().append("g").classed("flower-cv-svg-group",true);
this._setUpLayer(this._svg_group,1);
this._setUpLayer(this._svg_group,2);
this._setUpLayer(this._svg_group,3);
this._setUpLayer(this._svg_group,4);
this._setUpLayer(this._svg_group,5);
this._setUpLayer(this._svg_group,6);
var v=this._options.width||parseInt(this._parent.style("width"),10);
var t=this._options.height||parseInt(this._parent.style("height"),10);
D.style("width",v+"px").style("height",t+"px");
var j=v/2;
var s=t/2;
this._svg_group.attr("transform",this.sprintf("translate({width},{height})",{width:j,height:s}));
var E=m._dataAdapter.data();
var n=j-this._options.horizontalPadding;
var q=s-this._options.verticalPadding;
var i=this._options.labelFormatter||function(F){F.append("tspan").attr("class","flower-cv-petal-label").text(function(G){return G.label+" "
});
F.append("tspan").attr("class","flower-cv-petal-label-value").text(function(G){return m._formatNumber("percent",G.value/m._total,0)
})
};
var w=this._options.mouseoverCallback[0]||function(){d.select(this).attr("opacity",1)
};
var r=this._options.mouseoverCallback[1]||function(F){d.select(this).attr("opacity",F.petal_opacity).attr("fill",F.petal_color)
};
this._is_single_mode=this._options.onlyUseThreePetalLengths;
this._petal_size=Math.min(n,q);
this._circle_size=this._petal_size*0.676/2;
this._arc_thickness=this._petal_size*0.027;
this._arc_half_angle=360/E.length/2+0.5;
this._petal_count=E.length;
var z=d.scale.linear().domain([55,185]).range([9,12]).clamp(true);
this._font_size=z(this._petal_size);
var C=[{offset_y:1,fixed_offset_y:0,offset_x:0,location:"middle"},{offset_y:1,fixed_offset_y:0,offset_x:-1.5,location:"middle"},{offset_y:0,fixed_offset_y:-2.5,offset_x:-0.8,location:"start"},{offset_y:-1,fixed_offset_y:-9,offset_x:-1.5,location:"middle"},{offset_y:-1,fixed_offset_y:-9,offset_x:0,location:"middle"},{offset_y:-1,fixed_offset_y:-9,offset_x:1.5,location:"middle"},{offset_y:0,fixed_offset_y:-2.5,offset_x:0.8,location:"end"},{offset_y:1,fixed_offset_y:0,offset_x:1.5,location:"middle"}];
this._total=d.sum(E,function(F){return F.value
});
var A=d.scale.linear().domain([0,E.length]).range([0,360]);
this._getTextOffsetIndex=d.scale.linear().domain([0,360]).rangeRound([0,8]).clamp(true);
this._getSizeZeroToThree=d.scale.linear().domain([0,d.max(E,function(F){return F.value
})]).rangeRound([0,3]);
this._getPetalSize=d.scale.linear().domain([d.min(E,function(F){return F.value
}),d.max(E,function(F){return F.value
})]).rangeRound([this._circle_size+this._arc_thickness+10,this._petal_size]);
c.util.each(E,function(G,F){G.angle=A(F);
m._addPetalSizes(G)
});
this._getTextOffsetScale=function(G){var F=this._getTextOffsetIndex(G);
if(F==8){F=0
}return C[F]
};
var B=this.layer1.selectAll(".flower-cv-gray-petals").data(E);
B.enter().append("path").attr("class","flower-cv-gray-petals").attr("transform",function(F){return"rotate("+F.angle+")"
}).attr("d",m._makePetal(0,0,0,0)).attr("opacity",0);
B.transition().duration(m._options.animationDuration).attr("transform",function(F){return"rotate("+F.angle+")"
}).attr("d",function(F){return m._makePetal(0,0,0,F.full_petal)
}).attr("opacity",function(F){return F.petal_size_number==3?0:1
});
B.exit().transition().duration(m._options.animationDuration).attr("d",m._makePetal(0,0,0,0)).attr("opacity",0).remove();
var p=this.layer2.selectAll(".flower-cv-color-petals").data(E);
p.enter().append("path").attr("class","flower-cv-color-petals").attr("transform",function(F){return"rotate("+F.angle+")"
}).attr("opacity",function(F){return F.petal_opacity
}).attr("d",m._makePetal(0,0,0,0)).attr("fill",function(F){return F.petal_color
}).on("mouseover",w).on("mouseout",r).on("click",function(F){if(m._options.clickHandler){m._options.clickHandler(F)
}});
p.transition().duration(m._options.animationDuration).attr("d",function(F){return m._makePetal(0,0,0,F.petal_size)
}).attr("transform",function(F){return"rotate("+F.angle+")"
}).attr("fill",function(F){return F.petal_color
}).attr("opacity",function(F){return F.petal_opacity
});
p.exit().transition().duration(m._options.animationDuration).attr("d",m._makePetal(0,0,0,0)).attr("opacity",0).remove();
var l=this.layer3.selectAll(".flower-cv-white-arcs").data(E);
var k=d.svg.arc().innerRadius(0).outerRadius(this._circle_size+this._arc_thickness+1).startAngle(-m._arc_half_angle*(Math.PI/180)).endAngle(m._arc_half_angle*(Math.PI/180));
l.enter().append("path").attr("class","flower-cv-white-arcs").attr("transform",function(F){return"rotate("+F.angle+")"
}).attr("fill","white");
l.transition().duration(m._options.animationDuration).attr("d",k).attr("transform",function(F){return"rotate("+F.angle+")"
});
l.exit().remove();
k=d.svg.arc().innerRadius(0).outerRadius(this._circle_size+this._arc_thickness).startAngle(-(m._arc_half_angle-1)*(Math.PI/180)).endAngle((m._arc_half_angle-1)*(Math.PI/180));
var g=this.layer4.selectAll(".flower-cv-color-arcs").data(E);
g.enter().append("path").attr("class","flower-cv-color-arcs").attr("d",k).attr("transform",function(F){return"rotate("+F.angle+")"
}).attr("fill",function(F){return F.arc_color
});
g.transition().duration(m._options.animationDuration).attr("d",k).attr("fill",function(F){return F.arc_color
}).attr("transform",function(F){return"rotate("+F.angle+")"
});
g.exit().remove();
var o=this.layer5.selectAll(".flower-cv-petal-labels").data(E);
o.enter().append("text").attr("class","flower-cv-petal-labels").attr("x",0).attr("y",0).attr("text-anchor",function(F){return m._getTextOffsetScale(F.angle).location
}).attr("dx",function(F){return m._getTextOffsetScale(F.angle).offset_x*-m._options.text_offset
}).attr("dy",function(F){return m._getTextOffsetScale(F.angle).offset_y*-m._options.text_offset-m._getTextOffsetScale(F.angle).fixed_offset_y
}).style("font-size",m._font_size).attr("transform",function(F){return"rotate("+F.angle+") rotate("+-F.angle+", 0, "+0+")"
}).attr("opacity",0);
o.style("font-size",m._font_size+"px").attr("text-anchor",function(F){return m._getTextOffsetScale(F.angle).location
}).attr("dx",function(F){return m._getTextOffsetScale(F.angle).offset_x*-m._options.text_offset
}).attr("dy",function(F){return m._getTextOffsetScale(F.angle).offset_y*-m._options.text_offset-m._getTextOffsetScale(F.angle).fixed_offset_y
}).selectAll("*").remove();
i(o);
o.transition().duration(m._options.animationDuration).attr("y",function(F){return F.petal_size
}).attr("transform",function(F){return"rotate("+F.angle+") rotate("+-F.angle+", 0, "+F.petal_size+")"
}).attr("opacity",function(F){return F.petal_number_size===0?0:1
});
o.exit().remove();
var h=this.layer6.selectAll(".flower-cv-main-circle").data([1]);
h.enter().append("circle").attr("class","flower-cv-main-circle").attr("cx",0).attr("cy",0);
h.transition().duration(m._options.animationDuration).attr("r",m._circle_size)
};
b._makePetal=function(o,l,h,m){var j=this._circle_size+this._arc_thickness+1,n=(j*2*Math.PI)/this._petal_count/2,i=n/(j*2*Math.PI)*360,k=Math.cos(i*Math.PI/180)*j,g=Math.sin(i*Math.PI/180)*j;
l=-k;
var q=o-g,u=o+g,s=(m-l)*-1*0.6,r=(m-l)*-1,p=r*0.2,t=["M",q,l,"C",q-p,l-s,o,m,h,m,"C",h,m,u+p,l-s,u,l];
return t.join(" ")
};
b._addPetalSizes=function(l){if(!l.color){l.color=this.colorScale(l.label)
}var j=this._getSizeZeroToThree(l.value);
if(!this._is_single_mode){if(j===0){j=1
}}if(l.value===0){j=0
}var i=0.9;
var g=l.color;
var h=g;
var k=this._petal_size;
var m=k*-1;
switch(j){case 0:i=0;
h="#e6e6e6";
k=0;
g=g;
break;
case 3:i=0.9;
break;
case 2:i=0.75;
k=k*0.795;
break;
case 1:i=0.5;
k=k*0.6;
break
}if(!this._is_single_mode){k=this._getPetalSize(l.value)
}if(l.value===0){k=0
}k*=-1;
l.petal_opacity=i;
l.petal_size=k;
l.petal_color=g;
l.full_petal=m;
l.petal_number_size=j;
l.arc_color=h
};
e.cloudViz.flower=f.util.createConstructor(b)
}(this));
(function(e){var f=e.cloudViz||{},d=f.dvcore||{},b=e.dv||{},c=e.d3||{},a=Object.create(d);
a.init=function(g){Object.getPrototypeOf(a).init.apply(this,arguments);
this._type="funnel";
this._chart=b.chart();
this._avgColor="#b1b1b1";
return this
};
a._initDefaultOptions=function(){var g={averageSeries:null,averageSeriesLabel:null,disableAverage:false,normalized:true,formats:{x:"decimal",y:"decimal"},tooltipContent:null};
return Object.getPrototypeOf(a)._initDefaultOptions.call(this,g)
};
a.reset=function(){Object.getPrototypeOf(a).reset.apply(this,arguments)
};
a._setChartTypeOptions=function(){var s=this._chart,h=this._options,t=this,v=this._dataAdapter,F=this._getPropMapping("series"),E=0,D=100,g=28,p=this._isNormalized()&&!v.isSingleSeries()?g:30,B=this._getChartWidth()-(p*2),z=0.05,n=v.getNumBarsPerStep(),i=v.getNumSteps(),k=(i*(n+1))-1,r=Math.min(Math.max(E,B/k),D),u=v.isSingleSeries()?r/3:r,o=r>=36?12:r>=28?10:0,m=(n*r)+u,C=u/m,w=r===D?(B-((m*i)-u))/2/m:0;
this._stepWidth=n*r;
this._stepPadding=u;
var j=[b.geom.bar().data(v.currentStepData()).dodgePadding(z).each("start",function(G,l){c.select(this).attr("legend-group",G.fill)
}),b.geom.bar().data(v.previousStepData()).dodgePadding(z).set("alpha",0.15).each("start",function(G,l){c.select(this).attr("legend-group",G.fill)
}),b.geom.text().data(v.textStepData()).each("start",function(G,l){c.select(this).attr("legend-group",G.group).classed("cv-funnel-text")
}).map("label","cv_label").map("group",F).set("fill","#666").textAnchor("middle").dy(-5).textFormat(function(l){return t._formatNumber("percent",l)
}).set("size",o)];
if(v.isSingleSeries()){j.splice(1,1)
}if(!h.interactive&&v.averageStepData()&&(!v.isAvgCalculated()||!v.isSingleSeries())){var q={x:[0],y:[0],cvfake:["cvfakeline"]};
j.push(b.geom.line().data(q).map("stroke","cvfake",b.scale.color().values([this._avgColor])));
var A=this._legend;
s.guide("stroke",this._buildStandardLegend([v.averageDataLabel()]));
this._legend=A
}s.layers(j).data({}).map("fill",F,b.scale.color().values(h.colors)).map("x",this._getPropMapping("x"),b.scale.ordinal().padding(C).outerPadding(w).reverse(h.flip)).guide("fill",this._legend).position("dodge").padding(this._isNormalized()&&!v.isSingleSeries()?{left:p-g,right:p}:{left:p,right:p});
s._layers[0].on("click",this._eventMap.click?this._eventMap.click:null);
this._addBehaviors(s.layers()[v.isSingleSeries()?0:1],h);
this._mapPositionScales(s,h)
};
a._mapPositionScales=function(j,i){var h=this,n=[0,25],l=this._applyForceZero(this._constructScale("y")).rangePadding(n),g=this._getPropMapping("series"),m=this._getPropMapping("y");
if(i.normalized){var k=h._dataAdapter.uniqueFillValues();
k.forEach(function(q,o){var p=(0===o)?l:l.copy();
p.includeInDomain(function(s,r){return s.data[g]===h._dataAdapter.uniqueFillValues()[o]
});
if(o>0){j.map("y",m,p,o)
}})
}j.map("y",m,l,0)
};
a._addBehaviors=function(l,j){var g=c.select(j.parent),m,h=this._dataAdapter,i=this,k=h.l10n.labels.funnel;
if(!this._isSmallChart()&&j.interactive){l.behaviors([b.behavior.rollover().orientation(j.flip?"top":"right").content(function(w,r,q){if(j.tooltipContent){return j.tooltipContent.call(this,w,r,q)
}var z=this.__geom.getExplicitScale("group"),A=w.panel.yScale(w),s=i._yLabelFormat(A.scaleIndex()),B=w.data.cv_tt_val,D=w.data.cv_tt_pval,p=h.getStepName(w.x),t=h.isSingleSeries()&&h.isAvgCalculated()?null:h.averageStepData(),o,v,n,C;
if(t){C=h.averageDataLabel();
o=t[i._getPropMapping("x")].indexOf(w.x);
v=t[i._getPropMapping("y")][o];
n=t[i._getPropMapping("y")][o>0?o-1:0]
}var u='<span class="cv-tooltip-content"><span class="cv-funnel-title">'+k.step+'</span><span class="cv-funnel-series-name">'+p+'</span><span class="cv-funnel-title">'+k.segment+'</span><span class="cv-funnel-metric-name">'+w.data[i._getPropMapping("seriesLabel")]+'</span><span class="cv-funnel-title">'+k.conversion+'</span><span class="cv-funnel-percent-value">'+i._formatYValue(D?B/D:0,"percent")+'</span><span class="cv-funnel-metric-value">'+s(B)+"</span>";
if(t){u+='<span class="cv-funnel-sub-title">'+C+'</span><span class="cv-funnel-percent-value">'+i._formatYValue(n?v/n:0,"percent")+'</span><span class="cv-funnel-metric-value">'+s(v)+"</span>"
}u+='<span class="cv-funnel-title">'+k.fallout+'</span><span class="cv-funnel-percent-value">'+i._formatYValue(D?1-(B/D):0,"percent")+'</span><span class="cv-funnel-metric-value">'+s(D-B)+"</span>";
if(t){u+='<span class="cv-funnel-sub-title">'+C+'</span><span class="cv-funnel-percent-value">'+i._formatYValue(n?1-(v/n):0,"percent")+'</span><span class="cv-funnel-metric-value">'+s(n-v)+"</span>"
}return u+"</span>"
}).showTooltip(function(s,o,n,r,q){var p=c.select(this);
if(!p.classed("path-inactive")){q._showTip.call(this,s,o,n,q);
clearTimeout(m);
g.selectAll(".bar-geom").classed("cv-medium-duration",false).classed("cv-unselected",function(t){return s.x!==t.x||s.fill!==t.fill
});
g.selectAll(".text-geom").classed("cv-medium-duration",false).classed("cv-unselected",function(t){return s.x!==t.x||s.fill!==t.group
});
g.selectAll(".cv-legend-marker").classed("cv-unselected",function(t){return t.id!==s.fill
}).classed("cv-medium-duration",false);
g.selectAll(".avg-geom").classed("cv-unselected",true).classed("cv-medium-duration",false);
if(i._eventMap.mouseover){i._eventMap.mouseover.call(this,s,o,n,r)
}}}).hideTooltip(function(s,o,n,r,q){var p=c.select(this);
if(!p.classed("path-inactive")){q._removeTip.call(this,s,o,n,q);
m=setTimeout(function(){g.selectAll(".bar-geom, .text-geom, .cv-legend-marker, .avg-geom").classed("cv-unselected",false).classed("cv-medium-duration",true);
if(i._eventMap.mouseout){i._eventMap.mouseout.call(this,s,o,n,r)
}},400)
}})])
}};
a._getStepLabel=function(m,j){var g=this._dataAdapter,k=g.getSingleSeriesStepValue(m,j),l=g.getStepName(m),h='<div class="cv-funnel-step-label" style="width: '+Math.floor(this._stepWidth)+'px">';
if(typeof k!=="undefined"){h+='<span class="cv-funnel-step-label-value">'+this._yLabelFormat(0)(k)+"</span>"
}h+='<span class="cv-funnel-step-label-name">'+l+"</span>";
return h+"</div>"
};
a._drawSmall=function(){this._drawLarge()
};
a._drawLarge=function(){var j=this._chart,i=this._options,h=this,g=this._dataAdapter,k=b.guide.axis();
k.htmlLabels(true).tickSize(0).tickAnchor("middle").tickFormat(function(n,m){return h._getStepLabel(n,m)
}).title(this._dataAdapter.xAxisTitle());
j.guide("x",k).guide("y","none");
if(!g.isSingleSeries()){var l=j.padding();
this._checkNormalized();
j.padding(l)
}};
a._renderChart=function(){Object.getPrototypeOf(a)._renderChart.call(this);
this._drawAllLine()
};
a._drawAllLine=function(){var s=this._chart,t=this,j=this._options,u=this._dataAdapter,v=this._isNormalized(),B=s.getTrainedScale("x"),D=s.getTrainedScale("y"),h=u.averageStepData(),i=u.mappings(),q=this._getPropMapping("series"),C=this._getPropMapping("seriesLabel"),p=this._getPropMapping("x"),w=this._getPropMapping("y"),o=Math.min(this._stepPadding/2,5),F=[];
if(h){var G=c.extent(h[w])[1],n=c.scale.linear().domain([0,G]).range([0,u.getUniqueFillExtent(0)[1]]);
h[p].forEach(function(H,J){var I=h[w][J],K=D.mapValue(v?n(I):I);
F.push({x:B.mapValue(H)-o,y:K});
F.push({x:B.mapValue(H)+B.rangeBand()+o,y:K})
})
}var m=c.select(s.parent()).selectAll("svg").selectAll(".cv-funnel-avg-group").data([0]);
m.enter().insert("g",".group").classed("cv-funnel-avg-group",true);
var A=m.selectAll(".avg-group-line").data([0]);
A.enter().append("g").classed("avg-group-line series",true);
var E=m.selectAll(".avg-group-point").data([0]);
E.enter().append("g").classed("avg-group-point series",true);
var r=c.svg.line().x(function(H){return H.x
}).y(function(H){return H.y
}),g=s.duration(),z=s.ease();
var l=A.selectAll(".avg-line").data([F]);
l.enter().append("path").classed("avg-line avg-geom",true);
l.attr("legend-group",u.averageSeries()).transition().duration(g).ease(z).attr("d",r).style("stroke",this._avgColor);
l.exit().remove();
var k=E.selectAll(".avg-dot").data(F);
k.enter().append("circle").classed("avg-dot avg-geom",true);
k.attr("legend-group",u.averageSeries()).style("stroke",this._avgColor).transition().duration(g).ease(z).attr("cx",r.x()).attr("cy",r.y()).attr("r",3);
k.exit().remove()
};
a._createSeriesStates=function(){Object.getPrototypeOf(a)._createSeriesStates.call(this);
if("data" in this._changedOptions&&this._changedOptions.data){var g=this._dataAdapter;
this._seriesState.removeStatesByType("funnel-average");
if(g.averageStepData()){this._seriesState.insertState(g.averageDataLabel(),g.averageSeries(),"funnel-average")
}}};
a._updatePathStates=function(){Object.getPrototypeOf(a)._updatePathStates.call(this);
var h=this,i=this._options,g=this._dataAdapter,j=g.averageSeries();
c.select(i.parent).selectAll(".cv-funnel-avg-group .series [legend-group]").classed("path-inactive",function(){if(!i.interactive){return false
}var k=c.select(this),l=k.attr("legend-group");
if(l===j&&h._seriesState.doesSeriesStateExist(l,"funnel-average")){return !h._seriesState.isSeriesEnabled(l,"funnel-average")
}return k.classed("path-inactive")
})
};
a._isNormalized=function(){return this._options.normalized
};
e.cloudViz.funnel=f.util.createConstructor(a)
}(this));
(function(l){var r=l.cloudViz||{},q=r.core||{},g=l.dv||{},u=l.d3||{},j=Object.create(q);
var k=0.15,w=0.05,t=0.09,o=1+w,i=0.05,v=0.025,p=2,f=14,c=0.1,z=0.75,s=null,n=null;
j.init=function(A){this._type="gauge";
A=A||{};
this._initDefaultOptions();
this.setOptions(A);
return this
};
j._initDefaultOptions=function(A){var B={duration:750,percentOpen:c,showNeedle:true,showAxis:true,ticks:5,tickSubdivisions:0,format:"decimal",fillColor:"#3284d4",minValue:0,maxValue:10,colors:[{color:"#ff3400",alpha:1,from:"0%",to:"33%"},{color:"#faca00",alpha:1,from:"33%",to:"66%"},{color:"#68b672",alpha:1,from:"66%",to:"100%"}],metric:"",value:0};
this._margins={top:0,left:0,right:0,bottom:0};
return Object.getPrototypeOf(j)._initDefaultOptions.call(this,B)
};
j.render=function(){Object.getPrototypeOf(j).render.call(this,arguments);
this._determineSize();
this._initScales();
this._draw();
return this
};
j._onAutoResize=function(){this.render()
};
j._determineSize=function(C){var F=this._options,E=F.parent,D=F.width?F.width:E.offsetWidth,A=F.height?F.height:E.offsetHeight,B=Math.max(c,Math.min(z,F.percentOpen));
if(F.showNeedle){this._margins.bottom=A*0.05
}this._maxAngle=(1-B)*180;
this._minAngle=(1-B)*-180;
D-=this._margins.left+this._margins.right;
this._size=[D,A];
this._radius=Math.min(D-this._margins.left-this._margins.right,A-this._margins.top-this._margins.bottom)/2
};
j._initScales=function(){var A=this._options;
if(A.minValue>A.maxValue){throw new Error("The minimum value is greater than the maximum value.")
}this._scale=u.scale.linear().domain([A.minValue,A.maxValue]).range([0,1])
};
j._draw=function(){this._initSVG();
this._drawTrack();
this._drawAxis();
this._drawSelectedIndicator();
this._drawLabels()
};
j._initSVG=function(){var D=this._options,B=u.select(D.parent);
s=B.selectAll(".cv-wrapper.cv-gauge").data([0]);
s.enter().append("div").classed("cv-wrapper cv-gauge",true);
s.style("width",this._size[0]+"px").style("height",this._size[1]+"px");
var A=s.selectAll(".chart-wrapper").data([0]);
A.enter().append("div").classed("chart-wrapper",true);
var C=A.selectAll("svg").data([0]);
C.enter().append("svg");
n=C.selectAll("g").data([0]);
n.enter().append("g");
n.attr("transform","translate("+(this._size[0]-this._margins.left-this._margins.right)/2+","+(this._size[1]-this._margins.top-this._margins.bottom)/2+")")
};
j._drawTrack=function(){var A=this,E=this._options;
var C=u.svg.arc().innerRadius(this._radius*(1-w-k)).outerRadius(this._radius*(1-w)).startAngle(function(I,G){var F=g.util.isPercentString(I.from)?parseInt(I.from,10)/100:A._scale(I.from),H=(A._maxAngle-A._minAngle)*F+A._minAngle;
return e(H)
}).endAngle(function(I,G){var F=g.util.isPercentString(I.to)?parseInt(I.to,10)/100:A._scale(I.to),H=(A._maxAngle-A._minAngle)*F+A._minAngle;
return e(H)
});
var B=n.selectAll(".arc").data([0]);
B.enter().append("g").classed("arc",true);
var D=B.selectAll("path").data(E.colors);
D.enter().append("path");
D.exit().remove();
D.attr("fill",function(G,F){return G.color
}).attr("opacity",function(G,F){return G.hasOwnProperty("alpha")?G.alpha:1
}).attr("d",C)
};
j._drawAxis=function(){var I=this,A=this._options,H=this._scale.ticks(A.ticks),B=function(L,K,M,J){return function(N){N.attr("x1",0).attr("y1",p).attr("x2",0).attr("y2",I._radius*J+p).attr("transform",function(P){var O=d(L,P,K,M);
return"rotate("+d(L,P,K,M)+") translate(0,"+(I._radius*(k+w)-I._radius)+")"
})
}
};
var C=n.selectAll(".axis").data(A.showAxis?[0]:[]);
C.enter().append("g").classed("axis",true);
C.exit().remove();
var G=C.selectAll(".tick").data(H);
G.enter().append("line").classed("tick",true);
G.exit().remove();
G.call(B(this._scale,this._minAngle,this._maxAngle,i));
var D=b(this._scale,H,A.tickSubdivisions);
var E=C.selectAll(".minor-tick").data(D);
E.enter().append("line").classed("minor-tick",true);
E.exit().remove();
E.call(B(this._scale,I._minAngle,I._maxAngle,v));
var F=C.selectAll(".tick-label").data(H);
F.enter().append("text").classed("tick-label",true);
F.exit().remove();
F.attr("transform",function(N){var M=d(I._scale,N,I._minAngle,I._maxAngle),K=m(I._scale,N,I._minAngle,I._maxAngle),L=(I._radius-f)*(1-k-w-i),J=Math.cos(K)*L,O=Math.sin(K)*L;
if(M<-10&&M>-170){J-=3
}if(M>10&&M<170){J+=3
}return"translate("+J+","+O+")"
}).attr("text-anchor",function(K){var J=d(I._scale,K,I._minAngle,I._maxAngle);
if(J>-10&&J<10){return"middle"
}if(J<0){return null
}return"end"
}).attr("dy",".35em").style("font-size",h(I._radius*0.05,8,14)+"px").text(function(J){return I._formatNumber(A.format,J)
})
};
j._drawSelectedIndicator=function(){var A=this._options;
this._drawNeedle(A.showNeedle?[A.value]:[]);
this._drawProgressFill(A.showNeedle?[]:[A.value])
};
j._drawNeedle=function(B){var A=this,D=this._options,C=this._radius*t/2,F=this._radius*o;
var E=n.selectAll(".needle").data(B);
E.enter().append("path").classed("needle",true).attr("transform","rotate("+A._minAngle+")");
E.exit().remove();
E.attr("d","M"+(C/2)+"-"+C+"L0-"+F+"L-"+(C/2)+"-"+C+"C-"+(C*0.8257)+"-"+(C*0.8212)+"-"+(C*1.035)+"-"+(C/2*0.9448)+"-"+(C*1.035)+"-1C-"+(C*1.035)+","+(C/2*0.9078)+"-"+(C*0.5796)+","+(C*0.9314)+",0,"+(C*0.9314)+"S"+(C*1.035)+","+(C/2*0.9078)+","+(C*1.035)+"-1C"+(C*1.035)+"-"+(C/2*0.9448)+","+(C*0.8257)+"-"+(C*0.8212)+","+(C/2)+"-"+C+"z").transition().duration(D.duration).ease("cubic-in-out").attrTween("transform",function(L){var I=this,K=Math.min(D.maxValue,Math.max(D.minValue,L)),J=d(A._scale,K,A._minAngle,A._maxAngle),H=this.__previousD__===undefined?A._minAngle:this.__previousD__,G=u.interpolate(H,J);
return function(M){I.__previousD__=G(M);
return"rotate("+I.__previousD__+")"
}
})
};
j._drawProgressFill=function(B){var A=this,E=this._options,D=u.svg.arc().innerRadius(this._radius*(1-w-k)).outerRadius(this._radius*(1-w)).startAngle(e(A._minAngle)).endAngle(function(F){return e(d(A._scale,F,A._minAngle,A._maxAngle))
});
var C=n.selectAll(".progress").data(B);
C.enter().append("path").classed("progress",true);
C.exit().remove();
C.attr("fill",E.fillColor).transition().duration(E.duration).attrTween("d",function(J){var H=this,I=Math.min(E.maxValue,Math.max(E.minValue,J)),F=this.__previousD__===undefined?E.minValue:this.__previousD__,G=u.interpolate(F,I);
return function(K){H.__previousD__=G(K);
return D(H.__previousD__)
}
})
};
j._drawLabels=function(){var Q=this,A=this._options,B=A.value===undefined?[]:[A.value],N=A.metric===undefined?[]:[A.metric],L=m(this._scale,A.minValue,this._minAngle,this._maxAngle),G=m(this._scale,A.maxValue,this._minAngle,this._maxAngle),C=(this._radius)*(1-k-w),H=(this._radius-f)*(1-k-w-i),O=Math.cos(L)*H+this._radius,K=Math.cos(G)*H+this._radius,J=Math.sin(L)*C+this._radius;
var M=s.selectAll(".label-container").data([0]);
M.enter().append("div").classed("label-container",true);
M.style("left",this._size[0]/2-this._radius+"px");
var I=M.selectAll(".label-title").data(N);
I.enter().append("span").classed("label-title",true);
I.exit().remove();
I.style("font-size",h(this._radius*0.1,11,18)+"px").classed("multiline-ellipsis",!A.showNeedle).text(String);
var P=M.selectAll(".label-number").data(B),D=Math.max(J,this._radius*1.1);
P.enter().append("span").classed("label-number",true).style("line-height",this._radius*k+"px");
P.exit().remove();
P.style("left",O+"px").style("width",K-O+"px").style("font-size",this._radius*k+"px").text(function(R){return Q._formatNumber(A.format,R)
});
if(A.showNeedle){I.style("top",D+this._radius*0.2+"px").style("left",0).style("width",this._radius*2+"px");
P.style("top",D+"px")
}else{var F=h(this._radius*0.1,11,20)*2.3,E=this._radius*(1-w);
I.style("top",E+"px").style("left",this._radius*(k+w+i+0.3)+"px").style("width",this._radius*(1-k-w-i-0.3)*2+"px").style("height",F+"px");
P.style("top",Math.max(E+F,D)+"px")
}};
function m(C,B,A,D){return e(d(C,B,A,D))-e(A)-e(D)-Math.PI/2
}function d(C,B,A,D){return A+(C(B)*(D-A))
}function e(A){return A*Math.PI/180
}function h(C,B,A){return Math.max(B,Math.min(A,C))
}function b(C,G,B){var H=[];
if(B&&G.length>1){var J=a(C.domain()),E=-1,A=G.length,F=(G[1]-G[0])/++B,D,I;
while(++E<A){for(D=B;
--D>0;
){if((I=+G[E]-D*F)>=J[0]){H.push(I)
}}}for(--E,D=0;
++D<B&&(I=+G[E]+D*F)<J[1];
){H.push(I)
}}return H
}function a(B){var C=B[0],A=B[B.length-1];
return C<A?[C,A]:[A,C]
}l.cloudViz.gauge=r.util.createConstructor(j)
}(this));
(function(l){var w=l.cloudViz||{},u=w.core||{},f=l.dv||{},z=l.d3||{},s=Object.create(u);
var k=0,h=0,g=0,r=25,p=0,t=0,c=0,o=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?|\.[0-9]+)\s*\)/,a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,e=z.scale.linear(),d=z.scale.linear(),n=z.scale.ordinal(),m,q,j=true,v;
s.init=function(B){this._type="treemap";
B=B||{};
this._initDefaultOptions();
this.setOptions(B);
return this
};
s._initDefaultOptions=function(B){var C={colors:["#8cc350","#5a6eaa","#d755a5","#1ebed7","#f0a01e","#9b8ce6","#3cb5a0","#3287d2","#f0557d","#c3d250","#eb782d","#78b4f5","#5faf69","#aa5fa5","#fa5a50","#f5c841"],layout:"squarify",duration:750,tooltipContent:b};
return Object.getPrototypeOf(s)._initDefaultOptions.call(this,C)
};
s.reset=function(){};
s._preRender=function(){this._determineSize(this._options.data);
this._configureScales(this._options.data);
this._configureLayout()
};
s._render=function(){this._initContainer();
this._draw(this._options.data);
j=false;
return this
};
s._postRender=function(){};
s._determineSize=function(D){var C=this._options,B=C.parent;
k=f.util.getPercentValue(C.width,B.offsetWidth);
h=f.util.getPercentValue(C.height,B.offsetHeight)
};
s._configureScales=function(E){var D=this._options;
n.domain(E.map(function(F){return F.name
})).range(D.colors);
var B=E.hasOwnProperty("dx")?[E.x,E.x+E.dx]:[0,k],C=E.hasOwnProperty("dy")?[E.y,E.y+E.dy]:[0,h];
e.domain(B).range([1,k-2]);
d.domain(C).range([1,h-2])
};
s._configureLayout=function(){v=z.layout.treemap().sticky(true).value(function(B){return B.value||0
}).sort(function(C,B){return C.value-B.value
}).mode(this._options.layout).round(false)
};
s._initContainer=function(){var C=this._options;
var B=z.select(C.parent).selectAll(".cv-wrapper.cv-treemap").data([0]);
B.enter().append("div").classed("cv-wrapper cv-treemap",true);
m=B.selectAll(".chart-wrapper").data([0]);
m.enter().append("div").classed("chart-wrapper",true).style("position","relative");
m.style("width",k+"px").style("height",h+"px");
q=m.selectAll(".node-container").data([0]);
q.enter().append("div").classed("node-container",true).style("overflow","hidden");
q.style("width",k+"px").style("height",(h)+"px")
};
s._draw=function(H){var K=this,B=this._options,I={children:this._options.data},C=v.size([k,h+r]).padding([r,p,c,t]).nodes(I),D=C.filter(function(L){return !L.children
}),J=C.filter(function(L){return L.parent&&L.children
}),G;
var E=q.selectAll(".cv-node").data(C);
var F=E.enter().append("div").classed("cv-node",true).on("click",function(Q,N){if(Q.depth>0){var M=z.select(this),S=[];
if(Q.children){S=q.selectAll(".second-level").filter(function(U){return(Q.children.indexOf(U)>=0)
});
S[0].push(this);
var O=q.selectAll(".cv-node.selected");
var L=[];
if(O[0].indexOf(this)>=0){L=O[0].filter(function(U){var V=(S[0].indexOf(U)>=0);
return !V
})
}else{L=S[0].concat(O[0])
}S[0]=L;
K._selectNodes(S)
}else{S=q.selectAll(".cv-node.selected");
var P=S[0].indexOf(this),T;
if(P>=0){S[0].splice(P,1);
T=K._getParentNode(this);
var R=S[0].indexOf(T);
if(R>=0){G=0;
T.__data__.children.forEach(function(U){S.each(function(V){if(V==U){G++
}})
});
if(T.__data__.children.length-1===G){S[0].splice(R,1)
}}}else{S[0].push(this);
T=K._getParentNode(this);
G=0;
T.__data__.children.forEach(function(U){S.each(function(V){if(V==U){G++
}})
});
if(T.__data__.children.length===G){S[0].push(T)
}}K._selectNodes(S)
}if(K._eventMap.click){K._eventMap.click.call(this,Q,N,z.event)
}}}).on("mouseover",function(Q,M){if(!Q.children){var N=z.select(this),P={x:Q.x+Q.dx/4,y:Q.y+Q.dy/2-r,width:Q.dx/2,height:Q.dy/2},L={x:0,y:0,width:m.node().getBoundingClientRect().width,height:m.node().getBoundingClientRect().height},O=null;
N.classed("hovered",true);
O=B.tooltipContent.call(this,Q,M);
f.showTooltip(P,L,O,"top",5,m);
if(K._eventMap.mouseover){K._eventMap.mouseover.call(this,Q,M,z.event)
}}}).on("mouseout",function(N,L){if(!N.children){var M=z.select(this);
M.classed("hovered",false);
f.removeTooltip(m);
if(K._eventMap.mouseout){K._eventMap.mouseout.call(this,N,L,z.event)
}}});
F.append("div");
F.call(A).call(i);
E.exit().remove();
E.classed("root-level",function(L){return L.depth===I.depth
}).classed("first-level",function(L){return L.depth===I.depth+1
}).classed("second-level",function(L){return L.depth===I.depth+2
}).call(i).call(A);
E.select("div").text(function(N){var M=N.hasOwnProperty("name")&&N.parent===I?N.name:null;
var L=N.hasOwnProperty("label")&&N.parent===I?N.label:null;
return L||M
}).style("opacity",function(L){return(L.dx<50||L.dy<25)?0:1
})
};
s._selectNodes=function(B){var C=q.selectAll(".cv-node.selected");
C.classed("selected",false);
B.classed("selected",true)
};
s._getParentNode=function(C){var B;
var D=z.select(this._options.parent).selectAll(".first-level");
D[0].forEach(function(E){if(E.__data__.children.indexOf(C.__data__)>=0){B=E
}});
return B
};
s.setSelected=function(D){var B=this;
var C=z.select(this._options.parent).selectAll(".second-level").filter(D);
C[0].forEach(function(G){var F=B._getParentNode(G),E=0;
if(F){F.__data__.children.forEach(function(H){C.each(function(I){if(I==H){E++
}})
});
if(F.__data__.children.length===E){C[0].push(F)
}}});
B._selectNodes(C);
return B
};
s.getSelected=function(){var C=[];
var B=q.selectAll(".second-level.cv-node.selected");
if(B){B[0].forEach(function(D){C.push(D.__data__)
})
}return C
};
function b(B){return"<span class='series-name'>"+B.parent.name+"</span><span class='metric-value'>"+B.value+"</span><span class='metric-name'>"+B.name+"</span>"
}function A(B){var C=function(D){if(D.depth===1){return 3
}if(D.depth===2){return 1
}return 0
};
B.style("left",function(D){return(e(D.x)+1)+"px"
}).style("top",function(D){if(D.children&&!D.parent){return 0
}return(d(D.y)+1)-r+"px"
}).style("width",function(D){return(e(D.x+D.dx)-e(D.x)-2)+"px"
}).style("height",function(D){if(D.children){return null
}return(d(D.y+D.dy)-d(D.y)-2)+"px"
})
}function i(B){B.style("background-color",function(C){if(C.children||!C.parent){return null
}return n(C.parent.name)
})
}l.cloudViz.treemap=w.util.createConstructor(s)
}(this));
(function(d){var e=d.cloudViz,b=d.dv,c=e.util.namespace("cloudViz.dataAdapter.standard");
var a={};
a._isDataValid=null;
a.process=function(g,f){this._options=g;
this.l10n=e.util.deepExtend({},e.localeDefinition(g.locale),g.l10n||{});
if(!("data" in f)&&!("mappings" in f)){return
}if(!this._validateData(g.data,g.mappings)){return
}this._processOptions(g,f)
};
a._processOptions=function(g,f){};
a._determineOvertime=function(f){var h=this.mappings(),g=f[h.x];
if(!g||!g.length){return false
}return b.util.isDate(g[0])||/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.test(g[0])
};
a._calculateDateGranularity=function(j){var l=this.mappings(),k=j[l.x];
if(!k||!k.length){return"*"
}k=k.map(function(m){return new Date(m)
});
var h=Math.min.apply(Math,k),f=Math.max.apply(Math,k),g=(f-h)/1000,i=g/k.length;
return this.getTimeGranularity(i).gran
};
a.getTimeGranularity=function(h,g){var f="second",i=1;
if(!h){return{gran:f,divisor:i}
}if(g){if(h>=(i=60*60*24*365)){f="year"
}else{if(h>=(i=60*60*24*31)){f="month"
}else{if(h>=(i=60*60*24*7)){f="week"
}else{if(h>=(i=60*60*24)){f="day"
}else{if(h>=(i=60*60)){f="hour"
}else{if(h>=(i=60)){f="minute"
}else{f="second";
i=1
}}}}}}}else{if(h<=(i=1)){f="second"
}else{if(h<=(i=60)){f="minute"
}else{if(h<=(i=60*60)){f="hour"
}else{if(h<=(i=60*60*24)){f="day"
}else{if(h<=(i=60*60*24*7)){f="week"
}else{if(h<=(i=60*60*24*31)){f="month"
}else{f="year";
i=60*60*24*365
}}}}}}}return{gran:f,divisor:i}
};
a._getYTitleFromLabels=function(g){var f=b.util.uniq(g);
if(f&&f.length===1){return f[0]
}return null
};
a.data=function(){return this._options.data
};
a.mappings=function(){return this._options.mappings
};
a.formats=function(){return this._options.formats
};
a.xAxisTitle=function(){return this._options.xAxisTitle||null
};
a.yAxisTitle=function(){return this._options.yAxisTitle||null
};
a.dateGranularity=function(){return this._processedOptions.dateGranularity
};
a.isDataValid=function(){return this._validateData(this._options.data,this._options.mappings)
};
a._validateData=function(g,h){if(!g){return false
}for(var f in g){if(g[f].length){return true
}}return false
};
c.baseObj=a;
c.base=e.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(b.baseObj);
a._processOptions=function(g,f){var e=this._processedOptions=Object.create(g);
var h=this.data(),i=this.mappings();
if(e.isOvertime==null){e.isOvertime=this._determineOvertime(h);
if(e.isOvertime){e.dateGranularity=e.dateGranularity||this._calculateDateGranularity(h)
}}this._uniqueFillValues=this._processUniqueFillValues(h,i);
this._uniqueFillExtents=this._processUniqueFillExtents(h,i,this._uniqueFillValues);
this._uniqueXValues=this._processUniqueXValues(h,i,e.isOvertime);
Object.getPrototypeOf(a)._processOptions.call(this,e,f)
};
a.isOvertime=function(){return this._processedOptions.isOvertime
};
a.uniqueFillValues=function(){return this._uniqueFillValues||[]
};
a.uniqueFillExtents=function(){return this._uniqueFillExtents
};
a.uniqueXValues=function(){return this._uniqueXValues||[]
};
a.getUniqueFillExtent=function(e){var f=this._uniqueFillValues[e];
if(f){return this._uniqueFillExtents[f]
}return null
};
a.getUniqueFillExtentByFill=function(e){return this._uniqueFillExtents[e]
};
a._processUniqueFillValues=function(f,g){var e=f[g.series];
return e?dv.util.uniq(e):[]
};
a._processUniqueFillExtents=function(g,j,e){var i=g[j.series],h=g[j.y],f={};
h.map(function(m,l){var k=i[l];
if(!isFinite(m)||m===null){return
}if(!f[k]){f[k]=[m,m]
}f[k][0]=Math.min(m,f[k][0]);
f[k][1]=Math.max(m,f[k][1])
});
return f
};
a._processUniqueXValues=function(g,h,f){if(f){return[]
}else{var e=g[h.x];
return e?dv.util.uniq(e):[]
}};
b.barObj=a;
b.bar=d.util.createConstructor(a)
}(this));
(function(d){var e=d.cloudViz,c=e.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(c.baseObj),b=d.d3||{};
a._processOptions=function(g,f){Object.getPrototypeOf(a)._processOptions.apply(this,arguments)
};
a._validateData=function(f,g){if(!f){return false
}return true
};
a.data=function(){return this._options.data
};
a.metric=function(){return this._options.metric
};
a.format=function(){return this._options.format
};
c.choroplethObj=a;
c.choropleth=e.util.createConstructor(a)
}(this));
(function(d){var e=d.cloudViz,c=e.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(c.barObj),b=3;
a._processOptions=function(g,f){this._processCategories(g);
Object.getPrototypeOf(a)._processOptions.call(this,this._processedOptions,f)
};
a._processCategories=function(l){var n=Object.create(l),C=Object.create(l.data),h=l.mappings,w=h.y,p=h.x,j=h.series,m=h.seriesLabel||j,r=[],A,o=C[w].length,v,B=[],u=[],f={},t;
for(A=0;
A<o;
++A){r[A]={};
for(v in C){t=C[v][A];
if(v===j){if(B.length){if(t!==B[B.length-1]){if(B.length===this.maxFacets){o--;
A--;
r.pop();
break
}B[B.length]=t;
u[u.length]=C[m][A];
f[t]=B.length
}}else{B=[t];
u=[C[m][A]];
f[t]=B.length
}}r[A][v]=t
}}this.numFacets=B.length;
r.sort(function(k,i){if(k[j]===i[j]){return i[w]-k[w]
}return f[k[j]]-f[i[j]]
});
for(v in C){C[v]=[]
}C.cvdonutorder=[];
var s=0,q,g,z=this._options.maxSlices;
this.otherIncluded=false;
for(A=0,o=r.length;
A<o;
++A){g=r[A][j];
if(g!==q){s=0;
q=g
}if(s==z-1&&A+1<o&&r[A+1][j]===g){for(v in C){if(!C[v]){C[v]=[]
}C[v][A]=r[A][v]
}this.otherIncluded=true;
C[p][A]=this.l10n.labels.core.other;
++s;
C.cvdonutorder[A]=A;
continue
}if(s>=z){C[w][A-1]+=r[A][w];
r.splice(A,1);
o=r.length;
--A;
++s;
continue
}++s;
for(v in C){C[v][A]=r[A][v]
}C.cvdonutorder[A]=A
}n.yAxisTitle=l.yAxisTitle||u;
n.data=C;
this._processedOptions=n
};
a.processLabelData=function(h){var u=this.data(),k=this.mappings(),w=this._labelData=Object.create(u),n={},r={},p=this,v=w[k.series],i=w[k.y],j=w[k.x];
v.forEach(function(z,A){if(n[z]===undefined){n[z]=0
}if(r[z]===undefined){r[z]=0
}n[z]+=i[A];
if(!h.isSeriesEnabled||h.isSeriesEnabled(j[A])){r[z]+=i[A]
}});
var m=(w.cvtextvalue=[]),o=(w.cvtextperclabel=[]),q=(w.cvtextvallabel=[]),t={},g,f,s,l;
i.forEach(function(z,A){g=v[A];
f=(parseFloat(z)/n[g])*100;
q[A]=z;
o[A]=((f%1!==0)?f.toFixed(1):f)+"%";
l=!h.isSeriesEnabled||h.isSeriesEnabled(j[A]);
s=(parseFloat(z)/r[g])*100;
if(t[g]===undefined){t[g]=0
}m[A]=(l)?t[g]+(s/2):0;
t[g]+=(l)?s:0
})
};
a.data=function(){return this._processedOptions.data
};
a.labelData=function(){return this._labelData
};
a.yAxisTitle=function(f){var g=this._processedOptions.yAxisTitle;
if(g instanceof Array&&g.length>f){g=g[f]
}return g
};
a.showOtherCategory=function(){return this.otherIncluded
};
a.numberOfFacets=function(){return this.numFacets
};
c.donutObj=a;
c.donut=e.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(b.baseObj);
a._processOptions=function(g,f){var e=this._processedOptions=Object.create(g);
var h=this.data(),i=this.mappings();
this._forceZero=g._forceZero;
this._uniqueStrokeValues=this._processUniqueStrokeValues(h,i);
this._uniqueStrokeExtents=this._processUniqueStrokeExtents(h,i);
if(e.isOvertime==null){e.isOvertime=this._determineOvertime(h);
if(e.isOvertime){e.dateGranularity=e.dateGranularity||this._calculateDateGranularity(h)
}}Object.getPrototypeOf(a)._processOptions.call(this,e,f)
};
a.isOvertime=function(){return this._processedOptions.isOvertime
};
a.uniqueStrokeValues=function(){return this._uniqueStrokeValues||[]
};
a.uniqueStrokeExtents=function(){return this._uniqueStrokeExtents
};
a.getUniqueStrokeExtent=function(f){var e=this._uniqueStrokeValues[f];
if(e){return this._uniqueStrokeExtents[e]
}return null
};
a.getUniqueStrokeExtentByStroke=function(e){return this._uniqueStrokeExtents[e]
};
a._processUniqueStrokeValues=function(f,g){var e=f[g.series];
return e?dv.util.uniq(e):[]
};
a._processUniqueStrokeExtents=function(g,i){var e=g[i.series],h=g[i.y],f={};
h.map(function(l,k){var j=e[k];
if(!isFinite(l)||l===null){return
}if(!f[j]){f[j]=[l,l]
}f[j][0]=Math.min(l,f[j][0]);
f[j][1]=Math.max(l,f[j][1])
});
return f
};
b.lineObj=a;
b.line=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(b.baseObj);
a.sizeMetricName=function(){return this._options&&this._options.sizeTitle||null
};
a.isBubble=function(){var e=this.mappings()["size"];
return e&&e.length
};
b.pointObj=a;
b.point=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(b.baseObj);
a._processOptions=function(n,i){var g=this._processedOptions=Object.create(n),j=JSON.parse(JSON.stringify(n.data));
j.nodesById=[];
j.nodes.map(function(p,o){p._pid=o;
j.nodesById[o]=p;
return p
});
j.links=[];
j.linksById=[];
var e,k,h,f,l,m=this;
j.paths=j.paths.filter(function(o){if(!(o.values instanceof Array)){o.values=Array.apply(null,new Array(o.nodes.length-1)).map(function(){return o.values
})
}if(o.values.some(function(p){return p<=0
})){return false
}o.nodes.map(function(p){return(p!==null)?j.nodes[p]._pid:null
});
return true
});
j.paths.forEach(function(q,o){q.nodes.forEach(function(r,p){if(!p){e=q.nodes[p];
if(e!==null){j.nodesById[e].isPathStart=true;
if(j.nodesById[e].isPathEnd){j.nodesById[e].isPivot=true
}}return
}e=q.nodes[p-1];
k=r;
if(p===q.nodes.length-1){if(k!==null){j.nodesById[k].isPathEnd=true;
if(j.nodesById[k].isPathStart){j.nodesById[k].isPivot=true
}}}h=q.values[p-1];
f=m._generateLinkId(e,k);
if(l=j.linksById[f]){l.value+=h;
l.paths.push(o)
}else{l={source:e,target:k,value:h,paths:[o]};
j.linksById[f]=l;
j.links.push(l)
}})
});
g.data=j;
Object.getPrototypeOf(a)._processOptions.apply(this,arguments)
};
a.data=function(){return this._processedOptions.data
};
a.nodeKey=function(){return function(f,e){return e
}
};
a.linkKey=function(){return function(f,e){return e
}
};
a.pathingTitle=function(){return""
};
a.getPathEnd=function(e){return null
};
a.getPathDirection=function(e){return 0
};
a.activePathsTitle=function(e){return(e&&e.length)?this.l10n.labels.pathing["path2+"]:""
};
a.isValidPathingData=function(){var e=this.data();
if(!e){return false
}if(!e.nodes||!e.paths){return false
}if(!e.nodes.length){return false
}return true
};
a._generateLinkId=function(f,e){return f+"-"+e
};
a._sortPaths=function(g,e){var h=this.data();
return function f(l,j){function i(p,o,s){var v=p+s,q=o+s;
var u=(v<l.nodes.length&&v>=0)?l.nodes[v]:-1,t=(q<j.nodes.length&&q>=0)?j.nodes[q]:-1;
if(u!==-1&&u!==null){u=h.nodes.indexOf(h.nodesById[u])
}if(t!==-1&&t!==null){t=h.nodes.indexOf(h.nodesById[t])
}if(null===u&&null===t){return 0
}if(null===u){return(s>0)?1:-1
}if(null===t){return(s>0)?-1:1
}if(-1===u&&-1===t){return 0
}if(-1===u){return 1
}if(-1===t){return -1
}var r=u-t;
if(r!==0){return r
}return i(v,q,s)
}var m=l.nodes.indexOf(g._pid),k=j.nodes.indexOf(g._pid),n=i(m,k,e);
if(0===n){n=i(m,k,-e)
}if(0!==n){return n
}return j.nodes.length-l.nodes.length
}
};
a._generatePathLinks=function(r,j,m){var h=this.data(),n=this,e,l,i,k,f,q,g,p,o=[];
if(!r||!r.nodes){return o
}r.nodes.forEach(function(u,t,s){if(!t){return
}e=r.nodes[t-1];
l=u;
i=h.nodesById[e]||null;
k=h.nodesById[l]||null;
f=r.values[t-1];
q=null;
if(t>1){q=h.linksById[n._generateLinkId(r.nodes[t-2],e)]
}g=h.linksById[n._generateLinkId(e,l)];
p=(f/g.value)*g.dy;
if(i){o.push({dy:p,sy:(q)?q.ty+q.offset-p:g.sy+g.offset,ty:(!k)?i.dy-p:g.sy+g.offset,source:{x:i.x,y:i.y,dx:0},target:{x:i.x+i.dx,y:i.y},value:f,path:j,pivotStart:i.isPivot})
}o.push({dy:p,sy:g.sy+g.offset,ty:g.ty+g.offset,source:i,target:k,value:f,path:j});
if(t+1===s.length&&k){o.push({dy:p,sy:g.ty+g.offset,ty:g.ty+g.offset,source:{x:k.x,y:k.y,dx:0},target:{x:k.x+k.dx,y:k.y},value:f,path:j,pivotEnd:k.isPivot})
}g.offset+=p
});
return o
};
a.nodePaths=function(e){var f=this.data(),g=f.paths.filter(function(h){return h.nodes.indexOf(e._pid)!==-1
});
return g
};
a.nodePathData=function(j,h){var i=this.data(),g=this,e=[],f=i.links;
f.forEach(function(k){k.offset=0
});
j.sort(g._sortPaths(h,-1));
j.forEach(function(l,k){e=e.concat(g._generatePathLinks(l,k,h))
});
return e
};
a.linkSortActivePaths=function(f){var g=this.data(),i=g.paths,h,e=(f.source)?f.source:f.target;
g.links.forEach(function(j){j.offset=0
});
h=f.paths.map(function(j){return i[j]
});
h.sort(this._sortPaths(e,-1));
return h
};
a.linkPathData=function(g){var e=[],f=this;
g.forEach(function(j,h){e=e.concat(f._generatePathLinks(j,h))
});
return e
};
a.canExpandNode=function(e){return true
};
a.canCollapseNode=function(e){return true
};
a.canPivotNode=function(e){return true
};
b.pathingObj=a;
b.pathing=d.util.createConstructor(a)
}(this));
(function(d){var e=d.cloudViz,c=e.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(c.baseObj),b=d.d3||{};
a._processOptions=function(r,i,m){var f=m||this._processedOptions||{},h=this._processedOptions=Object.create(r);
var l=JSON.parse(JSON.stringify(h.data)),q=l.metrics[0]||{name:"",format:"int"};
function g(s){if(s.metrics&&s.metrics.length&&s.metrics[0]&&"undefined"!==typeof s.metrics[0].value){return s.metrics[0].value
}if(!s.children||!s.children.length){return 0
}return s.children.reduce(function(u,t){return u+g(t)
},0)
}function o(t,s){return g(s)-g(t)
}var j=this.l10n.labels.core.other;
function p(u,w){u.size=("undefined"===typeof u.size)?g(u):u.size;
if(!u.children||!u.children.length){return
}if(w<l.categories.length){var v=l.categories[w],s=u.children.length;
v.top=("undefined"!==typeof v.top)?Math.max(v.top,s):s
}if("undefined"!==typeof u.size&&q.format!=="percent"){var t=u.children.reduce(function(A,z){return A+g(z)
},0);
if(u.size>t){u.children.push({id:"cv-sb-other",name:j,size:u.size-t})
}}u.children.sort(o);
u.children.forEach(function(z){p(z,w+1)
})
}p(l,0);
var n=[];
function k(u,A,z){var s=n[A]||(n[A]=[]),t,v=u.length,w;
for(t=0;
t<v;
++t){w=u[t];
w._sid=z+"s"+t;
if(j===w.name){continue
}if(w.name){s[s.length]=w.name
}if(w.children&&w.children.length){k(w.children,A+1,w._sid)
}}}k([l],0,"");
l.name=q.name;
n.push([q.name]);
l.categories.forEach(function(t,s){t.index=s
});
h.uniques=n.reduce(function(t,s){var u=s.reduce(function(v,w){return(v.indexOf(w)<0)?v.push(w)&&v:v
},[]);
return t.concat(u)
},[]);
h.data=l;
h.categories=l.categories;
h.colorMetricIndex=f.colorMetricIndex;
h.stackedMetricIndex=f.stackedMetricIndex;
h.secondaryMetricIndex=f.secondaryMetricIndex;
h.secondaryMetricType=f.secondaryMetricType;
h.seqColors=h.seqColors;
Object.getPrototypeOf(a)._processOptions.apply(this,arguments)
};
a.data=function(){return this._processedOptions.data
};
a.categories=function(){return this._processedOptions.categories
};
a.uniques=function(){return this._processedOptions.uniques
};
a.colors=function(){return this._processedOptions.colors
};
a.seqColors=function(){return this._processedOptions.seqColors
};
a.metricColor=function(f){return this._processedOptions.metricColor
};
a.otherColor=function(f){return this._processedOptions.otherColor
};
a.otherGrayColor=function(f){return this._processedOptions.otherGrayColor
};
a.outRangeColor=function(f){return this._processedOptions.outRangeColor
};
a.isOther=function(f){return f.name===this.l10n.labels.core.other
};
a.isRoot=function(f){return !f.parent
};
a.isDataEmpty=function(){var f=this.data();
return !(f&&f.children&&f.children.length)
};
a.isSizeEmpty=function(){return !this.data().size
};
a._validateData=function(f){if(!f||!f.children||!f.children.length){return false
}return true
};
a.getPathKey=function(g,f){return g&&g._sid||f
};
a.getDataByPathKey=function(){var j=this.data(),f=this,i={},h;
function g(k){if(!k){return
}h=f.getPathKey(k,null);
if(h){i[h]=k
}if(k.children){k.children.forEach(g)
}}g(j);
return i
};
a.getColorMetric=function(){var f=this._processedOptions.colorMetricIndex;
return(f)?this.data().metrics[f]:null
};
a.getColorMetricIndex=function(){return this._processedOptions.colorMetricIndex
};
a.setColorMetricIndex=function(f){if(this._processedOptions.colorMetricIndex===f){f=null
}this._processedOptions.secondaryMetricIndex=f;
this.setSecondaryMetricType("color")
};
a.getStackedMetric=function(){var f=this._processedOptions.stackedMetricIndex;
return(f)?this.data().metrics[f]:null
};
a.getStackedMetricIndex=function(){return this._processedOptions.stackedMetricIndex
};
a.setStackedMetricIndex=function(f){if(this._processedOptions.stackedMetricIndex===f){f=null
}this._processedOptions.secondaryMetricIndex=f;
this.setSecondaryMetricType("height")
};
a.getSecondaryMetricType=function(){return this._processedOptions.secondaryMetricType
};
a.setSecondaryMetricType=function(i){var f=this.getSecondaryMetricIndex()||1,h=this._processedOptions,g=this;
h.secondaryMetricIndex=f;
h.secondaryMetricType=i;
switch(i){case"color":h.colorMetricIndex=f;
h.stackedMetricIndex=null;
break;
case"height":h.colorMetricIndex=null;
h.stackedMetricIndex=f;
break;
case"both":h.colorMetricIndex=f;
h.stackedMetricIndex=f;
break;
default:h.colorMetricIndex=null;
h.stackedMetricIndex=null;
h.secondaryMetricIndex=null;
h.secondaryMetricType=null
}};
a.getSecondaryMetric=function(){var f=this._processedOptions.secondaryMetricIndex;
return(f)?this.data().metrics[f]:null
};
a.getSecondaryMetricIndex=function(){return this._processedOptions.secondaryMetricIndex
};
a.setSecondaryMetricIndex=function(f){if(this._processedOptions.secondaryMetricIndex===f){f=null
}this._processedOptions.secondaryMetricIndex=f;
this.setSecondaryMetricType(f?this.getSecondaryMetricType()||"height":null)
};
c.sunburstObj=a;
c.sunburst=e.util.createConstructor(a)
}(this));
(function(d){var e=d.cloudViz,c=e.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(c.baseObj),b=d.d3||{};
a._processOptions=function(h,g){var f=this._processedOptions=Object.create(h);
var i=h.data;
if(h.isEmotionChart){i=this._getEmotionData(h.data)
}f.data=i;
Object.getPrototypeOf(a)._processOptions.call(this,f,g)
};
a._getEmotionData=function(h){var g=this.l10n.labels.flower;
var f=[{index:"joy",label:g.joy,color:"#e6b43c"},{index:"admiration",label:g.admiration,color:"#7daf4b"},{index:"fear",label:g.fear,color:"#50965a"},{index:"surprise",label:g.surprise,color:"#00a0be"},{index:"sadness",label:g.sadness,color:"#286eaf"},{index:"disgust",label:g.disgust,color:"#964196"},{index:"anger",label:g.anger,color:"#f04641"},{index:"anticipation",label:g.anticipation,color:"#dc5f00"}];
var i={};
dv.util.each(h,function(j){i[j.index]=j
});
dv.util.each(f,function(j){if(!i[j.index]){j.value=0
}else{j.value=i[j.index].value||0
}});
return f
};
a._validateData=function(f,g){if(!f){return false
}return true
};
a.data=function(){return this._processedOptions.data
};
c.flowerObj=a;
c.flower=e.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.standard"),a=Object.create(b.barObj);
a._processOptions=function(g,f){var e=this._processedOptions=Object.create(g);
this._processStepData(e);
Object.getPrototypeOf(a)._processOptions.call(this,e,f)
};
a.data=function(){return this._processedOptions.data
};
a.mappings=function(){return this._processedOptions.mappings
};
a.seriesLabelKey=function(){return"cv:fnl:seriesLabel"
};
a.averageStepData=function(){return this._processedOptions.avgStepData
};
a.averageDataLabel=function(){return this._processedOptions.avgStepLabel
};
a.averageSeries=function(){return this._processedOptions.averageSeries
};
a.previousStepData=function(){return this._processedOptions.prevStepData
};
a.currentStepData=function(){return this._processedOptions.curStepData
};
a.textStepData=function(){return this._processedOptions.txtStepData
};
a.getNumSteps=function(){return this._processedOptions.numSteps
};
a.getNumBarsPerStep=function(){return this._processedOptions.numBarsPerStep
};
a._stepDelimiter=":::";
a.getStepName=function(e){return e&&e.slice(0,e.indexOf(this._stepDelimiter))||""
};
a.isSingleSeries=function(){return this.getNumBarsPerStep()===1
};
a.isAvgCalculated=function(){return this._processedOptions.avgStepDataCalc
};
a.getSingleSeriesStepValue=function(f,e){if(!this.isSingleSeries()){return
}return this.currentStepData()[this.mappings()["y"]][e]
};
a._processStepData=function(j){var f=this.mappings(),q=this,z=j.data,l=f.series,v=f.seriesLabel,A=this.seriesLabelKey(),k=f.x,u=f.y,w=j.averageSeries,n=w&&z[l].indexOf(w)>=0,i=j.avgStepDataCalc=!n,s=j.avgStepData=!j.disableAverage&&(n||i)?{cv_tt_val:[],cv_tt_pval:[]}:null,r=j.prevStepData={cv_tt_val:[],cv_tt_pval:[]},h=j.data=j.curStepData={cv_tt_val:[],cv_tt_pval:[]},o=j.txtStepData={cv_label:[]},e={},g={};
if(s){s[u]=[];
s[k]=[];
s[l]=[];
s[A]=[]
}r[u]=[];
r[k]=[];
r[l]=[];
r[A]=[];
h[u]=[];
h[k]=[];
h[l]=[];
h[A]=[];
o[u]=[];
o[k]=[];
o[l]=[];
o[A]=[];
j.numBarsPerStep=z[l].reduce(function(B,C,m){if(B.indexOf(C)<0&&(j.disableAverage||C!==w)){B.push(C)
}return B
},[]).length;
z[u].forEach(function(B,C){var m=z[l][C],F,E=e[m];
if(typeof E==="undefined"){e[m]=E=[];
F=B
}else{F=E[E.length-1]
}var G=z[k][C]+q._stepDelimiter+E.length;
g[G]=g[G]?g[G]+B:B;
if(n&&s&&m===w){s[u].push(B);
s[k].push(G);
s[l].push(z[l][C]);
s[A].push(j.avgStepLabel=j.averageSeriesLabel?j.averageSeriesLabel:z[v][C]);
s.cv_tt_val.push(B);
s.cv_tt_pval.push(F);
E.push(B);
return
}var D=h[u].length;
r[u].push(F);
h[u].push(B);
o[u].push(B);
o.cv_label.push(F?B/F:0);
h.cv_tt_val[D]=r.cv_tt_val[D]=B;
h.cv_tt_pval[D]=r.cv_tt_pval[D]=F;
r[k][D]=h[k][D]=o[k][D]=G;
r[l][D]=h[l][D]=o[l][D]=z[l][C];
r[A][D]=h[A][D]=o[A][D]=z[v][C];
E.push(B)
});
var p=null;
if(s&&i){j.averageSeries="cv:fnl:avg"
}j.numSteps=h[k].reduce(function(C,D,B){if(C.indexOf(D)<0){C.push(D);
if(s&&i){var m=g[D]/j.numBarsPerStep;
if(p===null){p=m
}s[u].push(m);
s[k].push(D);
s[l].push(j.averageSeries);
s[A].push(j.avgStepLabel=j.averageSeriesLabel?j.averageSeriesLabel:q.l10n.labels.funnel.average);
s.cv_tt_val.push(m);
s.cv_tt_pval.push(p);
p=m
}}return C
},[]).length;
var t=Object.create(j.mappings);
t.seriesLabel=A;
j.mappings=t
};
b.funnelObj=a;
b.funnel=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(d.dataAdapter.standard.baseObj);
a._getYFormats=function(g,j,n){var l=[];
if(!g||!g.metric||!j||!j.series||!n){return l
}var k=g.metric.length;
for(var h=0;
h<k;
h++){var f=g.metric[h],m=g[j.series],e=n.indexOf(m[h]);
l[e]=f.type
}return l
};
a.mappings=function(){return this._processedOptions.mappings
};
a.formats=function(){return this._processedOptions.formats
};
b.baseObj=a;
b.base=d.util.createConstructor(a)
}(this));
(function(c){var e=c.cloudViz,b=e.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(e.dataAdapter.standard.barObj);
a._processOptions=function(h,g){var f=this._processedOptions=Object.create(h);
f.isOvertime=this._determineOvertime(f.data);
f.yAxisTitle=h.yAxisTitle||this._getYAxisTitle(f.data);
f.dateGranularity=this._getTimeGranularity(f.data);
this._processData(f);
this._updateMappings(f);
Object.getPrototypeOf(a)._processOptions.call(this,f,g);
f.formats={x:h.formats.x,y:this._getYFormats(f.data,f.mappings,this.uniqueFillValues())}
};
a.isOvertime=function(){return this._processedOptions.isOvertime
};
a.xAxisTitle=function(){return null
};
a.yAxisTitle=function(){return this._processedOptions.yAxisTitle
};
a.dateGranularity=function(){return this._processedOptions.dateGranularity
};
a.data=function(){return this._processedOptions.data
};
a.mappings=function(){return this._processedOptions.mappings
};
a.formats=function(){return this._processedOptions.formats
};
a._determineOvertime=function(g){var f=g.date,h=g.metric&&g.metric.some(function(i){return i&&i.date_ref&&i.date_ref.length>1
});
return f&&f.length&&h
};
a._getYAxisTitle=function(f){return this._getYTitleFromLabels(f.label)
};
a._processData=function(g){if(g.isOvertime){return
}var l=Object.create(g.data),h,j=l.cell.length,f=null,k=null;
l.group=[];
for(h=0;
h<j;
++h){k=f;
f=l.cell[h];
l.group[h]=l.series[h];
if(k&&"incomplete"===f.status&&"incomplete"!==k.status){l.group[h]+="::incomplete::"
}}g.data=l
};
a._updateMappings=function(f){var g=Object.create(f.mappings);
if(f.isOvertime){g.x="date";
g.y="value";
g.group="group";
g.series="series";
g.seriesLabel="series_name"
}else{g.x="category";
g.y="value";
g.series="metric_series";
g.seriesLabel="metric_series_name"
}f.mappings=g
};
a._getTimeGranularity=function(f){return f.metric[0]["date_range"].gran
};
var d=b.baseObj;
a._getYFormats=d._getYFormats;
b.bar=e.util.createConstructor(a)
}(this));
(function(d){var e=d.cloudViz,b=e.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(e.dataAdapter.standard.choroplethObj),c=d.d3||{};
a._processOptions=function(h,g){var f=this._processedOptions=Object.create(h);
this._processData(f,h);
Object.getPrototypeOf(a)._processOptions.call(this,f,g)
};
a._processData=function(k,g){var z=g.data,A=z.data,s=z.metrics,l=z.filters,i=z.dates,j,h,q,o,n={values:{}};
for(var r=0,t=s.length;
r<t;
++r){q=s[r];
j=q.filter_ref;
h=q.date_ref;
for(var u=0,p=j.length;
u<p;
++u){o=l[j[u]];
for(var v=0,w=h.length;
v<w;
++v){n.values[(o.info||{}).geo_id]=A[j[u]][h[v]][r].val
}}}k.data=n;
k.metric=q.name;
k.format=q.type
};
a.data=function(){return this._processedOptions.data
};
a.metric=function(){return this._processedOptions.metric
};
a.format=function(){return this._processedOptions.format
};
a._validateData=function(f,g){if(!f){return false
}return true
};
a.data=function(){return this._processedOptions.data
};
b.choropleth=e.util.createConstructor(a)
}(this));
(function(c){var e=c.cloudViz,b=e.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(e.dataAdapter.standard.donutObj);
a._processOptions=function(h,g){var f=this._processedOptions=Object.create(h);
this._updateMappings(f);
Object.getPrototypeOf(a)._processOptions.call(this,f,g);
f.formats={x:h.formats.x,y:this._getYFormats(f.data,f.mappings,this.uniqueFillValues())}
};
a.mappings=function(){return this._processedOptions.mappings
};
a.formats=function(){return this._processedOptions.formats
};
a._updateMappings=function(f){var g=Object.create(f.mappings);
g.x="category";
g.y="value";
g.series="metric_series";
g.seriesLabel="metric_series_name";
f.mappings=g
};
var d=b.baseObj;
a._getYFormats=d._getYFormats;
b.donut=e.util.createConstructor(a)
}(this));
(function(c){var e=c.cloudViz,b=e.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(e.dataAdapter.standard.lineObj);
a._processOptions=function(h,g){var f=this._processedOptions=Object.create(h);
f.isOvertime=this._determineOvertime(f.data);
f.yAxisTitle=h.yAxisTitle||this._getYAxisTitle(f.data);
f.dateGranularity=this._getTimeGranularity(f.data);
this._updateMappings(f);
this._processMultiMetric(f);
this._processIncompleteData(f);
Object.getPrototypeOf(a)._processOptions.call(this,f,g);
f.formats={x:h.formats.x,y:f.isOvertime?this._getYFormats(f.data,f.mappings,this.uniqueStrokeValues()):h.formats.y}
};
a.data=function(){return this._processedOptions.data
};
a.mappings=function(){return this._processedOptions.mappings
};
a.formats=function(){return this._processedOptions.formats
};
a.xAxisTitle=function(){return this._processedOptions.xAxisTitle
};
a.yAxisTitle=function(){return this._processedOptions.yAxisTitle
};
a.isOvertime=function(){return this._processedOptions.isOvertime
};
a.dateGranularity=function(){return this._processedOptions.dateGranularity
};
a._determineOvertime=function(f){return +f.date[0]!==+f.date[f.date.length-1]
};
a._getYAxisTitle=function(f){return this._getYTitleFromLabels(f.label)
};
a._getTimeGranularity=function(f){return this.isOvertime()?f.metric[0].date_range.gran:"*"
};
a._processMultiMetric=function(j){if(j.isOvertime){return
}var n=j.data,h={series:[]},s=[],t=[],o,v,l;
for(o=0,v=n.label.length;
o<v;
++o){l=n.label[o];
if(!h[l]){s.push(l);
if(n.metric&&n.metric.length){t.push(n.metric[o].type)
}else{t.push(null)
}h[l]=[]
}h[l].push(n.value[o]);
h.series[h[l].length-1]=n.category[o]
}var k={x:s[0],y:s[1]};
var q={x:t[0],y:{0:t[1]}};
if(n.groups&&n.groups.length&&n.groups[0].length){var p,r=n.groups.length,w,u=[];
for(p=0;
p<r;
++p){w=n.groups[p];
u[p]=w.join("-")
}h.facet_group=u;
k.series="facet_group"
}if(s.length>2){k.size=s[2];
q.size=t[2];
j.sizeMetricName=j.sizeTitle||s[2]
}j.data=h;
j.mappings=k;
j.formats=q;
j.xAxisTitle=j.xAxisTitle||s[0];
j.yAxisTitle=j.yAxisTitle||s[1]
};
a._updateMappings=function(f){var g=Object.create(f.mappings);
g.x="date";
g.y="value";
g.group="series";
g.series="series";
g.seriesLabel="series_name";
f.mappings=g
};
a._processIncompleteData=function(f){if(!f.isOvertime||!f.data.cell){return
}if(f.position==="stack"||f.position==="fill"){return
}var l=f.data,n=f.mappings,m,p=l.cell.length,o=null,g=null,h,j=false;
l.cv_rs_group=l.cv_rs_group||[];
for(m=0;
m<p;
++m){g=o;
o=l.cell[m];
l.cv_rs_group[m]=l.cv_rs_group[m]||l.series[m];
if(l.cv_rs_group[m].indexOf("::incomplete::")>=0){continue
}if(g&&"incomplete"===o.status&&"incomplete"!==g.status){for(h in l){l[h].splice(m,0,l[h][m-1])
}l.cv_rs_group[m]+="::incomplete::";
++p;
++m
}l.cv_rs_group[m]+="incomplete"===o.status?"::incomplete::":""
}n.group="cv_rs_group"
};
var d=b.baseObj;
a._getYFormats=d._getYFormats;
b.line=e.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(d.dataAdapter.standard.pointObj);
a._processOptions=function(z,k){var h=this._processedOptions=Object.create(z);
var n=z.data,e={series:[]},s=[],t=[],o,v,l;
for(o=0,v=n.label.length;
o<v;
++o){l=n.label[o];
if(!e[l]){s.push(l);
if(n.metric&&n.metric.length){t.push(n.metric[o].type)
}else{t.push(null)
}e[l]=[]
}e[l].push(n.value[o]);
e.series[e[l].length-1]=n.category[o]
}var j={x:s[0],y:s[1]};
var q={x:t[0],y:t[1]};
if(n.groups&&n.groups.length&&n.groups[0].length){var p,r=n.groups.length,w,u=[];
for(p=0;
p<r;
++p){w=n.groups[p];
u[p]=w.join("-")
}e.group=u;
j.series="group"
}else{j.series="series"
}if(s.length>2){j.size=s[2];
q.size=t[2];
h.sizeMetricName=z.sizeTitle||s[2]
}h.data=e;
h.mappings=j;
h.formats=q;
h.xAxisTitle=z.xAxisTitle||s[0];
h.yAxisTitle=z.yAxisTitle||s[1];
Object.getPrototypeOf(a)._processOptions.apply(this,arguments)
};
a.data=function(){return this._processedOptions.data
};
a.mappings=function(){return this._processedOptions.mappings
};
a.formats=function(){return this._processedOptions.formats
};
a.xAxisTitle=function(){return this._processedOptions.xAxisTitle
};
a.yAxisTitle=function(){return this._processedOptions.yAxisTitle
};
a.sizeMetricName=function(){return this._processedOptions.sizeMetricName
};
b.point=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(d.dataAdapter.standard.pathingObj),e=4;
a._processOptions=function(F,h){var E=Object.create(F),t=E.data,w={},v=(w.nodes=[]),o=(w.paths=[]),O={},V=this.l10n.labels.pathing;
function B(i){return"E"===i
}function z(i){return"X"===i
}var N,ab,K,R,A,H,g,J,X,D,l,ad=0;
for(ab in t.filters){N=t.filters[ab];
K=this._getFilterId(N);
if(K){R=N.info&&N.info.name||"";
A=this._getFilterChild(N);
H=A&&A.op||null;
if(H&&H!=="previous"&&H!=="next"){A=H=null
}g=(A&&A.val)?[].concat(A.val):[];
D=0;
if("previous"===H){if(g.some(B)){var p="E_0";
if(!O[p]){J={label:V.entry,id:p,column:D,index:v.length,filters:[]};
v[v.length]=J;
O[p]=J
}}D=g.length
}if("next"===H){if(g.some(z)){var k="X_0";
if(!O[k]){J={label:V.exit,id:k,column:D,index:v.length,filters:[]};
v[v.length]=J;
O[k]=J
}}D=0-g.length
}X=K+"_"+D;
if(O[X]){O[X].filters.push(N);
continue
}l=("0"===String(K)&&(V.exit===String(R)||V.entry===String(R)));
if(l){continue
}else{if("0"===String(K)){continue
}}J={label:R,id:X,column:D,index:v.length,filters:[N]};
v[v.length]=J;
ad=Math.min(ad,D);
O[X]=J
}}if(0!==ad){for(var U in v){J=v[U];
J.column-=ad
}}var Q,C,G,af,W,r,ac,M,ae,u,aa,I,P;
for(W=0,r=t.metrics.length;
W<r;
++W){Q=t.metrics[W];
C=Q.filter_ref;
G=Q.date_ref;
for(ac=0,M=C.length;
ac<M;
++ac){ab=C[ac];
N=t.filters[ab];
for(ae=0,u=G.length;
ae<u;
++ae){af=G[ae];
aa=t.dates[af];
I=t.data[ab][af][W];
if("invalid"===I.status){continue
}if(J=this._getSingleNode(N,O)){J.total=+I.val;
continue
}P=this._createPath(N,O);
if(!P||!P.length){continue
}o[o.length]={nodes:P,values:+I.val||0}
}}}o.sort(function(i,f){return f.nodes.length-i.nodes.length
});
var Z,L,Y,s,T,q;
for(Z=0,L=o.length;
Z<L;
++Z){T=o[Z];
for(Y=0,s=o.length;
Y<s;
++Y){if(Z===Y){continue
}q=o[Y];
if(q.nodes.length===T.nodes.length){continue
}if(-1!==this._getPathString(T.nodes).indexOf(this._getPathString(q.nodes))){q.values-=T.values
}}}w.paths=o=o.filter(function(f){return f.values
});
E.data=w;
var S=F.data.metrics;
E.pathingTitle=S&&S.length&&S[0].name;
Object.getPrototypeOf(a)._processOptions.call(this,E,h)
};
a.nodeKey=function(){return function(g,f){return g.id
}
};
a.linkKey=function(){return function(g,f){return((g.source)?g.source.id:"null")+"-"+((g.target)?g.target.id:"null")
}
};
a.pathingTitle=function(){return this._processedOptions.pathingTitle
};
a.getPathEnd=function(k){if(!k||!k.nodes||!k.nodes.length){return null
}if(k.nodes.length===1){return k.nodes[0]
}var g=k.nodes,j=this._processedOptions.data,h=j.nodesById,l=h[g[0]],f=h[g[g.length-1]];
function i(m){return m&&(m.isPivot||m.id==="E_0"||m.id==="X_0")
}if(i(l)){return l
}if(i(f)){return f
}return null
};
a.getPathDirection=function(g){var f=this.getPathEnd(g);
if(!f){return 0
}return f._pid===g.nodes[0]?1:-1
};
a.activePathsTitle=function(i){if(!i||!i.length){return""
}var f=this.getPathEnd(i[0]),g=this.l10n.labels.pathing;
if(!f){return g["path2+"]
}var h=this.getPathDirection(i[0])===1?g.pathFromNode:g.pathToNode;
return h.replace(/\{path\}/i,((i.length>1)?g["path2+"]:g.path)).replace(/\{label\}/i,f.label)
};
a._getSingleNode=function(g,f){var l=this._getFilterId(g),h=g.filter_def&&g.filter_def.length&&g.filter_def[0]||null,k=h&&h.op||null,j=this._getFilterChild(g),i=j&&j.op||null;
if(("select"!==k&&"equals"!==k&&"id"!==k)||"previous"===i||"next"===i){return false
}return f[l+"_0"]
};
a._getPathString=function(f){return f.map(function(g){return(null===g)?"null":g
}).toString()
};
a._createPath=function(l,p){var h=this._getFilterId(l),i=this._getFilterChild(l),k=i&&i.op||null;
if(k&&k!=="previous"&&k!=="next"){return[]
}var n=(i&&i.val)?[].concat(i.val):[];
if(!n.length){return n
}var j=("previous"===i.op),o=("0"===h),m=(j)?0:(o)?0-n.length+1:0-n.length,g=[];
if(j){n.push(h)
}else{n.unshift(h)
}return this._mapNodeIds(m,n,p)
};
a._mapNodeIds=function(l,i,h){if(!isFinite(l)||!h){return[]
}l=+l;
var g=false,j=false,k,f=i&&i.map&&i.map(function(m){if("0"===m){return null
}k=m+"_"+l;
if(!h[k]){j=true;
return null
}++l;
g=true;
return +h[k].index
});
return(g&&!j)?f:[]
};
a._getFilterId=function(f){return(f.info&&(f.info.id||f.info.id===0))?f.info.id+"":null
};
a._getFilterChild=function(f){var g=f.filter_def&&f.filter_def.length&&f.filter_def[0]||null;
return g&&g.child&&g.child.length&&g.child[0]||null
};
a.canExpandNode=function(g){var i=g.entryLinks.length+g.targetLinks.length,h=g.exitLinks.length+g.sourceLinks.length,f=Math.abs(parseInt(g.id.split("_")[1],10));
if(f>=e){return false
}if(h&&g.id==="E_0"){return false
}if(i&&g.id==="X_0"){return false
}if(!i||!h){return true
}return false
};
a.canCollapseNode=function(g){var i=g.entryLinks.length+g.targetLinks.length,h=g.exitLinks.length+g.sourceLinks.length,f=parseInt(g.id.split("_")[1],10);
if(g.id==="E_0"||g.id==="X_0"){return false
}return(0===f&&(h||i))||(f>0&&h)||(f<0&&i)
};
a.canPivotNode=function(i){var l=i.entryLinks.length+i.targetLinks.length,k=i.exitLinks.length+i.sourceLinks.length,h=Math.abs(parseInt(i.id.split("_")[1],10));
if(h!==0){return true
}var j=this.data(),g=j.nodes.map(function(m){return parseInt(m.id.split("_")[1],10)
}),f=0;
if(g.some(function(m){if(m===0){f++
}return(f>1)?true:false
})){return true
}return false
};
b.pathingObj=a;
b.pathing=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(d.dataAdapter.standard.sunburstObj);
a._processOptions=function(k,E){var H=this._processedOptions,r=this._processedOptions=Object.create(k);
function o(f){var M=(f&&f.op==="id")?[f.val]:[];
if(f&&f.child&&f.child[0]){return o(f.child[0]).concat(M)
}return M
}function B(f){if(f&&f.child&&f.child[0]){return B(f.child[0])+1
}return 0
}function m(f){var M=f&&f.filter_def&&f.filter_def[0]||null;
return B(M)
}function K(M,f){var O=m(M.filter),N=m(f.filter);
if(O===N){return f.cell[0].val-M.cell[0].val
}return O-N
}var J=k.data,C,i,h,u,D,z,F,I,l,p,G,g,A,s,w,L={children:[],categories:[],metrics:J.metrics.map(function(f,M){return{id:f.id,icon:f.icon,name:f.name||f.id,format:f.type,categories:[]}
})};
if(C=J.metrics[0]){p=[];
i=C.filter_ref;
h=C.date_ref;
for(D=0,z=i.length;
D<z;
++D){w=i[D];
s=J.filters[w];
for(F=0,I=h.length;
F<I;
++F){u=h[F];
G=J.dates[u];
g=J.data[w][u];
if(!g[0]||"invalid"===g[0].status){continue
}if(s.info&&s.info.id===0){continue
}p.push({filter:s,cell:g})
}}p.sort(K);
var t={},j,n,v,q,e;
p.forEach(function(f){s=f.filter;
g=f.cell;
v=s&&s.filter_def&&s.filter_def[0]||null;
q=o(v),e=q.length,j=q.join("-");
if(!j.length&&!s.info){g.forEach(function(N,M){L.metrics[M].value=+N.val
});
return
}f={id:s.info.id,pid:j?j+"-"+s.info.id:s.info.id,name:s.info.name,metrics:g.map(function(M){return{value:+M.val}
}),category:s.info.category||(v&&v["var"])||undefined,filtervar:v&&v["var"]||undefined,children:[]};
if(s.info.orig_name){f.orig_name=s.info.orig_name
}g.forEach(function(P,N){var M=L.metrics[N];
M.min=("undefined"!==typeof M.min)?Math.min(M.min,+P.val):+P.val;
M.max=("undefined"!==typeof M.max)?Math.max(M.max,+P.val):+P.val;
var O;
if(!(O=M.categories[e])){M.categories[e]={min:+P.val,max:+P.val}
}else{O.min=Math.min(O.min,+P.val);
O.max=Math.max(O.max,+P.val)
}});
if(j&&(n=t[j])){n.children.push(f)
}else{if(!q.length){L.children.push(f)
}else{return
}}t[f.pid]=f;
L.categories[e]={name:s.info.category||(v&&v["var"])||L.categories[e]}
})
}r.data=L;
Object.getPrototypeOf(a)._processOptions.call(this,r,E,H)
};
a._validateData=function(f){if(!f){return false
}for(var e in f){if(f[e].length){return true
}}return false
};
a.getPathKey=function(f,e){if(!f||!f._sid){return 0
}if(!f.pid){return f._sid
}return f.pid
};
b.sunburst=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(d.dataAdapter.standard.flowerObj);
a._processOptions=function(g,f){var e=this._processedOptions=Object.create(g);
e.data=this._parseData(g.data);
Object.getPrototypeOf(a)._processOptions.call(this,e,f)
};
a._parseData=function(g){if(!g.metric.length){return[]
}var f=[],e=g.metric[0].id;
dv.util.each(g.metric,function(l,h){if(l.id!=e){return
}var j=g.filter[h].info.name;
var i=g.value[h];
f.push({index:j.toLowerCase(),label:j,value:i})
});
return f
};
a.formats=function(){return this._processedOptions.formats
};
b.flower=d.util.createConstructor(a)
}(this));
(function(c){var d=c.cloudViz,b=d.util.namespace("cloudViz.dataAdapter.rs"),a=Object.create(d.dataAdapter.standard.funnelObj);
a._processOptions=function(g,f){var e=this._processedOptions=Object.create(g);
this._processData(e);
this._updateMappings(e);
Object.getPrototypeOf(a)._processOptions.call(this,e,f)
};
a.data=function(){return this._processedOptions.data
};
a.mappings=function(){return this._processedOptions.mappings
};
a.formats=function(){return this._processedOptions.formats
};
a._processData=function(e){e.data=Object.create(e.data)
};
a._updateMappings=function(e){var f=Object.create(e.mappings);
f.x="category";
f.y="value";
f.series="metric_series";
f.seriesLabel="metric_series_name";
e.mappings=f
};
b.funnel=d.util.createConstructor(a)
}(this));
(function(a){a.cloudViz.localeDefinition("de-DE",{monthAbbreviations:["Jan","Feb","März","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekdayAbbreviations:["So","Mo","Di","Mi","Do","Fr","Sa"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],ampm:["AM","PM"]},"calendar");
a.cloudViz.localeDefinition("de-DE",{core:{nodata:"Das Diagramm enthält keine Daten.",erroronrender:"Hoppla! Ein Fehler ist aufgetreten und das Diagramm konnte nicht gerendert werden.",other:"Sonstige",normalized:"Normalisiert"},dvcore:{target:"Zielgruppe",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} (in {time})",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"Größe"},pathing:{entry:"Einstieg",exit:"Ausstieg","entry2+":"Einstiege","exit2+":"Ausstiege",path:"Pfad","path2+":"Pfade",expand:"Erweitern",focus:"Fokus",collapse:"Reduzieren",title:"Pfaderstellungs-diagramm",nodeEntries:"Einstiege für {label}",nodeExits:"Ausstiege für {label}",nodeToNode:"{source} → {target}",percOfNode:"{perc} von {label}",pathToNode:"{path} zu {label}",pathFromNode:"{path} aus {label}",help1:"Dieses Diagramm stellt Pfade dar, die von einem Status in einen anderen übernommen wurden.",help2:"Jeder Knoten in Form eines Feldes repräsentiert einen Status im Pfad.",help3:"Durch Tippen oder Klicken auf einen Knoten werden zusätzliche Optionen zum Ändern des Diagramms angezeigt:",focusHelp:"Zeigt Pfade an, die am Knoten ein- oder ausgehen.",expandHelp:"Zeigt zusätzliche Pfade an, die am Knoten ein- oder ausgehen.",collapseHelp:"Entfernt Pfade, die am Knoten ein- oder ausgehen."},sunburst:{audience:"Zielgruppe","audience2+":"Zielgruppen",category:"Kategorie","category2+":"Kategorien",metric:"Metrik","metric2+":"Metriken",primarymetric:"Primäre Metrik",secondarymetric:"Sekundäre Metrik","secondarymetric2+":"Sekundäre Metriken",secondarymetrichelp:"Klicken Sie auf die Metrik, um die Höhe zu ändern.","secondarymetrichelp2+":"Klicken Sie auf die Metriken, um die Höhe zu ändern.",emptyFirstMetric:"Die erste Metrik enthält keine Werte. Wählen Sie eine andere Metrik.",total:"Gesamt",zoomAction:"Doppelklicken, um zu vergrößern.",moreAction:"Klicken Sie hier für weitere Optionen.",zoomin:"Nahansicht",zoomout:"Weitansicht",hide:"Ausblenden",hideall:"Alles ausblenden",hideother:"Sonstige ausblenden",hidden:"{value} verborgenes Element","hidden2+":"{value} verborgene Elemente",topresults:"Top {value}",color:"Farbe",height:"Höhe",both:"Beide",none:"Keine",mapmetric:"{metric} anzeigen als:",percmetric:"{percent} der {metric}",mobilescroll:"&#x25BC – scrollen Sie, um Details anzuzeigen."},flower:{joy:"Freude",admiration:"Bewunderung",fear:"Angst",surprise:"Überraschung",sadness:"Traurigkeit",disgust:"Empörung",anger:"Wut",anticipation:"Vorausschätzung"},venn:{definedAudience:"Definierte Zielgruppe"},funnel:{step:"Schritt",segment:"Segment",conversion:"Konversion",fallout:"Trichteranalyse",average:"Durchschnitt"}},"labels");
a.cloudViz.localeDefinition("de-DE",{shortFormat:{hour:"%H",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%H",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%H Uhr %a %e",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%H Uhr %a %e"},fullFormat:{hour:"%H Uhr %a %e",day:"%A %e",week:"%A %e",month:"%B %Y",quarter:"%B %Y",year:"%Y",fallback:"%e %b, %Y",condensed:"%d/%m/%Y"}},"dateFormat");
a.cloudViz.localeDefinition("de-DE",{decimalSeparator:",",groupSeparator:" ",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"},currency:{symbol:"€",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"}},"numberFormat");
a.cloudViz.localeDefinition("de-DE",{singular:{second:"Sekunde",minute:"Minute",hour:"Stunde",day:"Tag",week:"Woche",month:"Monat",year:"Jahr"},plural:{second:"Sekunden",minute:"Minuten",hour:"Stunden",day:"Tagen",week:"Wochen",month:"Monate",year:"Jahre"},abbreviation:{second:"s",minute:"min",hour:"h",day:"d",week:"w",month:"mon",year:"y"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("en-US",{monthAbbreviations:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdayAbbreviations:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ampm:["AM","PM"]},"calendar");
a.cloudViz.localeDefinition("en-US",{core:{nodata:"The chart has no data",erroronrender:"Oops! There was an error and the chart could not be rendered.",other:"Other",normalized:"Normalized"},dvcore:{target:"Target",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} (in {time})",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"Size"},pathing:{entry:"Entry",exit:"Exit","entry2+":"Entries","exit2+":"Exits",path:"Path","path2+":"Paths",expand:"Expand",focus:"Focus",collapse:"Collapse",title:"Pathing Chart",nodeEntries:"{label} Entries",nodeExits:"{label} Exits",nodeToNode:"{source} \u2192 {target}",percOfNode:"{perc} of {label}",pathToNode:"{path} to {label}",pathFromNode:"{path} from {label}",help1:"This chart represents paths taken from one state to another.",help2:"Each node, shaped as a box, represents a state in the path.",help3:"Tapping or clicking a node will provide additional options to modify the chart:",focusHelp:"Shows paths coming into and going out of node",expandHelp:"Shows additional paths coming or going from the node",collapseHelp:"Removes paths coming or going from the node"},sunburst:{audience:"Audience","audience2+":"Audiences",category:"Category","category2+":"Categories",metric:"Metric","metric2+":"Metrics",primarymetric:"Primary Metric",secondarymetric:"Secondary Metric","secondarymetric2+":"Secondary Metrics",secondarymetrichelp:"Click metric to toggle height","secondarymetrichelp2+":"Click metrics to toggle height",emptyFirstMetric:"The first metric has no values. Please pick a different metric.",total:"Total",zoomAction:"Double-click to Zoom in.",moreAction:"Click for more options.",zoomin:"Zoom In",zoomout:"Zoom Out",hide:"Hide",hideall:"Hide All",hideother:"Hide Other",hidden:"{value} Hidden Item","hidden2+":"{value} Hidden Items",topresults:"top {value}",color:"Color",height:"Height",both:"Both",none:"None",mapmetric:"Show {metric} as:",percmetric:"{percent} of {metric}",mobilescroll:"&#x25BC scroll for details"},flower:{joy:"Joy",admiration:"Admiration",fear:"Fear",surprise:"Surprise",sadness:"Sadness",disgust:"Disgust",anger:"Anger",anticipation:"Anticipation"},venn:{definedAudience:"Defined Audience"},funnel:{step:"Step",segment:"Segment",conversion:"Conversion",fallout:"Fallout",average:"Average"}},"labels");
a.cloudViz.localeDefinition("en-US",{shortFormat:{hour:"%I %p",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%I %p",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%I %p %a %e",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%I %p %a %e"},fullFormat:{hour:"%I %p %a %e",day:"%A %e",week:"%A %e",month:"%B %Y",quarter:"%B %Y",year:"%Y",fallback:"%b %e, %Y",condensed:"%m/%d/%Y"}},"dateFormat");
a.cloudViz.localeDefinition("en-US",{decimalSeparator:".",groupSeparator:",",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number}{symbol}",negativePattern:"-{number}{symbol}"},currency:{symbol:"$",positivePattern:"{symbol}{number}",negativePattern:"-{symbol}{number}"}},"numberFormat");
a.cloudViz.localeDefinition("en-US",{singular:{second:"second",minute:"minute",hour:"hour",day:"day",week:"week",month:"month",year:"year"},plural:{second:"seconds",minute:"minutes",hour:"hours",day:"days",week:"weeks",month:"months",year:"years"},abbreviation:{second:"s",minute:"min",hour:"h",day:"d",week:"w",month:"mon",year:"y"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("es-ES",{monthAbbreviations:["en.","febr.","mzo.","abr.","my.","jun.","jul.","ag.","sept.","oct.","nov.","dic."],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],weekdayAbbreviations:["dom.","lun.","mart.","miérc.","juev.","vier.","sáb."],weekdays:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ampm:["a. m.","p. m."]},"calendar");
a.cloudViz.localeDefinition("es-ES",{core:{nodata:"El gráfico no contiene datos",erroronrender:"Se ha producido un error y no se ha podido procesar el gráfico.",other:"Otro",normalized:"Normalizado"},dvcore:{target:"Destino",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} (en {time})",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"Tamaño"},pathing:{entry:"Entrada",exit:"Salida","entry2+":"Entradas","exit2+":"Salidas",path:"Ruta","path2+":"Rutas",expand:"Expandir",focus:"Enfoque",collapse:"Contraer",title:"Gráfico de ruta",nodeEntries:"Entradas de {label}",nodeExits:"Salidas de {label}",nodeToNode:"{source} → {target}",percOfNode:"{perc} de {label}",pathToNode:"{path} a {label}",pathFromNode:"{path} de {label}",help1:"Este gráfico representa las rutas que se pueden tomar para ir de un estado a otro.",help2:"Los nodos, con forma de caja, representan un estado en la ruta.",help3:"Al hacer clic o tocar un nodo, se mostrarán opciones adicionales para modificar el gráfico:",focusHelp:"Muestra las rutas de ida al nodo o de vuelta",expandHelp:"Muestra rutas adicionales de ida al nodo o de vuelta",collapseHelp:"Suprime las rutas de ida al nodo o de vuelta"},sunburst:{audience:"Audiencia","audience2+":"Audiencias",category:"Categoría","category2+":"Categorías",metric:"Métrica","metric2+":"Métrica",primarymetric:"Métrica principal",secondarymetric:"Métrica secundaria","secondarymetric2+":"Métricas secundarias",secondarymetrichelp:"Haga clic en la métrica para alternar la altura","secondarymetrichelp2+":"Haga clic en las métricas para alternar la altura",emptyFirstMetric:"La primera métrica no contiene ningún valor. Elija otra métrica.",total:"Total",zoomAction:"Doble clic para aumentar.",moreAction:"Haga clic para ver más opciones.",zoomin:"Acercar",zoomout:"Alejar",hide:"Ocultar",hideall:"Ocultar todo",hideother:"Ocultar otro",hidden:"{value} elemento oculto","hidden2+":"{value} elementos ocultos",topresults:"{value} principales",color:"Color",height:"Altura",both:"Ambos",none:"Ninguno",mapmetric:"Mostrar {metric} como:",percmetric:"{percent} de {metric}",mobilescroll:"&#x25BC desplácese para más detalles"},flower:{joy:"Alegría",admiration:"Admiración",fear:"Miedo",surprise:"Sorpresa",sadness:"Tristeza",disgust:"Desagrado",anger:"Enfado",anticipation:"Expectación"},venn:{definedAudience:"Audiencia definida"},funnel:{step:"Paso",segment:"Segmento",conversion:"Conversión",fallout:"Visita en el orden previsto",average:"Promedio"}},"labels");
a.cloudViz.localeDefinition("es-ES",{shortFormat:{hour:"%H",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%H",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%Hh %a %e",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%Hh %a %e"},fullFormat:{hour:"%Hh %I %p",day:"%A %e",week:"%A %e",month:"%B %Y",quarter:"%B %Y",year:"%Y",fallback:"%e %b, %Y",condensed:"%d/%m/%Y"}},"dateFormat");
a.cloudViz.localeDefinition("es-ES",{decimalSeparator:",",groupSeparator:" ",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"},currency:{symbol:"€",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"}},"numberFormat");
a.cloudViz.localeDefinition("es-ES",{singular:{second:"segundo",minute:"minuto",hour:"hora",day:"día",week:"semana",month:"mes",year:"año"},plural:{second:"segundos",minute:"minutos",hour:"horas",day:"días",week:"semanas",month:"meses",year:"años"},abbreviation:{second:"s",minute:"min",hour:"h",day:"d",week:"w",month:"mon",year:"y"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("fr-FR",{monthAbbreviations:["Janv.","Févr.","Mars","Avr.","Mai","Juin","Juill.","Août","Sept.","Oct.","Nov.","Déc."],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],weekdayAbbreviations:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],ampm:["AM","PM"]},"calendar");
a.cloudViz.localeDefinition("fr-FR",{core:{nodata:"Le graphique ne contient aucune donnée",erroronrender:"Une erreur s’est produite, impossible de restituer le graphique.",other:"Autre",normalized:"Normalisé"},dvcore:{target:"Cible",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} (en {time})",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"Taille"},pathing:{entry:"Entrée",exit:"Sortie","entry2+":"Entrées de","exit2+":"Sorties de",path:"Chemin d’accès","path2+":"Chemins d’accès",expand:"Développer",focus:"Mise au point",collapse:"Réduire",title:"Graphique du cheminement",nodeEntries:"Entrées {label}",nodeExits:"Sorties {label}",nodeToNode:"{source} → {target}",percOfNode:"{perc} de {label}",pathToNode:"{path} à {label}",pathFromNode:"{path} de {label}",help1:"Ce graphique représente les chemins d’accès récupérés d’un état à un autre.",help2:"Chaque nœud, en forme de cadre, représente un état dans le chemin d’accès.",help3:"Le fait d’appuyer ou de cliquer sur un nœud fournit d’autres options pour modifier le graphique :",focusHelp:"Présente les chemins d’accès issus du nœud ou y parvenant",expandHelp:"Présente des chemins d’accès supplémentaires issus du nœud ou y parvenant.",collapseHelp:"Supprime les chemins d’accès supplémentaires issus du nœud ou y parvenant."},sunburst:{audience:"Audience","audience2+":"Audiences",category:"Catégorie","category2+":"Catégories",metric:"Mesure","metric2+":"Mesures",primarymetric:"Mesure principale",secondarymetric:"Mesure secondaire","secondarymetric2+":"Mesures secondaires",secondarymetrichelp:"Cliquer sur une mesure pour activer/désactiver la hauteur","secondarymetrichelp2+":"Cliquer sur des mesures pour activer/désactiver la hauteur",emptyFirstMetric:"La première mesure n’a aucune valeur. Sélectionnez une autre mesure.",total:"Total",zoomAction:"Double-cliquez pour effectuer un zoom avant.",moreAction:"Cliquez pour plus d’options.",zoomin:"Zoom avant",zoomout:"Zoom arrière",hide:"Masquer",hideall:"Tout masquer",hideother:"Masquer autres",hidden:"{value} élément masqué","hidden2+":"{value} éléments masqués",topresults:"{value} premiers",color:"Couleur",height:"Hauteur",both:"Les deux",none:"Néant",mapmetric:"Afficher {metric} comme :",percmetric:"{percent} des {metric}",mobilescroll:"Défilement &#x25BC pour plus de détails"},flower:{joy:"Joie",admiration:"Admiration",fear:"Peur",surprise:"Surprise",sadness:"Tristesse",disgust:"Dégoût",anger:"Colère",anticipation:"Anticipation"},venn:{definedAudience:"Audience définie"},funnel:{step:"Etape",segment:"Segment",conversion:"Conversion",fallout:"Abandons",average:"Moyenne"}},"labels");
a.cloudViz.localeDefinition("fr-FR",{shortFormat:{hour:"%H",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%H",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%H h %a %e",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%H h %a %e"},fullFormat:{hour:"%H h %a %e",day:"%A %e",week:"%A %e",month:"%B %Y",quarter:"%B %Y",year:"%Y",fallback:"%e %b %Y",condensed:"%d/%m/%Y"}},"dateFormat");
a.cloudViz.localeDefinition("fr-FR",{decimalSeparator:",",groupSeparator:" ",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"},currency:{symbol:"€",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"}},"numberFormat");
a.cloudViz.localeDefinition("fr-FR",{singular:{second:"seconde",minute:"minute",hour:"heure",day:"jour",week:"semaine",month:"mois",year:"année"},plural:{second:"secondes",minute:"minutes",hour:"heures",day:"jours",week:"semaines",month:"mois",year:"années"},abbreviation:{second:"s",minute:"min",hour:"h",day:"d",week:"w",month:"mon",year:"y"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("ja-JP",{monthAbbreviations:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],weekdayAbbreviations:["日","月","火","水","木","金","土"],weekdays:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],ampm:["午前","午後"]},"calendar");
a.cloudViz.localeDefinition("ja-JP",{core:{nodata:"データがありません",erroronrender:"エラーのためチャートを作成できません",other:"その他",normalized:"正規化済み"},dvcore:{target:"Target",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} ({time})",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"Size"},pathing:{entry:"入口",exit:"出口","entry2+":"入口","exit2+":"出口",path:"パス内訳","path2+":"パス内訳",expand:"展開する",focus:"再スタート",collapse:"減らす",title:"遷移チャート",nodeEntries:"{label} 入口",nodeExits:"{label} 出口",nodeToNode:"{source} → {target}",percOfNode:"{label}の{perc}",pathToNode:"{label}への{path}",pathFromNode:"{label}からの{path}",help1:"流れ（パス）を現すチャートです。",help2:"四角形のノードがデータ項目です。",help3:"ノードをクリック（タップ）すると、以下のようなチャート設定用アイコンが表示されます：",focusHelp:"画面をクリアし、該当ノードの前後のパスのみを表示",expandHelp:"該当ノードの前後のパスをさらに表示",collapseHelp:"展開したパスを元に戻す"},sunburst:{audience:"オーディエンス","audience2+":"オーディエンス",category:"カテゴリ","category2+":"カテゴリ",metric:"指標","metric2+":"指標",primarymetric:"一次指標",secondarymetric:"二次指標","secondarymetric2+":"二次指標",secondarymetrichelp:"指標をクリックすると高さが変わる","secondarymetrichelp2+":"指標をクリックすると高さが変わる",emptyFirstMetric:"最も内側の円となる最初の指標のデータが存在しないため、チャートを描画できません。",total:"合計",zoomAction:"ダブルクリックでズームイン",moreAction:"クリックで選択肢を表示",zoomin:"ズームイン",zoomout:"ズームアウト",hide:"選択項目のみ除外",hideall:"全体から同じ項目を除外",hideother:"この項目以外を除外",hidden:"{value} 個の項目を除外中","hidden2+":"{value} 個の項目を除外中",topresults:"上位{value}件",color:"色",height:"高さ",both:"両方",none:"なし",mapmetric:"{metric}の表示方法:",percmetric:"{metric}の{percent}",mobilescroll:"&#x25BC スクロールして詳細を表示"},flower:{joy:"喜び",admiration:"賞賛",fear:"恐怖",surprise:"驚き",sadness:"悲しみ",disgust:"不快",anger:"怒り",anticipation:"予測"},venn:{definedAudience:"定義されたオーディエンス"},funnel:{step:" 手順",segment:"セグメント",conversion:"コンバージョン",fallout:"フォールアウト",average:"平均"}},"labels");
a.cloudViz.localeDefinition("ja-JP",{shortFormat:{hour:"%p %I 時",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%p %I 時",day:"%e 日 (%a)",week:"%e 日 (%a)",month:"%b",quarter:"%b",year:"%Y",fallback:"%e 日 (%a)"},longFormat:{hour:"%e 日 (%a) %p %I 時",day:"%e 日 (%a)",week:"%e 日 (%a)",month:"%B",quarter:"%B",year:"%Y",fallback:"%e 日 (%a) %p %I 時"},fullFormat:{hour:"%e 日 (%a) %p %I 時",day:"%e 日 (%a)",week:"%e 日 (%a)",month:"%Y 年 %B",quarter:"%Y 年 %B",year:"%Y",fallback:"%Y 年 %b %e 日",condensed:"%Y/%m/%d"}},"dateFormat");
a.cloudViz.localeDefinition("ja-JP",{decimalSeparator:".",groupSeparator:",",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number}{symbol}",negativePattern:"-{number}{symbol}"},currency:{symbol:"¥",positivePattern:"{symbol}{number}",negativePattern:"-{symbol}{number}"}},"numberFormat");
a.cloudViz.localeDefinition("ja-JP",{singular:{second:"秒",minute:"分",hour:"時間",day:"日",week:"週間",month:"か月",year:"年"},plural:{second:"秒",minute:"分",hour:"時間",day:"日",week:"週間",month:"か月",year:"年"},abbreviation:{second:"秒",minute:"分",hour:"時間",day:"日",week:"週間",month:"か月",year:"年"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("ko-KR",{monthAbbreviations:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],weekdayAbbreviations:["일","월","화","수","목","금","토"],weekdays:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],ampm:["오전","오후"]},"calendar");
a.cloudViz.localeDefinition("ko-KR",{core:{nodata:"차트에 데이터가 없습니다.",erroronrender:"오류가 발생하여 차트를 렌더링할 수 없습니다.",other:"기타",normalized:"정규화됨"},dvcore:{target:"목표",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title}({time})",legendTime:"{value}{time}"},point:{xScale:"X",yScale:"Y",sizeScale:"크기"},pathing:{entry:"시작",exit:"종료","entry2+":"시작","exit2+":"종료",path:"경로","path2+":"경로",expand:"확장",focus:"포커스",collapse:"축소",title:"경로 지정 차트",nodeEntries:"{label} 시작",nodeExits:"{label} 종료",nodeToNode:"{source} → {target}",percOfNode:"{label}의 {perc}",pathToNode:"{label} 나가는 {path}",pathFromNode:"{label} 들어오는 {path}",help1:"이 차트는 하나의 주에서 다른 주로 가져온 경로를 나타냅니다.",help2:"상자 모양의 노드는 각각 경로 내의 주를 나타냅니다.",help3:"노드를 누르거나 클릭하면 차트를 수정할 추가 옵션을 설정할 수 있습니다.",focusHelp:"노드에 들어오거나 나가는 경로 표시",expandHelp:"노드에 들어오거나 나가는 추가 경로 표시",collapseHelp:"노드에 들어오거나 나가는 경로 제거"},sunburst:{audience:"대상","audience2+":"대상",category:"카테고리","category2+":"카테고리",metric:"지표","metric2+":"지표",primarymetric:"기본 지표",secondarymetric:"보조 지표","secondarymetric2+":"보조 지표",secondarymetrichelp:"지표를 클릭하여 높이 전환","secondarymetrichelp2+":"지표를 클릭하여 높이 전환",emptyFirstMetric:"첫 번째 지표에 값이 없습니다. 다른 지표를 선택하십시오.",total:"합계",zoomAction:"확대하려면 두 번 클릭하십시오.",moreAction:"추가 옵션을 보려면 클릭하십시오.",zoomin:"확대",zoomout:"축소",hide:"숨김",hideall:"모두 숨기기",hideother:"나머지 숨기기",hidden:"{value}개의 숨긴 항목","hidden2+":"{value}개의 숨긴 항목",topresults:"상위 {value}개",color:"색상",height:"높이",both:"둘 다",none:"없음",mapmetric:"{metric} 다음으로 표시:",percmetric:"{metric} 수의 {percent} ",mobilescroll:"&#x25BC 자세한 내용을 보려면 스크롤하십시오."},flower:{joy:"기쁨",admiration:"감탄",fear:"두려움",surprise:"놀람",sadness:"슬픔",disgust:"혐오",anger:"분노",anticipation:"기대"},venn:{definedAudience:"정의된 대상"},funnel:{step:"단계",segment:"세그먼트",conversion:"전환",fallout:"폴아웃",average:"평균"}},"labels");
a.cloudViz.localeDefinition("ko-KR",{shortFormat:{hour:"%p %I",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%p %I",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%e일 %a %p %I",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%e일 %a %p %I"},fullFormat:{hour:"%e일 %a %p %I",day:"%A %e",week:"%A %e",month:"%Y 년 %B",quarter:"%Y %B",year:"%Y",fallback:"%Y %b %e일",condensed:"%Y/%m/%d"}},"dateFormat");
a.cloudViz.localeDefinition("ko-KR",{decimalSeparator:".",groupSeparator:",",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number}{symbol}",negativePattern:"-{number}{symbol}"},currency:{symbol:"₩",positivePattern:"{symbol}{number}",negativePattern:"-{symbol}{number}"}},"numberFormat");
a.cloudViz.localeDefinition("ko-KR",{singular:{second:"초",minute:"분",hour:"시간",day:"일",week:"주",month:"월",year:"년"},plural:{second:"초",minute:"분",hour:"시간",day:"일",week:"주",month:"월",year:"년"},abbreviation:{second:"초",minute:"분",hour:"시간",day:"일",week:"주",month:"월",year:"년"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("pt-BR",{monthAbbreviations:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdayAbbreviations:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekdays:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],ampm:["AM","PM"]},"calendar");
a.cloudViz.localeDefinition("pt-BR",{core:{nodata:"O gráfico não possui dados",erroronrender:"Ops! Houve um erro e o gráfico não pôde ser processado.",other:"Outro",normalized:"Normalizado"},dvcore:{target:"Meta",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} (em {time})",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"Tamanho"},pathing:{entry:"Entrada",exit:"Sair","entry2+":"Entradas","exit2+":"Saídas",path:"Caminho","path2+":"Caminhos",expand:"Expandir",focus:"Foco",collapse:"Recolher",title:"Gráfico de criação de caminho",nodeEntries:"{label} Entradas",nodeExits:"{label} Saídas",nodeToNode:"{source} → {target}",percOfNode:"{perc} de {label}",pathToNode:"{path} para {label}",pathFromNode:"{path} de {label}",help1:"Esse gráfico representa os caminhos tomados de um estado para outro.",help2:"Cada nó, formado como uma caixa representa um estado no caminho.",help3:"Tocar ou clicar em um nó fornecerá opções adicionais para modificar o gráfico:",focusHelp:"Mostra os caminhos entrando ou saindo do nó",expandHelp:"Mostra caminhos adicionais entrando ou saindo do nó",collapseHelp:"Remove os caminhos saindo ou entrando no nó"},sunburst:{audience:"Público-alvo","audience2+":"Públicos-alvos",category:"Categoria","category2+":"Categorias",metric:"Métrica","metric2+":"Métricas",primarymetric:"Métrica principal",secondarymetric:"Métrica secundária","secondarymetric2+":"Métricas secundárias",secondarymetrichelp:"Clique na métrica para alternar a altura","secondarymetrichelp2+":"Clique nas métricas para alternar a altura",emptyFirstMetric:"A primeira métrica não tem valores. Esolha uma métrica diferente.",total:"Total",zoomAction:"Clique duas vezes para aumentar o zoom.",moreAction:"Clique para ver mais opções.",zoomin:"Ampliar",zoomout:"Reduzir",hide:"Ocultar",hideall:"Ocultar tudo",hideother:"Ocultar outro",hidden:"{value} Item oculto","hidden2+":"{value} itens ocultos",topresults:"principais {value}",color:"Cor",height:"Altura",both:"Ambos",none:"Nenhum",mapmetric:"Mostrar {metric} como:",percmetric:"{percent} de {metric}",mobilescroll:"&#x25BC role para ver os detalhes"},flower:{joy:"Alegria",admiration:"Admiração",fear:"Medo",surprise:"Problemas",sadness:"Tristeza",disgust:"Repulsa",anger:"Raiva",anticipation:"Antecipação"},venn:{definedAudience:"Público-alvo definido"},funnel:{step:"Etapa",segment:"Segmento",conversion:"Conversão",fallout:"Fallout",average:"Média"}},"labels");
a.cloudViz.localeDefinition("pt-BR",{shortFormat:{hour:"%H",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%H",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%Hh %a %e",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%Hh %a %e"},fullFormat:{hour:"%Hh %a %e",day:"%A %e",week:"%A %e",month:"%B %Y",quarter:"%B %Y",year:"%Y",fallback:"%e %b, %Y",condensed:"%Y/%m/%d"}},"dateFormat");
a.cloudViz.localeDefinition("pt-BR",{decimalSeparator:",",groupSeparator:" ",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"},currency:{symbol:"R$",positivePattern:"{number} {symbol}",negativePattern:"-{number} {symbol}"}},"numberFormat");
a.cloudViz.localeDefinition("pt-BR",{singular:{second:"segundo",minute:"minuto",hour:"hora",day:"día",week:"semana",month:"mês",year:"ano"},plural:{second:"segundos",minute:"minutos",hour:"horas",day:"dias",week:"semanas",month:"meses",year:"anos"},abbreviation:{second:"s",minute:"min",hour:"h",day:"d",week:"w",month:"mon",year:"y"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("zh-CN",{monthAbbreviations:["1 月","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],months:["1 月","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],weekdayAbbreviations:["周日","周一","周二","周三","周四","周五","周六"],weekdays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ampm:["上午","下午"]},"calendar");
a.cloudViz.localeDefinition("zh-CN",{core:{nodata:"图表无数据",erroronrender:"抱歉！出现错误，无法呈现图表。",other:"其他",normalized:"已标准化"},dvcore:{target:"目标",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title}（{time}）",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"大小"},pathing:{entry:"登入",exit:"退出","entry2+":"登入","exit2+":"退出",path:"路径","path2+":"路径",expand:"展开",focus:"聚焦",collapse:"折叠",title:"路径图表",nodeEntries:"{label} 登入",nodeExits:"{label} 退出",nodeToNode:"{source} → {target}",percOfNode:"{perc} 的 {label}",pathToNode:"前往 {label} 的 {path}",pathFromNode:"来自 {label} 的 {path}",help1:"此图表代表从一种状态转变为另一种状态的路径。",help2:"每个长方形节点代表路径中的一种状态。",help3:"轻按或单击节点可以提供修改图表的其他选项：",focusHelp:"显示来往于节点的路径",expandHelp:"显示来往于节点的其他路径",collapseHelp:"删除来往于节点的路径"},sunburst:{audience:"受众","audience2+":"受众",category:"类别","category2+":"类别",metric:"量度","metric2+":"量度",primarymetric:"主要量度",secondarymetric:"次要量度","secondarymetric2+":"次要量度",secondarymetrichelp:"单击量度可切换高度","secondarymetrichelp2+":"单击量度可切换高度",emptyFirstMetric:"第一个量度没有值。请选择其他量度。",total:"合计",zoomAction:"双击可放大。",moreAction:"单击可获取更多选项。",zoomin:"放大",zoomout:"缩小",hide:"隐藏",hideall:"全部隐藏",hideother:"隐藏其他",hidden:"{value} 个隐藏的条目","hidden2+":"{value} 个隐藏的条目",topresults:"排名前 {value}",color:"彩色",height:"高度",both:"两者",none:"无",mapmetric:"{metric} 显示方式:",percmetric:"{percent} 的 {metric}",mobilescroll:"&#x25BC 展开详细信息"},flower:{joy:"欢快",admiration:"羡慕",fear:"害怕",surprise:"惊讶",sadness:"伤心",disgust:"厌恶",anger:"生气",anticipation:"期待"},venn:{definedAudience:"定义的受众"},funnel:{step:"步骤",segment:"区段",conversion:"转化",fallout:"流失",average:"平均"}},"labels");
a.cloudViz.localeDefinition("zh-CN",{shortFormat:{hour:"%p %I",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%p %I",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%e 日 %a %p %I",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%e 日 %a %p %I"},fullFormat:{hour:"%e 日 %a %p %I",day:"%A %e",week:"%A %e",month:"%Y 年%B",quarter:"%Y %B",year:"%Y",fallback:"%Y %b %e 日",condensed:"%Y/%m/%d"}},"dateFormat");
a.cloudViz.localeDefinition("zh-CN",{decimalSeparator:".",groupSeparator:",",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number}{symbol}",negativePattern:"-{number}{symbol}"},currency:{symbol:"¥",positivePattern:"{symbol}{number}",negativePattern:"-{symbol}{number}"}},"numberFormat");
a.cloudViz.localeDefinition("zh-CN",{singular:{second:"秒",minute:"分钟",hour:"小时",day:"天",week:"周",month:"月",year:"年"},plural:{second:"秒",minute:"分钟",hour:"小时",day:"天",week:"周",month:"月",year:"年"},abbreviation:{second:"秒",minute:"分钟",hour:"小时",day:"天",week:"周",month:"月",year:"年"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("zh-TW",{monthAbbreviations:["1 月","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],months:["1 月","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],weekdayAbbreviations:["週日","週一","週二","週三","週四","週五","週六"],weekdays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ampm:["上午","下午"]},"calendar");
a.cloudViz.localeDefinition("zh-TW",{core:{nodata:"此圖表沒有任何資料",erroronrender:"糟糕！發生錯誤，無法產生圖表。",other:"其他",normalized:"已標準化"},dvcore:{target:"目標",yAxisTimeNoTitle:"{time}",yAxisTimeWithTitle:"{title} (以{time}數計)",legendTime:"{value} {time}"},point:{xScale:"X",yScale:"Y",sizeScale:"大小"},pathing:{entry:"登入點",exit:"退出點","entry2+":"登入點","exit2+":"退出點",path:"路徑","path2+":"路徑",expand:"展開",focus:"焦點",collapse:"摺疊",title:"路徑圖表",nodeEntries:"{label} 登入點",nodeExits:"{label} 退出點",nodeToNode:"{source} → {target}",percOfNode:"{perc} 的 {label}",pathToNode:"連至 {label} 的 {path}",pathFromNode:"來自 {label} 的 {path}",help1:"此圖表代表從一狀態變為另一狀態的路徑。",help2:"每個設計成方塊的節點都代表路徑中的一種狀態。",help3:"點選或按一下節點即可取得用於修改圖表的其他選項:",focusHelp:"顯示進出節點的路徑",expandHelp:"顯示前往或遠離節點的其他路徑",collapseHelp:"移除前往或遠離節點的路徑"},sunburst:{audience:"讀者","audience2+":"讀者",category:"類別","category2+":"類別",metric:"量度","metric2+":"量度",primarymetric:"主要量度",secondarymetric:"次要量度","secondarymetric2+":"次要量度",secondarymetrichelp:"按一下量度以切換高度","secondarymetrichelp2+":"按一下量度以切換高度",emptyFirstMetric:"第一個量度沒有值。請選擇其他量度。",total:"總計",zoomAction:"連按兩下來放大顯示。",moreAction:"按一下存取更多選項。",zoomin:"放大",zoomout:"縮小",hide:"隱藏",hideall:"全部隱藏",hideother:"隱藏其他",hidden:"{value} 個隱藏項目","hidden2+":"{value} 個隱藏項目",topresults:"前 {value} 個項目",color:"色彩",height:"高度",both:"兩者",none:"無",mapmetric:"將 {metric} 顯示為:",percmetric:"{percent} 的 {metric}",mobilescroll:"&#x25BC 捲動以瞭解詳細資料"},flower:{joy:"歡樂",admiration:"欽佩",fear:"恐懼",surprise:"驚喜",sadness:"傷心",disgust:"噁心",anger:"憤怒",anticipation:"期望"},venn:{definedAudience:"特定讀者"},funnel:{step:"步驟",segment:"區段",conversion:"轉換",fallout:"流失",average:"平均"}},"labels");
a.cloudViz.localeDefinition("zh-TW",{shortFormat:{hour:"%p %I",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"%Y",fallback:"%e"},mediumFormat:{hour:"%p %I",day:"%a %e",week:"%a %e",month:"%b",quarter:"%b",year:"%Y",fallback:"%a %e"},longFormat:{hour:"%e 日 %a %p %I",day:"%A %e",week:"%A %e",month:"%B",quarter:"%B",year:"%Y",fallback:"%e 日 %a %p %I"},fullFormat:{hour:"%e 日 %a %p %I",day:"%A %e",week:"%A %e",month:"%Y 年 %B",quarter:"%Y %B",year:"%Y",fallback:"%Y %b %e 日",condensed:"%Y/%m/%d"}},"dateFormat");
a.cloudViz.localeDefinition("zh-TW",{decimalSeparator:".",groupSeparator:",",negativePattern:"-{number}",percent:{symbol:"%",positivePattern:"{number}{symbol}",negativePattern:"-{number}{symbol}"},currency:{symbol:"NT$",positivePattern:"{symbol}{number}",negativePattern:"-{symbol}{number}"}},"numberFormat");
a.cloudViz.localeDefinition("zh-TW",{singular:{second:"秒",minute:"分鐘",hour:"小時",day:"天",week:"週",month:"月",year:"年"},plural:{second:"秒",minute:"分鐘",hour:"小時",day:"天",week:"週",month:"月",year:"年"},abbreviation:{second:"秒",minute:"分鐘",hour:"小時",day:"天",week:"週",month:"月",year:"年"}},"time")
}(this));
(function(a){a.cloudViz.localeDefinition("zz-ZZ",{monthAbbreviations:["[g] 승_Jan_文","[q] 승_Feb_文","[r] 승_Mar_文","[n] 승_Apr_文","[p] 승_May_文","[k] 승_Jun_文","[l] 승_Jul_文","[i] 승_Aug_文","[j] 승_Sep_文","[h] 승_Oct_文","[o] 승_Nov_文","[m] 승_Dec_文"],months:["[1] 승_January_文","[2] 승_February_文","[3] 승_March_文","[x] 승_April_文","[y] 승_May_文","[z] 승_June_文","[0] 승_July_文","[s] 승_August_文","[t] 승_September_文","[u] 승_October_文","[v] 승_November_文","[w] 승_December_文"],weekdayAbbreviations:["[+] 승_Sun_文","[4] 승_Mon_文","[5] 승_Tue_文","[6] 승_Wed_文","[7] 승_Thu_文","[8] 승_Fri_文","[9] 승_Sat_文"],weekdays:["[BB] 승_Sunday_文","[BA] 승_Monday_文","[/] 승_Tuesday_文","[BC] 승_Wednesday_文","[BD] 승_Thursday_文","[BE] 승_Friday_文","[BF] 승_Saturday_文"],ampm:["[e] 승_AM_文","[f] 승_PM_文"]},"calendar");
a.cloudViz.localeDefinition("zz-ZZ",{core:{nodata:"[BH] 승_The chart has no data_文",erroronrender:"[BG] 승_Oops! There was an error and the chart could not be rendered._文",other:"[BJ] 승_Other_文",normalized:"[BI] 승_Normalized_文"},dvcore:{target:"[BL] 승_Target_文",yAxisTimeNoTitle:"[BK] 승_{time}_文",yAxisTimeWithTitle:"[BN] 승_{title} (in {time})_文",legendTime:"[BM] 승_{value} {time}_文"},point:{xScale:"[Bp] 승_X_文",yScale:"[Br] 승_Y_文",sizeScale:"[Bq] 승_Size_文"},pathing:{entry:"[Be] 승_Entry_文",exit:"[Bg] 승_Exit_文","entry2+":"[Bn] 승_Entries_文","exit2+":"[Bb] 승_Exits_文",path:"[BZ] 승_Path_文","path2+":"[Bf] 승_Paths_文",expand:"[BX] 승_Expand_文",focus:"[BW] 승_Focus_文",collapse:"[Bj] 승_Collapse_文",title:"[Bc] 승_Pathing Chart_文",nodeEntries:"[Cz] 승_{label} Entries_文",nodeExits:"[C0] 승_{label} Exits_文",nodeToNode:"[Cy] 승_{source} → {target}_文",percOfNode:"[Ba] 승_{perc} of {label}_文",pathToNode:"[Bo] 승_{path} to {label}_文",pathFromNode:"[Bd] 승_{path} from {label}_文",help1:"[BY] 승_This chart represents paths taken from one state to another._文",help2:"[Bh] 승_Each node, shaped as a box, represents a state in the path._文",help3:"[Bk] 승_Tapping or clicking a node will provide additional options to modify the chart:_文",focusHelp:"[Bm] 승_Shows paths coming into and going out of node_文",expandHelp:"[Bi] 승_Shows additional paths coming or going from the node_文",collapseHelp:"[Bl] 승_Removes paths coming or going from the node_文"},sunburst:{audience:"[Ci] 승_Audience_文","audience2+":"[Ce] 승_Audiences_文",category:"[Ch] 승_Category_文","category2+":"[Cf] 승_Categories_文",metric:"[Cd] 승_Metric_文","metric2+":"[Cg] 승_Metrics_文",primarymetric:"[Cj] 승_Primary Metric_文",secondarymetric:"[Cl] 승_Secondary Metric_文","secondarymetric2+":"[Ck] 승_Secondary Metrics_文",secondarymetrichelp:"[Cm] 승_Click metric to toggle height_文","secondarymetrichelp2+":"[Cn] 승_Click metrics to toggle height_文",emptyFirstMetric:"[B2] 승_The first metric has no values. Please pick a different metric._文",total:"[B7] 승_Total_文",zoomAction:"[By] 승_Double-click to Zoom in._文",moreAction:"[B5] 승_Click for more options._文",zoomin:"[Bz] 승_Zoom In_文",zoomout:"[Bs] 승_Zoom Out_文",hide:"[Bt] 승_Hide_文",hideall:"[Bw] 승_Hide All_文",hideother:"[Bu] 승_Hide Other_文",hidden:"[B4] 승_{value} Hidden Item_文","hidden2+":"[B0] 승_{value} Hidden Items_文",topresults:"[B8] 승_top {value}_文",color:"[Bx] 승_Color_文",height:"[Bv] 승_Height_文",both:"[B6] 승_Both_文",none:"[B3] 승_None_文",mapmetric:"[B9] 승_Show {metric} as:_文",percmetric:"[B1] 승_{percent} of {metric}_文",mobilescroll:"[Co] 승_&#x25BC scroll for details_文"},flower:{joy:"[BU] 승_Joy_文",admiration:"[BT] 승_Admiration_文",fear:"[BQ] 승_Fear_文",surprise:"[BR] 승_Surprise_文",sadness:"[BO] 승_Sadness_文",disgust:"[BP] 승_Disgust_文",anger:"[BV] 승_Anger_文",anticipation:"[BS] 승_Anticipation_文"},venn:{definedAudience:"[B+] 승_Defined Audience_文"},funnel:{step:"[C3] 승_Step_文",segment:"[C4] 승_Segment_文",conversion:"[C1] 승_Conversion_文",fallout:"[C5] 승_Fallout_文",average:"[C2] 승_Average_文"}},"labels");
a.cloudViz.localeDefinition("zz-ZZ",{shortFormat:{hour:"[Z] 승_%I %p_文",day:"%e",week:"%e",month:"%b",quarter:"%b",year:"[d] 승_%Y_文",fallback:"%e"},mediumFormat:{hour:"[S] 승_%I %p_文",day:"[Q] 승_%a %e_文",week:"[T] 승_%a %e_文",month:"%b",quarter:"%b",year:"[U] 승_%Y_文",fallback:"[V] 승_%a %e_文"},longFormat:{hour:"[P] 승_%I %p %a %e_文",day:"[M] 승_%A %e_文",week:"[O] 승_%A %e_文",month:"[L] 승_%B_文",quarter:"[K] 승_%B_文",year:"[J] 승_%Y_文",fallback:"[N] 승_%I %p %a %e_文"},fullFormat:{hour:"[D] 승_%I %p %a %e_文",day:"[C] 승_%A %e_文",week:"[B] 승_%A %e_文",month:"[G] 승_%B %Y_文",quarter:"[E] 승_%B %Y_文",year:"[I] 승_%Y_文",fallback:"[F] 승_%b %e, %Y_文",condensed:"[H] 승_%m/%d/%Y_文"}},"dateFormat");
a.cloudViz.localeDefinition("zz-ZZ",{decimalSeparator:"[CC] 승_._文",groupSeparator:"[CD] 승_,_文",negativePattern:"[CE] 승_-{number}_文",percent:{symbol:"[CF] 승_%_文",positivePattern:"[CG] 승_{number}{symbol}_文",negativePattern:"[CH] 승_-{number}{symbol}_文"},currency:{symbol:"[B/] 승_$_文",positivePattern:"[CA] 승_{symbol}{number}_文",negativePattern:"[CB] 승_-{symbol}{number}_文"}},"numberFormat");
a.cloudViz.localeDefinition("zz-ZZ",{singular:{second:"[CX] 승_second_文",minute:"[CY] 승_minute_文",hour:"[CZ] 승_hour_文",day:"[CV] 승_day_文",week:"[Ca] 승_week_文",month:"[Cb] 승_month_文",year:"[CW] 승_year_文"},plural:{second:"[CS] 승_seconds_文",minute:"[CP] 승_minutes_文",hour:"[Cc] 승_hours_文",day:"[CR] 승_days_文",week:"[CQ] 승_weeks_文",month:"[CT] 승_months_文",year:"[CU] 승_years_文"},abbreviation:{second:"[CJ] 승_s_文",minute:"[CO] 승_min_文",hour:"[CK] 승_h_文",day:"[CI] 승_d_文",week:"[CL] 승_w_文",month:"[CM] 승_mon_文",year:"[CN] 승_y_文"}},"time")
}(this));