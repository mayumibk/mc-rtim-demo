
YAHOO.omniture.AlertSavePanelWidget=function(dom_id)
{this.init(dom_id);};YAHOO.lang.extend(YAHOO.omniture.AlertSavePanelWidget,YAHOO.omniture.PartialHTMLWidget,{init:function(dom_id)
{YAHOO.omniture.AlertSavePanelWidget.superclass.init.call(this,dom_id);this._save_panel_model=null;},setSavePanelModel:function(save_panel_model)
{this._save_panel_model=save_panel_model;},setSaveCallback:function(obj,func)
{this._saveCallback=function(form){obj[func](form)};},setCloseCallback:function(obj,func)
{this._closeCallBack=obj[func];},render:function()
{var render_result=YAHOO.omniture.AlertSavePanelWidget.superclass.render.call(this)
    YAHOO.util.Event.onAvailable(this.getDomId(),this._attachListeners,this,true);return render_result;},_validateFormInformation:function()
{var alert_form=document.getElementById("edit_alert_form");if((alert_form.alert_name.value=='')){alert(Omniture.l10n.gettext("You must enter an alert name."));return false;}
else if(!alert_form.wireless_enabled.checked&&!alert_form.email_enabled.checked){alert(Omniture.l10n.gettext("You must select at least one delivery option in order\nto save this alert and to receive appropriate\nnotification when this alert is triggered."));return false;}
else if((alert_form.email_enabled.checked)&&(alert_form.alert_email.value=='')){alert(Omniture.l10n.gettext("Please specify your email address."));return false;}
else if((alert_form.wireless_enabled.checked)&&(alert_form.alert_mobile.value=='')){alert(Omniture.l10n.gettext("Please specify your mobile device information."));return false;}
else if(!$('forecast_flag')&&((alert_form.alert_target_value.value=='')||(isNaN(alert_form.alert_target_value.value)))){alert(Omniture.l10n.gettext("You must enter a number for your rule."));return false;}
else return true;},save:function(e)
{if(this._validateFormInformation()){if(this._saveCallback){this._saveCallback("edit_alert_form");if(page_controller){page_controller.trackEvents("event8","Alerts Created");}
    return true;}}
    return false;},close:function()
{if(this._closeCallBack){this._closeCallBack();}
    YAHOO.omniture.AlertSavePanelWidget.superclass.close.call(this);},chooseSpecific:function()
{open_item_selector(YAHOO.util.Dom.get('edit_alert_form'));},changeSpecific:function()
{var element=YAHOO.util.Dom.get('alert_select_type');if(element.selectedIndex==2){YAHOO.util.Dom.setStyle('specific_alert_item','display','block');}else{YAHOO.util.Dom.setStyle('specific_alert_item','display','none');}},_attachListeners:function()
{var delegate=this.getDelegate();YAHOO.util.Event.onAvailable('alert_select_type',this.changeSpecific,this,true);YAHOO.util.Event.removeListener("alert_save","click",delegate.save);YAHOO.util.Event.addListener("alert_save","click",delegate.save,delegate,true);YAHOO.util.Event.removeListener("alert_cancel","click",delegate.close);YAHOO.util.Event.addListener("alert_cancel","click",delegate.close,delegate,true);YAHOO.util.Event.removeListener("specific_alert","click",this.chooseSpecific);YAHOO.util.Event.addListener("specific_alert","click",this.chooseSpecific,this,true);YAHOO.util.Event.removeListener('alert_select_type','click',this.changeSpecific)
    YAHOO.util.Event.addListener('alert_select_type','click',this.changeSpecific,this,true)
    YAHOO.util.Event.addListener('alert_select_type','change',this.changeSpecific,this,true)}});YAHOO.omniture.CopyGraphPanelWidget=function(dom_id)
{this.init(dom_id);};YAHOO.lang.extend(YAHOO.omniture.CopyGraphPanelWidget,YAHOO.omniture.Widget,{init:function(dom_id)
{YAHOO.omniture.CopyGraphPanelWidget.superclass.init.call(this,dom_id);this._save_panel_model=null;this.href='';},setSavePanelModel:function(save_panel_model)
{this._save_panel_model=save_panel_model;},setSaveCallback:function(obj,func)
{this._saveCallback=function(form){obj[func](form)};},setCloseCallback:function(obj,func)
{this._closeCallBack=obj[func];},render:function()
{if(this.href){this.win=window.open(this.href,'viewGif','titlebar=no,menubar=no,toolbar=no,scrollbars=yes,resizable=yes,width=900,height=470,left=0,top=0,dependent=yes');this.win.focus();}
    return true;},isShowing:function(){return false;},graphArrived:function(report_model){this.href=Omniture.URL.fs('Report.CopyGraph',{},Omniture.Config.SC_URL+'/reports/index.html')+'&img_url='+encodeURIComponent(report_model._response_obj.copy_graph_image_url);}});OM.BookmarkSavePanelWidget=function(dom_id){this.init(dom_id);};YAHOO.lang.extend(OM.BookmarkSavePanelWidget,OM.JsonPartialHTMLWidget,{init:function init(dom_id){OM.BookmarkSavePanelWidget.superclass.init.call(this,dom_id);var bid=OM.util.getParam(location.href,'bookmark');this.URL=OM.URL.suite('Bookmark.Add',(bid?{bookmark_id:bid}:{}));this.setURL(this.URL);},setSaveCallback:function setSaveCallback(scope,func){this._saveCallback=func.bind(scope);},render:function render(){var render_result=OM.BookmarkSavePanelWidget.superclass.render.call(this);if(render_result){this.attachListeners();}
    return render_result;},save:function save(e){if(!this._saveCallback){return false;}
    var d=this.getDelegate(),form_obj=OM.util.formToObject(document.edit_bookmark_form),bookmark_id=null,bookmark=null,shared_folder=null,folder=null;if(!form_obj.name){d.setError('b_name','A valid bookmark name is required to save a bookmark.'.toLocaleString());return false;}
    if(form_obj.share=='on'){if(form_obj.shared_folder=='--'){d.setError('b_folder','Please select a valid folder to save a bookmark.'.toLocaleString());return false;}else if(form_obj.shared_folder=='-1'){if(form_obj.new_shared_folder){shared_folder={value:null,name:form_obj.new_shared_folder};}
    else{d.setError('b_folder','Please select a valid folder to save a bookmark.'.toLocaleString());return false;}}else{shared_folder={value:form_obj.shared_folder,name:null};}}
    if(form_obj.folder=='--'){d.setError('b_folder','Please select a valid folder to save a bookmark.'.toLocaleString());return false;}else if(form_obj.folder=='-1'){if(form_obj.new_folder){folder={value:null,name:form_obj.new_folder};}
    else{d.setError('b_folder','Please select a valid folder to save a bookmark.'.toLocaleString());return false;}}else{var m_folder=$(OM.Config.OM_MENU_ID_BOOKMARK_FOLDER+'_'+form_obj.folder+'_header'),elements,i;if(m_folder){elements=m_folder.childElements();for(i=elements.length-1;i>=0&&!bookmark_id;--i){if(elements[i].innerHTML.unescapeHTML()==form_obj.name){bookmark_id=elements[i].id;}}
        if(bookmark_id&&!confirm("A bookmark of the same name already exists in this folder. Do you want to overwrite that bookmark with this one?".toLocaleString())){return false;}
        folder={value:form_obj.folder,name:null};}else{var bm_folders=$('bm_folder_sel'),folder_name=bm_folders[bm_folders.selectedIndex].label;folder={value:form_obj.folder,name:folder_name};}}
    bookmark={value:bookmark_id,name:form_obj.name};this._saveCallback(folder,bookmark,form_obj.share,shared_folder,form_obj.is_default,form_obj.d_access);this._json_handler.clearResponse();if(page_controller){page_controller.trackEvents('event15','Bookmark Added');}
    return true;},attachListeners:function attachListeners(){var E=YAHOO.util.Event;var D=YAHOO.util.Dom;var delegate=this.getDelegate();var add_el=D.get("bm_add");if(add_el){E.removeListener(add_el,"click",delegate.save);E.addListener(add_el,"click",delegate.save,delegate,true);}
    var cancel_el=D.get("bm_cancel");if(cancel_el){E.removeListener(cancel_el,"click",delegate.close);E.addListener(cancel_el,"click",delegate.close,delegate,true);}
    $("bm_folder_sel").observe('change',this._handleFolderSelect);$("bookmark_share").observe('click',this._handleFolderSelect);$("bm_share_folder_sel").observe('change',this._handleFolderSelect);this._handleFolderSelect();},_handleFolderSelect:function()
{if($F('bm_folder_sel')==-1){$('bm_new_folder_container').show();}else{$('bm_new_folder_container').hide();}
    if($('bookmark_share').checked){$('bookmark_share_addto').show();if($F('bm_share_folder_sel')==-1){$('bm_new_shared_folder_container').show();}else{$('bm_new_shared_folder_container').hide();}}else{$('bookmark_share_addto').hide();$('bm_new_shared_folder_container').hide();}}});Omniture.EmailPartialHTMLWidget=function(dom_id)
{this.init(dom_id);};YAHOO.lang.extend(Omniture.EmailPartialHTMLWidget,Omniture.JsonPartialHTMLWidget,{init:function(dom_id)
{Omniture.EmailPartialHTMLWidget.superclass.init.call(this,dom_id);this._sched_model=new Omniture.EmailPartialHTMLWidget.SchedModel();this.URL=Omniture.URL.suite("ScheduledReport.Add",{"dashboard_id":this._sched_model.getDashboardId(),"book_id":this._sched_model.getPublishingBookId()});this.setURL(this.URL);this._sched_report_w=null;},setReportStateModel:function(model)
{this._sched_model.setState(model);},setDateRangeModel:function(model)
{this._date_range_model=model;},render:function()
{var render_result=Omniture.EmailPartialHTMLWidget.superclass.render.call(this);this.attachListeners();if(render_result){this._sched_report_w=this.getControlContainer().widgets.schedule_report_container;this._sched_report_w.setReportModel(this._sched_model);this._sched_report_w.setDateRangeModel(this._date_range_model);this._sched_report_w.assignDelegate(this.getDelegate());}
    return render_result;},save:function(e)
{if(this._sched_report_w){this._sched_report_w.save();return true;}
    return false;},attachListeners:function()
{Omniture.EmailPartialHTMLWidget.superclass.attachListeners.call(this);var Event=YAHOO.util.Event;var delegate=this.getDelegate();var em_send_elt=document.getElementById("em_send");if(em_send_elt){Event.removeListener(em_send_elt,"click",delegate.save);Event.addListener(em_send_elt,"click",delegate.save,delegate,true);}
    var em_cancel_elt=document.getElementById("em_cancel");if(em_cancel_elt){Event.removeListener(em_cancel_elt,"click",delegate.close);Event.addListener(em_cancel_elt,"click",delegate.close,delegate,true);}}});Omniture.EmailPartialHTMLWidget.SchedModel=function(){};Omniture.EmailPartialHTMLWidget.SchedModel.prototype={setState:function(report_state)
{this._state=report_state;},getOID:function()
{return Omniture.Config.real_oid;},getRSID:function()
{return this._state.rsid;},getReportName:function()
{return Omniture.Config.reportname;},getDashboardId:function(){return Omniture.util.getParams(window.location.href).params.dashboard||"";},getBookmarkId:function(){return Omniture.util.getParams(window.location.href).params.bookmark_id||"";},getPublishingBookId:function(){var book_id="";if(Omniture.Config.book){book_id=Omniture.Config.book.id||"";}
    return book_id;}};Omniture.CustomReportPartialHTMLWidget=function(dom_id)
{this.init(dom_id);};YAHOO.lang.extend(Omniture.CustomReportPartialHTMLWidget,Omniture.JsonPartialHTMLWidget,{init:function(dom_id)
{Omniture.CustomReportPartialHTMLWidget.superclass.init.call(this,dom_id);this.URL=Omniture.URL.suite('CustomReport.Add');this.setURL(this.URL);},render:function()
{var render_result=Omniture.CustomReportPartialHTMLWidget.superclass.render.call(this);this.attachListeners();return render_result;},setNavigationModel:function(nav_model)
{this._nav_model=nav_model;},save:function(e)
{if(this._nav_model){var name=this._getNameInput().value;if(name.trim()===""){alert(Omniture.l10n.gettext("Please enter a valid name for the report."));return false;}
    var id=this._nav_model.getCustomReportIdByName(name);if(id&&!confirm(Omniture.l10n.gettext(Omniture.l10n.text.confirm_cust_report_exists))){return false;}
    this._nav_model.saveCustomReport({id:id,name:name});if(page_controller){page_controller.trackEvents("event13","Custom Reports");}
    return true;}
    return false;},attachListeners:function()
{Omniture.CustomReportPartialHTMLWidget.superclass.attachListeners.call(this);var D=YAHOO.util.Dom;var E=YAHOO.util.Event;var delegate=this.getDelegate();var s_el=D.get("cr_save");if(s_el){E.removeListener(s_el,"click",delegate.save);E.addListener(s_el,"click",delegate.save,delegate,true);}
    var c_el=D.get("cr_cancel");if(c_el){E.removeListener(c_el,"click",delegate.close);E.addListener(c_el,"click",delegate.close,delegate,true);}},_getNameInput:function()
{return YAHOO.util.Dom.get("cr_name");}});YAHOO.omniture.MessagesModel=function()
{this.init();};YAHOO.lang.extend(YAHOO.omniture.MessagesModel,YAHOO.omniture.Model,{_message_list:{},_message_id_counter:1,init:function(){YAHOO.omniture.MessagesModel.superclass.init.call(this);this._response_obj=null;this._waiting=false;},addMessage:function(message,type,callback,id)
{if(id==null){id=this._message_id_counter++;}
    if(this._message_list[id]){return null;}
    this._message_list[id]={};this._message_list[id]['msg']=message;this._message_list[id]['type']=type;this._message_list[id]['callback']=callback;this._message_list[id]['callback_called']=false;this.notify();return id;},removeMessage:function(id)
{delete this._message_list[id];this.notify();return true;},getMessages:function()
{return this._message_list;},clearMessages:function(exception)
{if(exception){for(message_id in this._message_list){if(this._message_list[message_id].type!=exception){delete this._message_list[message_id];}}
    this.notify();}else{this._message_list={};}}});YAHOO.omniture.AlertModel=function()
{this.init();}
YAHOO.lang.extend(YAHOO.omniture.AlertModel,YAHOO.omniture.NavigationModel,{init:function()
{YAHOO.omniture.AlertModel.superclass.init.call(this);this._new_count=1;},setReportStateModel:function(model)
{this._state=model;},saveAlert:function(form)
{var data=YAHOO.util.Connect.setForm(form);var url=Omniture.URL.suitej('Alert.SaveAlert',{oid:Omniture.Config.real_oid});this._save_bm_json=new YAHOO.omniture.JSONModel();this._save_bm_json.attachObserver(this,'handleSavedAlert');this._save_bm_json.setURL(url);this._save_bm_json.getResponse();},handleSavedAlert:function()
{var response=this._save_bm_json.getResponse();if(this._page_controller!=null){if(this._page_controller.addMessage!='undefined'){if(response.success==true){this._page_controller.addMessage(Omniture.l10n.gettext("Alert successfully created"),'success');}else{for(var n=0;n<response.length;n++){this._page_controller.addMessage(Omniture.l10n.gettext("Alert creation failed")+": "+response[n],'failure');}}}}
    this.notify();}});YAHOO.omniture.GraphWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.GraphWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.GraphWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){if(response['b64_content']&&response['b64_content']['chart']){partial_html_dom_element.innerHTML=Base64.decode(response['chart']);}else{partial_html_dom_element.innerHTML=response['chart'];}
    page_controller.toggleChartOverlay(1);return true;}}else{this.renderLoading();}
    return false;}});YAHOO.omniture.DataWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.DataWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.DataWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){if(response.real_oid)
{Omniture.Config.real_oid=response.real_oid;}
    var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){if(response['b64_content']&&response['b64_content']['main_data']){partial_html_dom_element.innerHTML=Base64.decode(response['main_data']);}else{partial_html_dom_element.innerHTML=response['main_data'];}
        page_controller.toggleDataOverlay(1);return true;}}
    return false;}});YAHOO.omniture.GranularityWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.GranularityWidget,YAHOO.omniture.Widget,{_message_id_list:[],init:function(corresponding_container_id)
{YAHOO.omniture.GranularityWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){var new_html='';var show_granularity=false;var gran_items=new Array();var disabled_granularities=new Array();var selected_granularity='';if(response['granularity']){for(var i=0;i<response['granularity'].length;i++){if(response['granularity'][i]['enabled']){show_granularity=true;}
    gran_items[gran_items.length]=response['granularity'][i]['id'];if(!response['granularity'][i]['enabled']){disabled_granularities[disabled_granularities.length]=response['granularity'][i]['id'];}
    if(response['granularity'][i]['selected']){selected_granularity=response['granularity'][i]['id'];}}
    page_controller.controls.granularity.setItemList(gran_items);var old_sel=page_controller.controls.granularity.getSelectedItem();if(typeof(page_controller.addMessage)=="function"){for(var j=0;j<this._message_id_list.length;j++){page_controller.removeMessage(this._message_id_list[j]);}}
    page_controller.controls.granularity.setSelectedItem(selected_granularity);page_controller.controls.granularity.setDisabled(disabled_granularities);page_controller.controls.granularity.updateStyles();}
    if(show_granularity){partial_html_dom_element.style.display="block";}else{partial_html_dom_element.style.display="none";}
    return true;}}
    return false;}});YAHOO.omniture.FilterWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.FilterWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.FilterWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){if(response['filter']){if(response['b64_content']&&response['b64_content']['filter']){partial_html_dom_element.innerHTML=Base64.decode(response['filter']);}else{partial_html_dom_element.innerHTML=response['filter'];}}else{partial_html_dom_element.innerHTML='';}
    return true;}}else{this.renderLoading();}
    return false;}});YAHOO.omniture.SummaryDataWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.SummaryDataWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.SummaryDataWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){if(response['summary_data']){if(response['b64_content']&&response['b64_content']['summary_data']){partial_html_dom_element.innerHTML=Base64.decode(response['summary_data']);}else{partial_html_dom_element.innerHTML=response['summary_data'];}}else{partial_html_dom_element.innerHTML='';}
    return true;}}else{this.renderLoading();}
    return false;}});YAHOO.omniture.CalEventsDataWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.CalEventsDataWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.CalEventsDataWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){if(response['cal_events']){if(response['b64_content']&&response['b64_content']['cal_events']){partial_html_dom_element.innerHTML=Base64.decode(response['cal_events']);}else{partial_html_dom_element.innerHTML=response['cal_events'];}}else{partial_html_dom_element.innerHTML='';}
    return true;}}else{this.renderLoading();}
    return false;}});YAHOO.omniture.SettingsWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.SettingsWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.SettingsWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    if(this._json_model.hasResponse()){var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if((partial_html_dom_element.id=='graph_settings_area')&&(response=='')){$('configure_graph_link').stopObserving('click');$('configure_graph_link').className='tab_inactive';}else{if(partial_html_dom_element&&response['configure']){if(response['b64_content']&&response['b64_content']['configure']){partial_html_dom_element.innerHTML=Base64.decode(response['configure']);}else{partial_html_dom_element.innerHTML=response['configure'];}
        return true;}}}}
    return false;},updateReport:function(model)
{},updateSettings:function(model)
{this.update(model);this.render();}});YAHOO.omniture.ReportContextMenuWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.ReportContextMenuWidget,YAHOO.omniture.NavigationWidget,{init:function(corresponding_container_id)
{YAHOO.omniture.ReportContextMenuWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{var rtn=false;if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){if(response['item_breakdown_js']){if(response['b64_content']&&response['b64_content']['item_breakdown_js']){this._addMenu(Base64.decode(response['item_breakdown_js']),'context_menu');}else{this._addMenu(response['item_breakdown_js'],'context_menu');}
    rtn=true;}
    if(response['item_name_breakdown_js']){this._addMenu(response['item_name_breakdown_js'],'item_name_context_menu');rtn=true;}
    if(response['correlation_menu_js']){this._addMenu(response['correlation_menu_js'],'correlations_context_menu');rtn=true;}
    if(response['correlation_travel_menu_js']){this._addMenu(response['correlation_travel_menu_js'],'correlations_travel_context_menu');rtn=true;}
    if(response['correlations_item_menu_js']){this._addMenu(response['correlations_item_menu_js'],'correlations_item_context_menu');rtn=true;}
    if(response['pages_menu_js']){this._addMenu(response['pages_menu_js'],'pages_context_menu');rtn=true;}
    if(response['medias_menu_js']){this._addMenu(response['medias_menu_js'],'medias_context_menu');rtn=true;}
    if(response['media_players_menu_js']){this._addMenu(response['media_players_menu_js'],'media_players_context_menu');rtn=true;}
    if(response['media_player_medias_menu_js']){this._addMenu(response['media_player_medias_menu_js'],'media_player_medias_context_menu');rtn=true;}
    if(response['ref_type_menu_js']){this._addMenu(response['ref_type_menu_js'],'ref_type_context_menu');rtn=true;}
    if(response['mobile_menu_js']){this._addMenu(response['mobile_menu_js'],'mobile_context_menu');rtn=true;}
    return rtn;}
    return false;},_addMenu:function(menu_script,menu_obj_name)
{var partial_html_dom_element=this.getDomElement();if(!partial_html_dom_element){var temp_div=document.createElement('div');temp_div.id=this._dom_id;var centerContent=document.getElementById('center_content');if(centerContent){centerContent.appendChild(temp_div);}else{document.body.appendChild(temp_div);}
    partial_html_dom_element=temp_div;}
    if(partial_html_dom_element){Omniture.util.execScript(menu_script+'\n'+menu_obj_name+'.attachListeners();');var new_div=document.createElement('div');partial_html_dom_element.appendChild(new_div);if(typeof(window[menu_obj_name])!="undefined"){new_div.innerHTML=window[menu_obj_name].getHTML();var tmp_partial=new_div.firstChild;new_div.parentNode.replaceChild(new_div.firstChild,new_div);new_div=tmp_partial;}}}});YAHOO.omniture.SettingsContextMenuWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.SettingsContextMenuWidget,YAHOO.omniture.ReportContextMenuWidget,{init:function(corresponding_container_id)
{YAHOO.omniture.SettingsContextMenuWidget.superclass.init.call(this,corresponding_container_id);},render:function()
{var rtn=false;if(!this._json_model){return rtn;}
    if(this._json_model.hasResponse()){var response=this._json_model.getResponse();if(response){if(response['trended_items_context_menu']){this._addMenu(response['trended_items_context_menu'],'trended_context_menu');rtn=true;}
        if(response['flow_filter_context_menu']){this._addMenu(response['flow_filter_context_menu'],'flow_filter_context_menu');rtn=true;}}}
    return rtn;}});YAHOO.omniture.NoticesWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.NoticesWidget,YAHOO.omniture.Widget,{_notice_list:[],init:function(corresponding_container_id)
{YAHOO.omniture.NoticesWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){for(var i=0;i<this._notice_list.length;i++){page_controller.removeMessage(this._notice_list[i]);}
    this._notice_list=[];if(response['notices']){for(var i=0;i<response['notices'].length;i++){this._notice_list[this._notice_list.length]=page_controller.addMessage(response['notices'][i],'notice');}}
    if(response['errors']){for(var i=0;i<response['errors'].length;i++){this._notice_list[this._notice_list.length]=page_controller.addMessage(response['errors'][i],'failure');}}
    return true;}}else{this.renderLoading();}
    return false;}});YAHOO.omniture.MessagesWidget=function(corresponding_container_id)
{this.init(corresponding_container_id);};YAHOO.lang.extend(YAHOO.omniture.MessagesWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id)
{YAHOO.omniture.MessagesWidget.superclass.init.call(this,corresponding_container_id);this._message_model=null;},render:function()
{var dom_element=this.getDomElement();if(dom_element&&this._message_model){dom_element.innerHTML='';var messages=this._message_model.getMessages();var show_container=false;for(var i in messages)if(messages.hasOwnProperty(i)){if(messages[i]['message']!=''){var div=document.createElement('div'),type=messages[i]['type'],icon='coral-Icon--alert';if(type=='alert'){type='notice';}
    if(type=='failure'){type="error";}
    if(type=="success"){type="coral-Icon--checkCircle";}
    div.className="coral-Alert coral-Alert--"+type;div.id=YAHOO.util.Dom.generateId();var msg=messages[i]['msg'];var msgText,messageSuppressionEnabled=false;if(Object.isString(msg)){msgText=msg;}else{msgText=msg.text;msgText+=' <b><span class="suppress-message-holder">'+'<a class="suppress-message">'+
    Omniture.l10n.gettext('Don\'t show this again.')+'</a></span></b>';messageSuppressionEnabled=true;}
    close_link_id=YAHOO.util.Dom.generateId();var close_link=''+'<button id="'+close_link_id+'" type="button" class="coral-MinimalButton coral-Alert-closeButton" title="Close" data-dismiss="alert">'+'<i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon"></i>'+'</button>';var error_icon='<i class="coral-Alert-typeIcon coral-Icon coral-Icon--sizeS coral-Icon--alert"></i>';div.innerHTML=close_link+error_icon+msgText;var message_model=this._message_model;show_container=true;dom_element.appendChild(div);YAHOO.util.Event.addListener(close_link_id,"click",message_model.removeMessage.bind(message_model,i),this,true);var self=this;if(messageSuppressionEnabled){var suppress_links=$(div).select('.suppress-message');$(suppress_links[0]).observe('click',function(div,i,server_message_id){self._dontShowMeAgain($(div).select('.suppress-message-holder')[0],i,server_message_id);}.curry(div,i,parseInt(msg.id,10)));}
    var callback=messages[i]['callback'];if(callback&&!messages[i]['callback_called']){YAHOO.util.Event.onAvailable(div.id,callback);messages[i]['callback_called']=true;}}}
    if(show_container){YAHOO.util.Dom.setStyle(dom_element,'display','block');}else{YAHOO.util.Dom.setStyle(dom_element,'display','none');}}
    return true;},_dontShowMeAgain:function(suppress_message_holder,client_message_id,server_message_id){var self=this;$(suppress_message_holder).update(Omniture.l10n.gettext('Updating report settings...'));var onFailure=function(){page_controller.addMessage(Omniture.l10n.gettext('An error occurred while updating report settings.'),'failure');self._message_model.removeMessage(client_message_id);};var onSuccess=function(r){var responseJSON=r.responseJSON||OM.getResponseJSONFromResponseText(r.responseText);if(responseJSON.success){page_controller.addMessage(Omniture.l10n.gettext('Your report settings have been updated.'),'success');self._message_model.removeMessage(client_message_id);}else{onFailure();}};new Ajax.Request(Omniture.URL.fs('Main.SuppressWarning'),{parameters:{'warning_id':server_message_id},method:'POST',onSuccess:onSuccess,onFailure:onFailure});},setModel:function(model)
{this._message_model=model;}});YAHOO.omniture.ReportManagerWidget=function(containers,interface_elements)
{this.init(containers,interface_elements);};YAHOO.lang.extend(YAHOO.omniture.ReportManagerWidget,YAHOO.omniture.Widget,{init:function(containers,interface_elements)
{this._json_model=null;this._container_list=containers;this._interface_elements=interface_elements;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();var tmp_container=null;if(response){clearTimeout(window.email_notification);clearTimeout(window.timeout_notification);for(var i=0;i<this._container_list.length;i++){tmp_container=YAHOO.util.Dom.get(this._container_list[i]['container']);if(tmp_container){if(typeof(response[this._container_list[i]['json_obj']])=='undefined'){if(this._container_list[i]['json_obj']=='main_data'&&response['error_msg']){tmp_container.style.display="";tmp_container.innerHTML='<div class="no_data_generic">'+response['error_msg']+'</div>';}else{tmp_container.style.display="none";}}else{tmp_container.style.display="";}}}
    var load_div=YAHOO.util.Dom.get('loading');if(load_div){load_div.style.display="none";}
    if(response['applicable_vars']){page_controller.models.report_state['applicable_vars']=response['applicable_vars'];var tmp_element=null;for(var j in this._interface_elements){tmp_element=YAHOO.util.Dom.get(j);var applicable_vars=[];if(tmp_element){var applicable=false;if(this._interface_elements[j].indexOf('|')>0){applicable_vars=this._interface_elements[j].split('|');}else{applicable_vars[0]=this._interface_elements[j];}
        for(var k in applicable_vars){if(response['applicable_vars'][applicable_vars[k]]){applicable=true;}}
        if(applicable){tmp_element.style.display='';}else{tmp_element.style.display='none';}}}}
    if(response['clean_report_vars']){page_controller.models.report_state['clean_report_vars']=response['clean_report_vars'];}
    if(response['debug_alert_data']){response['debug_alert_data'].split(',').each(alert);}
    if(response['debug_data']){var debug_div=null;if(!(debug_div=document.getElementById('debug_div'))){debug_div=document.createElement('div');debug_div.style.display='none';debug_div.id='debug_div';debug_div.style.height='400px';debug_div.style.width='800px';debug_div.style.position='absolute';debug_div.style.top='0px';debug_div.style.left='0px';debug_div.style.overflow='auto';debug_div.style.backgroundColor='white';debug_div.style.border='3px solid black';debug_div.style.zIndex='10000';var data_div=document.getElementById('non_footer');if(data_div){data_div.appendChild(debug_div);}else{document.body.appendChild(debug_div);}}
        debug_div.innerHTML=response['debug_data'];}
    if(response.init_js){Omniture.util.execScript(response.init_js);}}
    return true;}});YAHOO.omniture.PaginationWidget=function(corresponding_container_id,pagination_obj)
{this.init(corresponding_container_id,pagination_obj);};YAHOO.lang.extend(YAHOO.omniture.PaginationWidget,YAHOO.omniture.Widget,{init:function(corresponding_container_id,pagination_obj)
{YAHOO.omniture.PaginationWidget.superclass.init.call(this,corresponding_container_id);this._json_model=null;this._pagination_obj=pagination_obj;},setJSONModel:function(json_model)
{this._json_model=json_model;},render:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(response){var partial_html_dom_element=this.getDomElement();if(partial_html_dom_element){if(response['pagination']){if(!parseInt(response['pagination']['next_page'])){this._pagination_obj.setMaxRows(response['pagination']['first_row']);}else{this._pagination_obj.setMaxRows(0);}
    this._pagination_obj.setCurrentPage(this._pagination_obj.getPageFromFirstRow(response['pagination']['first_row']),1,1);this._pagination_obj.setRowVar(response['pagination']['row_var_name']);if(response['pagination']['detail_depth']){this._pagination_obj.setRowsPerPage(response['pagination']['detail_depth'],true);}
    if(response['pagination']['next_page']||response['pagination']['has_pagination']){partial_html_dom_element.style.display='block';}else{partial_html_dom_element.style.display='none';}
    var page_size=document.getElementById('data_table_row_count');if(page_size){if(response['pagination']['hide_page_size']){page_size.style.display='none';}else{page_size.style.display='inline';}}}}}
    return false;}});YAHOO.omniture.TrackingWidget=function()
{this.init();};YAHOO.lang.extend(YAHOO.omniture.TrackingWidget,YAHOO.omniture.Widget,{init:function()
{},setJSONModel:function(json_model)
{this._json_model=json_model||false;;},sendReportLink:function()
{if(!this._json_model){return false;}
    var response=this._json_model.getResponse();if(!response){return false;}
    var timeTaken=response.timeTaken/1000||false;if(!timeTaken){return false;}
    timeTaken=Math.round(timeTaken*10)/10;var s=s_gi("omniture.suiteall");s.linkTrackVars="prop11,events";s.linkTrackEvents="event3";s.prop11=timeTaken;s.tl(true,"o","Report:"+s.prop15);}});YAHOO.omniture.ReportToolAlerts=function(corresponding_container_id)
{this.init(corresponding_container_id);};var $this=null;YAHOO.lang.extend(YAHOO.omniture.ReportToolAlerts,YAHOO.omniture.Widget,{reportModel:null,init:function(corresponding_container_id)
{YAHOO.omniture.ReportToolAlerts.superclass.init.call(this,corresponding_container_id);$this=this;$this.reportModel=null;},render:function()
{var domParent=$this.getDomElement();if(domParent&&$this.reportModel){var associatedBtn=$($this.reportModel['id']);var associatedBtnOffset=associatedBtn.cumulativeOffset();var associatedBtnWidth=associatedBtn.measure('width');var position={left:associatedBtnOffset[0]+(associatedBtnWidth/2)-125,top:associatedBtnOffset[1]+20};var callout=document.createElement('div');callout.className="report_tools_callout";callout.id=$this.reportModel['id']+"_callout";callout.innerHTML=$this.reportModel['message']+"<br/><br/>";var dontShowAgain=document.createElement('a');dontShowAgain.id=$this.reportModel['id']+"_supress";dontShowAgain.innerHTML=$this.reportModel['dontShowAgainMessage'];dontShowAgain.addEventListener("click",$this.onDontShowAgainClick);callout.appendChild(dontShowAgain);var closeBtn=document.createElement('div');closeBtn.id=$this.reportModel['id']+"_close";closeBtn.className="report_tools_callout_closebtn";closeBtn.addEventListener('click',$this.onCloseButtonClick);callout.appendChild(closeBtn);YAHOO.util.Dom.setStyle(callout,'left',position.left+'px');YAHOO.util.Dom.setStyle(callout,'top',position.top+'px');domParent.appendChild(callout);}
    return true;},onDontShowAgainClick:function(event)
{new Ajax.Request($this.reportModel['dontShowAgainLink']+"&toolId="+$this.reportModel.id,{onSuccess:function(response){console.log("successfully prevented the message from displaying again.");}});$($this.reportModel['id']+"_callout").remove();},onCloseButtonClick:function(event)
{$($this.reportModel['id']+"_callout").remove();},setModel:function(model)
{this.reportModel=model;}});Omniture.XHR=Class.create((function(){var activeRequests={};var stateIdCounter=0;var PostMessage={send:function(request){var src=request.xdomain+Omniture.Config.PLATFORM_PATH+'/js/xhr/postmessage_server.html';var onload='_startPostMessage(\''+request.stateId+'\')';request.reload=true;var iframe=createIframe(request.stateId,src,onload);request.clientFrame=iframe;request.toString=true;$(document.body).insert({top:iframe});},start:function(stateId){var request=activeRequests[stateId];var subwindow=window.frames[request.stateId];if(request.reload){var src=request.xdomain+Omniture.Config.PLATFORM_PATH+'/js/xhr/postmessage_server.html';subwindow.location.replace(src);request.reload=false;return;}
    request.sendRequest=function(message,domain){subwindow.postMessage(message,domain)};sendMessage(request);}};var DocumentDomain={send:function(request){var src=request.domain+Omniture.Config.PLATFORM_PATH+'/js/xhr/documentdomain_client.html';var onload='_startDocumentDomain(\''+request.stateId+'\')';var iframe=createIframe(request.stateId,src,onload);request.clientFrame=iframe;request.toString=false;$(document.body).insert({top:iframe});},start:function(stateId){var request=activeRequests[stateId];window.frames[request.stateId].sendResponse=receiveMessage;request.sendRequest=window.frames[request.stateId].receiveMessage;sendMessage(request);}};var IframeResize={send:function(request){var src=request.xdomain+Omniture.Config.PLATFORM_PATH+'/js/xhr/iframeresize_server.html#'+request.domain+Omniture.Config.PLATFORM_PATH+'/js/xhr/iframeresize_client.html';var onload='_startIframeResize(\''+request.stateId+'\')';var iframe=createIframe(request.stateId,src,onload);request.toString=true;$(document.body).insert({top:iframe});},start:function(stateId){var request=activeRequests[stateId];window.frames[request.stateId].frames[0].sendResponse=receiveMessage.curry(request.stateId);window.frames[request.stateId].frames[0].setServerURL=IframeResize.setServerURL.curry(request.stateId);request.sendRequest=window.frames[request.stateId].frames[0].receiveMessage;request.clientFrame=document.getElementById(request.stateId);sendMessage(request);},setServerURL:function(stateId,hash){var request=activeRequests[stateId];var url=request.xdomain+Omniture.Config.PLATFORM_PATH+'/js/xhr/iframeresize_server.html#'+hash;window.frames[request.stateId].location=url;window.setTimeout(IframeResize.resizeServer.curry(request),10);},resizeServer:function(request){if(!request.clientFrame){return;}
    var width=request.clientFrame.style.width;if(!width){width=1;}else{width=parseInt(width,10);}
    width=width%200;width+=100;request.clientFrame.style.width=width+'px';}};function sendMessage(request){var object=request.object;var requestData={uri:object._uri,requestHeaders:null,method:'get',data:null};var reqHeaders=[];for(var param in object._requestHeaders){reqHeaders.push(param+": "+object._requestHeaders[param]);}
    requestData.xpath=Omniture.Config.PLATFORM_PATH;requestData.stateId=request.stateId;if(reqHeaders.length>0){requestData.requestHeaders=reqHeaders;}
    if(object._method){requestData.method=object._method;}
    if(object._bodyData){requestData.data=object._bodyData;}
    var requestString=requestData;if(request.toString){requestString=encodeURIComponent(Object.toJSON(requestData));}
    request.sendRequest(requestString,request.xdomain);}
    function createIframe(name,src,onload){var ifrstr;if(Prototype.Browser.IE){ifrstr='<iframe name="'+name+'" onload="'+onload+'" src="'+src+'">';}else{ifrstr='iframe';}
        var iframe=document.createElement(ifrstr);iframe.id=name;if(!Prototype.Browser.IE){iframe.name=name;iframe.writeAttribute('name',name);iframe.onload=new Function(onload);iframe.src=src;}
        iframe.style.left='-100px';iframe.style.top='-100px';iframe.style.height='1px';iframe.style.width='1px';iframe.style.visibility='hidden';iframe.style.position='absolute';return iframe;}
    function receiveMessageEvent(event){var frag=event.data
        var index=frag.indexOf("#");if(index==-1)return;var stateId=frag.substring(0,index);var encodedData=frag.substring(index+1,frag.length);if(activeRequests[stateId].xdomain==event.origin){index=encodedData.indexOf('#');var responseLength=parseInt(encodedData.substring(0,index),10);var encodedData=encodedData.substring(index+1,encodedData.length);var response=encodedData.substring(0,responseLength);var encodedData=encodedData.substring(responseLength+1,encodedData.length);var data=response.evalJSON();data.responseText=encodedData;receiveMessage(stateId,data);}}
    function receiveMessage(stateId,response){var request=activeRequests[stateId];if(!request){return;}
        var object=request.object;if(Object.isString(response)){response=response.evalJSON();}
        object._setResponseHeaders(response.responseHeaders);if(response.status==0||response.status){object.status=parseInt(response.status,10);}
        if(response.statusText){object.statusText=response.statusText;}
        if(response.responseText){object.responseText=response.responseText;}
        object.readyState=4;object.onreadystatechange();destroyState(stateId);}
    function destroyState(stateId){var request=activeRequests[stateId];if(request){delete activeRequests[stateId];var parentNode=request.clientFrame.parentNode;parentNode.removeChild(request.clientFrame);request.clientFrame=null;request=null;}}
    var actualSend=null;if(typeof window.postMessage!="undefined"){if(window.addEventListener){window.addEventListener('message',receiveMessageEvent,false);}else{window.attachEvent('onmessage',receiveMessageEvent);}
        actualSend=PostMessage.send;window._startPostMessage=PostMessage.start;}else if(Prototype.Browser.WebKit){actualSend=IframeResize.send;window._startIframeResize=IframeResize.start;}else{actualSend=DocumentDomain.send;window._startDocumentDomain=DocumentDomain.start;}
    return{initialize:function(url){this._domain=window.location.protocol+'//'+window.location.host;if(url){parts=Omniture.URL.parseUri(url);this._xdomain=parts.protocol+'://'+parts.host;}
        this.onreadystatechange=function(){};this._requestHeaders={};this._allResponseHeaders=null;this._responseHeaders={};this._method=null;this._uri=null;this._bodyData=null;this.responseText=null;this.responseXML=null;this.status=null;this.statusText=null;this.readyState=0;this._stateId=null;},open:function(method,uri){this._method=method;this._uri=uri;this.readyState=1;this.onreadystatechange();},setRequestHeader:function(header,value){this._requestHeaders[header]=value;},send:function(stringData){this._bodyData=stringData;this._stateId='XHRIframe'+stateIdCounter++;var request={};request.object=this;request.stateId=this._stateId;request.domain=this._domain;request.xdomain=this._xdomain;request.responseMessage='';activeRequests[request.stateId]=request;actualSend(request);this.readyState=2;this.onreadystatechange();},abort:function(){destroyState(this._stateId);},getAllResponseHeaders:function(){return this._allResponseHeaders;},getResponseHeader:function(header){return this._responseHeaders[header.toUpperCase()];},_setResponseHeaders:function(allHeaders){if(allHeaders){this._allResponseHeaders=allHeaders;allHeaders=allHeaders.replace(/\r/g,"");var nvPairs=allHeaders.split("\n");for(var i=0;i<nvPairs.length;i++){if(nvPairs[i]){var nameValue=nvPairs[i].split(": ");this._responseHeaders[nameValue[0].toUpperCase()]=nameValue[1];}}}}}})());Ajax.Request.prototype.request=Ajax.Request.prototype.request.wrap(function(proceed,url){var urlParts=Omniture.URL.parseUri(url);if((urlParts.protocol+'://'+urlParts.host)!=(document.location.protocol+'//'+document.location.host)){this.transport=new Omniture.XHR(url);}
    proceed.apply(this,$A(arguments).slice(1));});Omniture.Model.DateRangeModel=function(id,model_params)
{this.init(id,model_params);}
YAHOO.lang.extend(Omniture.Model.DateRangeModel,YAHOO.omniture.Model,{init:function(id,options)
{Omniture.Model.DateRangeModel.superclass.init.call(this,id);this.MODE_WEEK=0;this.MODE_MONTH=1;this.MODE_YEAR=3;this.RANGE_STANDARD=1;this.RANGE_COMPARE=2;this._start_date=Omniture.util.Date.parse(Omniture.Config.start_date_cache||options.start_date);this._end_date=Omniture.util.Date.parse(Omniture.Config.end_date_cache||options.end_date);this._preset=Omniture.Config.preset_cache||options.preset;this.calcPresetType();this._period=options.period||null;this._range_period_flag=parseInt(options.range_period)||0;this._period_type="";this._compare_start_date=Omniture.util.Date.parse(Omniture.Config.compare_start_date_cache||options.compare_start_date);this._compare_end_date=Omniture.util.Date.parse(Omniture.Config.compare_end_date_cache||options.compare_end_date);this._compare_preset=Omniture.Config.compare_preset_cache||options.compare_preset;this._compare_period=options.compare_period||null;this._active_start_date=Omniture.util.Date.parse(options.active_start_date);this._active_end_date=Omniture.util.Date.parse(Omniture.Config.active_end_date_cache||options.active_end_date);this._updatePeriod(this.RANGE_STANDARD);this._updatePeriod(this.RANGE_COMPARE);this._recent_date_ranges=options.recent_date_ranges||Omniture.Config.recent_date_range_js;if(this._start_date==null){this._start_date=OmniDate_createInstance();this._start_date=this._start_date.getStartOfCalMonth();}
    if(this._end_date==null){this._end_date=OmniDate_createInstance();this._end_date=this._end_date.getEndOfCalMonth();}},getActiveStartDate:function()
{return this._active_start_date;},getActiveEndDate:function()
{return this._active_end_date;},getPreset:function()
{return this._preset;},getPresetType:function()
{return this._preset_type;},setPresetType:function(p_type)
{this._preset_type=p_type;},calcPresetType:function(){var types={'Today':'day','Yesterday':'day','Last 7 days':'day','Last 30 days':'day','Last 60 days':'day','Last 90 days':'day','This week':'week','Last week':'week','Last 2 weeks':'week','Last 3 weeks':'week','Last 4 weeks':'week','Last 53 weeks':'week','This month':'month','Last month':'month','Last 2 months':'month','Last 3 months':'month','Last 6 months':'month','Last 12 months':'month','Last 13 months':'month','This year':'year','Last year':'year'};this._preset_type=types[this._preset]||null;},getComparePreset:function()
{return this._compare_preset;},setRange:function(start_date,end_date,period){this._start_date=start_date;this._end_date=end_date;this._period=period;},setRangePeriodFlag:function(state){this._range_period_flag=state;},getRangePeriodFlag:function(){if(this.getPreset())
{return 1;}
else
{return this._range_period_flag;}},setPeriodType:function(t){this._period_type=t;},getPeriodType:function(){return this._period_type;},getStartDate:function()
{return this._start_date;},setStartDate:function(start_date)
{this._start_date=start_date;this._updatePeriod(this.RANGE_STANDARD);},getEndDate:function()
{return this._end_date;},setEndDate:function(end_date)
{this._end_date=end_date;this._updatePeriod(this.RANGE_STANDARD);},getPeriod:function(){return this._period;},getCompareStartDate:function()
{return this._compare_start_date;},setCompareStartDate:function(start_date)
{this._compare_start_date=start_date;this._updatePeriod(this.RANGE_COMPARE);},getCompareEndDate:function()
{return this._compare_end_date;},setCompareEndDate:function(end_date)
{this._compare_end_date=end_date;this._updatePeriod(this.RANGE_COMPARE);},getComparePeriod:function(){return this._compare_period;},setRecentDateRanges:function(date_ranges){this._recent_date_ranges=date_ranges;},getRecentDateRanges:function(){return this._recent_date_ranges;},_updatePeriod:function(range_num){if(range_num==this.RANGE_STANDARD){this._period=Omniture.util.Period.getFromRange(this._start_date,this._end_date);}
else{this._compare_period=Omniture.util.Period.getFromRange(this._compare_start_date,this._compare_end_date);}},updateDateRanges:function(start_date,end_date,preset,compare_start_date,compare_end_date,compare_preset,is_notify_observers)
{this._start_date=OmniDate_createInstance(start_date);this._end_date=OmniDate_createInstance(end_date);this._preset=preset;this._updatePeriod(this.RANGE_STANDARD);if(compare_start_date!=null&&compare_end_date!=null){this._compare_start_date=OmniDate_createInstance(compare_start_date);this._compare_end_date=OmniDate_createInstance(compare_end_date);this._compare_preset=compare_preset;this._updatePeriod(this.RANGE_COMPARE);}
else{this._compare_start_date=null;this._compare_end_date=null;this._compare_preset=null;this._compare_period=null;}
    if(is_notify_observers){this.notify();}},setAllUsingObject:function(model)
{this._start_date=model.getStartDate();this._end_date=model.getEndDate();this._preset=model.getPreset();this._preset_type=model.getPresetType();this._period=model.getPeriod();this._range_period_flag=model.getRangePeriodFlag();this._compare_start_date=model.getCompareStartDate();this._compare_end_date=model.getCompareEndDate();this._compare_preset=model.getComparePreset();this._compare_period=model.getComparePeriod();this._active_start_date=model.getActiveStartDate();this._active_end_date=model.getActiveEndDate();},getRollingOptions:function()
{if(!this._range_period_flag&&this._period)
{return this._period._type;}
else
{return this._preset_type||"day";}}});Omniture.Control.OptionChooserControl=function(corresponding_container_id,control_params)
{this.init(corresponding_container_id,control_params.max_display_count,control_params.max_selected_count,control_params.selected_values);};YAHOO.lang.extend(Omniture.Control.OptionChooserControl,YAHOO.omniture.Widget,{init:function(corresponding_container_id,max_display_count,max_selected_count,selected_values)
{Omniture.Control.OptionChooserControl.superclass.init.call(this,corresponding_container_id);YAHOO.util.Event.onDOMReady(function(){YAHOO.util.Event.onContentReady(this.getDomId(),this._renderContent,this,true);},this,true);this._max_display_count=max_display_count;this._max_selected_count=max_selected_count||0;this._selected_values=selected_values;},_renderContent:function(){this._unselected=YAHOO.util.Dom.get(this.getDomId()+'_unselected');this._unselected_list=YAHOO.util.Dom.get(this.getDomId()+'_unselected_list');this._selected=YAHOO.util.Dom.get(this.getDomId()+'_selected');this._selected_list=YAHOO.util.Dom.get(this.getDomId()+'_selected_list');this._unselect_button=YAHOO.util.Dom.get(this.getDomId()+'_unselect');this._unselect_all_button=YAHOO.util.Dom.get(this.getDomId()+'_unselect_all');this._select_button=YAHOO.util.Dom.get(this.getDomId()+'_select');this._select_all_button=YAHOO.util.Dom.get(this.getDomId()+'_select_all');this._up_button=YAHOO.util.Dom.get(this.getDomId()+'_up');this._down_button=YAHOO.util.Dom.get(this.getDomId()+'_down');this._selected_hidden_field=YAHOO.util.Dom.get(this.getDomId()+'_selected_hidden_input');this._unselected_hidden_field=YAHOO.util.Dom.get(this.getDomId()+'_unselected_hidden_input');var unselected_items=YAHOO.util.Dom.getElementsByClassName('om_option_chooser_item','li',this._unselected);var selected_items=YAHOO.util.Dom.getElementsByClassName('om_option_chooser_item','li',this._selected);for(var i=0;i<unselected_items.length;i++){YAHOO.util.Event.addListener(unselected_items[i],'click',this._toggle_chosen_item_on_click,this,true);}
    for(var i=0;i<selected_items.length;i++){YAHOO.util.Event.addListener(selected_items[i],'click',this._toggle_chosen_item_on_click,this,true);}
    YAHOO.util.Event.addListener(this._unselect_all_button,'click',this._unselectAllItems,this,true);YAHOO.util.Event.addListener(this._unselect_button,'click',this._unselectItems,this,true);YAHOO.util.Event.addListener(this._select_button,'click',this._selectItems,this,true);YAHOO.util.Event.addListener(this._select_all_button,'click',this._selectAllItems,this,true);YAHOO.util.Event.addListener(this._up_button,'click',this._moveItemsUp,this,true);YAHOO.util.Event.addListener(this._down_button,'click',this._moveItemsDown,this,true);if(this._selected_values){var a=this._selected_values,i,l=a.length,s,ss=unselected_items.length;for(i=0;i<l;++i){for(s=0;s<ss;++s){if(this.getValue(unselected_items[s])==a[i]){this._selected_list.appendChild(this._unselected_list.removeChild(unselected_items[s]));}}}}
    this._updateValues();},_toggle_chosen_item_on_click:function(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName=='SPAN'){target=target.parentNode;}
    this._toggle_chosen_item(target);},_toggle_chosen_item:function(element){if(YAHOO.util.Dom.hasClass(element,'chosen')){this._unchoose_item(element);}else{this._choose_item(element);}},_choose_item:function(element){YAHOO.util.Dom.addClass(element,'chosen');},_unchoose_item:function(element){YAHOO.util.Dom.removeClass(element,'chosen');},_unselectAllItems:function(e){this._toggleSelect(this._getSelectedElements(),this._selected_list,this._unselected_list);},_unselectItems:function(e){this._toggleSelect(this._getChosenSelectedElements(),this._selected_list,this._unselected_list);},_selectItems:function(e){var chosen_unselected_items=this._getChosenUnselectedElements();var chosen_unselected_item_count=chosen_unselected_items.length;if(chosen_unselected_item_count==0){return;}
    if(this._max_selected_count>0){var selected_item_count=this._getSelectedElements().length;if(selected_item_count+chosen_unselected_item_count>this._max_selected_count){var alertText=Omniture.l10n.gettext('Unable to select items. A max of %s items may be selected. '+'Currently, %s items are selected and you have chosen to select %s more.',this._max_selected_count.toString(),selected_item_count.toString(),chosen_unselected_item_count.toString());alert(alertText);return;}}
    this._toggleSelect(chosen_unselected_items,this._unselected_list,this._selected_list);},_getUnselectedElements:function(){return YAHOO.util.Dom.getElementsByClassName('om_option_chooser_item','li',this._unselected);},_getChosenUnselectedElements:function(){return YAHOO.util.Dom.getElementsByClassName('chosen','li',this._unselected);},_getSelectedElements:function(){return YAHOO.util.Dom.getElementsByClassName('om_option_chooser_item','li',this._selected);},_getChosenSelectedElements:function(){return YAHOO.util.Dom.getElementsByClassName('chosen','li',this._selected);},_selectAllItems:function(e){this._toggleSelect(this._getUnselectedElements(),this._unselected_list,this._selected_list);},_toggleSelect:function(elements,from_node,to_node){if(!YAHOO.lang.isArray(elements)){elements=new Array(elements);}
    for(var i=0;i<elements.length;i++){this._unchoose_item(elements[i]);to_node.appendChild(from_node.removeChild(elements[i]));}
    this._updateValues();},_moveItemsUp:function(e){var Dom=YAHOO.util.Dom,elements=this._getChosenSelectedElements(),parentNode=this._selected_list;for(var i=0;i<elements.length;++i){var node=elements[i],sibling=Dom.getPreviousSibling(node);if(sibling&&!Dom.hasClass(sibling,'chosen')){parentNode.removeChild(node);parentNode.insertBefore(node,sibling);}}
    this._updateValues();},_moveItemsDown:function(e){var Dom=YAHOO.util.Dom,elements=this._getChosenSelectedElements(),parentNode=this._selected_list;for(var i=elements.length-1;i>=0;--i){var node=elements[i],sibling=Dom.getNextSibling(node);if(sibling&&!Dom.hasClass(sibling,'chosen')){parentNode.removeChild(sibling);parentNode.insertBefore(sibling,node);}}
    this._updateValues();},_updateValues:function(){this._unselected_hidden_field.value=this._makeValueString(this._getUnselectedElements());this._selected_hidden_field.value=this._makeValueString(this._getSelectedElements());},_makeValueString:function(li_array){var retval_array=new Array();if(!YAHOO.lang.isArray(li_array)){if(li_array.tagName=='LI'){li_array=new Array(li_array);}}
    for(var i=0;i<li_array.length;i++){temp_value=this.getValue(li_array[i]);retval_array.push(temp_value);}
    return retval_array.join('|');},_getItemParam:function(li_element,param){var value=null;if(li_element){var temp_span=YAHOO.util.Dom.getElementsByClassName(param,'span',li_element.id);value=temp_span[0].innerHTML;}
    return value;},getValue:function(li_element){return this._getItemParam(li_element,'item_value');},getText:function(li_element){return this._getItemParam(li_element,'item_text');}});YAHOO.omniture.Period=function()
{if(YAHOO.omniture.Period.arguments.length==1){this.initFromPeriod(YAHOO.omniture.Period.arguments[0]);}
else{this.initFromValues(YAHOO.omniture.Period.arguments[0],YAHOO.omniture.Period.arguments[1],YAHOO.omniture.Period.arguments[2]);}}
YAHOO.omniture.Period.prototype={initFromValues:function(start_date,end_date,type)
{this._start_date=OmniDate_createInstance(start_date);this._end_date=OmniDate_createInstance(end_date);if(this._start_date>this._end_date){var temp_date=this._start_date;this._start_date=this._end_date;this._end_date=temp_date;}
    this._type=type;this._value=Omniture.util.Period.getYMD(start_date,type);this._title=Omniture.util.Period.getTitle(start_date,end_date,type);},initFromPeriod:function(init_period){this._start_date=init_period.getStartDate();this._end_date=init_period.getEndDate();this._type=init_period.getType();this._value=init_period.getValue();this._title=init_period.getTitle();},getStartDate:function(){return this._start_date;},getEndDate:function(){return this._end_date;},getType:function(){return this._type;},getValue:function(){return this._value;},getTitle:function(is_short_title){var title=this._title;if(is_short_title){title=Omniture.util.Period.getTitle(this._start_date,this._end_date,this._type,true);}
    return title;},toYMD:function(){return Omniture.util.Period.getYMD(this._start_date,this._type);},addPeriods:function(amount){switch(this._type){case'year':this._start_date.setFullYear(this._start_date.getFullYear()+amount);this._start_date=this._start_date.getStartOfCalYear();this._end_date=this._start_date.getEndOfCalYear();break;case'quarter':this._start_date.setMonth(this._start_date.getMonth()+(amount*3));this._start_date=this._start_date.getStartOfCalQuarter();this._end_date=this._start_date.getEndOfCalQuarter();break;case'month':this._start_date.setMonth(this._start_date.getMonth()+amount);this._start_date=this._start_date.getStartOfCalMonth();this._end_date=this._start_date.getEndOfCalMonth();break;case'week':this._start_date.setDate(this._start_date.getDate()+(amount*7));this._end_date.setDate(this._end_date.getDate()+(amount*7));break;case'day':this._start_date.setDate(this._start_date.getDate()+amount);this._end_date.setDate(this._end_date.getDate()+amount);break;}
    this._value=Omniture.util.Period.getYMD(this._start_date,this._type);this._title=Omniture.util.Period.getTitle(this._start_date,this._end_date,this._type);}}
Omniture.EmailPartialHTMLWidget=function(dom_id)
{this.init(dom_id);};YAHOO.lang.extend(Omniture.EmailPartialHTMLWidget,Omniture.JsonPartialHTMLWidget,{init:function(dom_id)
{Omniture.EmailPartialHTMLWidget.superclass.init.call(this,dom_id);this._sched_model=new Omniture.EmailPartialHTMLWidget.SchedModel();this.URL=Omniture.URL.suite("ScheduledReport.Add",{"dashboard_id":this._sched_model.getDashboardId(),"book_id":this._sched_model.getPublishingBookId()});this.setURL(this.URL);this._sched_report_w=null;},setReportStateModel:function(model)
{this._sched_model.setState(model);},setDateRangeModel:function(model)
{this._date_range_model=model;},render:function()
{var render_result=Omniture.EmailPartialHTMLWidget.superclass.render.call(this);this.attachListeners();if(render_result){this._sched_report_w=this.getControlContainer().widgets.schedule_report_container;this._sched_report_w.setReportModel(this._sched_model);this._sched_report_w.setDateRangeModel(this._date_range_model);this._sched_report_w.assignDelegate(this.getDelegate());}
    return render_result;},save:function(e)
{if(this._sched_report_w){this._sched_report_w.save();return true;}
    return false;},attachListeners:function()
{Omniture.EmailPartialHTMLWidget.superclass.attachListeners.call(this);var Event=YAHOO.util.Event;var delegate=this.getDelegate();var em_send_elt=document.getElementById("em_send");if(em_send_elt){Event.removeListener(em_send_elt,"click",delegate.save);Event.addListener(em_send_elt,"click",delegate.save,delegate,true);}
    var em_cancel_elt=document.getElementById("em_cancel");if(em_cancel_elt){Event.removeListener(em_cancel_elt,"click",delegate.close);Event.addListener(em_cancel_elt,"click",delegate.close,delegate,true);}}});Omniture.EmailPartialHTMLWidget.SchedModel=function(){};Omniture.EmailPartialHTMLWidget.SchedModel.prototype={setState:function(report_state)
{this._state=report_state;},getOID:function()
{return Omniture.Config.real_oid;},getRSID:function()
{return this._state.rsid;},getReportName:function()
{return Omniture.Config.reportname;},getDashboardId:function(){return Omniture.util.getParams(window.location.href).params.dashboard||"";},getBookmarkId:function(){return Omniture.util.getParams(window.location.href).params.bookmark_id||"";},getPublishingBookId:function(){var book_id="";if(Omniture.Config.book){book_id=Omniture.Config.book.id||"";}
    return book_id;}};(function(undefined){OM.dashboard=OM.dashboard||{};var MAX_PAGES=30,MAX_PAGES_MESSAGE='You cannot have more than %d pages in a dashboard.'.toLocaleString().replace(/%d/g,MAX_PAGES);OM.dashboard.Controller=function(dom_id){this.init(dom_id);};YAHOO.lang.extend(OM.dashboard.Controller,YAHOO.omniture.StandardReportContainer,{init:function init(dom_id){YAHOO.omniture.SuiteContainer.prototype.init.call(this,dom_id);this.rt_widgets=[];this.controls={};this.altered_state={};this.models.report_state=OM.Config.report_state;if(window.addEventListener){window.addEventListener('beforeunload',this.beforeUnload,false);}
else if(window.attachEvent){window.attachEvent('onbeforeunload',this.beforeUnload);}
    Ajax.Responders.register({onComplete:this.sessionTimeout.bind(this)});document.observe('dom:loaded',this.bustCache);$(document.body).on('om:dashboard.Cell.panelLoaded',this.panelLoaded.bindAsEventListener(this));this.linkDelay=$(document.body).on('click','[href]',this.pauseLink).stop();if(Omniture.Config.login_expire_warning){this.addMessage(Omniture.Config.login_expire_warning,'alert');}
    return this;},bustCache:function bustCache(){if(+$F('page_cached')){$('page_cached').value='0';location.reload(true);}else{$('page_cached').value='1';}},pauseLink:function pauseLink(e,link){if(link.retrieve('om:dashboard.Report')||(OM.dashboard.Report&&OM.dashboard.Report.fromHashBang(link.href))){return;}
    if(link=/^\s*javascript\s*:|#/i.test(link.href)?MT:link.href){page_controller.linkDelay.paused_link=link;page_controller.linkDelay.paused_timer=setTimeout(function(){clearTimeout(page_controller.linkDelay.paused_timer);location.href=link;},2000);if(e.preventDefault){e.preventDefault();}
        return e.returnValue=false;}},panelLoaded:function panelLoaded(e){var warning=e.memo.response.warning;if(!warning){return;}
    this.addMessage(warning.generic||warning.message,'alert',null,warning.id);},setupDashboard:function setupDashboard(o,over){OM.require(['AP:dashboard.Page','AP:dashboard.Cell','AP:dashboard.Report','AP:dashboard.Tracker','CustomSelect','CalendarWidget'],(function(){this.setupCalendarWidget();var self=this;document.observe('jq:'+CUI.ReportSuiteSelector.EVENT_REPORT_SUITE_CHANGED,function(e){if(e.memo.initialSuite)return;self.changeReportSuite(e.memo.rsid);});var pages=o.pages,p,pp,cells,c,cc,reports=o.bookmarks,map={},r,rr,Report=OM.dashboard.Report;for(r=0,rr=reports.length;r<rr;++r){map[String(reports[r].id)]=(reports[r]=new Report(reports[r]));}
    for(p=0,pp=pages.length;p<pp;++p){cells=pages[p].cells;for(c=0,cc=cells.length;c<cc;++c){if(cells[c].bookmark_id){cells[c].report=map[cells[c].bookmark_id];}
    else if(cells[c].report_state){reports.push(cells[c].report=new Report(cells[c].report_state));}
        if(!cells[c].report){cells.splice(c--,1);--cc;}}}
    var db=(this.widgets.dashboard=new OM.dashboard.Dashboard(o));if(over.rs){db.setReportSuite(over.rs,true);}
    if(over.ob_segment_id){db.setSegment(over.ob_segment_id,over.segment_name);}
    if('period'in over){db.setDate(over);}
    setTimeout(db.refresh.bind(db),100);OM.Config.book=db;this.initializeActionBar();if(OM.Config.cacheMsg){this.cacheTimeMsg=this.addMessage(OM.Config.cacheMsg,'notice');$('cache_msg_refresh').observe('click',this.refresh.bind(this,true));}
    if(location.hash==='#edit_layout'||db.isEmpty()){this.layoutClick();}}).bind(this));return this;},setupCalendarWidget:function setupCalendarWidget(){var win=(this.changeDateWin=$('change_date_window')),rol=this.widgets.rolling_control,cal=(this.widgets.calendar=new OM.CalendarWidget({element_container:$('change_date_calendar'),dateRangeModel:this.models.date_range_model,showWeekSelectors:true,granularityEnabled:true}));cal.fader.setStyle({width:'0',height:'0',visibility:'hidden',display:'none'});cal.actionsForm.remove();this.calendarSelect=new OM.CustomSelect({element:$('change_date_calendar_select'),onchange:this.switchCalendar.bind(this)});this.calendarSelect.listElement.id='change_date_calendar_select_list';cal.dateBlock.onValidDate=function(){cal.onValidDate.apply(cal,arguments);cal.updateModel();rol.render();};cal.element.stopObserving('dblclick',cal.periodDoubleClick);cal.dateTitle.stopObserving('click');cal.activator.stopObserving('click',cal.show);this.updateDate=this.updateDate.bindAsEventListener(this);this.cancelDate=this.cancelDate.bindAsEventListener(this);$('change_date_form').on('submit',this.updateDate);$('change_date_update').on('click',this.updateDate);$('change_date_cancel').on('click',this.cancelDate);this.changeDateWin.on('click','.dateTitle',this.cancelDate);cal.activator.on('click',this.changeDateClick);cal.dateBlock.updateRangeInfo();cal.compareBlock.updateRangeInfo();$('calendar-widget-content').insert(cal.activator);$('calendar-widget-content').fire('cal:inserted');win.down('.semi-modal-title').insert(cal.dateTitle.addClassName('CalendarWidgetActivator'));$(document.body).insert(win);},changeDateClick:function changeDateClick(e){if(page_controller.widgets.calendar.activator.hasClassName('disabled')){return;}
    var cals=page_controller.widgets.dashboard.getUniqueCalendars();if(cals.length){page_controller.showCalendars(cals);}},showCalendars:function showCalendars(calendars,cell){this.calendarSelect.items=calendars;this.calendarSelect.buildItems();var first=calendars[0]||{text:MT,value:MT};this.calendarSelect.setValue(first.value,first.text,true);if(cell){this.calendarCell=cell;var left=(cell.element.getWidth()-this.changeDateWin.getWidth())>>1,top=(cell.element.getHeight()-this.changeDateWin.getHeight())>>1;this.changeDateWin.clonePosition(cell.element,{setWidth:false,setHeight:false,offsetLeft:left,offsetTop:top});}else{var top=$('action_bar').down('.CalendarWidgetActivator').cumulativeOffset().top;top-=parseInt(this.changeDateWin.down('.CalendarWidgetActivator').getStyle('top'),10);this.changeDateWin.setStyle({right:null,left:null,top:top+'px'});}},switchCalendar:function switchCalendar(value,text){var item=this.calendarSelect.items[+value];this.showCalendar(item.calendar.cells[0].report,true);if(this.calendarSelect.items.length>1){$('change_date_multiple').show();}},showCalendar:function showCalendar(report,multi){var calendar=this.widgets.calendar,date_roller=this.widgets.rolling_control;var view=multi?0:report.view;if(view===0||view===3){this.changeDateWin.removeClassName('hide-granularity');}
else{this.changeDateWin.addClassName('hide-granularity');}
    OM.Config.report_state.clean_report_vars.view=view;OM.Config.report_state.clean_report_vars.granularity=report.granularity;OM.Config.report_state.clean_report_vars.period_subselect=multi?null:report.period_subselect;date_roller.setStartFixed(report.lock_start?1:0);date_roller.setEndFixed(report.lock_end?1:0);this.updateRangeModel(report);calendar.calendar=OM.Calendar.createDefault();calendar.dateBlock.resetPreset();calendar.dateBlock.calendar=calendar.calendar;calendar.show();calendar.element.style.top='';$('change_date_multiple').hide();this.changeDateWin.show();},updateRangeModel:function updateRangeModel(report){var date_model=this.models.date_range_model,anchor=report.rs.calendar.anchor_date.split('-');OmniDate_setDefaultType(report.rs.calendar.type);OmniDate_setAnchor(+anchor[0],+anchor[1],+anchor[2]);date_model.setStartDate(OM.util.Date.parse(report.period_from));date_model.setEndDate(OM.util.Date.parse(report.period_to));date_model.setRangePeriodFlag(report.range_period?1:0);date_model._preset=report.preset;date_model.calcPresetType();date_model.notify();},updateDate:function updateDate(e){if(e.findElement()==$('change_date_form')){return(e.returnValue=false);}
    var date_model=this.models.date_range_model,calendar=this.widgets.calendar,date_roller=this.widgets.rolling_control,params={lock_start:date_roller.getStartFixed(),lock_end:date_roller.getEndFixed(),granularity:$F(calendar.granularityArea.down('select'))||OM.Config.report_state.clean_report_vars.granularity,preset:date_model.getPreset(),range_period:date_model.getRangePeriodFlag(),period_from:date_model.getStartDate().toLocaleString(),period_to:date_model.getEndDate().toLocaleString()};if(!date_model.getPeriod()||OmniDate_isCustom()){var diff=1+date_model.getEndDate().getDiffInDays(date_model.getStartDate()),s=date_model.getStartDate().getStandardDate();params.period=[s.getFullYear()-1900,s.getMonth().toPaddedString(2),s.getDate().toPaddedString(2),'D',diff].join(MT);}else{params.period=date_model.getPeriod().toYMD();}
    var item=this.calendarSelect.items[+this.calendarSelect.selectedValue];if(!this.calendarCell){this.removeMessage('platform_mismatch');this.changeState(params);}
    this.widgets.dashboard.setDate(params,item.calendar.cells);this.changeDateWin.hide();$(document.body).fire('om:dashboard.Controller.datechange',{params:params,cells:item.calendar.cells,global:!this.calendarCell});this.calendarCell=null;this.updateHistory();return(e.returnValue=false);},cancelDate:function cancelDate(e){if(this.changeDateWin){this.changeDateWin.hide();}
    this.calendarCell=null;if(this.widgets&&this.widgets.dashboard){this.widgets.dashboard.update();}},changeReportSuite:function changeReportSuite(id){id=String(id);var item=OM.Config.report_suite_options.find(function(item){return String(item.value)===id;});if(!item){return;}
    $(document.body).fire('om:dashboard.Controller.rschange',item);this.widgets.dashboard.unloading=true;setTimeout(function(){if(OM.Config.real_oid==198){page_controller.altered_state.override_rs=1;}
        var form=new Element('form');var d_url_input=new Element('input');var switch_accnt_input=new Element('input');form.setAttribute('method','post');form.setAttribute('action',$('rs_selector').getAttribute('data-change-report-suites-endpoint'));d_url_input.setAttribute('type','hidden');d_url_input.setAttribute('name','d_url');d_url_input.setAttribute('value',Base64.encode(OM.URL.overrideParams(location.href,page_controller.altered_state)));switch_accnt_input.setAttribute('type','hidden');switch_accnt_input.setAttribute('name','switch_accnt');switch_accnt_input.setAttribute('value',id);form.insert(d_url_input);form.insert(switch_accnt_input);$(document.body).insert(form);form.submit();},500);},changeSegment:function changeSegment(id,name){if(id===null){return;}
    this.removeMessage('platform_mismatch');this.widgets.dashboard.setSegment(id,name);this.changeState({ob_segment_id:id});$(document.body).fire('om:dashboard.Controller.segmentchange',{value:name,sc_seg_id:id});},changeState:function changeState(settings){for(var i in settings){this.altered_state[i]=settings[i]};var url=OM.URL.f('Report.ChangeState',settings,'/reports/index.html'),alt=OM.Config.alt_history_id||0,next=OM.Config.history_id;url=OM.URL.appendParams(url,{jpj:OM.Config.history_var,nocache:OM.Config.no_cache,next_history_var:next,alt_history_var:alt,dont_reset_reserved_vars:1});url=OM.URL.switchps('site_catalyst',url);this.linkDelay.start();new Ajax.Request(url,{onComplete:function(){var link=page_controller.linkDelay.stop().paused_link;if(link){clearTimeout(page_controller.linkDelay.paused_timer);location.href=link;}}});this.updateHistory();},sessionTimeout:function sessionTimeout(xhr){if(xhr.getStatus()!==403){return;}
    $('message_area').style.display='none';if(window.removeEventListener){window.removeEventListener('beforeunload',page_controller.beforeUnload,false);}
    else if(window.detachEvent){window.detachEvent('onbeforeunload',page_controller.beforeUnload);}
    location.reload();},beforeUnload:function beforeUnload(e){e=e||window.event;var db=page_controller.widgets.dashboard;if(page_controller.layoutClicked&&db.isDirty()){if(window.attachEvent){window.onerror=function(){return true};}
    return e.returnValue='Your dashboard has unsaved changes. Changes will be lost if you leave without saving.'.toLocaleString();}},initializeActionBar:function initializeActionBar(){YAHOO.omniture.StandardReportContainer.prototype.initializeActionBar.call(this);var tool;if(tool=$('report_tools')){OM.util.disableSelection(tool);}
    if(tool=$('preview_tool')){tool.on('click',this.previewClick.bindAsEventListener(this));}
    if(tool=$('layout_tool')){tool.on('click',this.layoutClick.bindAsEventListener(this));}
    if(tool=$('archive_tool')){tool.on('click',this.viewArchive.bindAsEventListener(this));}
    if(tool=$('add_page_tool')){tool.on('click',this.addPage.bindAsEventListener(this));}
    if(tool=$('paper_tool')){tool.on('click',this.togglePaperMenu=this.togglePaperMenu.bindAsEventListener(this));}
    if(tool=$('save_tool')){tool.on('click',this.saveClick.bindAsEventListener(this));}
    if(tool=$('saveas_tool')){tool.on('click',this.saveAsClick.bindAsEventListener(this));}
    if(tool=$('rename_tool')){tool.on('click',this.renameClick.bindAsEventListener(this));}
    if(tool=$('revert_tool')){tool.on('click',this.revertClick.bindAsEventListener(this));}
    if(tool=$('undo_tool')){tool.on('click',this.undoClick.bindAsEventListener(this));}
    if(tool=$('redo_tool')){tool.on('click',this.redoClick.bindAsEventListener(this));}
    if(tool=$('landing_tool')){tool.on('click',this.setLandingPage.bindAsEventListener(this));this.updateLandingPage();}
    if(tool=$('save_upgrade_cancel')){tool.on('click',function(){$('save_upgrade').hide();});}
    if(tool=$('save_upgrade_save')){tool.on('click',this.forceSaveClick.bindAsEventListener(this));}
    if(tool=$('save_upgrade_saveas')){tool.on('click',this.saveAsClick.bindAsEventListener(this));}
    this.updateAddPageTool();$(document.body).on('om:dashboard.pagechange',this.updateAddPageTool);(this.updateHistory=this.updateHistory.bindAsEventListener(this))();$(document.body).on('om:dashboard.historychange',this.updateHistory);$(document.body).on('om:dashboard.Cell.reportchange',this.updateHistory);$(document.body).on('om:dashboard.Report.titlechange',this.updateHistory);$(document.body).on('om:dashboard.ReportSettings.save',this.updateHistory);$(document.body).on('om:dashboard.saved',this.dashboardSaved.bindAsEventListener(this));},addPage:function addPage(e){this.widgets.dashboard.addPage();this.updateAddPageTool();},togglePaperMenu:function togglePaperMenu(e){$(document.body).stopObserving('click',this.togglePaperMenu);if($('paper_tool').hasClassName('tool_menu_open')){$('paper_tool').removeClassName('tool_menu_open').down('ul').removeClassName('show');var db=this.widgets.dashboard,a=e.findElement();if(a.up('#paper_ll')){db.setPaper('LETTER_LANDSCAPE');}
    if(a.up('#paper_lp')){db.setPaper('LETTER_PORTRAIT');}
    if(a.up('#paper_al')){db.setPaper('A4_LANDSCAPE');}
    if(a.up('#paper_ap')){db.setPaper('A4_PORTRAIT');}}else{this.updatePaper();$('paper_tool').addClassName('tool_menu_open').down('ul').addClassName('show');setTimeout($(document.body).observe.bind(document.body,'click',this.togglePaperMenu),200);}},previewClick:function previewClick(e){var body=$(document.body);if(body.hasClassName('show-paper')){this.hidePaper();}
else if(body.hasClassName('edit-layout')){this.hideEdit().showPaper();}
else{this.showPaper();}},layoutClick:function layoutClick(e){var body=$(document.body);if(body.hasClassName('edit-layout')){this.hideEdit();}
else if(body.hasClassName('show-paper')){this.hidePaper().showEdit();}
else{this.showEdit();}
    this.layoutClicked=true;},showPaper:function showPaper(){$(document.body).addClassName('show-paper');this.widgets.dashboard.updateShowPaper();if(!('subtitle_edit'in this.widgets)){this.widgets.subtitle_edit=null;OM.require('InlineEdit',(function(){var tokens=[{token:'<date>',find:/<date\s*\/?>/g,replace:OM.Config.rs_current_date,description:'Include the date and time the dashboard was published.'.toLocaleString()}];this.widgets.subtitle_edit=new OM.InlineEdit({text:this.widgets.dashboard.subtitle,maxLength:128,tokens:tokens,tokenAddText:'Add'.toLocaleString()});this.widgets.subtitle_edit.paddingRight=this.widgets.subtitle_edit.element.down('span').measure('padding-right');this.widgets.subtitle_edit.element.on('OWL:change',this.subtitleChange.bindAsEventListener(this));}).bind(this));}
    return this;},hidePaper:function hidePaper(){$(document.body).removeClassName('show-paper');return this;},showEdit:function showEdit(){$(document.body).addClassName('edit-layout');jQuery('.js-endor-page').data('page').closeOuterRail();jQuery('.js-endor-page').data('page').setActiveLeftInnerRailPanel('');jQuery('.js-endor-page').data('page').setActiveRightInnerRailPanel('');$('layout_tool').addClassName('is-selected');this.widgets.dashboard.updateEditLayout();return this;},hideEdit:function hideEdit(){$(document.body).removeClassName('edit-layout');$('layout_tool').removeClassName('is-selected');jQuery('.js-endor-page').data('page').setActiveLeftInnerRailPanel('my-analytics-rail');this.widgets.dashboard.closeEditLayout();return this;},showLeftNav:function showLeftNav(){if(this.smplnav_effect){this.smplnav_effect.cancel();}
    if(this.leftnav_effect){this.leftnav_effect.cancel();}
    this.smplnav_effect=new Effect.SlideDown($('simple_nav').removeClassName('collapsed').down('.nav_content').setStyle(this.slideStyles),{duration:.3});this.leftnav_effect=new Effect.SlideDown($('left_nav').removeClassName('collapsed').down('.nav_content').setStyle(this.slideStyles),{duration:.3});return this;},hideLeftNav:function hideLeftNav(){if(this.smplnav_effect){this.smplnav_effect.cancel();}
    if(this.leftnav_effect){this.leftnav_effect.cancel();}
    this.smplnav_effect=new Effect.SlideUp($('simple_nav').down('.nav_content').setStyle(this.slideStyles),{duration:.3,afterFinish:function(){$('simple_nav').addClassName('collapsed');}});this.leftnav_effect=new Effect.SlideUp($('left_nav').down('.nav_content').setStyle(this.slideStyles),{duration:.3,afterFinish:function(){$('left_nav').addClassName('collapsed');}});return this;},slideStyles:{height:null},toggleNav:function toggleNav(e){var a=e.findElement(),att=a.readAttribute('data-user-attr'),c=a.up('.NavigationMenu-container'),hidden=c&&c.hasClassName('collapsed'),title=a.title,alt=a.readAttribute('data-alt-title'),preview_mode=$(document.body).hasClassName('show-paper'),layout_mode=$(document.body).hasClassName('edit-layout'),mode=preview_mode||layout_mode;if(!mode&&att){Omniture.user.setPersistentAttribute(att,hidden?'0':'1');}
    if(!mode&&alt){a.writeAttribute('data-alt-title',title).title=alt;}
    if(preview_mode){this.hidePaper();}
    if(layout_mode){this.hideEdit();}
    if(mode){this.showLeftNav();}
    else if(c){c.toggleClassName('collapsed');}
    return this;},titleChange:function titleChange(text){var db=this.widgets.dashboard,element;document.title=db.title=text;this.updatePageTitle(text);db.history.undo.push({});this.updateHistory();},updatePageTitle:function updatePageTitle(text){jQuery('.endor-BlackBar').data('blackBar').setTitle(text);var c=jQuery('.endor-Crumbs').data('crumbs');c.removeItem();c.addItem({title:text,isNavigable:false,isAvailable:false});},subtitleChange:function subtitleChange(e){var db=this.widgets.dashboard,text=e.memo.text;db.custom_subtitle=true;db.subtitle=text;db.updateShowPaper().history.undo.push({});this.updateHistory();},dashboardSaved:function dashboardSaved(e){var db=this.widgets.dashboard,element,menu,changed=e.memo.prev_id!==db.id;if(changed){element=new Element('li',{id:'pr_d_'+db.id+'_header'}).update('<a href="'+OM.URL.book(db.id,true)+'">'+db.title.escapeHTML()+'</a>');if(menu=$('d_legacy_header')){menu.insert({before:element});}
else if(menu=$('pub_s_m_d_header')){menu.insert(element);}
    this.updatePageTitle(document.title=db.title);if(element=$('action_bar').down('.shared-by')){element.remove();}
    if(this.widgets.title_edit){this.widgets.title_edit.setText(db.title);}}else{if(element=$('save_tool')){element.removeClassName('tool-working').down('.endor-ActionButton-label').update('Save'.toLocaleString());}}
    this.updateHistory();},updateAddPageTool:function updateAddPageTool(){if(OM.Config.book.pages.length>=MAX_PAGES){$('add_page_tool').addClassName('disabled').title=MAX_PAGES_MESSAGE;}
else{$('add_page_tool').removeClassName('disabled').title=MT;}},setupDownloadTool:function setupDownloadTool(){var tool=$('download_tool');if(tool){tool.observe('click',this.download.bindAsEventListener(this));}},setLandingPage:function setLandingPage(e){var prev=OM.Config.user_landing_page,db=this.widgets.dashboard,reset=(prev===('dashboard:'+(db.id||'oid_'+OM.Config.real_oid)))?1:0;new Ajax.Request(OM.URL.suite('User.SetLanding',{dashboard:db.id||'oid_'+OM.Config.real_oid,reset:reset}),{method:'post',onComplete:function(xhr){var response=xhr.responseJSON||OM.getResponseJSONFromResponseText(xhr.responseText)||{failure:true,success:false,message:'Your change could not be saved.'.toLocaleString()};page_controller.addMessage(response.message,response.success?'success':'failure');if(response.success){page_controller.updateLandingPage(response.user_landing_page);}}});},updateHistory:function updateHistory(){var db=this.widgets.dashboard,undo=db.history.undo,redo=db.history.redo,tool,dirty=db.isDirty();if(tool=$('email_tool')){OM.Config.real_oid==198?tool.show():tool.hide();}
    if(tool=$('save_tool')){(dirty&&db.is_owner)?tool.removeClassName('is-disabled').show():(db.is_owner?tool.addClassName('is-disabled').show():tool.hide());}
    if(tool=$('revert_tool')){undo.length?tool.removeClassName('disabled'):tool.addClassName('disabled');}
    if(tool=$('undo_tool')){undo.length?tool.removeClassName('disabled'):tool.addClassName('disabled');}
    if(tool=$('redo_tool')){redo.length?tool.removeClassName('disabled'):tool.addClassName('disabled');}},revertClick:function revertClick(e){this.widgets.dashboard.revert();},undoClick:function undoClick(e){this.widgets.dashboard.undo();},redoClick:function redoClick(e){this.widgets.dashboard.redo();},saveClick:function saveClick(e){if($('save_tool').hasClassName('tool-working')||$('save_tool').hasClassName('is-disabled')){return;}
    var min_compatible_version=+OM.Config.bookmarks_min_compatible_version,loss=false,report,reports=this.widgets.dashboard.bookmarks,r,rr=reports.length;for(r=0;r<rr&&!loss;++r){if((report=reports[r]).dirty&&report.id>0&&min_compatible_version>+report.version){loss=true;}}
    if(loss){var button=$('save_tool').getWidth(),win=$('save_upgrade').getWidth(),left=(button-win)/2;$('save_upgrade').clonePosition('save_tool',{setWidth:false,setHeight:false,offsetLeft:left,offsetTop:-9}).show();return false;}
    $('save_tool').addClassName('tool-working').down('.endor-ActionButton-label').update('Saving...'.toLocaleString());this.widgets.dashboard.save();},forceSaveClick:function forceSaveClick(e){if($('save_tool').hasClassName('tool-working')||$('save_tool').hasClassName('is-disabled')){return;}
    $('save_upgrade').hide();$('save_tool').addClassName('tool-working').down('.endor-ActionButton-label').update('Saving...'.toLocaleString());this.widgets.dashboard.save();},saveAsClick:function saveAsClick(e){if(jQuery('#more-popup').data('popover')){jQuery('#more-popup').data('popover').hide();}
    if($('saveas_tool').hasClassName('tool-working')||$('saveas_tool').hasClassName('disabled')){return;}
    $('save_upgrade').hide();var as=window.prompt('Save this dashboard as:'.toLocaleString(),this.widgets.dashboard.title);if(as){this.widgets.dashboard.save(as);}},renameClick:function renameClick(e){jQuery('#more-popup').data('popover').hide();var newName=window.prompt('Rename dashboard to:'.toLocaleString(),this.widgets.dashboard.title);if(!newName||newName===this.widgets.dashboard.title)return;this.titleChange(newName);this.layoutClicked=true;},updateLandingPage:function updateLandingPage(new_landing){OM.Config.user_landing_page=new_landing===undefined?OM.Config.user_landing_page:new_landing;var is_landing=OM.Config.user_landing_page===('dashboard:'+(this.widgets.dashboard.id||'oid_'+OM.Config.real_oid)),text=(is_landing?'Reset Landing Page':'Set As Landing Page').toLocaleString(),tool=$('landing_tool');if(tool){tool.update('<i class="coral-Icon coral-Icon--page"></i><span>&nbsp'+OM.Security.HtmlEncode(text)+'</span>');}},updatePaper:function updatePaper(){var paper=this.widgets.dashboard.page_style.toLowerCase().split('_'),id='paper_'+paper[0].substr(0,1)+paper[1].substr(0,1),prev=$('paper_tool').down('.selected');if(prev){prev.removeClassName('selected');}
    $(id).down('i').addClassName('selected');},download:function download(e){var id=page_controller.addMessage('Your dashboard is being generated in the following format: '.toLocaleString()+'PDF','alert');this.timeout_msg_id=0;var dp=new DownloadPoller();if(OM.Config.real_oid==198){dp.timeout(function(){this.timeout_msg_id=page_controller.addMessage('Your report is taking too long to be downloaded immediately. You may click on the email icon to have it emailed to you.'.localized(),"alert");}.bind(this),45000);}
    dp.success(function(){page_controller.removeMessage(this.timeout_msg_id);page_controller.removeMessage(id);}.bind(this));var dp_cookie=dp.start();var dashboard=page_controller.widgets.dashboard,hidden='display:block; position:absolute; left:-9px; top:-9px; width:1px; height:1px; border:none; overflow:hidden',params={oid:OM.Config.report_state.oid,timestamp:+(new Date()),download:1,dnload_cookie:dp_cookie},form=new Element('form',{style:hidden,target:'iframe_'+id,method:'post',action:OM.URL.suite('Dashboard.CreatePDF',params)}),input=new Element('input',{type:'hidden',name:'dashboard',value:Object.toJSON(dashboard)}),iframe=new Element('iframe',{style:hidden,name:'iframe_'+id,id:'iframe_'+id,src:'javascript:"";'}),remove=!(e.altKey||e.ctrlKey||e.shiftKey)&&!window.ActiveXObject;$(document.body).insert(form.insert(input)).insert(iframe);function onload(){page_controller.removeMessage(id);if(remove){setTimeout(function(){iframe.remove();form.remove()},1000);}}
    iframe.onload=(iframe.onreadystatechange=onload);form.submit();page_controller.trackEvents('event50','Downloads Initiated');},printReport:function printReport(){var dashboard=page_controller.widgets.dashboard,url=OM.URL.suite('Dashboard.Print',{oid:OM.Config.report_state.oid,title:dashboard.title});OM.util.popwin(url,'print_win',1024,768).focus();},setupEmailTool:function setupEmailTool(){YAHOO.omniture.StandardReportContainer.prototype.setupEmailTool.call(this);var btn;if(!(btn=$('email_tool'))){return;}
    btn.stopObserving('click').on('click',function(){if($('email_tool').hasClassName('disabled')){return;}
        var that=page_controller;if(that.handleToolClick(that.rt_widgets.add_em_panel,true)){that.trackEvents('event51','Schedules Initiated');var db=that.widgets.dashboard;if(db.isDirty()&&confirm('Unsaved changes will not appear in a sent dashboard.\r\n\r\nWould you like to save now?'.toLocaleString())){if(db.is_owner){that.saveClick();}else{that.saveAsClick();}}}});},getScheduleSettings:function getScheduleSettings(){var dashboard=page_controller.widgets.dashboard;return{method:'POST',postData:'dashboard='+encodeURIComponent(Object.toJSON(dashboard))}},viewArchive:function viewArchive(){var dashboard=page_controller.widgets.dashboard,url=OM.URL.suite('ReportArchive.Index',{'search_params[schedule_type_id]':OM.Config.schedule_type_id,'search_params[report_id]':dashboard.id});setTimeout(function(){location.href=url;},200);},addMessage:function addMessage(msg,type,cb,id){var div=new Element('div').addClassName('coral-Alert coral-Alert--'+type);if(id){div.id=id;this.removeMessage(id);}else{id=div.identify();}
    var closeBtn=new Element('button',{type:'button',class:'coral-MinimalButton coral-Alert-closeButton',title:"Close"});closeBtn.insert('<i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon"></i>');closeBtn.observe('click',this.removeMessage.bind(this,id));div.insert(closeBtn);div.insert('<i class="coral-Alert-typeIcon coral-Icon coral-Icon--sizeS coral-Icon--alert"></i>');$('message_area').insert(div.insert(msg)).style.display='block';if(cb){div.observe('om:load',cb);div.fire('om:load');}
    return id;},removeMessage:function removeMessage(id){var area=$('message_area'),div=area.down('#'+id);if(div){div.remove();if(area.empty()){area.hide();}}},changeSettings:function changeSettings(settings,loading){settings=OM.util.parseParamString(settings);var db=this.widgets.dashboard,pages=db.pages,cells,p,pp,i,l,delta,seg_select;this.widgets.dashboard.loadingAll();for(p=0,pp=pages.length;p<pp;++p){cells=pages[p];for(i=0,l=cells.length;i<l;++i){if(delta=cells[i].deltaVars(settings)){cells[i].newPanel(delta,true);}}}
    this.updateHistory();},refresh:function refresh(hard){if(this.cacheTimeMsg&&hard){this.removeMessage(this.cacheTimeMsg);this.cacheTimeMsg=null;}
    this.widgets.dashboard.refresh(hard);}});})();var CookieUtil={createCookie:function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else{var expires="";}
    document.cookie=name+"="+value+expires+"; domain="+Omniture.Config.COOKIE_DOMAIN+";path=/;secure";},readCookie:function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
    return null;},eraseCookie:function(name){this.createCookie(name,"",-1);}};var DownloadPoller=function(){this._prefix='dpcookie';this._timeout_interval=45000;this._interval=1000;this._timeout=function(){};this._success=function(){};this._failure=function(){};this._id=Math.round((new Date()).getTime()/1000);};DownloadPoller.prototype.timeout=function(timeoutFn,timeout_interval){this._timeout_interval=timeout_interval||45000;this._timeout=timeoutFn;};DownloadPoller.prototype.failure=function(failureFn){this._failure=failureFn;};DownloadPoller.prototype.success=function(successFn){this._success=successFn;};DownloadPoller.prototype._end=function(){CookieUtil.eraseCookie(this.getCookieName());clearTimeout(this._timeout_id);clearInterval(this._interval_id);}
DownloadPoller.prototype.readCookie=function(){return CookieUtil.readCookie(this.getCookieName());};DownloadPoller.prototype.getCookieName=function(){return this._prefix+this._id;};DownloadPoller.prototype.start=function(){var self=this;this._interval_id=setInterval(function(){var download_complete=self.readCookie();if(download_complete==1){self._end();self._success();}},this._interval);this._timeout_id=setTimeout(function(){var download_complete=self.readCookie();if(download_complete==1){self._end();}else{self.failure();self._timeout();}},this._timeout_interval);CookieUtil.createCookie(this.getCookieName(),0,1);return this.getCookieName();};Omniture.Model.DateRangeModel=function(id,model_params)
{this.init(id,model_params);}
YAHOO.lang.extend(Omniture.Model.DateRangeModel,YAHOO.omniture.Model,{init:function(id,options)
{Omniture.Model.DateRangeModel.superclass.init.call(this,id);this.MODE_WEEK=0;this.MODE_MONTH=1;this.MODE_YEAR=3;this.RANGE_STANDARD=1;this.RANGE_COMPARE=2;this._start_date=Omniture.util.Date.parse(Omniture.Config.start_date_cache||options.start_date);this._end_date=Omniture.util.Date.parse(Omniture.Config.end_date_cache||options.end_date);this._preset=Omniture.Config.preset_cache||options.preset;this.calcPresetType();this._period=options.period||null;this._range_period_flag=parseInt(options.range_period)||0;this._period_type="";this._compare_start_date=Omniture.util.Date.parse(Omniture.Config.compare_start_date_cache||options.compare_start_date);this._compare_end_date=Omniture.util.Date.parse(Omniture.Config.compare_end_date_cache||options.compare_end_date);this._compare_preset=Omniture.Config.compare_preset_cache||options.compare_preset;this._compare_period=options.compare_period||null;this._active_start_date=Omniture.util.Date.parse(options.active_start_date);this._active_end_date=Omniture.util.Date.parse(Omniture.Config.active_end_date_cache||options.active_end_date);this._updatePeriod(this.RANGE_STANDARD);this._updatePeriod(this.RANGE_COMPARE);this._recent_date_ranges=options.recent_date_ranges||Omniture.Config.recent_date_range_js;if(this._start_date==null){this._start_date=OmniDate_createInstance();this._start_date=this._start_date.getStartOfCalMonth();}
    if(this._end_date==null){this._end_date=OmniDate_createInstance();this._end_date=this._end_date.getEndOfCalMonth();}},getActiveStartDate:function()
{return this._active_start_date;},getActiveEndDate:function()
{return this._active_end_date;},getPreset:function()
{return this._preset;},getPresetType:function()
{return this._preset_type;},setPresetType:function(p_type)
{this._preset_type=p_type;},calcPresetType:function(){var types={'Today':'day','Yesterday':'day','Last 7 days':'day','Last 30 days':'day','Last 60 days':'day','Last 90 days':'day','This week':'week','Last week':'week','Last 2 weeks':'week','Last 3 weeks':'week','Last 4 weeks':'week','Last 53 weeks':'week','This month':'month','Last month':'month','Last 2 months':'month','Last 3 months':'month','Last 6 months':'month','Last 12 months':'month','Last 13 months':'month','This year':'year','Last year':'year'};this._preset_type=types[this._preset]||null;},getComparePreset:function()
{return this._compare_preset;},setRange:function(start_date,end_date,period){this._start_date=start_date;this._end_date=end_date;this._period=period;},setRangePeriodFlag:function(state){this._range_period_flag=state;},getRangePeriodFlag:function(){if(this.getPreset())
{return 1;}
else
{return this._range_period_flag;}},setPeriodType:function(t){this._period_type=t;},getPeriodType:function(){return this._period_type;},getStartDate:function()
{return this._start_date;},setStartDate:function(start_date)
{this._start_date=start_date;this._updatePeriod(this.RANGE_STANDARD);},getEndDate:function()
{return this._end_date;},setEndDate:function(end_date)
{this._end_date=end_date;this._updatePeriod(this.RANGE_STANDARD);},getPeriod:function(){return this._period;},getCompareStartDate:function()
{return this._compare_start_date;},setCompareStartDate:function(start_date)
{this._compare_start_date=start_date;this._updatePeriod(this.RANGE_COMPARE);},getCompareEndDate:function()
{return this._compare_end_date;},setCompareEndDate:function(end_date)
{this._compare_end_date=end_date;this._updatePeriod(this.RANGE_COMPARE);},getComparePeriod:function(){return this._compare_period;},setRecentDateRanges:function(date_ranges){this._recent_date_ranges=date_ranges;},getRecentDateRanges:function(){return this._recent_date_ranges;},_updatePeriod:function(range_num){if(range_num==this.RANGE_STANDARD){this._period=Omniture.util.Period.getFromRange(this._start_date,this._end_date);}
else{this._compare_period=Omniture.util.Period.getFromRange(this._compare_start_date,this._compare_end_date);}},updateDateRanges:function(start_date,end_date,preset,compare_start_date,compare_end_date,compare_preset,is_notify_observers)
{this._start_date=OmniDate_createInstance(start_date);this._end_date=OmniDate_createInstance(end_date);this._preset=preset;this._updatePeriod(this.RANGE_STANDARD);if(compare_start_date!=null&&compare_end_date!=null){this._compare_start_date=OmniDate_createInstance(compare_start_date);this._compare_end_date=OmniDate_createInstance(compare_end_date);this._compare_preset=compare_preset;this._updatePeriod(this.RANGE_COMPARE);}
else{this._compare_start_date=null;this._compare_end_date=null;this._compare_preset=null;this._compare_period=null;}
    if(is_notify_observers){this.notify();}},setAllUsingObject:function(model)
{this._start_date=model.getStartDate();this._end_date=model.getEndDate();this._preset=model.getPreset();this._preset_type=model.getPresetType();this._period=model.getPeriod();this._range_period_flag=model.getRangePeriodFlag();this._compare_start_date=model.getCompareStartDate();this._compare_end_date=model.getCompareEndDate();this._compare_preset=model.getComparePreset();this._compare_period=model.getComparePeriod();this._active_start_date=model.getActiveStartDate();this._active_end_date=model.getActiveEndDate();},getRollingOptions:function()
{if(!this._range_period_flag&&this._period)
{return this._period._type;}
else
{return this._preset_type||"day";}}});Omniture.Control.RollingDateControl=function(dom_id,control_params)
{this.init(dom_id,control_params);};YAHOO.lang.extend(Omniture.Control.RollingDateControl,YAHOO.omniture.Widget,{init:function(dom_id,control_params)
{Omniture.Control.RollingDateControl.superclass.init.call(this,dom_id);YAHOO.util.Event.onDOMReady(function(){YAHOO.util.Event.onContentReady(this.getDomId(),this._renderContent,this,true);},this,true);this.GRAN_STRINGS=control_params.gran_strings;this._start_fixed=control_params.start_fixed;this._end_fixed=control_params.end_fixed;},setModel:function(model)
{Omniture.Control.RollingDateControl.superclass.setModel.call(this,model);model.attachObserver(this);},getStartFixed:function()
{return(this._start_fixed_sel&&+this._start_fixed_sel.value==Omniture.Config.OM_ROLLING_DATE_FIXED);},setStartFixed:function(fixed)
{for(var i=0;i<this._start_fixed_sel.length;i++){if(this._start_fixed_sel[i].value==fixed){this._start_fixed_sel[i].selected=true;}}},getStartGranularity:function()
{if(this.getStartFixed()){return null;}
    if(this.getEndFixed()){return Omniture.Config.OM_ROLLING_DATE_DAILY;}
    return this.getGranularity();},getGranularity:function()
{var C=Omniture.Config;var force_daily=!this._model||OmniDate_isCustom()&&!this._model._preset;switch(force_daily||this._model.getRollingOptions()){case'year':return C.OM_ROLLING_DATE_YEARLY;break;case'quarter':return C.OM_ROLLING_DATE_QUARTERLY;break;case'month':return C.OM_ROLLING_DATE_MONTHLY;break;case'week':return C.OM_ROLLING_DATE_WEEKLY;break;case'day':default:return C.OM_ROLLING_DATE_DAILY;break;}},getEndFixed:function()
{return(this._end_fixed_sel&&+this._end_fixed_sel.value==Omniture.Config.OM_ROLLING_DATE_FIXED)},setEndFixed:function(fixed)
{for(var i=0;i<this._end_fixed_sel.length;i++){if(this._end_fixed_sel[i].value==fixed){this._end_fixed_sel[i].selected=true;}}},getEndGranularity:function()
{if(this.getEndFixed()){return null;}
    if(this.getStartFixed()){return Omniture.Config.OM_ROLLING_DATE_DAILY;}
    return this.getGranularity();},render:function()
{var Dom=YAHOO.util.Dom;var id=this.getDomId();if(this._model){var start_gran_c=Dom.get(id+'_start_gran');start_gran_c.innerHTML=this._formatGranularity(this.getStartGranularity());var start_date_c=Dom.get(id+'_start_date');start_date_c.innerHTML=this._model.getStartDate().toString();var end_gran_c=Dom.get(id+'_end_gran');end_gran_c.innerHTML=this._formatGranularity(this.getEndGranularity());var end_date_c=Dom.get(id+'_end_date');end_date_c.innerHTML=this._model.getEndDate().toString();}},attachListeners:function()
{var Event=YAHOO.util.Event;var id=this.getDomId();Event.removeListener("sel_"+id+"_start_fixed","change",this.render);Event.addListener("sel_"+id+"_start_fixed","change",this.render,this,true);Event.removeListener("sel_"+id+"_end_fixed","change",this.render);Event.addListener("sel_"+id+"_end_fixed","change",this.render,this,true);},_renderContent:function(){Omniture.Control.RollingDateControl.superclass._renderContent.call(this);var id=this.getDomId();this._start_fixed_sel=YAHOO.util.Dom.get("sel_"+id+"_start_fixed");this.setStartFixed(this._start_fixed);this._end_fixed_sel=YAHOO.util.Dom.get("sel_"+id+"_end_fixed");this.setEndFixed(this._end_fixed);this.render();},_formatGranularity:function(granularity)
{if(!granularity){return'';}
    return this.GRAN_STRINGS[granularity];}});Omniture.Control.BubbleHelpControl=function(element_id)
{};Omniture.Control.BubbleHelpControl.display_help=function(element_id,keyword,submit_url,swap,timeout){bubble_load_img=document.createElement('img');bubble_load_img.src=Omniture.l10n.getimage_url('load_bubble_help');if(!window.bubble_timers){window.bubble_timers=new Array();}
    if(!window.bubble_cache){window.bubble_cache=new Array();}
    this.element_id=element_id;var bubble_container=document.getElementById(element_id);if(!bubble_container){bubble_container=document.createElement('div');bubble_container.className='bubble_help_top_container';bubble_container.id=element_id;var main_body=document.getElementById('bodyid');main_body.appendChild(bubble_container);}
    bubble_container.style.visibility='visible';var help_text=YAHOO.util.Dom.getElementsByClassName('help_text','span',bubble_container);help_text=help_text[0];if(bubble_container.innerHTML==''||help_text.id=='loader'){if(window.bubble_cache[keyword]){var result=window.bubble_cache[keyword];result.argument=new Array();result.argument[0]=element_id;result.argument[1]=keyword;Omniture.Control.BubbleHelpControl.setBubbleHelpHTML(window.bubble_cache[keyword],swap);}else{var callback={success:this.setBubbleHelpHTML,failure:this.failure,scope:this,argument:[element_id,keyword,swap]};submit_url=submit_url+'&keyword='+keyword;YAHOO.util.Connect.asyncRequest('GET',submit_url,callback,null);bubble_img=document.getElementById(element_id+'_img');xy=YAHOO.util.Dom.getXY(bubble_img);if((xy[0]-185)<=0||swap==1){YAHOO.util.Dom.setX(element_id,xy[0]);var reverse_img=true;}else{YAHOO.util.Dom.setX(element_id,xy[0]-185);var reverse_img=false;}
        YAHOO.util.Dom.setY(element_id,xy[1]-68);if(help_text&&help_text.id=='loader'){Omniture.Control.BubbleHelpControl.showBubbleLoader(bubble_container,element_id);}else{Omniture.Control.BubbleHelpControl.createBubbleLoader(bubble_container,element_id,reverse_img);}}
        if(this.current_bubble&&this.current_bubble!=element_id){Omniture.Control.BubbleHelpControl.hideBubbleHelp('',this.current_bubble);}}else{var xy=Omniture.Control.BubbleHelpControl.getBubbleImgPosition(element_id);if((xy[0]-185)<=0||swap){var offsetLeft=xy[0];}else{var offsetLeft=xy[0]-185;}
        YAHOO.util.Dom.setX(element_id,offsetLeft);YAHOO.util.Dom.setStyle(element_id,'visibility','visible');if(this.current_bubble&&this.current_bubble!=element_id){Omniture.Control.BubbleHelpControl.hideBubbleHelp('',this.current_bubble);}
        var current=this;current.id=element_id;clearTimeout(window.bubble_timers[element_id]);if(timeout){time=timeout;}else{time=5000;}
        window.bubble_timers[element_id]=setTimeout(function(){Omniture.Control.BubbleHelpControl.hideBubbleHelp('',current.id);},time);}
    var args={id:element_id,timeout:timeout};YAHOO.util.Event.onAvailable(element_id+'_close_img',Omniture.Control.BubbleHelpControl.setMouseEvents,args);this.current_bubble=element_id;}
Omniture.Control.BubbleHelpControl.getBubbleImgPosition=function(id){var bubble_img=document.getElementById(id+'_img');var xy=YAHOO.util.Dom.getXY(bubble_img);return xy;}
Omniture.Control.BubbleHelpControl.setBubbleHelpHTML=function(result,swap){if(window.bubble_cache){window.bubble_cache[result.argument[1]]=result;}
    var id=result.argument[0];var bubble_container=document.getElementById(id);if(!bubble_container){return false;}
    var xy=Omniture.Control.BubbleHelpControl.getBubbleImgPosition(id);if((xy[0]-185)<=0||swap==1||result.argument[2]==1){var offsetLeft=xy[0];}else{var offsetLeft=xy[0]-185;}
    tmp=document.createElement("div");tmp.className="bubble_help_top_container";tmp.style.visibility='hidden';tmp.innerHTML=result.responseText;document.body.appendChild(tmp);var help_text=YAHOO.util.Dom.getElementsByClassName('help_text','span',tmp);help_text=help_text[0];var offsetHeight=help_text.offsetHeight;tmp.parentNode.removeChild(tmp);if(offsetHeight<28){offsetHeight=28;}
    var offsetTop=xy[1]-offsetHeight-48;YAHOO.util.Dom.setX(id,offsetLeft);YAHOO.util.Dom.setY(id,offsetTop);bubble_container.innerHTML=result.responseText;var children=YAHOO.util.Dom.getChildren(bubble_container);children[0].style.height=offsetHeight+20+'px';var help_arrow=YAHOO.util.Dom.getElementsByClassName('bubble_help_arrow','div',bubble_container);help_arrow[0].style.bottom='-20px';help_arrow[0].style.right='-8px';var close_icon=YAHOO.util.Dom.getElementsByClassName('bubble_close_icon','img',bubble_container);close_icon=close_icon[0];close_icon.id=id+'_close_img';if(offsetLeft==xy[0]||swap==1||result.argument[2]==1){this.reverseImages(bubble_container);}}
Omniture.Control.BubbleHelpControl.setBubbleHelpCache=function(element_id,key,definition){if(!window.bubble_cache){window.bubble_cache=new Array();}
    var result=new Object;result.argument=new Array();result.argument[0]=element_id;result.argument[1]=key;result.responseText="<span class='help_text' style='text-align:left;'>"+Omniture.Security.HtmlEncode(definition)+"</span>"
    +"<img class='bubble_close_icon' src='"+Omniture.Config.STATIC_URL+"/images/icons/close_icon_grey.gif'></img>"
    +"<div class='bubble_help_arrow bubble_help_arrow_right'></div>";if(window.bubble_cache){window.bubble_cache[key]=result;}}
Omniture.Control.BubbleHelpControl.reverseImages=function(bubble_container){var bubble_help_arrow=YAHOO.util.Dom.getElementsByClassName('bubble_help_arrow','div',bubble_container);bubble_help_arrow=bubble_help_arrow[0];if(bubble_help_arrow){YAHOO.util.Dom.setStyle(bubble_help_arrow,'left','-8px');YAHOO.util.Dom.removeClass(bubble_help_arrow,'bubble_help_arrow_right','');YAHOO.util.Dom.addClass(bubble_help_arrow,'bubble_help_arrow_left');}}
Omniture.Control.BubbleHelpControl.setMouseEvents=function(args){var id=args.id,timeout=args.timeout,close_icon=document.getElementById(id+'_close_img'),bubble_container=document.getElementById(id);YAHOO.util.Event.addListener(close_icon,'mouseover',Omniture.Control.BubbleHelpControl.mouseover_hover_image,close_icon,true);YAHOO.util.Event.addListener(close_icon,'mouseout',Omniture.Control.BubbleHelpControl.mouseout_hover_image,close_icon,true);YAHOO.util.Event.addListener(close_icon,'mouseup',Omniture.Control.BubbleHelpControl.hideBubbleHelp,id,true);YAHOO.util.Event.addListener(id,'mouseout',Omniture.Control.BubbleHelpControl.hideBubbleTimeout,id,true);YAHOO.util.Event.addListener(id,'mouseover',Omniture.Control.BubbleHelpControl.bubbleClearTimeout,id,true);var current=this;current.id=id;clearTimeout(window.bubble_timers[id]);var time=timeout||5000;window.bubble_timers[id]=setTimeout(function(){Omniture.Control.BubbleHelpControl.hideBubbleHelp('',current.id);},time);}
Omniture.Control.BubbleHelpControl.hideBubbleTimeout=function(e,id){bubble_help=document.getElementById(id);if(bubble_help.style.visibility!="hidden"){var hideCurrent=this;hideCurrent.id=id;clearTimeout(window.bubble_timers[id]);window.bubble_timers[id]=setTimeout(function(){Omniture.Control.BubbleHelpControl.hideBubbleHelp('',hideCurrent.id);},3000);}}
Omniture.Control.BubbleHelpControl.bubbleClearTimeout=function(e,id){var current=this;current.id=id;for(id in window.bubble_timers)if(window.bubble_timers.hasOwnProperty(id)){clearTimeout(window.bubble_timers[id]);}
    window.bubble_timers=new Array();}
Omniture.Control.BubbleHelpControl.hideBubbleHelp=function(e,obj){if(obj){for(id in window.bubble_timers)if(window.bubble_timers.hasOwnProperty(id)){clearTimeout(window.bubble_timers[id]);}
    window.bubble_timers=new Array();YAHOO.util.Dom.setStyle(obj,'visibility','hidden');}}
Omniture.Control.BubbleHelpControl.mouseover_hover_image=function(e,obj){obj.src=obj.src.replace(/close_icon_grey.gif/,"close_icon.gif");}
Omniture.Control.BubbleHelpControl.mouseout_hover_image=function(e,obj){obj.src=obj.src.replace(/close_icon.gif/,"close_icon_grey.gif");}
Omniture.Control.BubbleHelpControl.showBubbleLoader=function(top_container,id){YAHOO.util.Dom.setStyle(id,'visibility','visible');}
Omniture.Control.BubbleHelpControl.createBubbleLoader=function(top_container,id,reverse_img){help_text=document.createElement('span');help_text.className='help_text';help_text.id='loader';bubble_load_img=document.createElement('img');bubble_load_img.src=Omniture.Config.STATIC_URL+'/images/blackcat/wait-16.gif';help_text.appendChild(bubble_load_img);bubble_close_icon=document.createElement('img');bubble_close_icon.className='bubble_close_icon';bubble_close_icon.src=Omniture.Config.PLATFORM_URL+'/images/Icons/close_icon_grey.gif';bubble_close_icon.id=id+"_close_img_loader";top_container.appendChild(help_text);top_container.appendChild(bubble_close_icon);var help_arrow=document.createElement('div');help_arrow.className='bubble_help_arrow bubble_help_arrow_right';top_container.appendChild(help_arrow);var help_arrow=YAHOO.util.Dom.getElementsByClassName('bubble_help_arrow','div',top_container);help_arrow[0].style.bottom='-20px';help_arrow[0].style.right='-8px';YAHOO.util.Event.addListener(id+'_close_img_loader','mouseover',Omniture.Control.BubbleHelpControl.mouseover_hover_image,bubble_close_icon,true);YAHOO.util.Event.addListener(id+'_close_img_loader','mouseout',Omniture.Control.BubbleHelpControl.mouseout_hover_image,bubble_close_icon,true);YAHOO.util.Event.addListener(id+'_close_img_loader','mouseup',Omniture.Control.BubbleHelpControl.hideBubbleHelp,top_container,true);if(reverse_img){this.reverseImages(top_container);}}