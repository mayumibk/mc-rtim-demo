!function(a){var b="jwv7ouu";a.CUI&&a.CUI.options&&a.CUI.options.typeKitId&&(b=a.CUI.options.typeKitId);var c={kitId:b,scriptTimeout:3e3};if(!a.Typekit){var d=document.getElementsByTagName("html")[0];d.className+=" wf-loading";var e=setTimeout(function(){d.className=d.className.replace(/(\s|^)wf-loading(\s|$)/g," "),d.className+=" wf-inactive"},c.scriptTimeout),f=document.createElement("script"),g=!1;f.src="//use.typekit.net/"+c.kitId+".js",f.type="text/javascript",f.async="true",f.onload=f.onreadystatechange=function(){var a=this.readyState;if(!(g||a&&"complete"!=a&&"loaded"!=a)){g=!0,clearTimeout(e);try{Typekit.load(c)}catch(b){}}};var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(f,h)}}(this);var Class,Exception;!function(){var a=function(a){var b=a.bind(this);return b._methodName=a._methodName,this[b._methodName]=b,b},b=function(a){return a.extend=this,new Class(a)};Class=function(c){if(c=c||{},c.hasOwnProperty("extend")&&!c.extend)throw new Class.NonTruthyExtendError("function"==typeof c.toString?c.toString():c.toString);var d=c.extend||Object,e=c.construct,f=c.destruct;if(delete c.bind,delete c.extend,delete c.destruct,delete c.construct,c.hasOwnProperty("toString")&&"function"!=typeof c.toString){var g=c.toString;c.toString=function(){return g.toString()}}else!c.hasOwnProperty("toString")&&d.prototype.hasOwnProperty("toString")&&(c.toString=d.prototype.toString);var h=c,i=Object.create(d&&d.prototype);if(i.superClass=d.prototype,h)for(var j in h)h.hasOwnProperty(j)&&(i[j]=h[j],"function"==typeof h[j]&&(i[j]._methodName=j,i[j]._parentProto=i));i.inherited=function(a){var b=a.callee,c=b._methodName;if(!c)throw new Class.MissingCalleeError(this.toString());for(var d=b._parentProto,e=null;d.superClass&&(d=d.superClass,e=d[c],"function"!=typeof e););if("function"==typeof e){var f=this.inherited;this.inherited=d.inherited;var g=e.apply(this,a);return this.inherited=f,g}throw new Class.InheritedMethodNotFoundError(this.toString(),c)},i.bind=a,i.destruct=function(){"function"==typeof f&&f.apply(this),d&&d.prototype&&"function"==typeof d.prototype.destruct&&d.prototype.destruct.apply(this)},i.construct=function(){var a=arguments;void 0===a[0]&&(a.length=1,a[0]={}),d&&d.prototype&&"function"==typeof d.prototype.construct&&d.prototype.construct.apply(this,arguments),"function"==typeof e&&e.apply(this,arguments)};var k=function(){var a=Object.create(i);return i.construct.apply(a,arguments),a};return k.toString=i.toString,k.prototype=i,k.extend=b,i.constructor=k,k},Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Exception=new Class({extend:Error,construct:function(){this.name="Error",this.message="General exception"},toString:function(){return this.name+": "+this.message}});var c=Exception.extend({name:"Class Exception"});Class.NonTruthyExtendError=c.extend({construct:function(a){this.message=a+" attempted to extend a non-truthy object"}}),Class.InheritedMethodNotFoundError=c.extend({construct:function(a,b){this.message=a+" can't call method '"+b+"', no method defined in parent classes"}}),Class.MissingCalleeError=c.extend({construct:function(a){this.message=a+" can't call inherited method: calling method did not have _methodName"}})}(),function(a,b){b.CUI=b.CUI||{},CUI.options=a.extend({debug:!1,dataAPI:!0},CUI.options),a(function(){a(document).trigger("cui-contentloaded")})}(jQuery,this),function(a,b){var c=1;CUI.util={isTouch:function(){return/Windows NT 6\.[23];.*Chrome/.test(b.navigator.userAgent)?!1:"ontouchstart"in b}(),getNextId:function(){return"coral-"+c++},getDataTarget:function(b){var c=b.attr("href"),d=a(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,""));return d},decapitalize:function(a){return a.slice(0,1).toLowerCase()+a.slice(1)},capitalize:function(a){return a.slice(0,1).toUpperCase()+a.slice(1)},plugClass:function(b,c,d){c=c||CUI.util.decapitalize(b.toString()),a.fn[c]=function(e){var f=arguments;return this.each(function(){var g=a(this),h=a.extend({},g.data(),"object"==typeof e&&e,{element:this}),i=g.data(c)||new b(h);"string"==typeof e?i[e].apply(i,Array.prototype.slice.call(f,1)):a.isPlainObject(e)&&i.set(e),"function"==typeof d&&d.call(this,i)})},a.fn[c].Constructor=b},buildFunction:function(a,b){if(b=b||[],"string"==typeof b&&(b=[b]),a)try{var c=Function;return new c(b,"return "+a+"("+b.join(", ")+");")}catch(d){return null}},selectText:function(b,c,d){var e=b.val();if(e.length>0){c=c||0,d=d||e.length;var f=a(b)[0];if(f.setSelectionRange)f.blur(),f.setSelectionRange(c,d),f.focus();else if(f.createTextRange){var g=f.createTextRange();g.collapse(!0),g.moveEnd("character",d-e.length),g.moveStart("character",c),g.select()}}},getNested:function(a,b){if(!b)return a;for(var c="string"==typeof b?b.split("."):b,d=a;d&&c.length>0;)d=d[c.shift()];return d},isTrue:function(a){return"true"===a}},a("html").toggleClass("touch",CUI.util.isTouch)}(jQuery,this),function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&c(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.fn.loadWithSpinner=function(b,c,d){var e=a(this);if(b&&(c||e.data("loaded-remote")!==b)){var f=setTimeout(function(){e.html('<div class="spinner large"></div>')},50);e.load(b,function(a,b,c){clearTimeout(f),"error"===b&&(e.html('<div class="alert error"><strong>ERROR</strong> Failed to load content: '+c.statusText+" ("+c.status+")</div>"),e.data("loaded-remote","")),"function"==typeof d&&d.call(this,a,b,c)}),e.data("loaded-remote",b)}},a.fn.finger=function(){return CUI.util.isTouch&&this.on.apply(this,arguments),this},a.fn.pointer=function(){return CUI.util.isTouch||this.on.apply(this,arguments),this},a.fn.fipo=function(){var a=Array.prototype.slice.call(arguments,1,arguments.length);return this.pointer.apply(this,a),a[0]=arguments[0],this.finger.apply(this,a),this},a.extend(a.expr[":"],{data:a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}),focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}})}(jQuery,this),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&h(c+d)<n&&(i.horizontal="center"),m>p&&h(e+f)<p&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){function b(b,c,d,e){a.each(g,function(a,f){f[b].call(this,c,d,e)})}function c(a){var c=h.Event(a);f=h.State(c),b("touchstart",a,f,c)}function d(a){var c=h.Event(a);f.move.push(c),b("touchmove",a,f,c)}function e(a){var c=h.Event(a);f.end=c,b("touchend",a,f,c)}var f,g={},h={active:!1,on:function(){a(document).on("touchstart",c).on("touchmove",d).on("touchend touchcancel",e),h.active=!0},off:function(){a(document).off("touchstart",c).off("touchmove",d).off("touchend touchcancel",e),h.active=!1},track:function(a,b){g[a]=b},addEventParam:function(b,c){var d=a(b.target),e=d.offset(),f={pageX:b.point[0].x,pageY:b.point[0].y,offsetX:e.left-b.point[0].x,offsetY:e.top-b.point[0].y};return a.extend(f,c)},Event:function(b){var c={type:b.type,timestamp:(new Date).getTime(),target:b.target,point:[]},d=b.changedTouches||b.originalEvent.changedTouches||b.touches||b.originalEvent.touches;return a.each(d,function(a,b){c.point.push({x:b.pageX,y:b.pageY})}),c},State:function(a){a.point[0];return{start:a,move:[],end:null}},calc:{getDuration:function(a,b){return b.timestamp-a.timestamp},getDistance:function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},getAngle:function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI},getDirection:function(a){return-45>a&&a>-135?"top":a>=-45&&45>=a?"right":a>=45&&135>a?"down":a>=135||-135>=a?"left":"unknown"},getScale:function(a,b){var c=a.point,d=b.point;return 2===c.length&&2===d.length?(Math.sqrt(Math.pow(d[0].x-d[1].x,2)+Math.pow(d[0].y-d[1].y,2))/Math.sqrt(Math.pow(c[0].x-c[1].x,2)+Math.pow(c[0].y-c[1].y,2))).toFixed(2):0},getRotation:function(a,b){var c=a.point,d=b.point;return 2===c.length&&2===d.length?(180*Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x)/Math.PI-180*Math.atan2(c[0].y-c[1].y,c[0].x-c[1].x)/Math.PI).toFixed(2):0}}};h.on(),a.toe=h}(jQuery,this),function(a,b){var c="swipe",d={distance:40,duration:1200,direction:"all"};b.track(c,{touchstart:function(a,b,d){b[c]={finger:d.point.length}},touchmove:function(a,b,d){b[c].finger=d.point.length>b[c].finger?d.point.length:b[c].finger},touchend:function(e,f,g){var h,i,j=a.extend(d,e.data);h=b.calc.getDuration(f.start,g),i=b.calc.getDistance(f.start.point[0],g.point[0]),h<j.duration&&i>j.distance&&(f[c].angle=b.calc.getAngle(f.start.point[0],g.point[0]),f[c].direction=b.calc.getDirection(f[c].angle),("all"===j.direction||f[c].direction===j.direction)&&a(e.target).trigger(a.Event(c,b.addEventParam(f.start,f[c]))))}})}(jQuery,jQuery.toe,this),function(a,b){var c="tap",d={distance:10,duration:300,finger:1};b.track(c,{touchstart:function(a,b,d){b[c]={finger:d.point.length}},touchmove:function(a,b,d){b[c].finger=d.point.length>b[c].finger?d.point.length:b[c].finger},touchend:function(e,f,g){var h,i,j=a.extend(d,e.data);h=b.calc.getDuration(f.start,g),i=b.calc.getDistance(f.start.point[0],g.point[0]),h<j.duration&&i<j.distance&&f[c].finger===j.finger&&a(e.target).trigger(a.Event(c,b.addEventParam(f.start,f[c])))}})}(jQuery,jQuery.toe,this),function(a,b){var c,d,e="taphold",f={distance:20,duration:500,finger:1};b.track(e,{touchstart:function(g,h,i){var j=a.extend(f,g.data);d=!1,h[e]={finger:i.point.length},clearTimeout(c),c=setTimeout(function(){!d&&b.active&&h[e].finger===j.finger&&a(g.target).trigger(a.Event(e,b.addEventParam(i,h[e])))},j.duration)},touchmove:function(c,g,h){var i,j=a.extend(f,c.data);g[e].finger=h.point.length>g[e].finger?h.point.length:g[e].finger,i=b.calc.getDistance(g.start.point[0],h.point[0]),i>j.distance&&(d=!0)},touchend:function(){d=!0,clearTimeout(c)}})}(jQuery,jQuery.toe,this),function(a,b){var c,d="transform",e={scale:.1,rotation:15};b.track(d,{touchstart:function(a,b,e){c=!1,b[d]={start:e,move:[]}},touchmove:function(f,g,h){var i=a.extend(e,f.data);2===h.point.length&&(g[d].move.push(h),2!==g[d].start.point.length&&2===h.point.length&&(g[d].start=a.extend({},h)),g[d].rotation=b.calc.getRotation(g[d].start,h),g[d].scale=b.calc.getScale(g[d].start,h),(Math.abs(1-g[d].scale)>i.scale||Math.abs(g[d].rotation)>i.rotation)&&(c||(a(f.target).trigger(a.Event("transformstart",g[d])),c=!0),a(f.target).trigger(a.Event("transform",g[d]))))},touchend:function(e,f,g){c&&(c=!1,2!==g.point.length&&(f.end=a.extend({},f[d].move[f[d].move.length-1])),f[d].rotation=b.calc.getRotation(f[d].start,f.end),f[d].scale=b.calc.getScale(f[d].start,f.end),a(e.target).trigger(a.Event("transformend",f[d])))}})}(jQuery,jQuery.toe,this),function(a){var b=Math.abs;a.ui.position.flip.top=function(a,c){var d,e,f=c.within,g=f.offset.top+f.scrollTop,h=f.height,i=f.isWindow?f.scrollTop:f.offset.top,j=a.top-c.collisionPosition.marginTop,k=j-i,l=j+c.collisionHeight-h-i,m="top"===c.my[1],n=m?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,o="top"===c.at[1]?c.targetHeight:"bottom"===c.at[1]?-c.targetHeight:0,p=-2*c.offset[1];0>k?(e=a.top+n+o+p+c.collisionHeight-h-g,(0>e||e<b(k))&&(a.top+=n+o+p)):l>0&&(d=a.top-c.collisionPosition.marginTop+n+o+p-i,(d>0||b(d)<l)&&(a.top+=n+o+p))}}(jQuery),function(a,b,c){CUI.Widget=new Class({toString:"Widget",construct:function(b){this.options=a.extend({},"object"==typeof this.defaults&&this.defaults,b),this.$element=a(b.element),this.$element.data(CUI.util.decapitalize(this.toString()),this),this.bind(this.hide),this.bind(this.show),this.bind(this.toggleVisibility),this.on("change:visible",function(a){this[a.value?"_show":"_hide"]()}.bind(this))},set:function(b,c){if(a.isPlainObject(b))for(var d in b)this._set(d,b[d]);else this._set(b,c);return this},_set:function(b,c){var d=a.Event("beforeChange:"+b,{widget:this,option:b,currentValue:this.options[b],value:c});return this.$element.trigger(d),d.isDefaultPrevented()?this:(this.options[b]=c,d=a.Event("change:"+b,{widget:this,option:b,value:c}),void this.$element.trigger(d))},get:function(a){return this.options[a]},on:function(){return this.$element.on.apply(this.$element,arguments),this},off:function(){return this.$element.off.apply(this.$element,arguments),this},show:function(b){if(b=b||{},this.options.visible)return this;if(!b.silent){var c=a.Event("show");if(this.$element.trigger(c),c.isDefaultPrevented())return this}return this.options.visible=!0,this._show(b),this},_show:function(){this.$element.show()},hide:function(b){if(b=b||{},!this.options.visible)return this;if(!b.silent){var c=a.Event("hide");if(this.$element.trigger(c),c.isDefaultPrevented())return this}return this.options.visible=!1,this._hide(b),this},_hide:function(){this.$element.hide()},toggleVisibility:function(){return this[this.options.visible?"hide":"show"]()},setName:function(a){return this.toString=function(){return a},this}}),CUI.Widget.fromElement=function(a,b){return b.data(CUI.util.decapitalize(a.toString()))},CUI.Widget.registry={register:function(a,b){CUI.util.plugClass(b),this._widgets[a]=b,b.init=function(a){this._init(b,a)}.bind(this)},resolve:function(a){return this._widgets[a]},init:function(a,b){this._init(this.resolve(a),b)},getSelectors:function(){var a=[];for(var b in this._widgets)a.push(b);return a},_widgets:{},_init:function(b,d){b!==c&&d.each(function(){var d=a(this);CUI.Widget.fromElement(b,d)===c&&d[CUI.util.decapitalize(b.toString())]()})}}}(jQuery,this),function(a,b,c){CUI.SelectList=new Class({toString:"SelectList",extend:CUI.Widget,construct:function(){this.applyOptions(),this.$element.on("change:type",this._setType.bind(this)).on("click",this._SELECTABLE_SELECTOR,this._triggerSelected.bind(this)).on("mouseenter",this._SELECTABLE_SELECTOR,this._handleMouseEnter.bind(this)),this._makeAccessible()},defaults:{type:"static",multiple:!1,relatedElement:null,autofocus:!0,autohide:!0,dataurl:null,dataurlformat:"html",datapaging:!0,datapagesize:10,dataadditional:null,loadData:a.noop,position:"center bottom-1",collisionAdjustment:""},_SELECTABLE_SELECTOR:".coral-SelectList-item--option:not(.is-disabled):not(.is-hidden)",applyOptions:function(){this._setType()},_setType:function(){function a(){var a=c.$element.get(0),b=a.scrollHeight,d=a.scrollTop;b-c.$element.height()<=d+30&&c._handleLoadData()}var b,c=this;"dynamic"===this.options.type?this.$element.on("scroll.selectlist-dynamic-load",function(){b&&clearTimeout(b),c._loadingComplete||this._loadingIsActive||(b=setTimeout(a,500))}):this.$element.off("scroll.selectlist-dynamic-load")},_makeAccessible:function(){this.$element.attr({role:"listbox","aria-controls":a(this.options.relatedElement).attr("id")||"","aria-hidden":!0,"aria-multiselectable":this.options.multiple}),this._makeAccessibleListOption(this.$element.children())},_handleKeyDown:function(b){var d,e=this.$element.find(this._SELECTABLE_SELECTOR),f=e.filter(".is-highlighted"),g=e.index(f);if(e.length){switch(b.which){case 13:case 32:f.length&&(f.trigger("click"),b.preventDefault());break;case 27:this.hide(),b.preventDefault();break;case 33:case 37:case 38:g>0?d=e[g-1]:-1==g&&(d=e[e.length-1]),b.preventDefault();break;case 34:case 39:case 40:g+1<e.length&&(d=e[g+1]),b.preventDefault();break;case 36:d=e[0],b.preventDefault();break;case 35:d=e[e.length-1],b.preventDefault()}d!==c&&this.setCaretToItem(a(d),!0)}},_makeAccessibleListOption:function(b){b.each(function(b,c){var d=a(c);d.hasClass("coral-SelectList-item--optgroup")?d.attr({role:"presentation"}).children("ul").attr({role:"group"}).children("li").attr({role:"option"}):d.attr({role:"option"})})},setCaretToItem:function(a,b){this.$element.find(".coral-SelectList-item--option").removeClass("is-highlighted"),a.addClass("is-highlighted"),b&&this.scrollToItem(a)},resetCaret:function(){this.$element.find('[role="option"]').removeClass("is-highlighted"),this.$element.scrollTop(0)},scrollToItem:function(a){if(a.length){var b=a.position().top,c=a.outerHeight(!1),d=this.$element[0],e=b+c-d.clientHeight;e>0?d.scrollTop+=e:0>b&&(d.scrollTop+=b)}},show:function(){return this.options.visible?this:(f(),this.inherited(arguments))},_show:function(){var b=this;this.$element.addClass("is-visible").attr("aria-hidden",!1),this._position(),this.options.autofocus&&this.setCaretToItem(this.$element.find(this._SELECTABLE_SELECTOR).first(),!0),"dynamic"===this.options.type&&this._handleLoadData().done(function(){b.options.autofocus&&b.setCaretToItem(b.$element.find(b._SELECTABLE_SELECTOR).first(),!0)}),a(document).on("keydown.selectlist",this._handleKeyDown.bind(this))},_position:function(){this.options.visible&&this.$element.position({my:"top",at:this.options.position,of:this.options.relatedElement,collision:this.options.collisionAdjustment})},_hide:function(){this.$element.removeClass("is-visible").attr("aria-hidden",!0),this.reset(),a(document).off("keydown.selectlist")},_triggerSelected:function(b){var c=a(b.currentTarget),d=c.data("value"),e=c.data("display")||c.text();c.trigger(a.Event("selected",{selectedValue:d,displayedValue:e}))},_handleMouseEnter:function(b){this.setCaretToItem(a(b.currentTarget),!1)},clearItems:function(){this.$element.empty()},_pagestart:0,_loadingComplete:!1,_loadingIsActive:!1,_handleLoadData:function(){var b,c=this,d=this._pagestart+this.options.datapagesize,e=a("<div/>",{"class":"coral-SelectList-item--wait"}).append(a("<span/>",{"class":"coral-Wait"}));return this._loadingIsActive?a.Deferred().resolve().promise():(this._loadingIsActive=!0,this.$element.append(e),b=this.options.dataurl?a.ajax({url:this.options.dataurl,context:this,dataType:this.options.dataurlformat,data:a.extend({start:this._pagestart,end:d},this.options.dataadditional||{})}).done(function(b){var d=0;if("html"===c.options.dataurlformat){var e=a(b);d=e.filter("li").length,c._makeAccessibleListOption(e),c.$element.append(e)}d<c.options.datapagesize&&(this._loadingComplete=!0)}):this.options.loadData.call(this,this._pagestart,d),this._pagestart=d,b.always(function(){e.remove(),c._loadingIsActive=!1}),b)},reset:function(){"dynamic"===this.options.type&&(this.clearItems(),this._pagestart=0,this._loadingComplete=!1)},triggerLoadData:function(a){a&&this.reset(),this._handleLoadData()},filter:function(b){var c=this.$element.find(".coral-SelectList-item--option"),d=this.$element.find(".coral-SelectList-item--optgroup");b?(c.each(function(){var c=a(this),d=!b.call(this,c.data("value"),c.data("display")||c.text());c.toggleClass("is-hidden",d),d&&c.removeClass("is-highlighted")}),d.each(function(){var b=a(this),c=b.find('[role="option"]:not(.is-hidden)').length>0;b.toggleClass("is-hidden",!c)})):(c.removeClass("is-hidden"),d.removeClass("is-hidden")),this._position()}}),CUI.Widget.registry.register("selectlist",CUI.SelectList),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.SelectList.init(a("[data-init~=selectlist]",b.target))});var d=".coral-SelectList",e="[data-toggle~=selectlist]",f=function(){a(d).each(function(){var b=a(this).data("selectList");b&&b.get("autohide")&&b.hide()})},g=function(){var b=CUI.util.getDataTarget(a(this));return b.length&&b.data("selectList").toggleVisibility(),!1};a(document).on("click.selectlist",f).on("click.selectlist",d,function(a){a.stopPropagation()}).on("click.selectlist",e,g)}(jQuery,this),function(a,b,c){var d="coral-TabPanel-content",e="coral-TabPanel-navigation",f="."+e,g="."+d;CUI.Tabs=new Class({toString:"Tabs",extend:CUI.Widget,construct:function(){this.tablist=this._findOrCreateTabList(),this.panelist=this._findOrCreatePaneList(),this._applyOptions(),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:active",this._setActive.bind(this))},defaults:{},DEFAULT_VARIANT_KEY:"default",VARIANT_TYPES:["default","stacked","nav"],VARIANT_CLASS_MAPPING:{"default":"",stacked:"coral-TabPanel--stacked",nav:"coral-TabPanel--large"},setDisabled:function(a,b){var c=b||!1;return a.toggleClass("is-disabled",c).prop("aria-disabled",c),this},setEnabled:function(a){return this.setDisabled(a,!0)},addItem:function(b){var d=this._getTabs();b=a.extend({tabContent:"",panelContent:"",panelID:c,panelURL:c,index:d.length,enabled:!0,active:!0},b);var e=a('<section class="coral-TabPanel-pane"/>').append(b.panelContent);b.panelID!==c&&e.attr("id",b.panelID);var f=a('<a class="coral-TabPanel-tab" data-toggle="tab"/>').append(b.tabContent);b.panelURL!==c&&f.attr("href",b.panelURL);var g=Math.min(Math.max(b.index,0),d.length);return 0===g?(this.tablist.prepend(f),this.panelist.prepend(e)):(d.eq(g-1).after(f),this._getPanels().eq(g-1).after(e)),b.enabled||f.addClass("is-disabled"),this._makeTabsAccessible(f),b.active&&b.enabled&&this._activateTab(f,!0),e.attr("id")},removeItem:function(a){var b,c,d=this._getTabs(),e=this._getPanels();if("number"==typeof a?(b=d.eq(a),c=e.eq(a)):"string"==typeof a&&(b=d.filter('[aria-controls="'+a+'"]'),c=e.filter("#"+a)),b&&c){if(b.hasClass("is-active")){var f='.coral-TabPanel-tab[data-toggle="tab"]:not(.is-disabled)',g=b.nextAll(f).first();0===g.length&&(g=b.prevAll(f).first()),1===g.length&&this._activateTab(g,!0)}c.remove(),b.remove()}},_findOrCreateTabList:function(){var b=this.$element.find(f);return 0===b.length&&(b=a("<nav>").addClass(e).prependTo(this.$element)),b},_findOrCreatePaneList:function(){var b=this.$element.find(g);return 0===b.length&&(b=a("<div>").addClass(d).appendTo(this.$element)),b},_applyOptions:function(){var a=this._getTabs().filter(".is-active");this.options.type&&this._setType(this.options.type),this._initTabswitch(),this._makeAccessible(),0===a.length?this._setActive(this.options.active||0):this._activateTab(a,!0)},_getTabs:function(){return this.tablist.find('> .coral-TabPanel-tab[data-toggle="tab"]')},_getPanels:function(){return this.panelist.children(".coral-TabPanel-pane")},_setActive:function(b){b=a.isNumeric(b)?b:this.options.active;var c=this._getTabs().eq(b);this._activateTab(c,!0)},_setType:function(b){var d=this,e="string"===a.type(b)?b:this.options.type;if(this.VARIANT_TYPES.indexOf(e)>-1&&this.VARIANT_CLASS_MAPPING[e]!==c){var f=Object.keys(this.VARIANT_CLASS_MAPPING).map(function(a){return d.VARIANT_CLASS_MAPPING[a]});this.$element.removeClass(f.join(" ")),this.$element.addClass(this.VARIANT_CLASS_MAPPING[e])}},_activateTab:function(a,b){var c,d=a.attr("href"),e="is-active",f=this._getTabs(),g=this._getPanels();return a.hasClass("is-disabled")?(a.blur(),!1):(c=g.filter("#"+a.attr("aria-controls")),d&&"#"!==d.charAt(0)&&c.loadWithSpinner(d),f.removeClass(e).attr({"aria-selected":!1,tabindex:-1}),g.removeClass(e).attr({"aria-hidden":!0}),a.addClass(e).attr({"aria-selected":!0,tabindex:0}),c.addClass(e).attr({"aria-hidden":!1}),void(b||a.trigger("focus")))},_initTabswitch:function(){var b=this,c='> .coral-TabPanel-navigation > .coral-TabPanel-tab[data-toggle="tab"]';this.$element.on("click",c,function(c){var d=a(c.currentTarget);c.preventDefault(),b._activateTab(d)})},_makeAccessible:function(){this._makeTabsAccessible(),this._makeTablistAccessible()},_makeTabsAccessible:function(b){var c=this._getPanels();b=b||this._getTabs(),b.each(function(b,d){var e=a(d),f=c.eq(e.index()),g=f.attr("id")||CUI.util.getNextId(),h={role:"tab",tabindex:-1,"aria-selected":!1,"aria-controls":g,"aria-disabled":e.hasClass("is-disabled")};e.attr("href")||(h.href="#"),e.attr(h),f.attr({id:g,role:"tabpanel","aria-hidden":!0})})},_makeTablistAccessible:function(){var b=this,c='> [role="tab"]';this.tablist.attr("role","tablist"),this.tablist.on("keydown",c,function(d){var e=a(d.currentTarget),f=a(d.delegateTarget).find(c).not('[aria-disabled="true"]'),g=e,h=!0,i=f.index(e);switch(d.which){case 33:case 37:case 38:g=i-1>-1?f[i-1]:f[f.length-1];break;case 34:case 39:case 40:g=i+1<f.length?f[i+1]:f[0];break;case 36:g=f[0];break;case 35:g=f[f.length-1];break;default:h=!1}h&&(d.preventDefault(),b._activateTab(a(g)))})}}),CUI.Widget.registry.register("tabs",CUI.Tabs),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Tabs.init(a("[data-init~=tabs]",b.target))})}(jQuery,this),function(a){CUI.TagList=new Class({toString:"TagList",extend:CUI.Widget,construct:function(){var a=this;this.applyOptions(),this.$element.on("change:values",this._setValues.bind(this)),this.$element.on("click","button",function(b){var c=a.$element.children().has(b.currentTarget).find("input");a.removeItem(c.val())}),this._makeAccessible()},defaults:{fieldname:"",values:null,tag:"li",renderer:null},_existingValues:null,applyOptions:function(){var b=this;this._existingValues=[],this.options.values=this.options.values||[],this.options.values.length>0?this._setValues():this.$element.find("input").each(function(c,d){var e=a(d);b._existingValues.push(e.attr("value"))})},_setValues:function(){var a=this.options.values;this.$element.empty(),this.options.values=[],this.addItem(a)},_makeAccessible:function(){this.$element.attr({role:"list"}),this.$element.children(this.options.tag).attr({role:"listitem"})},_show:function(){this.$element.show().attr("aria-hidden",!1)},_hide:function(){this.$element.hide().attr("aria-hidden",!0)},_removeItem:function(b){var c=this.$element.children(':has(input[value="'+b+'"])');c.length>0&&(c.remove(),this.$element.trigger(a.Event("itemremoved"),{value:b}))},_appendItem:function(b){var c,d;if("string"===a.type(b)?c=d=b:(c=b.display,d=b.value),d+="",!(a.inArray(d,this._existingValues)>-1||0===d.length)){this._existingValues.push(d);
var e=this.options.renderer||this._renderTag;this.$element.append(e.call(this,d,c)),this.$element.trigger(a.Event("itemadded"),{value:d,display:c})}},_renderTag:function(b,c){var d,e;return d=a("<"+this.options.tag+"/>",{role:"listitem","class":"coral-TagList-tag"+(this.options.multiline?" coral-TagList-tag--multiline":""),title:c}),e=a("<button/>",{"class":"coral-MinimalButton coral-TagList-tag-removeButton",type:"button",title:"Remove"}).appendTo(d),a("<i/>",{"class":"coral-Icon coral-Icon--sizeXS coral-Icon--close"}).appendTo(e),a("<span/>",{"class":"coral-TagList-tag-label",text:c}).appendTo(d),a("<input/>",{type:"hidden",value:b,name:this.options.fieldname}).appendTo(d),d},removeItem:function(a){var b=this._existingValues.indexOf(""+a);b>-1&&(this._existingValues.splice(b,1),this._removeItem(a))},addItem:function(b){var c=this,d=a.isArray(b)?b:[b];a.each(d,function(a,b){c._appendItem(b)})},getValues:function(){return this._existingValues.slice(0)}}),CUI.Widget.registry.register("taglist",CUI.TagList),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.TagList.init(a("[data-init~=taglist]",b.target))})}(jQuery,this),function(a){CUI.Alert=new Class({toString:"Alert",extend:CUI.Widget,construct:function(){this.$element.delegate('[data-dismiss="alert"]',"click.dismiss.alert",this.hide),this.$element.addClass("coral-Alert"),this.$element.on("change:heading",this._setHeading.bind(this)),this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:closeable",this._setCloseable.bind(this)),this.$element.on("change:size",this._setSize.bind(this));for(var a in this._types)if(this.$element.hasClass(this._types[a]["class"]))return this.options.type=a,!1;for(var b in this._sizes)if(this.$element.hasClass(this._sizes[b]))return this.options.size=b,!1;this._setCloseable(),this._setType(),this._setSize(),this._setHeading(),this._setContent()},defaults:{type:"error",size:"small",heading:void 0,visible:!0,closeable:!0},_types:{error:{"class":"coral-Alert--error",iconClass:"coral-Icon--alert"},notice:{"class":"coral-Alert--notice",iconClass:"coral-Icon--alert"},success:{"class":"coral-Alert--success",iconClass:"coral-Icon--checkCircle"},help:{"class":"coral-Alert--help",iconClass:"coral-Icon--helpCircle"},info:{"class":"coral-Alert--info",iconClass:"coral-Icon--infoCircle"}},_sizes:{small:"",large:"coral-Alert--large"},_setContent:function(){"string"==typeof this.options.content&&this.$element.find("div").html(this.options.content)},_setHeading:function(){"string"==typeof this.options.heading&&this.$element.find("strong").html(this.options.heading)},_setType:function(){if(this._isValidType(this.options.type)){var a=this.$element.find("> .coral-Icon");for(var b in this._types)this.$element.removeClass(this._types[b]["class"]),a.removeClass(this._types[b].iconClass);this.$element.addClass(this._types[this.options.type]["class"]);var c=this._types[this.options.type].iconClass;a.addClass(c)}},_setSize:function(){this._isValidSize(this.options.size)&&("small"===this.options.size?this.$element.removeClass(this._sizes.large):this.$element.addClass(this._sizes.large))},_setCloseable:function(){var a=this.$element.find(".coral-Alert-closeButton");!a.length&&this.options.closeable?this.$element.prepend('<button class="coral-MinimalButton coral-Alert-closeButton" title="Close" data-dismiss="alert"><i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon"></i></button>'):a[this.options.closeable?"show":"hide"]()},_isValidType:function(a){return"string"==typeof a&&this._types.hasOwnProperty(a)},_isValidSize:function(a){return"string"==typeof a&&this._sizes.hasOwnProperty(a)},_fixType:function(a){return this._isValidType(a)?a:this.defaults.type},_fixHeading:function(a){return void 0===a?this._fixType(this.options.type).toUpperCase():a}}),CUI.util.plugClass(CUI.Alert),CUI.options.dataAPI&&a(function(){a(document).on("click.alert.data-api",'[data-dismiss="alert"]',function(b){a(b.currentTarget).parent().hide(),b.preventDefault()})})}(window.jQuery),function(a){CUI.Modal=new Class({toString:"Modal",extend:CUI.Widget,construct:function(){this.header=this.$element.find(".coral-Modal-header"),this.body=this.$element.find(".coral-Modal-body"),this.footer=this.$element.find(".coral-Modal-footer"),this._previousFocus=a(),this.backdrop=a("<div/>",{"class":"coral-Modal-backdrop",style:"display: none;"}).on("click",function(){"static"!==this.options.backdrop&&this.hide()}.bind(this)),this.body.loadWithSpinner(this.options.remote),this.applyOptions(),this.$element.on("change:heading",this._setHeading.bind(this)).on("change:header",this._setHeader.bind(this)).on("change:content",this._setContent.bind(this)).on("change:buttons",this._setFooter.bind(this)).on("change:type",this._setType.bind(this)).on("change:fullscreen",this._setFullscreen.bind(this)).on("click",'[data-dismiss="modal"]',this.hide.bind(this)),this._makeAccessible()},defaults:{backdrop:"static",visible:!0,type:"default",fullscreen:!1,attachToBody:!0},_types:{"default":{"class":"",iconClass:""},error:{"class":"coral-Modal--error",iconClass:"coral-Icon--alert"},notice:{"class":"coral-Modal--notice",iconClass:"coral-Icon--alert"},success:{"class":"coral-Modal--success",iconClass:"coral-Icon--checkCircle"},help:{"class":"coral-Modal--help",iconClass:"coral-Icon--helpCircle"},info:{"class":"coral-Modal--info",iconClass:"coral-Icon--infoCircle"}},applyOptions:function(){this._setHeader(),this._setHeading(),this._setContent(),this._setFooter(),this._setType(),this._setFullscreen(),this.options.visible&&(this.options.visible=!1,this.show())},_makeAccessible:function(){var b=this,c="modal-header"+(new Date).getTime()+"-";this.$element.attr({role:"dialog","aria-hidden":!this.options.visible,"aria-labelledby":c+"label","aria-describedby":c+"message",tabindex:-1}),this.header.find("h2").attr({id:c+"label",tabindex:0}),this.body.attr({id:c+"message",role:"document",tabindex:0}),this.$element.on("keydown",":focusable",function(c){var d,e=(a(c.currentTarget),b.$element.find(":tabbable"));switch(c.which){case 9:c.shiftKey&&c.currentTarget===e[0]?d=e.last():c.shiftKey||c.currentTarget!==e[e.length-1]||(d=e.first())}d&&(c.preventDefault(),d.trigger("focus"))})},_setType:function(){if(this.options.type){var a=this.$element.find(".coral-Modal-header > .coral-Icon");for(var b in this._types)this.$element.removeClass(this._types[b]["class"]),a.removeClass(this._types[b].iconClass);"default"!==this.options.type&&(this.$element.addClass(this._types[this.options.type]["class"]),a.addClass(this._types[this.options.type].iconClass))}},_setHeader:function(){this.options.header&&this.header.find("h2").html(this.options.header)},_setHeading:function(){this.options.heading&&(this.options.header=this.options.heading,this._setHeader.apply(this,arguments))},_setContent:function(){this.options.content&&this.body.html(this.options.content)},_setFooter:function(){if(a.isArray(this.options.buttons)){var b=this;this.footer.empty(),a.each(this.options.buttons,function(c,d){var e=d.href?a("<a/>",{"class":"button"}):a("<button/>",{"class":"coral-Button",type:"button"});e.html(d.label),"hide"===d.click?e.attr("data-dismiss","modal"):a.isFunction(d.click)&&e.on("click",d.click.bind(b,{dialog:b})),d.href&&e.attr("href",d.href),d.className&&e.addClass(d.className),b.footer.append(e)})}},_setFullscreen:function(){this.options.fullscreen?this.$element.addClass("fullscreen"):this.$element.removeClass("fullscreen")},_show:function(){var b,c=a("body"),d=this;return this._previousFocus=a(":focus"),this._previousFocus.trigger("blur"),c.addClass("coral-Modal.is-open"),this.$element.trigger("beforeshow"),this._toggleBackdrop(!0),this.options.attachToBody&&(0===this.$element.parent("body").length&&this.$element.appendTo(c),this.$element.siblings("[aria-hidden]").each(function(b,c){a(c).data("aria-hidden",a(c).attr("aria-hidden"))}),this.$element.siblings().not("script, link, style").attr("aria-hidden",this.options.visible)),this.$element.attr("aria-hidden",!this.options.visible),this.center(),this.$element.fadeIn(),this.$element.find(":tabbable:not(.coral-Modal-header .coral-Modal-closeButton):first").focus(),b=a('<div class="coral-Modal-tabcapture" tabindex="0"/>'),b.on("focus.modal-tabcapture",function(b){var c,e=d.$element.find(":tabbable"),f=a("body > .coral-Modal-tabcapture"),g=f.last();c=e.filter(b.currentTarget===g[0]?":not(.coral-Modal-header .coral-Modal-closeButton):last":":not(.coral-Modal-header .coral-Modal-closeButton):first"),0===c.length&&(c=d.$element),c.trigger("focus")}).prependTo(c).clone(!0).appendTo(c),a(document).on("keydown.modal-escape",this._escapeKeyHandler.bind(this)),this},_hide:function(){return a("body").removeClass("coral-Modal.is-open").find(".coral-Modal-tabcapture").off("focus.modal-tabcapture").remove(),a(document).off("keydown.modal-escape"),this.$element.trigger("beforehide"),this._toggleBackdrop(!1),this.$element.attr("aria-hidden",!this.options.visible),this.$element.siblings().removeAttr("aria-hidden").filter(':data("aria-hidden")').each(function(b,c){a(c).attr("aria-hidden",a(c).data("aria-hidden")).removeData("aria-hidden")}),this.$element.fadeOut().trigger("blur"),this._previousFocus.trigger("focus"),this},center:function(){var a=this.$element.outerWidth(),b=this.$element.outerHeight();this.$element.css({"margin-left":-(a/2),"margin-top":-(b/2)})},_toggleBackdrop:function(b){if(this.options.backdrop){var c=a("body");(b||this.backdrop.is(":hidden"))&&b!==!1?this.backdrop.appendTo(c).fadeIn():this.backdrop.fadeOut(function(){a(this).detach()})}},_escapeKeyHandler:function(a){27===a.which&&this.hide()}}),CUI.Widget.registry.register("modal",CUI.Modal),CUI.options.dataAPI&&(a(document).on("cui-contentloaded.data-api",function(b){CUI.Modal.init(a("[data-init~=modal]",b.target))}),a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){b.preventDefault();var c=a(this),d=CUI.util.getDataTarget(c),e=c.attr("href"),f=a.extend({remote:!/#/.test(e)&&e},d.data(),c.data());"string"==typeof f.buttons&&(f.buttons=JSON.parse(f.buttons));var g=d.data("modal");d.modal(f),g&&d.data("modal").set({visible:!g.get("visible")})}))}(jQuery,this),function(a,b,c){CUI.Autocomplete=new Class({toString:"Autocomplete",extend:CUI.Widget,construct:function(){this._input=this.options.predefine.input||this.$element.find(".js-coral-Autocomplete-textfield"),this._selectlist=this.options.predefine.selectlist||this.$element.find(".js-coral-Autocomplete-selectList"),this._tags=this.options.predefine.tags||this.$element.find(".js-coral-Autocomplete-tagList"),this._suggestionsBtn=this.options.predefine.suggestionsBtn||this.$element.find(".js-coral-Autocomplete-toggleButton"),this._selectListAnchor=this.$element.find(".js-coral-Autocomplete-field"),this._selectListAnchor.length||(this._selectListAnchor=this.$element.find(".js-coral-Autocomplete-inputGroup")),this.applyOptions(),this._makeAccessible(),this._initTypeahead(),this._setOptionListeners()},defaults:{mode:"starts",ignorecase:!0,delay:200,multiple:!1,forceselection:!1,selectlistConfig:null,tagConfig:null,predefine:{}},applyOptions:function(){this._setInput(),this._setTags(),this._setSelectlist(),this._setSuggestions(),this._setForceSelection()},getValue:function(){return this.options.multiple?this._tagListWidget.getValues():this.options.forceselection?this._lastSelected:this._input.val()},_setOptionListeners:function(){this.on("change:multiple",function(){this._setInput(),this._setTags(),this._setForceSelection()}.bind(this)),this.on("change:forceselection",function(){this._setForceSelection()}.bind(this))},_setForceSelection:function(){var b=this;if(this.options.forceselection&&!this.options.multiple){if(!this._valueInput){var d=this.$element.find(".js-coral-Autocomplete-hidden"),e=this._input.prop("name"),f=this._input.val();d.length>0?(this._valueInput=d,!this._valueInput.prop("name")&&e&&this._valueInput.prop("name",e),this._input.prop("name",""),b._lastSelected=this._valueInput.val(),b._lastSelectedDisplay=f):(e&&(this._valueInput=a('<input type="hidden" class="js-coral-Autocomplete-hidden">').prop("name",e).val(f).insertAfter(this._input),this._input.prop("name","")),b._lastSelected=f,b._lastSelectedDisplay=f)}this._input.on("blur.autocomplete-forceselection",function(){var a=function(){b._lastSelectedDisplay!==b._input.val()&&(""===b._input.val()&&(b._lastSelectedDisplay="",b._lastSelected="",b._triggerValueChange()),b._input.val(b._lastSelectedDisplay),b._valueInput.val(b._lastSelected))},c=setTimeout(a,0);b._suggestionsBtn.one("focus",function(){clearTimeout(c),b._suggestionsBtn.one("blur",a)})})}else this._input.off("blur.autocomplete-forceselection"),this._valueInput&&(this._input.prop("name",this._valueInput.prop("name")),this._input.val(this._valueInput.val()),this._valueInput.remove(),this._valueInput=c)},_setInput:function(){this.options.multiple?this._input.on("keypress.autocomplete-preventsubmit",function(a){return 13===a.which?(a.preventDefault(),!1):void 0}):this._input.off("keypress.autocomplete-preventsubmit"),this._input.attr("autocomplete","off"),this._lastSelected=this._input.val(),this._lastSelectedDisplay=this._input.val()},_setSelectlist:function(){0===this._selectlist.length?this._selectlist=a("<ul/>",{id:CUI.util.getNextId(),"class":"coral-SelectList js-coral-Autocomplete-selectList"}).appendTo(this.$element):this._selectlist.attr("id")||this._selectlist.attr("id",CUI.util.getNextId()),this._selectlist.selectList(a.extend({relatedElement:this._selectListAnchor,autofocus:!1,autohide:!0},this.options.selectlistConfig||{})),this._selectListWidget=this._selectlist.data("selectList"),this._selectlist.on("selected.autocomplete",this._handleSelected.bind(this))},_setTags:function(){if(this.options.multiple&&!this._tagListWidget){0===this._tags.length&&(this._tags=a("<ul/>",{"class":"coral-TagList js-coral-Autocomplete-tagList"}).appendTo(this.$element)),this._tags.tagList(this.options.tagConfig||{}),this._tagListWidget=this._tags.data("tagList"),this._input.on("keyup.autocomplete-addtag",this._addTag.bind(this));var b=this._triggerValueChange.bind(this);this._tags.on("itemremoved",b),this._tags.on("itemadded",b)}else!this.options.multiple&&this._tagListWidget&&(this._tags.off("itemadded"),this._tags.off("itemremoved"),this._tags.remove(),this._tags=null,this._tagListWidget=null,this._input.off("keyup.autocomplete-addtag"))},_initTypeahead:function(){var a,b=this,c=function(){b.showSuggestions(b._input.val(),!1,b._selectListWidget)},d=function(){a&&clearTimeout(a),a=setTimeout(c,b.options.delay)};this._input.on("input.autocomplete",d),this._input.on("cut.autocomplete",d),this._input.on("keyup.autocomplete",function(a){switch(a.which){case 8:case 46:d()}})},_setSuggestions:function(){var a=this;this._suggestionsBtn.length&&(this._suggestionsBtn.on("click.autocomplete",function(b){a._selectListWidget.get("visible")||(a.showSuggestions("",!0,a._selectListWidget),b.stopPropagation())}),this._input.addClass("autocomplete-has-suggestion-btn"))},_makeAccessible:function(){this.$element.attr({role:"combobox","aria-multiselectable":this.options.multiple,"aria-autocomplete":this.options.typeahead?"list":"","aria-owns":this._selectlist.attr("id")||""}),this._input.add(this._suggestionsBtn).on("keydown",function(a){switch(a.which){case 40:this._selectListWidget.get("visible")||(this._selectListWidget.show().resetCaret(),a.preventDefault(),a.stopPropagation())}}.bind(this))},_addTag:function(a){13!==a.which||this.options.forceselection||(this._tagListWidget.addItem(this._input.val()),this.clear(),this._selectListWidget.hide())},_handleSelected:function(a){this._selectListWidget.hide();var b=a.selectedValue,c=a.displayedValue;this.options.multiple?(this._tagListWidget.addItem({display:c,value:b}),this.clear()):(this._lastSelected=b||c,this._lastSelectedDisplay=c,this.options.forceselection?(this._input.val(c),this._valueInput.val(this._lastSelected)):this._input.val(this._lastSelected),this._triggerValueChange()),this._input.trigger("focus")},showSuggestions:function(b,c){this.$element.trigger(a.Event("query",{value:b})),b.length||c?("static"===this._selectListWidget.options.type?this._handleStaticFilter(b):"dynamic"===this._selectListWidget.options.type&&this._handleDynamicFilter(b),this._selectListWidget.show().resetCaret()):this._selectListWidget.hide()},_handleStaticFilter:function(a){var b=this;a?this._selectListWidget.filter(function(c,d){return b.options.ignorecase&&(d=d.toLowerCase(),a=a.toLowerCase()),"starts"===b.options.mode?0===d.lastIndexOf(a,0):"contains"===b.options.mode?-1!==d.search(a):!1}):this._selectListWidget.filter()},_handleDynamicFilter:function(b){var c=a.extend({},this._selectListWidget.get("dataadditional"),{query:b});this._selectListWidget.set("dataadditional",c),this._selectListWidget.triggerLoadData(!0)},_triggerValueChange:function(){this.$element.trigger(a.Event("change:value"),{value:this.getValue()})},clear:function(){this._input.val(""),this._lastSelected="",this._lastSelectedDisplay="",this._selectListWidget.filter()},disable:function(){this.$element.addClass("is-disabled"),this.$element.attr("aria-disabled",!0),this._input.prop("disabled",!0),this._suggestionsBtn.prop("disabled",!0)},enable:function(){this.$element.removeClass("is-disabled"),this.$element.attr("aria-disabled",!1),this._input.prop("disabled",!1),this._suggestionsBtn.prop("disabled",!1)}}),CUI.Widget.registry.register("autocomplete",CUI.Autocomplete),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Autocomplete.init(a("[data-init~=autocomplete]",b.target))})}(jQuery,this),function(a){CUI.Select=new Class({toString:"Select",extend:CUI.Widget,construct:function(){this._button=this.$element.children(".coral-Select-button"),this._buttonText=this._button.children(".coral-Select-button-text"),this._select=this.$element.children(".coral-Select-select"),this._selectList=this.$element.children(".coral-SelectList"),this._tagList=this.$element.children(".coral-TagList"),this._valueInput=this.$element.children("input[type=hidden]"),this.applyOptions()},defaults:{type:"static",nativewidget:!1,nativewidgetonmobile:!0,multiple:!1,tagConfig:null,selectlistConfig:null},applyOptions:function(){var a=this.options.nativewidgetonmobile&&CUI.util.isTouch&&"static"===this.options.type;this._select.length>0&&this._select.prop("multiple")&&(this.options.multiple=!0),this.options.nativewidget||a?this._setNativeWidget(a):this._setSelectList(),this._setTagList(),"static"===this.options.type&&this._handleNativeSelect()},getValue:function(){return this.options.multiple?this._tagListWidget.getValues():"static"===this.options.type?this._select[0][this._select[0].selectedIndex].value:"dynamic"===this.options.type?this._valueInput.val():null},_setNativeWidget:function(a){this.options.nativewidget||a?(this._select.addClass("coral-Select-select--native"),this._select.css({height:this._button.outerHeight()}),this.options.multiple&&this._setTagList(),this._select.on("change.select",this._handleNativeSelect.bind(this))):(this._select.removeClass("coral-Select-select--native"),this._select.off("change.select"))},_handleNativeSelect:function(b){var c,d,e=this;e.options.multiple?(a.each(e._select[0].options,function(a,b){b.selected?e._tagListWidget.addItem({value:b.value,display:b.text}):e._tagListWidget.removeItem(b.value)}),c=e._tagListWidget.getValues()):e._select[0]&&(d=e._select[0][e._select[0].selectedIndex],e._buttonText.text(d?d.text:""),c=d?d.value:null),b&&this.$element.trigger(a.Event("selected",{selected:c}))},_updateNativeSelect:function(b){this._select.length&&a.each(this._select[0].options,function(a,c){c.selected=b.indexOf(c.value)>-1})},_parseMarkup:function(){function b(b,c){b.children("option").each(function(b,d){var e=a(d);a("<li/>",{"class":"coral-SelectList-item coral-SelectList-item--option","data-value":e.val(),text:e.text()}).appendTo(c)})}var c=this,d=this._select.children("optgroup");d.length>0?d.each(function(d,e){var f=a(e),g=a("<li/>",{"class":"coral-SelectList-item coral-SelectList-item--optgroup"}).append(a("<span/>",{"class":"coral-SelectList-groupHeader",text:f.attr("label")}));b(f,a("<ul/>",{"class":"coral-SelectList-sublist"}).appendTo(g)),c._selectList.append(g)}):b(this._select,this._selectList)},_setSelectList:function(){var b=this,c="static";0===this._selectList.length?this._selectList=a("<ul/>",{id:CUI.util.getNextId(),"class":"coral-SelectList"}).appendTo(this.$element):this._selectList.attr("id")||this._selectList.attr("id",CUI.util.getNextId()),this._button.attr({"data-toggle":"selectlist","data-target":"#"+this._selectList.attr("id")}),this._select.length>0?this._parseMarkup():c="dynamic",this._selectList.selectList(a.extend({relatedElement:this._button,type:c},this.options.selectlistConfig||{})),this._selectListWidget=this._selectList.data("selectList"),this._selectList.on("selected.select",this._handleSelected.bind(this)).on("show.select hide.select",function(a){b._button.toggleClass("active","show"===a.type)})},_setTagList:function(){var b=this;this.options.multiple&&(0===this._tagList.length&&(this._tagList=a("<ol/>",{"class":"coral-TagList"}).appendTo(this.$element)),this._tagList.tagList(this.options.tagConfig||{}),this._tagListWidget=this._tagList.data("tagList"),this._tagList.on("itemremoved",function(){var a=b._tagListWidget.getValues();b._updateNativeSelect(a)}))},_handleSelected:function(b){var c;b&&b.stopPropagation(),this._selectListWidget.hide(),this._select.val(""+b.selectedValue),this.options.multiple?(this._tagListWidget.addItem({value:b.selectedValue,display:b.displayedValue}),c=this._tagListWidget.getValues(),this._updateNativeSelect(c)):(this._buttonText.text(b.displayedValue),this._valueInput.val(b.selectedValue),c=""+b.selectedValue),this._button.trigger("focus"),this.$element.trigger(a.Event("selected",{selected:c}))}}),CUI.Widget.registry.register("select",CUI.Select),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Select.init(a("[data-init~=select]",b.target))})}(jQuery,this),function(a){var b=0;CUI.Popover=new Class({toString:"Popover",extend:CUI.Widget,construct:function(){this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:pointAt",this._position.bind(this)),this.$element.on("change:pointFrom",this._position.bind(this)),this.$element.on("change:alignFrom",this._position.bind(this)),this.$element.addClass("coral-Popover"),0===this._getContentElement(this.$element).length&&this._wrapContent(this.$element),this._$content=this._getContentElement(this.$element),this._createTail(),this.uuid=b+=1},defaults:{pointFrom:"bottom",preventAutoHide:!1,alignFrom:"left",visible:!1},_directions:["top","bottom","right","left"],_createTail:function(){this._$tail=a('<div class="coral-Popover-arrow coral-Popover-arrow--left"/>').appendTo(this.$element),this._cachedTailDimensions={},this._cachedTailDimensions.leftRight={width:this._$tail.outerWidth(),height:this._$tail.outerHeight()},this._cachedTailDimensions.topBottom={width:this._cachedTailDimensions.leftRight.height,height:this._cachedTailDimensions.leftRight.width},this._$tail.removeClass("coral-Popover-arrow--left")},_wrapContent:function(a){a.wrapInner('<div class="coral-Popover-content"/>')},_getContentElement:function(a){return a.find("> .coral-Popover-content")},_position:function(){if(this.options.visible&&this.options.pointAt){var b,c=this.$element,d=this.options.pointAt,e=this.options.pointFrom,f=this._cachedTailDimensions;if(a.isArray(d)){if(2!==d.length)return;d=this._convertCoordsToEvent(d)}var g=function(a,g){var h,i=c.offsetParent().offset();("top"==e||"bottom"==e)&&i.top+a.top<0?h="bottom":("left"==e||"right"==e)&&i.left+a.left<0&&(h="right"),h?(b=this._instructionFactory[h]({target:d,tailDimensions:f,allowFlip:!1,callback:this._applyFinalPosition.bind(this),within:this.options.within||window}),c.position(b)):this._applyFinalPosition(a,g)}.bind(this);b=this._instructionFactory[e]({target:d,tailDimensions:f,allowFlip:!0,callback:g,within:this.options.within||window}),c.position(b)}},_convertCoordsToEvent:function(b){var c=a.Event();return c.pageX=b[0],c.pageY=b[1],c},_applyFinalPosition:function(b,c){var d={top:b.top};if("right"===this.options.alignFrom){var e,f=this.$element.offsetParent();"html"==f.prop("tagName").toLowerCase()?(f=a("body"),e=f.outerWidth(!0)):e=f.innerWidth(),d.left="auto",d.right=e-b.left-this.$element.outerWidth(!0)}else d.left=b.left,d.right="auto";this.$element.css(d),this._positionTail(c)},_instructionFactory:{top:function(a){return{my:"center bottom-"+a.tailDimensions.topBottom.height,at:"center top",of:a.target,collision:"fit "+(a.allowFlip?"flip":"none"),using:a.callback,within:a.within}},right:function(a){return{my:"left+"+a.tailDimensions.leftRight.width+" center",at:"right center",of:a.target,collision:(a.allowFlip?"flip":"none")+" fit",using:a.callback,within:a.within}},bottom:function(a){return{my:"center top+"+a.tailDimensions.topBottom.height,at:"center bottom",of:a.target,collision:"fit "+(a.allowFlip?"flip":"none"),using:a.callback,within:a.within}},left:function(a){return{my:"right-"+a.tailDimensions.leftRight.width+" center",at:"left center",of:a.target,collision:(a.allowFlip?"flip":"none")+" fit",using:a.callback,within:a.within}}},_positionTail:function(b){var c,d=this.$element.offset();if(a.isArray(this.options.pointAt))c={top:this.options.pointAt[1],left:this.options.pointAt[0],width:0,height:0};else{var e=a(b.target.element).offset();c={top:e.top,left:e.left,width:b.target.width,height:b.target.height}}c.top-=d.top+parseFloat(this.$element.css("borderTopWidth")),c.left-=d.left+parseFloat(this.$element.css("borderLeftWidth"));var f,g,h,i;switch(this.options.pointFrom){case"top":case"bottom":i=this._cachedTailDimensions.topBottom.width,g=c.left+c.width/2-i/2,"bottom"==b.vertical?(f="coral-Popover-arrow--down",h=c.top-this._cachedTailDimensions.topBottom.height):(f="coral-Popover-arrow--up",h=c.top+c.height);break;case"left":case"right":i=this._cachedTailDimensions.leftRight.width,h=c.top+c.height/2-this._cachedTailDimensions.leftRight.height/2,"left"==b.horizontal?(f="coral-Popover-arrow--left",g=c.left+c.width):(f="coral-Popover-arrow--right",g=c.left-i)}this._$tail.css({top:h,left:g}).removeClass("coral-Popover-arrow--up coral-Popover-arrow--down coral-Popover-arrow--left coral-Popover-arrow--right").addClass(f)},_show:function(){this.$element.show().prop("aria-hidden",!1),this._position(),this.options.preventAutoHide||a("body").fipo("tap.popover-hide-"+this.uuid,"click.popover-hide-"+this.uuid,function(b){var c=this.$element.get(0);b.target===c||a.contains(c,b.target)||(this.hide(),a("body").off(".popover-hide-"+this.uuid))}.bind(this))},_hide:function(){this.$element.hide().prop("aria-hidden",!0),a("body").off(".popover-hide-"+this.uuid)},_setContent:function(){"string"==typeof this.options.content&&(this._$content.html(this.options.content),this._position())},setPosition:function(a){this.set("pointAt",a)}}),CUI.Widget.registry.register("popover",CUI.Popover),a(function(){a("body").fipo("tap.popover.data-api","click.popover.data-api",'[data-toggle="popover"]',function(){var b=a(this),c=CUI.util.getDataTarget(b);c=c&&c.length>0?c:b.next(".coral-Popover");var d=c.popover(a.extend({pointAt:b},c.data(),b.data())).data("popover");d.toggleVisibility()}).on("click.popover.data-api",'[data-toggle="popover"]',function(a){a.preventDefault()})})}(window.jQuery),function(a){function b(a){return 10>a?"0"+a:a}function c(a,b,c){void 0!==a&&(c[b]=a)}function d(a,b,c){c[b]=a?!0:!1}function e(a,b,c){c[b]=a||c[b]}function f(a,b,c){void 0!==a&&(c[b]=1*a)}function g(a){return a?moment([a.year(),a.month(),a.date()]):null}function h(a,b,c){return null===b&&null===c?!0:null===b?c>=a:null===c?a>=b:a>=b&&c>=a}function i(a,b){return a&&b?a.year()===b.year()&&a.month()===b.month()&&a.date()===b.date():void 0}var j=0;CUI.Datepicker=new Class({toString:"Datepicker",extend:CUI.Widget,defaults:{monthNames:null,dayNames:null,format:null,type:"date",selectedDateTime:null,startDay:0,disabled:!1,displayedFormat:null,storedFormat:null,headFormat:"MMMM YYYY",forceHTMLMode:!1,required:!1,hasError:!1,minDate:null,maxDate:null},displayDateTime:null,pickerShown:!1,construct:function(){this.guid=j+=1,this._readOptionsFromMarkup(),this._parseOptions(),this._setupMomentJS(),this._adjustMarkup(),this._findElements(),this._constructPopover(),this._initialize()},_readOptionsFromMarkup:function(){var b=this.options,g=this.$element,h=a(g.find("input").filter("[type^=date],[type=time]"));0!==h.length&&(b.type=h.attr("type")),[["disabled","disabled",d],["required","required",d],["displayed-format","displayedFormat",c],["stored-format","storedFormat",c],["force-html-mode","forceHTMLMode",c],["day-names","dayNames",e],["month-names","monthNames",e],["head-format","headFormat",e],["start-day","startDay",f],["min-date","minDate",c],["max-date","maxDate",c]].map(function(a){var c=a[0],d=a[1],e=a[2];e(g.data(c),d,b)})},_parseOptions:function(){var a=this.options;a.monthNames=a.monthNames||CUI.Datepicker.monthNames,a.dayNames=a.dayNames||CUI.Datepicker.dayNames,a.isDateEnabled="date"===a.type||"datetime"===a.type||"datetime-local"===a.type,a.isTimeEnabled="time"===a.type||"datetime"===a.type||"datetime-local"===a.type;var b=document.createElement("input");b.setAttribute("type",a.type),a.supportsInputType="text"!==b.type,null!==a.minDate&&(a.minDate="today"===a.minDate?moment().startOf("day"):moment(a.minDate,m).isValid()?moment(a.minDate,m):null),null!==a.maxDate&&(a.maxDate="today"===a.maxDate?moment().startOf("day"):moment(a.maxDate,m).isValid()?moment(a.maxDate,m):null),a.storedFormat=a.storedFormat||("time"===a.type?n:o),a.displayedFormat=a.displayedFormat||("time"===a.type?n:p),a.useNativeControls=a.forceHTMLMode,!a.forceHTMLMode&&l&&a.supportsInputType&&(a.useNativeControls=!0),a.useNativeControls&&(a.displayedFormat="date"===a.type?m:"time"===a.type?n:o)},_setupMomentJS:function(){this.options.language=q+(new Date).getTime(),moment.lang(this.options.language,{months:this.options.monthNames,weekdaysMin:this.options.dayNames})},_adjustMarkup:function(){var b=this.$element;if(this.options.useNativeControls)this.$popover=[];else{var c="popguid"+this.guid,d="#"+c+".coral-Popover";this.$popover=a("body").find(d),0===this.$popover.length&&(a("body").append(s.replace("%ID%",c)),this.$popover=a("body").find(d),this.options.isDateEnabled&&this.$popover.find(".coral-Popover-content").append(r))}if(0===b.find("input[type=hidden]").length&&b.append('<input type="hidden">'),!b.find("input[type=hidden]").attr("name")){var e=b.find("input").not("[type=hidden]").attr("name");b.find("input[type=hidden]").attr("name",e),b.find("input").not("[type=hidden]").removeAttr("name")}},_findElements:function(){this.$input=this.$element.find("input").not("[type=hidden]"),this.$hiddenInput=this.$element.find("input[type=hidden]"),this.$openButton=this.$element.find("button")},_constructPopover:function(){this.$popover.length&&(this.popover=new k({$element:this.$popover,$trigger:this.$openButton,options:this.options,setDateTimeCallback:this._popoverSetDateTimeCallback.bind(this),hideCallback:this._popoverHideCallback.bind(this)}))},_initialize:function(){this.options.useNativeControls?(this.displayDateTime=this.options.selectedDateTime=moment(this.$input.val(),this.options.displayedFormat),this.$openButton.hide()):this._switchInputTypeToText(this.$input),this.options.disabled||(this.$openButton.on("click",this._clickHandler.bind(this)),this.$input.on("change"+(l?" blur":""),this._inputChangedHandler.bind(this))),this.options.selectedDateTime||this._readInputVal([this.options.storedFormat,this.options.displayedFormat]),this._setDateTime(this.options.selectedDateTime,!0)},_readInputVal:function(a){var b=this.$input.eq(0).val();if(""!==b){var c=moment(b,a||this.options.displayedFormat);
c&&c.isValid()||(c=moment(b)),this.displayDateTime=this.options.selectedDateTime=c,null!==c&&c.isValid()&&(this.displayDateTime=this.options.selectedDateTime=c)}else this.displayDateTime=null},_updateState:function(){this.options.disabled?(this.$element.find("input,button").attr("disabled","disabled"),this._hidePicker()):this.$element.find("input,button").removeAttr("disabled"),this.options.hasError||!this.options.selectedDateTime&&this.options.required||this.options.selectedDateTime&&!this.options.selectedDateTime.isValid()?(this.$element.addClass("is-invalid"),this.$element.find("input").addClass("is-invalid")):(this.$element.removeClass("is-invalid"),this.$element.find("input").removeClass("is-invalid"))},_popoverSetDateTimeCallback:function(){this._setDateTime.apply(this,arguments),this.options.isTimeEnabled===!1&&this._hidePicker()},_popoverHideCallback:function(){this.pickerShown=!1,this.$element.find("input").removeClass("is-highlighted")},_switchInputTypeToText:function(a){var b=a.parent();a.detach().attr("type","text").prependTo(b)},_openNativeInput:function(){this.$input.trigger("tap")},_clickHandler:function(){if(this.pickerShown)this._hidePicker();else{var a=this;setTimeout(function(){a._openPicker()},100)}},_inputChangedHandler:function(){if(!this.options.disabled){var a;""!==this.$input.val()?(a=moment(this.$input.val(),this.options.displayedFormat),this.options.hasError=null!==a&&!h(a,this.options.minDate,this.options.maxDate)):this.options.hasError=!1,this._setDateTime(a,!0)}},_keyPress:function(){this.pickerShown},_openPicker:function(){this.options.useNativeControls?this._openNativeInput():(this._readInputVal(),this._showPicker())},_showPicker:function(){this.pickerShown||(this.$element.find("input").addClass("is-highlighted"),this.popover.show(this.displayDateTime),this.pickerShown=!0)},_hidePicker:function(){this.pickerShown&&(this.$element.find("input").removeClass("is-highlighted"),this.popover.hide(),this.pickerShown=!1)},_setDateTime:function(a,b){this.options.selectedDateTime=this.displayDateTime=a,a?a.isValid()&&this.$input.val(a.lang(this.options.language).format(this.options.displayedFormat)):this.$input.val("");var c=a&&a.isValid()?a.lang("en").format(this.options.storedFormat):"";this.$hiddenInput.val(c),this._updateState(),b||this.$input.trigger("change"),this.$hiddenInput.trigger("change")}}),CUI.Datepicker.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],CUI.Datepicker.dayNames=["Su","Mo","Tu","We","Th","Fr","Sa"],CUI.Widget.registry.register("datepicker",CUI.Datepicker),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Datepicker.init(a("[data-init~=datepicker]",b.target))});var k=new Class({toString:"Popover",extend:Object,construct:function(a){this.$element=a.$element,this.options=a.options,this.setDateTimeCallback=a.setDateTimeCallback,this.hideCallback=a.hideCallback,this.$element.popover(),this.popover=this.$element.data("popover"),this.popover.set({pointAt:a.$trigger,pointFrom:"bottom"}),this._setupListeners()},show:function(a){this.displayDateTime=a,this._renderCalendar(),this.options.isTimeEnabled&&this._renderTime(),this.popover.show()},hide:function(){this.popover.hide()},_setupListeners:function(){this.popover.on("hide",this._popupHideHandler.bind(this)),this.$element.find(".coral-DatePicker-calendar").on("swipe",this._swipeHandler.bind(this)),this.$element.on("mousedown",".coral-DatePicker-nextMonth",this._mouseDownNextHandler.bind(this)),this.$element.on("mousedown",".coral-DatePicker-prevMonth",this._mouseDownPrevHandler.bind(this)),this.options.isTimeEnabled&&(this.$element.on("selected",".coral-DatePicker-hour, .coral-DatePicker-minute",this._dropdownChangedHandler.bind(this)),this.$element.on("change",".coral-DatePicker-hour, .coral-DatePicker-minute",this._dropdownChangedHandler.bind(this)))},_popupHideHandler:function(){this.hideCallback()},_swipeHandler:function(a){var b=a.direction,c=this.displayDateTime.year(),d=this.displayDateTime.month();"left"===b?(this.displayDateTime=g(moment([c,d+1,1])),this._renderCalendar("left")):"right"===b&&(this.displayDateTime=g(moment([c,d-1,1])),this._renderCalendar("right"))},_mouseDownNextHandler:function(a){a.preventDefault(),this.displayDateTime&&(this.displayDateTime=g(moment([this.displayDateTime.year(),this.displayDateTime.month()+1,1])),this._renderCalendar("left"))},_mouseDownPrevHandler:function(a){a.preventDefault(),this.displayDateTime&&(this.displayDateTime=g(moment([this.displayDateTime.year(),this.displayDateTime.month()-1,1])),this._renderCalendar("right"))},_dropdownChangedHandler:function(){var a=this._getHoursFromDropdown(),b=this._getMinutesFromDropdown();this.options.selectedDateTime||(this.options.selectedDateTime=moment());var c=this.options.selectedDateTime.hours(a).minutes(b);this.setDateTimeCallback(c)},_tableMouseDownHandler:function(b){b.preventDefault();var c=moment(a(b.target).data("date"),o);if(this.options.isTimeEnabled){var d=this._getHoursFromDropdown(),e=this._getMinutesFromDropdown();c.hours(d).minutes(e)}this.setDateTimeCallback(c),this._renderCalendar()},_renderCalendar:function(a){var b=this.displayDateTime;b&&b.isValid()||(this.displayDateTime=b=moment());var c=b.year(),d=b.month()+1,e=this._renderOneCalendar(d,c),f=this.$element.find(".coral-DatePicker-calendar");e.on("mousedown","a",this._tableMouseDownHandler.bind(this)),f.find("table").length>0&&a?this._slideCalendar(e,"left"===a):(f.find("table").remove(),f.find(".coral-DatePicker-calendarSlidingContainer").remove(),f.find(".coral-DatePicker-calendarBody").append(e))},_renderOneCalendar:function(b,c){var d=moment([c,b-1,1]).lang(this.options.language).format(this.options.headFormat),e=a('<div class="coral-DatePicker-calendarHeader"><h2 class="coral-Heading coral-Heading--2">'+d+"</h2></div>").append(a('<button class="coral-MinimalButton coral-DatePicker-nextMonth">&#x203A;</button>')).append(a('<button class="coral-MinimalButton coral-DatePicker-prevMonth">&#x2039;</button>')),f=this.$element.find(".coral-DatePicker-calendar"),g=f.find(".coral-DatePicker-calendarHeader");g.length>0?g.replaceWith(e):f.prepend(e);var j=a("<table>");j.data("date",c+"/"+b);for(var k="<tr>",l=null,m=0;7>m;m++){l=(m+this.options.startDay)%7;var n=this.options.dayNames[l];k+="<th><span>"+n+"</span></th>"}k+="</tr>",j.append("<thead>"+k+"</thead>");var p=moment([c,b-1,1]),q=(p.day()-this.options.startDay)%7;0>q&&(q+=7),k="";for(var r=moment(),s=0;6>s;s++){k+="<tr>";for(var t=0;7>t;t++){l=7*s+t-q+1;var u=moment([c,b-1,l]),v=u.month()+1===parseFloat(b),w="";i(u,r)&&(w+=" today"),i(u,this.options.selectedDateTime)&&(w+=" selected"),k+=v&&h(u,this.options.minDate,this.options.maxDate)?'<td class="'+w+'"><a href="#" data-date="'+u.lang(this.options.language).format(o)+'">'+u.date()+"</a></td>":'<td class="'+w+'"><span>'+u.date()+"</span></td>"}k+="</tr>"}return j.append("<tbody>"+k+"</tbody>"),j},_slideCalendar:function(b,c){this.$element.find(".coral-DatePicker-calendarSlidingContainer table").stop(!0,!0),this.$element.find(".coral-DatePicker-calendarSlidingContainer").remove();var d=this.$element.find("table"),e=d.width(),f=d.height(),g=a('<div class="coral-DatePicker-calendarSlidingContainer">');g.css({display:"block",position:"relative",width:e+"px",height:f+"px",overflow:"hidden"}),this.$element.find(".coral-DatePicker-calendarBody").append(g),g.append(d).append(b),d.css({position:"absolute",left:0,top:0}),d.after(b),b.css({position:"absolute",left:c?e:-e,top:0}),d.animate({left:c?-e:e},y,function(){d.remove()}),b.animate({left:0},y,function(){0!==g.parents().length&&(b.css({position:"relative",left:0,top:0}),b.detach(),this.$element.find(".coral-DatePicker-calendarBody").append(b),g.remove())}.bind(this))},_renderTime:function(){for(var c=this.options.selectedDateTime,d=a(t),e=a('<select class="coral-Select-select"></select>'),f=0;24>f;f++){var g=a("<option>"+b(f)+"</option>");c&&f===c.hours()&&g.attr("selected","selected"),e.append(g)}for(var h=a(u).append(e),i=a('<select class="coral-Select-select"></select>'),j=0;60>j;j++){var k=a("<option>"+b(j)+"</option>");c&&j===c.minutes()&&k.attr("selected","selected"),i.append(k)}var l=a(v).append(i);a(h).css(w),a(h).find("coral-Select").css(x),a(l).css(w),a(l).find("coral-Select").css(x),d.append(h,a("<span>:</span>"),l),0===this.$element.find(".coral-DatePicker-timeControls").length?this.$element.find(".coral-Popover-content").append(d):this.$element.find(".coral-DatePicker-timeControls").empty().append(d.children()),a(h).select(),a(l).select()},_getHoursFromDropdown:function(){return parseInt(this.$element.find(".coral-DatePicker-timeControls .coral-DatePicker-hour .coral-Select-select").val(),10)},_getMinutesFromDropdown:function(){return parseInt(this.$element.find(".coral-DatePicker-timeControls .coral-DatePicker-minute .coral-Select-select").val(),10)}}),l=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i),m="YYYY-MM-DD",n="HH:mm",o="YYYY-MM-DD[T]HH:mmZ",p="YYYY-MM-DD HH:mm",q="coralui_",r=['<div class="coral-DatePicker-calendar">','<div class="coral-DatePicker-calendarHeader"></div>','<div class="coral-DatePicker-calendarBody"></div>',"</div>"].join(""),s=['<div class="coral-Popover" style="display:none" id="%ID%">','<div class="coral-Popover-content"></div>',"</div>"].join(""),t='<div class="coral-DatePicker-timeControls"><i class="coral-Icon coral-Icon--clock coral-Icon--small"></i></div>',u='<div class="coral-Select coral-DatePicker-hour"><button class="coral-Select-button coral-MinimalButton"><span class="coral-Select-button-text"></span></button></div>',v='<div class="coral-Select coral-DatePicker-minute"><button class="coral-Select-button coral-MinimalButton"><span class="coral-Select-button-text"></span></button></div>',w={position:"relative"},x={position:"absolute",left:"1.5rem",top:"1rem"},y=400}(window.jQuery);