!function(a,b){var c="jwv7ouu";a.CUI&&a.CUI.options&&a.CUI.options.typeKitId&&(c=a.CUI.options.typeKitId);var d={kitId:c,scriptTimeout:3e3};if(!a.Typekit){var e=document.getElementsByTagName("html")[0];e.className+=" wf-loading";var f=setTimeout(function(){e.className=e.className.replace(/(\s|^)wf-loading(\s|$)/g," "),e.className+=" wf-inactive"},d.scriptTimeout),g=document.createElement("script"),h=!1;g.src="//use.typekit.net/"+d.kitId+".js",g.type="text/javascript",g.async="true",g.onload=g.onreadystatechange=function(){var a=this.readyState;if(!(h||a&&"complete"!=a&&"loaded"!=a)){h=!0,clearTimeout(f);try{Typekit.load(d)}catch(b){}}};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(g,i)}}(this);var Class,Exception;!function(){var a=function(a){var b=a.bind(this);return b._methodName=a._methodName,this[b._methodName]=b,b},b=function(a){return a.extend=this,new Class(a)};Class=function(c){if(c=c||{},c.hasOwnProperty("extend")&&!c.extend)throw new Class.NonTruthyExtendError("function"==typeof c.toString?c.toString():c.toString);var d=c.extend||Object,e=c.construct,f=c.destruct;if(delete c.bind,delete c.extend,delete c.destruct,delete c.construct,c.hasOwnProperty("toString")&&"function"!=typeof c.toString){var g=c.toString;c.toString=function(){return g.toString()}}else!c.hasOwnProperty("toString")&&d.prototype.hasOwnProperty("toString")&&(c.toString=d.prototype.toString);var h=c,i=Object.create(d&&d.prototype);if(i.superClass=d.prototype,h)for(var j in h)h.hasOwnProperty(j)&&(i[j]=h[j],"function"==typeof h[j]&&(i[j]._methodName=j,i[j]._parentProto=i));i.inherited=function(a){var b=a.callee,c=b._methodName;if(!c)throw new Class.MissingCalleeError(this.toString());for(var d=b._parentProto,e=null;d.superClass&&(d=d.superClass,e=d[c],"function"!=typeof e););if("function"==typeof e){var f=this.inherited;this.inherited=d.inherited;var g=e.apply(this,a);return this.inherited=f,g}throw new Class.InheritedMethodNotFoundError(this.toString(),c)},i.bind=a,i.destruct=function(){"function"==typeof f&&f.apply(this),d&&d.prototype&&"function"==typeof d.prototype.destruct&&d.prototype.destruct.apply(this)},i.construct=function(){var a=arguments;void 0===a[0]&&(a.length=1,a[0]={}),d&&d.prototype&&"function"==typeof d.prototype.construct&&d.prototype.construct.apply(this,arguments),"function"==typeof e&&e.apply(this,arguments)};var k=function(){var a=Object.create(i);return i.construct.apply(a,arguments),a};return k.toString=i.toString,k.prototype=i,k.extend=b,i.constructor=k,k},Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Exception=new Class({extend:Error,construct:function(){this.name="Error",this.message="General exception"},toString:function(){return this.name+": "+this.message}});var c=Exception.extend({name:"Class Exception"});Class.NonTruthyExtendError=c.extend({construct:function(a){this.message=a+" attempted to extend a non-truthy object"}}),Class.InheritedMethodNotFoundError=c.extend({construct:function(a,b){this.message=a+" can't call method '"+b+"', no method defined in parent classes"}}),Class.MissingCalleeError=c.extend({construct:function(a){this.message=a+" can't call inherited method: calling method did not have _methodName"}})}(),function(a,b,c){b.CUI=b.CUI||{},CUI.options=a.extend({debug:!1,dataAPI:!0},CUI.options),a(function(){a(document).trigger("cui-contentloaded")})}(jQuery,this),function(a,b,c){var d=1;CUI.util={isTouch:function(){return/Windows NT 6\.[23];.*Chrome/.test(b.navigator.userAgent)?!1:"ontouchstart"in b}(),getNextId:function(){return"coral-"+d++},getDataTarget:function(b){var c=b.attr("href"),d=a(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,""));return d},decapitalize:function(a){return a.slice(0,1).toLowerCase()+a.slice(1)},capitalize:function(a){return a.slice(0,1).toUpperCase()+a.slice(1)},plugClass:function(b,c,d){c=c||CUI.util.decapitalize(b.toString()),a.fn[c]=function(e){var f=arguments;return this.each(function(){var g=a(this),h=a.extend({},g.data(),"object"==typeof e&&e,{element:this}),i=g.data(c)||new b(h);"string"==typeof e?i[e].apply(i,Array.prototype.slice.call(f,1)):a.isPlainObject(e)&&i.set(e),"function"==typeof d&&d.call(this,i)})},a.fn[c].Constructor=b},buildFunction:function(a,b){if(b=b||[],"string"==typeof b&&(b=[b]),a)try{var c=Function;return new c(b,"return "+a+"("+b.join(", ")+");")}catch(d){return null}},selectText:function(b,c,d){var e=b.val();if(e.length>0){c=c||0,d=d||e.length;var f=a(b)[0];if(f.setSelectionRange)f.blur(),f.setSelectionRange(c,d),f.focus();else if(f.createTextRange){var g=f.createTextRange();g.collapse(!0),g.moveEnd("character",d-e.length),g.moveStart("character",c),g.select()}}},getNested:function(a,b){if(!b)return a;for(var c="string"==typeof b?b.split("."):b,d=a;d&&c.length>0;)d=d[c.shift()];return d},isTrue:function(a){return"true"===a}},a("html").toggleClass("touch",CUI.util.isTouch)}(jQuery,this),function(a,b,c){function d(b,c){var d,f,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,f=d.name,b.href&&f&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&e(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&e(b)}function e(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.fn.loadWithSpinner=function(b,c,d){var e=a(this);if(b&&(c||e.data("loaded-remote")!==b)){var f=setTimeout(function(){e.html('<div class="spinner large"></div>')},50);e.load(b,function(a,b,c){clearTimeout(f),"error"===b&&(e.html('<div class="alert error"><strong>ERROR</strong> Failed to load content: '+c.statusText+" ("+c.status+")</div>"),e.data("loaded-remote","")),"function"==typeof d&&d.call(this,a,b,c)}),e.data("loaded-remote",b)}},a.fn.finger=function(){return CUI.util.isTouch&&this.on.apply(this,arguments),this},a.fn.pointer=function(){return CUI.util.isTouch||this.on.apply(this,arguments),this},a.fn.fipo=function(){var a=Array.prototype.slice.call(arguments,1,arguments.length);return this.pointer.apply(this,a),a[0]=arguments[0],this.finger.apply(this,a),this},a.extend(a.expr[":"],{data:a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}),focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),e=isNaN(c);return(e||c>=0)&&d(b,!e)}})}(jQuery,this),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&h(c+d)<n&&(i.horizontal="center"),m>p&&h(e+f)<p&&(i.vertical="middle"),g(h(c),h(d))>g(h(e),h(f))?i.important="horizontal":i.important="vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&0>=i?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&0>=i?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a,b,c){function d(b,c,d,e){a.each(i,function(a,f){f[b].call(this,c,d,e)})}function e(a){var b=j.Event(a);h=j.State(b),d("touchstart",a,h,b)}function f(a){var b=j.Event(a);h.move.push(b),d("touchmove",a,h,b)}function g(a){var b=j.Event(a);h.end=b,d("touchend",a,h,b)}var h,i={},j={active:!1,on:function(){a(document).on("touchstart",e).on("touchmove",f).on("touchend touchcancel",g),j.active=!0},off:function(){a(document).off("touchstart",e).off("touchmove",f).off("touchend touchcancel",g),j.active=!1},track:function(a,b){i[a]=b},addEventParam:function(b,c){var d=a(b.target),e=d.offset(),f={pageX:b.point[0].x,pageY:b.point[0].y,offsetX:e.left-b.point[0].x,offsetY:e.top-b.point[0].y};return a.extend(f,c)},Event:function(b){var c={type:b.type,timestamp:(new Date).getTime(),target:b.target,point:[]},d=b.changedTouches||b.originalEvent.changedTouches||b.touches||b.originalEvent.touches;return a.each(d,function(a,b){c.point.push({x:b.pageX,y:b.pageY})}),c},State:function(a){a.point[0];return{start:a,move:[],end:null}},calc:{getDuration:function(a,b){return b.timestamp-a.timestamp},getDistance:function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},getAngle:function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI},getDirection:function(a){return-45>a&&a>-135?"top":a>=-45&&45>=a?"right":a>=45&&135>a?"down":a>=135||-135>=a?"left":"unknown"},getScale:function(a,b){var c=a.point,d=b.point;return 2===c.length&&2===d.length?(Math.sqrt(Math.pow(d[0].x-d[1].x,2)+Math.pow(d[0].y-d[1].y,2))/Math.sqrt(Math.pow(c[0].x-c[1].x,2)+Math.pow(c[0].y-c[1].y,2))).toFixed(2):0},getRotation:function(a,b){var c=a.point,d=b.point;return 2===c.length&&2===d.length?(180*Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x)/Math.PI-180*Math.atan2(c[0].y-c[1].y,c[0].x-c[1].x)/Math.PI).toFixed(2):0}}};j.on(),a.toe=j}(jQuery,this),function(a,b,c,d){var e="swipe",f={distance:40,duration:1200,direction:"all"};b.track(e,{touchstart:function(a,b,c){b[e]={finger:c.point.length}},touchmove:function(a,b,c){b[e].finger=c.point.length>b[e].finger?c.point.length:b[e].finger},touchend:function(c,d,g){var h,i,j=a.extend(f,c.data);h=b.calc.getDuration(d.start,g),i=b.calc.getDistance(d.start.point[0],g.point[0]),h<j.duration&&i>j.distance&&(d[e].angle=b.calc.getAngle(d.start.point[0],g.point[0]),d[e].direction=b.calc.getDirection(d[e].angle),("all"===j.direction||d[e].direction===j.direction)&&a(c.target).trigger(a.Event(e,b.addEventParam(d.start,d[e]))))}})}(jQuery,jQuery.toe,this),function(a,b,c,d){var e="tap",f={distance:10,duration:300,finger:1};b.track(e,{touchstart:function(a,b,c){b[e]={finger:c.point.length}},touchmove:function(a,b,c){b[e].finger=c.point.length>b[e].finger?c.point.length:b[e].finger},touchend:function(c,d,g){var h,i,j=a.extend(f,c.data);h=b.calc.getDuration(d.start,g),i=b.calc.getDistance(d.start.point[0],g.point[0]),h<j.duration&&i<j.distance&&d[e].finger===j.finger&&a(c.target).trigger(a.Event(e,b.addEventParam(d.start,d[e])))}})}(jQuery,jQuery.toe,this),function(a,b,c,d){var e,f,g="taphold",h={distance:20,duration:500,finger:1};b.track(g,{touchstart:function(c,d,i){var j=a.extend(h,c.data);f=!1,d[g]={finger:i.point.length},clearTimeout(e),e=setTimeout(function(){!f&&b.active&&d[g].finger===j.finger&&a(c.target).trigger(a.Event(g,b.addEventParam(i,d[g])))},j.duration)},touchmove:function(c,d,e){var i,j=a.extend(h,c.data);d[g].finger=e.point.length>d[g].finger?e.point.length:d[g].finger,i=b.calc.getDistance(d.start.point[0],e.point[0]),i>j.distance&&(f=!0)},touchend:function(a,b,c){f=!0,clearTimeout(e)}})}(jQuery,jQuery.toe,this),function(a,b,c,d){var e,f="transform",g={scale:.1,rotation:15};b.track(f,{touchstart:function(a,b,c){e=!1,b[f]={start:c,move:[]}},touchmove:function(c,d,h){var i=a.extend(g,c.data);2===h.point.length&&(d[f].move.push(h),2!==d[f].start.point.length&&2===h.point.length&&(d[f].start=a.extend({},h)),d[f].rotation=b.calc.getRotation(d[f].start,h),d[f].scale=b.calc.getScale(d[f].start,h),(Math.abs(1-d[f].scale)>i.scale||Math.abs(d[f].rotation)>i.rotation)&&(e||(a(c.target).trigger(a.Event("transformstart",d[f])),e=!0),a(c.target).trigger(a.Event("transform",d[f]))))},touchend:function(c,d,g){e&&(e=!1,2!==g.point.length&&(d.end=a.extend({},d[f].move[d[f].move.length-1])),d[f].rotation=b.calc.getRotation(d[f].start,d.end),d[f].scale=b.calc.getScale(d[f].start,d.end),a(c.target).trigger(a.Event("transformend",d[f])))}})}(jQuery,jQuery.toe,this),function(a){var b=Math.abs;a.ui.position.flip.top=function(a,c){var d,e,f=c.within,g=f.offset.top+f.scrollTop,h=f.height,i=f.isWindow?f.scrollTop:f.offset.top,j=a.top-c.collisionPosition.marginTop,k=j-i,l=j+c.collisionHeight-h-i,m="top"===c.my[1],n=m?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,o="top"===c.at[1]?c.targetHeight:"bottom"===c.at[1]?-c.targetHeight:0,p=-2*c.offset[1];0>k?(e=a.top+n+o+p+c.collisionHeight-h-g,(0>e||e<b(k))&&(a.top+=n+o+p)):l>0&&(d=a.top-c.collisionPosition.marginTop+n+o+p-i,(d>0||b(d)<l)&&(a.top+=n+o+p))}}(jQuery),function(a,b,c){CUI.Widget=new Class({toString:"Widget",construct:function(d){this.$element=a(d.element);var e=CUI.util.decapitalize(this.toString());if(this.$element.data(e)!==c){var f=["An instance of",this,"is already attached to the specified target element.","Future versions of CoralUI will throw an exception at this point."].join(" ");b.console.log(f)}this.options=a.extend({},"object"==typeof this.defaults&&this.defaults,this.$element.data(),d),this.$element.data(e,this),this.bind(this.hide),this.bind(this.show),this.bind(this.toggleVisibility),this.on("change:visible",function(a){this[a.value?"_show":"_hide"]()}.bind(this))},set:function(b,c){if(a.isPlainObject(b))for(var d in b)this._set(d,b[d]);else this._set(b,c);return this},_set:function(b,c){var d=a.Event("beforeChange:"+b,{widget:this,option:b,currentValue:this.options[b],value:c});return this.$element.trigger(d),d.isDefaultPrevented()?this:(this.options[b]=c,d=a.Event("change:"+b,{widget:this,option:b,value:c}),void this.$element.trigger(d))},get:function(a){return this.options[a]},on:function(a,b){return this.$element.on.apply(this.$element,arguments),this},off:function(a,b){return this.$element.off.apply(this.$element,arguments),this},show:function(b){if(b=b||{},this.options.visible)return this;if(!b.silent){var c=a.Event("show");if(this.$element.trigger(c),c.isDefaultPrevented())return this}return this.options.visible=!0,this._show(b),this},_show:function(a){this.$element.show()},hide:function(b){if(b=b||{},!this.options.visible)return this;if(!b.silent){var c=a.Event("hide");if(this.$element.trigger(c),c.isDefaultPrevented())return this}return this.options.visible=!1,this._hide(b),this},_hide:function(a){this.$element.hide()},toggleVisibility:function(){return this[this.options.visible?"hide":"show"]()},setName:function(a){return this.toString=function(){return a},this}}),CUI.Widget.fromElement=function(a,b){return b.data(CUI.util.decapitalize(a.toString()))},CUI.Widget.registry={register:function(a,b){CUI.util.plugClass(b),this._widgets[a]=b,b.init=function(a){this._init(b,a)}.bind(this)},resolve:function(a){return this._widgets[a]},init:function(a,b){this._init(this.resolve(a),b)},getSelectors:function(){var a=[];for(var b in this._widgets)a.push(b);return a},_widgets:{},_init:function(b,d){b!==c&&d.each(function(){var d=a(this);CUI.Widget.fromElement(b,d)===c&&new b({element:d})})}}}(jQuery,this),function(a){var b="is-active";CUI.Accordion=new Class({toString:"Accordion",extend:CUI.Widget,construct:function(a){this._parseAttributes(),this._setAccordion(),this._setListeners(),this._makeAccessible(),this._updateDOMForDisabled()},defaults:{active:!1,disabled:!1,iconClassCollapsed:"coral-Icon--chevronRight",iconClassExpanded:"coral-Icon--chevronDown"},isAccordion:!1,_parseAttributes:function(){var a=this.$element.attr("data-icon-class-collapsed");a&&(this.options.iconClassCollapsed=a);var b=this.$element.attr("data-icon-class-expanded");b&&(this.options.iconClassExpanded=b)},_setAccordion:function(){var a=this.$element;if(this.isAccordion=!a.hasClass("coral-Collapsible")&&"collapsible"!==a.data("init"),this.isAccordion){a.addClass("coral-Accordion");var c=a.children("."+b).index();this.options.active!==!1?c=this.options.active:this.options.active=c,a.children().each(function(a,b){this._initElement(b,a!=c)}.bind(this))}else this.options.active=a.hasClass(b),this._initElement(a,!this.options.active)},_setListeners:function(){var a=this.isAccordion?"> .coral-Accordion-item > .coral-Accordion-header":"> .coral-Collapsible-header";this.$element.on("click",a,this._toggle.bind(this)),this.$element.on("change:active",this._changeActive.bind(this));var b=this.isAccordion?".coral-Accordion-header":".coral-Collapsible-header";this.$element.on("selectstart",b,function(a){a.preventDefault()}),this.on("change:disabled",function(a){this._updateDOMForDisabled()}.bind(this))},_updateDOMForDisabled:function(){this.options.disabled?this.$element.addClass("is-disabled").attr("aria-disabled",!0).find("[role=tab], > [role=button]").removeAttr("tabindex").attr("aria-disabled",!0):this.$element.removeClass("is-disabled").attr("aria-disabled",!1).find("[role=tab], > [role=button]").each(function(b,c){var d=a(c);d.removeAttr("aria-disabled").attr("tabindex",d.is("[aria-selected=true][aria-controls], [aria-expanded][aria-controls]")?0:-1)})},_toggle:function(c){if(!this.options.disabled){var d=a(c.target).closest(this._getCollapsibleSelector()),e=d.hasClass(b),f=e?!1:this.isAccordion?d.index():!0;this.setActive(f)}},_changeActive:function(){if(this.isAccordion){if(this._collapse(this.$element.children("."+b)),this.options.active!==!1){var a=this.$element.children().eq(this.options.active);this._expand(a)}}else this.options.active?this._expand(this.$element):this._collapse(this.$element)},setActive:function(a){a!==this.options.active&&(this.options.active=a,this._changeActive())},_initElement:function(c,d){c=a(c),0===this._getHeaderElement(c).length&&this._prependHeaderElement(c),0===this._getHeaderIconElement(c).length&&this._prependHeaderIconElement(c),0===this._getContentElement(c).length&&this._prependContentElement(c),c.addClass(this.isAccordion?"coral-Accordion-item":"coral-Collapsible");var e=this._getHeaderElement(c),f=this._getContentElement(c),g=this._getHeaderIconElement(c);e.prependTo(c),d?(c.removeClass(b),g.hasClass("coral-Icon")||g.addClass("coral-Icon coral-Icon--sizeXS"),g.removeClass(this.options.iconClassExpanded).addClass(this.options.iconClassCollapsed),f.hide()):(c.addClass(b),g.hasClass("coral-Icon")||g.addClass("coral-Icon coral-Icon--sizeXS"),g.removeClass(this.options.iconClassCollapsed).addClass(this.options.iconClassExpanded),f.show())},_collapse:function(a){var c=this._getHeaderElement(a),d=this._getContentElement(a),e=this._getHeaderIconElement(a);e.removeClass(this.options.iconClassExpanded).addClass(this.options.iconClassCollapsed),d.slideUp({duration:"fast",complete:function(){a.removeClass(b),a.trigger("deactivate")},progress:function(b,c,d){a.trigger("collapse",{animation:b,progress:c,remainingMs:d})}}),c.attr(this.isAccordion?{tabindex:c.is(document.activeElement)?0:-1,"aria-selected":!1}:{"aria-expanded":!1}),d.attr({"aria-hidden":!0,"aria-expanded":!1})},_expand:function(a){var c=this._getHeaderElement(a),d=this._getContentElement(a),e=this._getHeaderIconElement(a);a.addClass(b),e.removeClass(this.options.iconClassCollapsed).addClass(this.options.iconClassExpanded),d.slideDown({duration:"fast",complete:function(){a.trigger("activate")},progress:function(b,c,d){a.trigger("expand",{animation:b,progress:c,remainingMs:d})}}),c.attr(this.isAccordion?{tabindex:0,"aria-selected":!0}:{"aria-expanded":!0}),d.attr({"aria-hidden":!1,"aria-expanded":!0}).show()},_getCollapsibleSelector:function(){return this.isAccordion?".coral-Accordion-item":".coral-Collapsible"},_getHeaderElement:function(a){var b=this.isAccordion?"> .coral-Accordion-header":"> .coral-Collapsible-header";return a.find(b)},_getHeaderFirstElement:function(a){var b=this.isAccordion?"> .coral-Accordion-header:first":"> .coral-Collapsible-header:first";return a.find(b)},_prependHeaderElement:function(a){var b=this.isAccordion?"coral-Accordion-header":"coral-Collapsible-header";a.prepend('<h3 class="'+b+'">&nbsp;</h3>')},_getHeaderIconElement:function(a){var b=this.isAccordion?"> .coral-Accordion-header > i":"> .coral-Collapsible-header > i";return a.find(b)},_prependHeaderIconElement:function(a){this._getHeaderElement(a).prepend("<i></i>")},_getContentElement:function(a){var b=this.isAccordion?"> .coral-Accordion-content":"> .coral-Collapsible-content";return a.find(b)},_prependContentElement:function(a){var b=this.isAccordion?"coral-Accordion-content":"coral-Collapsible-content";a.prepend('<div class="'+b+'"></div>')},_makeAccessible:function(){var c,d,e,f,g,h="accordion-"+(new Date).getTime()+"-";this.isAccordion?(this.$element.attr({role:"tablist"}),this.$element.children(".coral-Accordion-item").each(function(c,d){var e=a(d),f=e.find("> .coral-Accordion-header:first"),g=e.hasClass(b),i=h+"panel-"+c,j=f.next("div");e.attr({role:"presentation"}),f.attr({role:"tab",id:f.attr("id")||h+"tab-"+c,"aria-controls":i,"aria-selected":g,tabindex:g?0:-1}),j.attr({role:"tabpanel",id:i,"aria-labelledby":f.attr("id"),"aria-expanded":g,"aria-hidden":!g})})):(h="collapsible-"+(new Date).getTime()+"-",c=this.$element,d=this._getHeaderFirstElement(c),f=c.hasClass(b),g=h+"panel",e=d.next("div"),d.attr({role:"button",id:d.attr("id")||h+"heading","aria-controls":g,"aria-expanded":f,tabindex:0}),e.attr({id:g,"aria-labelledby":d.attr("id"),"aria-expanded":f,"aria-hidden":!f})),this.$element.on("keydown",":focusable",this._onKeyDown.bind(this)),this.$element.on("focusin.accordion",":focusable",this._onFocusIn.bind(this)),this.$element.on("focusout.accordion",".coral-Accordion-header:focusable",this._onFocusOut.bind(this)),this.$element.on("touchstart.accordion, mousedown.accordion",".coral-Accordion-header:focusable",this._onMouseDown.bind(this))},_onKeyDown:function(b){var c=a(b.currentTarget).closest(this._getCollapsibleSelector()),d=this._getHeaderFirstElement(c),e=a(b.currentTarget).is(d),f=!0;switch(b.which){case 13:case 32:e?d.trigger("click"):f=!1;break;case 33:case 37:case 38:e&&this.isAccordion||33===b.which&&(b.metaKey||b.ctrlKey)?0===this._getHeaderFirstElement(c.prev()).focus().length&&this.$element.find("> .coral-Accordion-item:last > .coral-Accordion-header:first").focus():e||!b.metaKey&&!b.ctrlKey?f=!1:d.focus();break;case 34:case 39:case 40:e&&this.isAccordion?0===this._getHeaderFirstElement(c.next()).focus().length&&this.$element.find("> .coral-Accordion-item:first > .coral-Accordion-header:first").focus():e||34!==b.which||!b.metaKey&&!b.ctrlKey?f=!1:d.focus();break;case 36:e&&this.isAccordion?this.$element.find("> .coral-Accordion-item:first > .coral-Accordion-header:first").focus():f=!1;break;case 35:e&&this.isAccordion?this.$element.find("> .coral-Accordion-item:last > .coral-Accordion-header:first").focus():f=!1;break;default:f=!1}f===!0&&b.preventDefault()},_onFocusIn:function(b){var c=a(b.currentTarget).closest(this._getCollapsibleSelector()),d=this._getHeaderFirstElement(c),e=a(b.currentTarget).is(d);this.options.disabled||(e&&(this.isAccordion&&this.$element.find("> .coral-Accordion-item > .coral-Accordion-header[role=tab]").attr("tabindex",-1),d.data("collapsible-mousedown")?d.removeData("collapsible-mousedown"):c.focus()),d.attr("tabindex",0))},_onFocusOut:function(b){var c=a(b.currentTarget).closest(this._getCollapsibleSelector()),d=this._getHeaderFirstElement(c),e=a(b.currentTarget).is(d);e&&c.blur().removeData("collapsible-mousedown")},_onMouseDown:function(b){var c=a(b.currentTarget).closest(this._getCollapsibleSelector()),d=this._getHeaderFirstElement(c),e=a(b.currentTarget).is(d);e&&d.data("collapsible-mousedown",!0)}}),CUI.Widget.registry.register("accordion",CUI.Accordion),a(document).on("cui-contentloaded.data-api",function(b){CUI.Accordion.init(a("[data-init~=accordion],[data-init~=collapsible]",b.target))})}(window.jQuery),function(a){CUI.Alert=new Class({toString:"Alert",extend:CUI.Widget,construct:function(a){this.$element.delegate('[data-dismiss="alert"]',"click.dismiss.alert",this.hide),this.$element.addClass("coral-Alert"),this.$element.on("change:heading",this._setHeading.bind(this)),this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:closeable",this._setCloseable.bind(this)),this.$element.on("change:size",this._setSize.bind(this));for(var b in this._types)if(this.$element.hasClass(this._types[b]["class"]))return this.options.type=b,!1;for(var c in this._sizes)if(this.$element.hasClass(this._sizes[c]))return this.options.size=c,!1;this._setCloseable(),this._setType(),this._setSize(),this._setHeading(),this._setContent()},defaults:{type:"error",size:"small",heading:void 0,visible:!0,closeable:!0},_types:{error:{"class":"coral-Alert--error",iconClass:"coral-Icon--alert"},notice:{"class":"coral-Alert--notice",iconClass:"coral-Icon--alert"},success:{"class":"coral-Alert--success",iconClass:"coral-Icon--checkCircle"},help:{"class":"coral-Alert--help",iconClass:"coral-Icon--helpCircle"},info:{"class":"coral-Alert--info",iconClass:"coral-Icon--infoCircle"}},_sizes:{small:"",large:"coral-Alert--large"},_setContent:function(){"string"==typeof this.options.content&&this.$element.find("div").html(this.options.content)},_setHeading:function(){"string"==typeof this.options.heading&&this.$element.find("strong").html(this.options.heading)},_setType:function(){if(this._isValidType(this.options.type)){var a=this.$element.find("> .coral-Icon");for(var b in this._types)this.$element.removeClass(this._types[b]["class"]),a.removeClass(this._types[b].iconClass);this.$element.addClass(this._types[this.options.type]["class"]);var c=this._types[this.options.type].iconClass;a.addClass(c)}},_setSize:function(){this._isValidSize(this.options.size)&&("small"===this.options.size?this.$element.removeClass(this._sizes.large):this.$element.addClass(this._sizes.large))},_setCloseable:function(){var a=this.$element.find(".coral-Alert-closeButton");!a.length&&this.options.closeable?this.$element.prepend('<button class="coral-MinimalButton coral-Alert-closeButton" title="Close" data-dismiss="alert"><i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon"></i></button>'):a[this.options.closeable?"show":"hide"]()},_isValidType:function(a){return"string"==typeof a&&this._types.hasOwnProperty(a)},_isValidSize:function(a){return"string"==typeof a&&this._sizes.hasOwnProperty(a)},_fixType:function(a){return this._isValidType(a)?a:this.defaults.type},_fixHeading:function(a){return void 0===a?this._fixType(this.options.type).toUpperCase():a}}),CUI.Widget.registry.register("alert",CUI.Alert),CUI.options.dataAPI&&a(function(){a(document).on("click.alert.data-api",'[data-dismiss="alert"]',function(b){
a(b.currentTarget).parent().hide(),b.preventDefault()})})}(window.jQuery),function(a){CUI.NumberInput=new Class({toString:"NumberInput",extend:CUI.Widget,construct:function(a){this._initMarkup(),this._setListeners(),this._setAttributes()},defaults:{defaultValue:0,max:null,min:null,step:1,hasError:!1,disabled:!1},increment:function(){if(this._isNumber()){var a=this.getValue();a+=this.getStep(),a=a>this.getMax()?this.getMax():a,this.setValue(a)}},decrement:function(){var a=this.getValue();a-=this.getStep(),a=a<this.getMin()?this.getMin():a,this.setValue(a)},setValue:function(a){this.$input.val(a),this.$input.trigger("change")},setMin:function(a){this.set("min",a)},setMax:function(a){this.set("max",a)},setStep:function(a){this.set("step",a)},getValue:function(){var a=this.$input.val();return a="undefined"==typeof a||null==a||a.length<1?"":parseFloat(a)},getMin:function(){return parseFloat(this.options.min)},getMax:function(){return parseFloat(this.options.max)},getStep:function(){return parseFloat(this.options.step)},_initMarkup:function(){this.$input=this.$element.find(".js-coral-NumberInput-input"),"text"!=this.$input.attr("type")&&this._switchInputTypeToText(this.$input),this.$decrementElement=this.$element.find(".js-coral-NumberInput-decrementButton"),this.$incrementElement=this.$element.find(".js-coral-NumberInput-incrementButton")},_setListeners:function(){this.$input.on("change",function(){this._checkMinMaxViolation(),this._adjustValueLimitedToRange()}.bind(this)),this.on("beforeChange:step",function(a){this._optionBeforeChangeHandler(a)}.bind(this)),this.on("beforeChange:min",function(a){this._optionBeforeChangeHandler(a)}.bind(this)),this.on("beforeChange:max",function(a){this._optionBeforeChangeHandler(a)}.bind(this)),this.on("change:disabled",function(a){this._toggleDisabled()}.bind(this)),this.on("change:hasError",function(a){this._toggleError()}.bind(this)),this.$incrementElement.on("click",function(){this.increment()}.bind(this)),this.$decrementElement.on("click",function(a){this.decrement()}.bind(this))},_setAttributes:function(){this.$input.attr("max")&&this.setMax(this.$input.attr("max")),this.$input.attr("min")&&this.setMin(this.$input.attr("min")),this.$input.attr("step")&&this.setStep(this.$input.attr("step")),this.$element.attr("error")&&(this.options.hasError=!0),this.setStep(this.options.step||CUI.Numberinput.step),this.setValue(""!==this.$input.val()?this.$input.val():this.options.defaultValue),(this.$element.attr("disabled")||this.$element.attr("data-disabled"))&&this._toggleDisabled(),(this.$element.hasClass("is-invalid")||this.$element.attr("data-error"))&&this.set("hasError",!0)},_adjustValueLimitedToRange:function(){var a=this.getValue();isNaN(a)||(a>this.getMax()?a=this.getMax():a<this.getMin()&&(a=this.getMin())),this.$input.val(a)},_checkMinMaxViolation:function(){this._isNumber()&&(this.$incrementElement.removeAttr("disabled"),this.$decrementElement.removeAttr("disabled"),this.options.max&&this.getValue()>=this.getMax()?this.$incrementElement.attr("disabled","disabled"):this.options.min&&this.getValue()<=this.getMin()&&this.$decrementElement.attr("disabled","disabled"))},_switchInputTypeToText:function(a){var b=a.detach().attr("type","text");this.$element.prepend(b)},_isNumber:function(){return!isNaN(this.$input.val())},_optionBeforeChangeHandler:function(a){isNaN(parseFloat(a.value))&&a.preventDefault()},_toggleDisabled:function(){this.options.disabled?(this.$incrementElement.attr("disabled","disabled"),this.$decrementElement.attr("disabled","disabled"),this.$input.attr("disabled","disabled")):(this.$incrementElement.removeAttr("disabled"),this.$decrementElement.removeAttr("disabled"),this.$input.removeAttr("disabled"))},_toggleError:function(){this.options.hasError?this.$input.addClass("is-invalid"):this.$input.removeClass("is-invalid")}}),CUI.Widget.registry.register("numberinput",CUI.NumberInput),a(document).on("cui-contentloaded.data-api",function(b){CUI.NumberInput.init(a("[data-init~=numberinput]",b.target))})}(window.jQuery),function(a){var b=0;CUI.Popover=new Class({toString:"Popover",extend:CUI.Widget,construct:function(a){this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:pointAt",this._position.bind(this)),this.$element.on("change:pointFrom",this._position.bind(this)),this.$element.on("change:alignFrom",this._position.bind(this)),this.$element.addClass("coral-Popover"),0===this._getContentElement(this.$element).length&&this._wrapContent(this.$element),this._$content=this._getContentElement(this.$element),""===this._$content.html()&&this._setContent(),this._createTail(),this.uuid=b+=1},defaults:{pointFrom:"bottom",preventAutoHide:!1,alignFrom:"left",visible:!1},_directions:["top","bottom","right","left"],_createTail:function(){this._$tail=a('<div class="coral-Popover-arrow coral-Popover-arrow--left"/>').appendTo(this.$element),this._cachedTailDimensions={},this._cachedTailDimensions.leftRight={width:this._$tail.outerWidth(),height:this._$tail.outerHeight()},this._cachedTailDimensions.topBottom={width:this._cachedTailDimensions.leftRight.height,height:this._cachedTailDimensions.leftRight.width},this._$tail.removeClass("coral-Popover-arrow--left")},_wrapContent:function(a){a.wrapInner('<div class="coral-Popover-content"/>')},_getContentElement:function(a){return a.find("> .coral-Popover-content")},_position:function(){if(this.options.visible&&this.options.pointAt){var b,c=this.$element,d=this.options.pointAt,e=this.options.pointFrom,f=this._cachedTailDimensions;if(a.isArray(d)){if(2!==d.length)return;d=this._convertCoordsToEvent(d)}var g=function(a,g){var h,i=c.offsetParent().offset();("top"==e||"bottom"==e)&&i.top+a.top<0?h="bottom":("left"==e||"right"==e)&&i.left+a.left<0&&(h="right"),h?(b=this._instructionFactory[h]({target:d,tailDimensions:f,allowFlip:!1,callback:this._applyFinalPosition.bind(this),within:this.options.within||window}),c.position(b)):this._applyFinalPosition(a,g)}.bind(this);b=this._instructionFactory[e]({target:d,tailDimensions:f,allowFlip:!0,callback:g,within:this.options.within||window}),c.position(b)}},_convertCoordsToEvent:function(b){var c=a.Event();return c.pageX=b[0],c.pageY=b[1],c},_applyFinalPosition:function(b,c){var d={top:b.top};if("right"===this.options.alignFrom){var e,f=this.$element.offsetParent();"html"==f.prop("tagName").toLowerCase()?(f=a("body"),e=f.outerWidth(!0)):e=f.innerWidth(),d.left="auto",d.right=e-b.left-this.$element.outerWidth(!0)}else d.left=b.left,d.right="auto";this.$element.css(d),this._positionTail(c)},_instructionFactory:{top:function(a){return{my:"center bottom-"+a.tailDimensions.topBottom.height,at:"center top",of:a.target,collision:"fit "+(a.allowFlip?"flip":"none"),using:a.callback,within:a.within}},right:function(a){return{my:"left+"+a.tailDimensions.leftRight.width+" center",at:"right center",of:a.target,collision:(a.allowFlip?"flip":"none")+" fit",using:a.callback,within:a.within}},bottom:function(a){return{my:"center top+"+a.tailDimensions.topBottom.height,at:"center bottom",of:a.target,collision:"fit "+(a.allowFlip?"flip":"none"),using:a.callback,within:a.within}},left:function(a){return{my:"right-"+a.tailDimensions.leftRight.width+" center",at:"left center",of:a.target,collision:(a.allowFlip?"flip":"none")+" fit",using:a.callback,within:a.within}}},_positionTail:function(b){var c,d=this.$element.offset();if(a.isArray(this.options.pointAt))c={top:this.options.pointAt[1],left:this.options.pointAt[0],width:0,height:0};else{var e=a(b.target.element).offset();c={top:e.top,left:e.left,width:b.target.width,height:b.target.height}}c.top-=d.top+parseFloat(this.$element.css("borderTopWidth")),c.left-=d.left+parseFloat(this.$element.css("borderLeftWidth"));var f,g,h,i;switch(this.options.pointFrom){case"top":case"bottom":i=this._cachedTailDimensions.topBottom.width,g=c.left+c.width/2-i/2,"bottom"==b.vertical?(f="coral-Popover-arrow--down",h=c.top-this._cachedTailDimensions.topBottom.height):(f="coral-Popover-arrow--up",h=c.top+c.height);break;case"left":case"right":i=this._cachedTailDimensions.leftRight.width,h=c.top+c.height/2-this._cachedTailDimensions.leftRight.height/2,"left"==b.horizontal?(f="coral-Popover-arrow--left",g=c.left+c.width):(f="coral-Popover-arrow--right",g=c.left-i)}this._$tail.css({top:h,left:g}).removeClass("coral-Popover-arrow--up coral-Popover-arrow--down coral-Popover-arrow--left coral-Popover-arrow--right").addClass(f)},_show:function(){this.$element.show().prop("aria-hidden",!1),this._position(),this.options.preventAutoHide||(clearTimeout(this.autoHideInitTimeout),this.autoHideInitTimeout=setTimeout(function(){a(document).on("touchstart.popover-hide-"+this.uuid+" click.popover-hide-"+this.uuid,function(b){var c=this.$element.get(0);b.target===c||a.contains(c,b.target)||this.hide()}.bind(this))}.bind(this),0))},_hide:function(){clearTimeout(this.autoHideInitTimeout),this.$element.hide().prop("aria-hidden",!0),a(document).off(".popover-hide-"+this.uuid)},_setContent:function(){"string"==typeof this.options.content&&(this._$content.html(this.options.content),this._position())},setPosition:function(a){this.set("pointAt",a)}}),CUI.Widget.registry.register("popover",CUI.Popover),a(function(){a(document).on("touchstart.popover.data-api click.popover.data-api",'[data-toggle="popover"]',function(b){var c=a(this),d=CUI.util.getDataTarget(c);d=d&&d.length>0?d:c.next(".coral-Popover");var e=d.popover(a.extend({pointAt:c},d.data(),c.data())).data("popover");e.toggleVisibility(),b.preventDefault()})})}(window.jQuery),function(a,b,c){CUI.SelectList=new Class({toString:"SelectList",extend:CUI.Widget,construct:function(a){this.applyOptions(),this.$element.on("change:type",this._setType.bind(this)).on("click",this._SELECTABLE_SELECTOR,this._triggerSelected.bind(this)).on("mouseenter",this._SELECTABLE_SELECTOR,this._handleMouseEnter.bind(this)),this._makeAccessible()},defaults:{type:"static",multiple:!1,relatedElement:null,autofocus:!0,autohide:!0,dataurl:null,dataurlformat:"html",datapaging:!0,datapagesize:10,dataadditional:null,loadData:a.noop,position:"center bottom-1",collisionAdjustment:""},getItems:function(){return this.$element.children(".coral-SelectList-item").toArray().map(function(b){var c=a(b);return c.is(".coral-SelectList-item--option")?new CUI.SelectList.Option({element:c}):c.is(".coral-SelectList-item--optgroup")?new CUI.SelectList.Group({element:c}):void 0})},getOption:function(b){if(!a.isNumeric(b))throw new TypeError("Position should be numeric");var c=this.$element.children(".coral-SelectList-item"),d=c.eq(b);if(0>b||0===d.length)throw new RangeError("Position >"+b+"< is not within expected range [0,"+(c.length-1)+"]");if(!d.is(".coral-SelectList-item--option"))throw new TypeError("Position does not point to option element");return new CUI.SelectList.Option({element:d})},getGroup:function(b){if(!a.isNumeric(b))throw new TypeError("Position should be numeric");var c=this.$element.children(".coral-SelectList-item"),d=c.eq(b);if(0>b||0===d.length)throw new RangeError("Position >"+b+"< is not within expected range [0,"+(c.length-1)+"]");if(!d.is(".coral-SelectList-item--optgroup"))throw new TypeError("Position does not point to group element");return new CUI.SelectList.Group({element:d})},addOption:function(b,d){var e,f,g;if(a.isArray(b)||b&&b.jquery)for(g=0;g<b.length;g++)this.addOption(b[g],d!==c?d+g:c);else{if(b&&b.$element)return void this.addOption(b.$element);if(a.isPlainObject(b))e=b;else{if(!(b instanceof Element))throw new TypeError("Only Object, Element, CUI.SelectList.Option, jQuery and Array type arguments allowed.");f=a(b),e={value:f.data("value"),display:f.text()}}f||(f=a("<li>",{"class":"coral-SelectList-item coral-SelectList-item--option","data-value":e.value}).text(e.display)),this._addItem(f,d),this.$element.trigger(a.Event("itemadded",{item:new CUI.SelectList.Option({element:f})}))}},addGroup:function(b,d){var e,f,g;if(a.isArray(b)||b&&b.jquery)for(g=0;g<b.length;g++)this.addGroup(b[g],d!==c?d+g:c);else{if(b&&b.$element)return void this.addGroup(b.$element);if("string"===a.type(b))e={display:b};else{if(!(b instanceof Element))throw new TypeError("Only String, Element, CUI.SelectList.Group, jQuery and Array type arguments allowed.");f=a(b),e={display:f.children(".coral-SelectList-groupHeader").text()}}f||(f=a("<li>",{"class":"coral-SelectList-item coral-SelectList-item--optgroup"})),0===f.find(".coral-SelectList-groupHeader").length&&f.prepend(a("<span>",{"class":"coral-SelectList-groupHeader"}).text(e.display)),0===f.find(".coral-SelectList-sublist").length&&f.append(a("<ul>",{"class":"coral-SelectList-sublist"})),this._addItem(f,d),this.$element.trigger(a.Event("itemadded",{item:new CUI.SelectList.Group({element:f})}))}},_addItem:function(a,b){this._makeAccessibleListOption(a);var d=this._getList(),e=this._getItems();if(b===c||b===e.length)return d.append(a),e.length;if(0===b)return d.prepend(a),0;var f=e.eq(b);if(b>0&&f.length)return f.before(a),b;throw new RangeError("Position "+b+" is not within accepted range [0..."+e.length+"].")},_getList:function(){return this.$element},_getItems:function(){return this._getList().children(".coral-SelectList-item")},_SELECTABLE_SELECTOR:".coral-SelectList-item--option:not(.is-disabled):not(.is-hidden)",applyOptions:function(){this._setType()},_setType:function(){function a(){var a=c.$element.get(0),b=a.scrollHeight,d=a.scrollTop;b-c.$element.height()<=d+30&&c._handleLoadData()}var b,c=this;"dynamic"===this.options.type?this.$element.on("scroll.cui-selectlist-dynamic-load",function(d){b&&clearTimeout(b),c._loadingComplete||this._loadingIsActive||(b=setTimeout(a,500))}):this.$element.off("scroll.cui-selectlist-dynamic-load")},_ownerElement:null,_makeAccessible:function(){var b=a(this.options.relatedElement),c=this.$element.hasClass("is-visible");this._ownerElement=a('[aria-owns*="'+this.$element.attr("id")+'"]'),b.length&&(this._ownerElement.length||(this._ownerElement=b)),this._ownerElement.attr({id:this._ownerElement.attr("id")||CUI.util.getNextId(),"aria-haspopup":!0,"aria-expanded":c}),b.not(this._ownerElement).removeAttr("aria-haspopup").removeAttr("aria-expanded"),this.$element.attr({role:"listbox","aria-hidden":!c,"aria-multiselectable":this.options.multiple||null,tabindex:-1}),c&&(this.$element.attr("tabindex",0),this.$element.not(".is-inline").addClass("is-inline")),this.$element.off("focusin.cui-selectlist focusout.cui-selectlist").on("focusin.cui-selectlist",this._handleFocusIn.bind(this)).on("focusout.cui-selectlist",this._handleFocusOut.bind(this)),this._makeAccessibleListOption(this.$element.children())},_hasFocus:function(){return this._ownerElement.is(document.activeElement)||1===a(document.activeElement).closest(this.$element).length},_handleFocusIn:function(a){var b=this.$element.find(this._SELECTABLE_SELECTOR+'[aria-selected="true"], '+this._SELECTABLE_SELECTOR+'[tabindex="0"], '+this._SELECTABLE_SELECTOR+".is-highlighted").first();0===b.length&&(this.setCaretToItem(this.$element.find(this._SELECTABLE_SELECTOR).first(),!0),this.$element.attr("tabindex",-1)),this.$element.is(".is-inline")&&(this.$element.addClass("is-focused"),this.$element.off("keydown.cui-selectlist keypress.cui-selectlist").on("keydown.cui-selectlist",this._handleKeyDown.bind(this)).on("keypress.cui-selectlist",this._handleKeyPress.bind(this)))},_handleFocusOut:function(a){this.$element.is(".is-inline")&&(this.$element.removeClass("is-focused"),this.$element.off("keydown.cui-selectlist keypress.cui-selectlist"))},_restoreFocusToOwnerElement:function(){var a=this._ownerElement;a.is(":tabbable")||(a=a.find('input[type="text"], input[type="search"], button, input[type="button"]').filter(":tabbable").first()),a.trigger("focus")},_handleKeyDown:function(b){var d,e=this.$element.find(this._SELECTABLE_SELECTOR),f=e.filter(".is-highlighted"),g=e.index(f);if(e.length){switch(b.which){case 13:case 32:f.length&&1===a(document.activeElement).closest(this.$element).length&&(f.trigger("click"),b.preventDefault());break;case 27:this.hide(),b.preventDefault();break;case 33:case 38:g>0?d=e[g-1]:-1==g&&(d=e[e.length-1]),b.preventDefault();break;case 34:case 40:g+1<e.length&&(d=e[g+1]),b.preventDefault();break;case 36:d=e[0],b.preventDefault();break;case 35:d=e[e.length-1],b.preventDefault();break;case 9:this.options.visible&&this.options.autohide&&b.preventDefault()}d!==c&&this._hasFocus()&&this.setCaretToItem(a(d),!0)}},_keypressTimeoutID:null,_keypressTimeoutDuration:1e3,_keypressSearchString:"",_unicodeRangesRegExp:/[\u0000-\u007F|\u0080-\u00FF|\u0100-\u017F|\u0180-\u024F|\u0250-\u02AF|\u02B0-\u02FF|\u0300-\u036F|\u0370-\u03FF|\u0400-\u04FF|\u0500-\u052F|\u0530-\u058F|\u0590-\u05FF|\u0600-\u06FF|\u0700-\u074F|\u0780-\u07BF|\u0900-\u097F|\u0980-\u09FF|\u0A00-\u0A7F|\u0A80-\u0AFF|\u0B00-\u0B7F|\u0B80-\u0BFF|\u0C00-\u0C7F|\u0C80-\u0CFF|\u0D00-\u0D7F|\u0D80-\u0DFF|\u0E00-\u0E7F|\u0E80-\u0EFF|\u0F00-\u0FFF|\u1000-\u109F|\u10A0-\u10FF|\u1100-\u11FF|\u1200-\u137F|\u13A0-\u13FF|\u1400-\u167F|\u1680-\u169F|\u16A0-\u16FF|\u1700-\u171F|\u1720-\u173F|\u1740-\u175F|\u1760-\u177F|\u1780-\u17FF|\u1800-\u18AF|\u1900-\u194F|\u1950-\u197F|\u19E0-\u19FF|\u1D00-\u1D7F|\u1E00-\u1EFF|\u1F00-\u1FFF|\u2000-\u206F|\u2070-\u209F|\u20A0-\u20CF|\u20D0-\u20FF|\u2100-\u214F|\u2150-\u218F|\u2190-\u21FF|\u2200-\u22FF|\u2300-\u23FF|\u2400-\u243F|\u2440-\u245F|\u2460-\u24FF|\u2500-\u257F|\u2580-\u259F|\u25A0-\u25FF|\u2600-\u26FF|\u2700-\u27BF|\u27C0-\u27EF|\u27F0-\u27FF|\u2800-\u28FF|\u2900-\u297F|\u2980-\u29FF|\u2A00-\u2AFF|\u2B00-\u2BFF|\u2E80-\u2EFF|\u2F00-\u2FDF|\u2FF0-\u2FFF|\u3000-\u303F|\u3040-\u309F|\u30A0-\u30FF|\u3100-\u312F|\u3130-\u318F|\u3190-\u319F|\u31A0-\u31BF|\u31F0-\u31FF|\u3200-\u32FF|\u3300-\u33FF|\u3400-\u4DBF|\u4DC0-\u4DFF|\u4E00-\u9FFF|\uA000-\uA48F|\uA490-\uA4CF|\uAC00-\uD7AF|\uD800-\uDB7F|\uDB80-\uDBFF|\uDC00-\uDFFF|\uE000-\uF8FF|\uF900-\uFAFF|\uFB00-\uFB4F|\uFB50-\uFDFF|\uFE00-\uFE0F|\uFE20-\uFE2F|\uFE30-\uFE4F|\uFE50-\uFE6F|\uFE70-\uFEFF|\uFF00-\uFFEF|\uFFF0-\uFFFF]/,_handleKeyPress:function(b){var d,e,f,g,h,i,j=this.$element.find(this._SELECTABLE_SELECTOR),k=j.filter(".is-highlighted"),l=j.index(k),m="";if(j.length)switch(b.which){case 13:case 32:case 27:case 33:case 37:case 38:case 34:case 39:case 40:case 36:case 35:case 9:break;default:if(clearTimeout(this._keypressTimeoutID),m=String.fromCharCode(b.which),this._unicodeRangesRegExp.test(m)||(m=""),""===m)return;for(this._keypressSearchString+=m!==this._keypressSearchString?m:"",this._keypressTimeoutID=setTimeout(function(){this._keypressSearchString=""}.bind(this),this._keypressTimeoutDuration),e=-1===l?0:1===this._keypressSearchString.length?l+1:l,h=new RegExp("^"+this._keypressSearchString.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"i"),f=e;f<j.length;f++)if(g=j.eq(f),i=a.trim(g.data("display")||g.text()),h.test(i)){d=g;break}if(d===c)for(f=0;e>f;f++)if(g=j.eq(f),i=a.trim(g.data("display")||g.text()),h.test(i)){d=g;break}d!==c&&this.setCaretToItem(d,!0)}},_makeAccessibleListOption:function(b){b.each(function(b,c){var d,e=a(c);e.hasClass("coral-SelectList-item--optgroup")?(d=e.children(".coral-SelectList-groupHeader"),d.attr({id:d.attr("id")||CUI.util.getNextId(),role:"heading"}),e.attr({role:"presentation"}).children("ul").each(function(b,c){var e=a(c);e.attr({role:"group","aria-labelledby":d.attr("id")})}).children("li").each(function(b,c){var d=a(c);d.attr({role:"option",id:d.attr("id")||CUI.util.getNextId()})})):e.attr({role:"option",id:e.attr("id")||CUI.util.getNextId()})})},setCaretToItem:function(a,b){this.$element.find(".coral-SelectList-item--option").removeClass("is-highlighted").removeAttr("tabindex"),a.addClass("is-highlighted").attr("tabindex",0),this._ownerElement.attr("aria-activedescendant",a.attr("id")),this.$element.attr("aria-activedescendant",a.attr("id")),this._hasFocus()?a.trigger("focus"):b&&this.scrollToItem(a)},resetCaret:function(){this.$element.find('[role="option"]').removeClass("is-highlighted").removeAttr("tabindex"),this.$element.scrollTop(0),this._ownerElement.removeAttr("aria-activedescendant"),this.$element.removeAttr("aria-activedescendant")},scrollToItem:function(a){if(a.length){var b=a.position().top,c=a.outerHeight(!1),d=this.$element[0],e=b+c-d.clientHeight;e>0?d.scrollTop+=e:0>b&&(d.scrollTop+=b)}},show:function(){return this.options.visible?this:(f(),this.inherited(arguments))},_show:function(){var b=this,c=this.$element.find(this._SELECTABLE_SELECTOR+'[aria-selected="true"], '+this._SELECTABLE_SELECTOR+'[tabindex="0"], '+this._SELECTABLE_SELECTOR+".is-highlighted").first();this.$element.addClass("is-visible").attr("aria-hidden",!1),this._ownerElement.attr("aria-expanded",!0),this._position(),this.options.autofocus&&(0===c.length&&(c=this.$element.find(this._SELECTABLE_SELECTOR).first()),this.setCaretToItem(c,!0)),"dynamic"===this.options.type&&this._handleLoadData().done(function(){b.options.autofocus&&b.setCaretToItem(b.$element.find(b._SELECTABLE_SELECTOR).first(),!0)}),a(document).on("keydown.cui-selectlist",this._handleKeyDown.bind(this)).on("keypress.cui-selectlist",this._handleKeyPress.bind(this))},_position:function(){this.options.visible&&this.$element.position({my:"top",at:this.options.position,of:this.options.relatedElement,collision:this.options.collisionAdjustment})},_hide:function(){var b=(a(this.options.relatedElement),this._ownerElement),c=!0,e=this._hasFocus();this.$element.removeClass("is-visible").attr("aria-hidden",!0),this._ownerElement.attr("aria-expanded",!0),this.reset(),a(d).each(function(){var b=a(this).data("selectList");b&&!b.get("autohide")&&b.get("visible")&&(c=!1)}),c&&a(document).off("keydown.cui-selectlist keypress.cui-selectlist"),b.removeAttr("aria-activedescendant"),b.length&&e&&setTimeout(this._restoreFocusToOwnerElement.bind(this),50)},_triggerSelected:function(b){var c=a(b.currentTarget),d=c.data("value"),e=c.data("display")||c.text();c.trigger(a.Event("selected",{selectedValue:d,displayedValue:e}))},_handleMouseEnter:function(b){this.setCaretToItem(a(b.currentTarget),!1)},clearItems:function(){this.$element.empty()},_pagestart:0,_loadingComplete:!1,_loadingIsActive:!1,_handleLoadData:function(){var b,d=this,e=this._pagestart+this.options.datapagesize,f=a("<div/>",{"class":"coral-SelectList-item--wait",role:"presentation"}).append(a("<span/>",{"class":"coral-Wait",role:"progressbar"}));return this._loadingIsActive?a.Deferred().resolve().promise():(this._loadingIsActive=!0,this.$element.append(f),this.options.dataurl?b=a.ajax({url:this.options.dataurl,context:this,dataType:this.options.dataurlformat,data:a.extend({start:this._pagestart,end:e},this.options.dataadditional||{})}).done(function(b){var c=0;if("html"===d.options.dataurlformat){var e=a(b);c=e.filter("li").length,d._makeAccessibleListOption(e),d.$element.append(e)}c<d.options.datapagesize&&(this._loadingComplete=!0)}):(b=this.options.loadData.call(this,this._pagestart,e),b.done(function(a){a!==c&&(d._loadingComplete=a)})),this._pagestart=e,b.always(function(){f.remove(),d._position(),d._loadingIsActive=!1}),b)},reset:function(){"dynamic"===this.options.type&&(this.clearItems(),this._pagestart=0,this._loadingComplete=!1)},triggerLoadData:function(a){a&&this.reset(),this._handleLoadData()},filter:function(b){var c=this.$element.find(".coral-SelectList-item--option"),d=this.$element.find(".coral-SelectList-item--optgroup");b?(c.each(function(){var c=a(this),d=!b.call(this,c.data("value"),c.data("display")||c.text());c.toggleClass("is-hidden",d),d&&c.removeClass("is-highlighted")}),d.each(function(){var b=a(this),c=b.find('[role="option"]:not(.is-hidden)').length>0;b.toggleClass("is-hidden",!c)})):(c.removeClass("is-hidden"),d.removeClass("is-hidden")),this._position()}}),CUI.Widget.registry.register("selectlist",CUI.SelectList),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.SelectList.init(a("[data-init~=selectlist]",b.target))});var d=".coral-SelectList",e="[data-toggle~=selectlist]",f=function(){a(d).each(function(){var b=a(this).data("selectList");b&&b.get("autohide")&&b.hide()})},g=function(){var b,c=CUI.util.getDataTarget(a(this));return c.length&&(b=c.data("selectList"),b.get("relatedElement")||(b.set("relatedElement",this),b._makeAccessible()),b.resetCaret(),b.toggleVisibility()),!1},h=function(b){var c=CUI.util.getDataTarget(a(this)),d=c.data("selectList"),e=c.length&&c.hasClass("is-visible");switch(b.which){case 40:c.length&&!e&&g.call(this),b.preventDefault();break;case 9:e&&d.get("autohide")&&b.preventDefault()}};a(document).on("click.cui-selectlist",f).on("click.cui-selectlist",d,function(a){a.stopPropagation()}).on("click.cui-selectlist",e,g).on("keydown.cui-selectlist-toggleSelector",e,h)}(jQuery,this),function(a,b,c){CUI.SelectList.Item=new Class({toString:"SelectList.Item",$element:c,_cachedPosition:null,construct:function(b){this.$element=a(b.element)},getPosition:function(){var a=this.$element.index();return a>-1?a:this._cachedPosition},getDisplay:function(){throw new Error("Subclass responsibility")},remove:function(){var b=this._getParent();this._cachedPosition=this.getPosition(),this.$element.remove(),b.trigger(a.Event("itemremoved",{item:this}))},_getParent:function(){throw new Error("Subclass responsibility")}})}(jQuery,this),function(a,b,c){CUI.SelectList.Option=new Class({toString:"SelectList.Option",extend:CUI.SelectList.Item,getDisplay:function(){return this.$element.text()},getValue:function(){return this.$element.attr("data-value")},_getParent:function(){return this.$element.closest(".coral-SelectList, .coral-SelectList-item--optgroup")}})}(jQuery,this),function(a,b,c){CUI.SelectList.Group=new Class({toString:"SelectList.Group",extend:CUI.SelectList.Item,getDisplay:function(){return this.$element.children("span").text()},getItems:function(){return this._getItems().toArray().map(function(a){return new CUI.SelectList.Option({element:a})})},getOption:function(b){if(!a.isNumeric(b))throw new TypeError("Position should be numeric");var c=this._getItems(),d=c.eq(b);if(0>b||0===d.length)throw new RangeError("Position >"+b+"< is not within expected range [0,"+(c.length-1)+"]");return new CUI.SelectList.Option({element:d})},addOption:CUI.SelectList.prototype.addOption,_addItem:CUI.SelectList.prototype._addItem,_getList:function(){return this.$element.children(".coral-SelectList-sublist").first()},_getItems:CUI.SelectList.prototype._getItems,_makeAccessibleListOption:CUI.SelectList.prototype._makeAccessibleListOption,_getParent:function(){return this.$element.parent()}})}(jQuery,this),function(a,b,c){CUI.TagList=new Class({toString:"TagList",extend:CUI.Widget,construct:function(a){var b=this;this.applyOptions(),this.$element.on("change:values",this._setValues.bind(this)),this.$element.on("click","button",function(a){var c=b.$element.children().has(a.currentTarget).find("input");b.removeItem(c.val())}),this._makeAccessible()},defaults:{fieldname:"",values:null,tag:"li",renderer:null},_existingValues:null,applyOptions:function(){var b=this;this._existingValues=[],this.options.values=this.options.values||[],this.options.values.length>0?this._setValues():this.$element.find("input").each(function(c,d){var e=a(d);b._existingValues.push(e.attr("value"))})},_setValues:function(){var a=this.options.values;this.$element.empty(),this.options.values=[],this.addItem(a)},_makeAccessible:function(){this.$element.attr({role:"list"}),this.$element.children(this.options.tag).attr({role:"listitem"})},_show:function(){this.$element.show().attr("aria-hidden",!1)},_hide:function(){this.$element.hide().attr("aria-hidden",!0)},_removeItem:function(b){var c=this.$element.children(':has(input[value="'+b+'"])');c.length>0&&(c.remove(),this.$element.trigger(a.Event("itemremoved"),{value:b}))},_appendItem:function(b){var c,d;if("string"===a.type(b)?c=d=b:(c=b.display,d=b.value),d+="",!(a.inArray(d,this._existingValues)>-1||0===d.length)){this._existingValues.push(d);var e=this.options.renderer||this._renderTag;this.$element.append(e.call(this,d,c)),this.$element.trigger(a.Event("itemadded"),{value:d,display:c})}},_renderTag:function(b,c){var d,e;return d=a("<"+this.options.tag+"/>",{role:"listitem","class":"coral-TagList-tag"+(this.options.multiline?" coral-TagList-tag--multiline":""),title:c}),e=a("<button/>",{"class":"coral-MinimalButton coral-TagList-tag-removeButton",type:"button",title:"Remove"}).appendTo(d),a("<i/>",{"class":"coral-Icon coral-Icon--sizeXS coral-Icon--close"}).appendTo(e),a("<span/>",{"class":"coral-TagList-tag-label",text:c}).appendTo(d),a("<input/>",{type:"hidden",value:b,name:this.options.fieldname}).appendTo(d),d},removeItem:function(a){var b=this._existingValues.indexOf(""+a);b>-1&&(this._existingValues.splice(b,1),this._removeItem(a))},addItem:function(b){var c=this,d=a.isArray(b)?b:[b];a.each(d,function(a,b){c._appendItem(b)})},getValues:function(){return this._existingValues.slice(0)}}),CUI.Widget.registry.register("taglist",CUI.TagList),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.TagList.init(a("[data-init~=taglist]",b.target))})}(jQuery,this),function(a){CUI.Tooltip=new Class({toString:"Tooltip",extend:CUI.Widget,construct:function(b){if(this.options.target&&(this.options.target=a(this.options.target)),0===this.$element.length&&this.options.target&&(this.$element=a("<div>"),this.$element.insertAfter(this.options.target)),this.$element.addClass("coral-Tooltip"),this.$element.data("interactive")&&(this.options.interactive=!0,this.options.target||(this.options.target=this.$element.parent())),this.$element.data("target")&&(this.options.target=a(this.$element.data("target"))),this.options.arrow||(this.options.arrow="left",this.$element.hasClass("coral-Tooltip--positionRight")&&(this.options.arrow="left"),this.$element.hasClass("coral-Tooltip--positionLeft")&&(this.options.arrow="right"),this.$element.hasClass("coral-Tooltip--positionBelow")&&(this.options.arrow="top"),this.$element.hasClass("coral-Tooltip--positionAbove")&&(this.options.arrow="bottom")),this.options.type||(this.options.type="info",this.$element.hasClass("coral-Tooltip--info")&&(this.options.type="info"),this.$element.hasClass("coral-Tooltip--error")&&(this.options.type="error"),this.$element.hasClass("coral-Tooltip--success")&&(this.options.type="success"),this.$element.hasClass("coral-Tooltip--notice")&&(this.options.type="notice"),this.$element.hasClass("coral-Tooltip--inspect")&&(this.options.type="inspect")),this.options.interactive&&(this.options.visible=!1),this.$element.toggleClass("is-hidden",!this.options.visible),this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:arrow",this._setArrow.bind(this)),this.applyOptions(),this.reposition(),this.options.target&&this.options.target.data("tooltip",this),this.options.interactive&&this.options.target){var c=null;a(this.options.target).on("touchstart.cui-tooltip",function(a){c&&clearTimeout(c),this.show(),c=setTimeout(function(){this.hide()}.bind(this),3e3)}.bind(this));var d=!1;a(this.options.target).on("mouseover.cui-tooltip",function(a){d&&clearTimeout(d),d=setTimeout(function(){this.show()}.bind(this),this.options.delay)}.bind(this)),a(this.options.target).on("mouseout.cui-tooltip",function(a){d&&clearTimeout(d),this.hide()}.bind(this))}},defaults:{target:null,visible:!0,type:null,interactive:!1,arrow:null,delay:500,distance:5},_stylesTypes:{info:"coral-Tooltip--info",error:"coral-Tooltip--error",notice:"coral-Tooltip--notice",success:"coral-Tooltip--success",inspect:"coral-Tooltip--inspect"},_arrows:{left:"coral-Tooltip--positionRight",right:"coral-Tooltip--positionLeft",top:"coral-Tooltip--positionBelow",bottom:"coral-Tooltip--positionAbove"},applyOptions:function(){this._setContent(),this._setType(),this._setArrow()},_setType:function(){if("string"==typeof this.options.type&&this._stylesTypes.hasOwnProperty(this.options.type)){var a=this._stylesTypes.info+" "+this._stylesTypes.error+" "+this._stylesTypes.notice+" "+this._stylesTypes.success+" "+this._stylesTypes.inspect;

this.$element.removeClass(a),this.$element.addClass(this._stylesTypes[this.options.type]),this.reposition()}},_setArrow:function(){if("string"==typeof this.options.arrow&&this._arrows.hasOwnProperty(this.options.arrow)){var a=this._arrows.left+" "+this._arrows.right+" "+this._arrows.top+" "+this._arrows.bottom;this.$element.removeClass(a),this.$element.addClass(this._arrows[this.options.arrow]),this.reposition()}},_setContent:function(){"string"==typeof this.options.content&&(this.$element.html(this.options.content),this.reposition())},_show:function(){this.$element.hasClass("is-hidden")&&(this.$element.removeClass("is-hidden"),this.$element.css("display","none")),this.$element.fadeIn()},_hide:function(){return this.$element.fadeOut(400,function(){this.options.autoDestroy&&(this.$element.remove(),a(this.options.target).off(".cui-tooltip"),a(this.options.target).data("tooltip",null))}.bind(this)),this},reposition:function(b){if(this.options.target){b||setTimeout(function(){this.reposition(!0)}.bind(this),50),this.$element.detach().insertAfter(this.options.target),this.$element.css("position","absolute");var c=a(this.options.target),d=c.outerWidth(!0),e=c.outerHeight(!0),f=c.position().left,g=c.position().top,h=c.offsetParent();h.is("html")||(g+=h.scrollTop(),f+=h.scrollLeft());var i=this.$element.outerWidth(!0),j=this.$element.outerHeight(!0),k=0,l=0;return"left"===this.options.arrow&&(k=f+d+this.options.distance,l=g+(e-j)/2),"right"===this.options.arrow&&(k=f-i-this.options.distance,l=g+(e-j)/2),"bottom"===this.options.arrow&&(k=f+(d-i)/2,l=g-j-this.options.distance),"top"===this.options.arrow&&(k=f+(d-i)/2,l=g+e+this.options.distance),this.$element.css("left",k),this.$element.css("top",l),this}}}),CUI.Widget.registry.register("tooltip",CUI.Tooltip),CUI.options.dataAPI&&(a(document).on("cui-contentloaded.data-api",function(b){CUI.Tooltip.init(a("[data-init~=tooltip]",b.target))}),a(document).on("touchstart mouseover","[data-init~=quicktip]",function(b){var c,d=a(this),e=d.data("tooltip"),f="mouseover"===b.type;e||(c=new CUI.Tooltip({target:d,content:d.data("quicktip-content")||d.html(),type:d.data("quicktip-type"),arrow:d.data("quicktip-arrow"),interactive:!1,autoDestroy:!0}),f?d.pointer("mouseout",function(a){c.hide()}):setTimeout(function(){c.hide()},3e3))}))}(window.jQuery),function(a,b,c){CUI.Modal=new Class({toString:"Modal",extend:CUI.Widget,construct:function(b){this.header=this.$element.find(".coral-Modal-header"),this.body=this.$element.find(".coral-Modal-body"),this.footer=this.$element.find(".coral-Modal-footer"),this._previousFocus=a(),this.backdrop=a("<div/>",{"class":"coral-Modal-backdrop",style:"display: none;"}).on("click",function(a){"static"!==this.options.backdrop&&this.hide()}.bind(this)),this.body.loadWithSpinner(this.options.remote),this.applyOptions(),this.$element.on("change:heading",this._setHeading.bind(this)).on("change:header",this._setHeader.bind(this)).on("change:content",this._setContent.bind(this)).on("change:buttons",this._setFooter.bind(this)).on("change:type",this._setType.bind(this)).on("change:fullscreen",this._setFullscreen.bind(this)).on("click",'[data-dismiss="modal"]',this.hide.bind(this)),this._makeAccessible()},defaults:{backdrop:"static",visible:!0,type:"default",fullscreen:!1,attachToBody:!0},_types:{"default":{"class":"",iconClass:""},error:{"class":"coral-Modal--error",iconClass:"coral-Icon--alert"},notice:{"class":"coral-Modal--notice",iconClass:"coral-Icon--alert"},success:{"class":"coral-Modal--success",iconClass:"coral-Icon--checkCircle"},help:{"class":"coral-Modal--help",iconClass:"coral-Icon--helpCircle"},info:{"class":"coral-Modal--info",iconClass:"coral-Icon--infoCircle"}},applyOptions:function(){this._setHeader(),this._setHeading(),this._setContent(),this._setFooter(),this._setType(),this._setFullscreen(),this.options.visible&&(this.options.visible=!1,this.show())},_makeAccessible:function(){var b=this,c="modal-header"+(new Date).getTime()+"-";this.$element.attr({role:"dialog","aria-hidden":!this.options.visible,"aria-labelledby":c+"label","aria-describedby":c+"message",tabindex:-1}),this.header.find("h2").attr({id:c+"label",tabindex:0}),this.body.attr({id:c+"message",role:"document",tabindex:0}),this.$element.on("keydown",":focusable",function(c){var d,e=(a(c.currentTarget),b.$element.find(":tabbable"));switch(c.which){case 9:c.shiftKey&&c.currentTarget===e[0]?d=e.last():c.shiftKey||c.currentTarget!==e[e.length-1]||(d=e.first())}d&&(c.preventDefault(),d.trigger("focus"))})},_setType:function(){if(this.options.type){var a=this.$element.find(".coral-Modal-header > .coral-Icon");for(var b in this._types)this.$element.removeClass(this._types[b]["class"]),a.removeClass(this._types[b].iconClass);"default"!==this.options.type&&(this.$element.addClass(this._types[this.options.type]["class"]),a.addClass(this._types[this.options.type].iconClass))}},_setHeader:function(){this.options.header&&this.header.find("h2").html(this.options.header)},_setHeading:function(){this.options.heading&&(this.options.header=this.options.heading,this._setHeader.apply(this,arguments))},_setContent:function(){this.options.content&&this.body.html(this.options.content)},_setFooter:function(){if(a.isArray(this.options.buttons)){var b=this;this.footer.empty(),a.each(this.options.buttons,function(c,d){var e=d.href?a("<a/>",{"class":"button"}):a("<button/>",{"class":"coral-Button",type:"button"});e.html(d.label),"hide"===d.click?e.attr("data-dismiss","modal"):a.isFunction(d.click)&&e.on("click",d.click.bind(b,{dialog:b})),d.href&&e.attr("href",d.href),d.className&&e.addClass(d.className),b.footer.append(e)})}},_setFullscreen:function(){this.options.fullscreen?this.$element.addClass("fullscreen"):this.$element.removeClass("fullscreen")},_show:function(){var b,c=a("body"),d=this;return this._previousFocus=a(":focus"),this._previousFocus.trigger("blur"),c.addClass("coral-Modal.is-open"),this.$element.trigger("beforeshow"),this._toggleBackdrop(!0),this.options.attachToBody&&(0===this.$element.parent("body").length&&this.$element.appendTo(c),this.$element.siblings("[aria-hidden]").each(function(b,c){a(c).data("aria-hidden",a(c).attr("aria-hidden"))}),this.$element.siblings().not("script, link, style").attr("aria-hidden",this.options.visible)),this.$element.attr("aria-hidden",!this.options.visible),this.center(),this.$element.fadeIn(),this.$element.find(":tabbable:not(.coral-Modal-header .coral-Modal-closeButton):first").focus(),b=a('<div class="coral-Modal-tabcapture" tabindex="0"/>'),b.on("focus.modal-tabcapture",function(b){var c,e=d.$element.find(":tabbable"),f=a("body > .coral-Modal-tabcapture"),g=f.last();c=e.filter(b.currentTarget===g[0]?":not(.coral-Modal-header .coral-Modal-closeButton):last":":not(.coral-Modal-header .coral-Modal-closeButton):first"),0===c.length&&(c=d.$element),c.trigger("focus")}).prependTo(c).clone(!0).appendTo(c),a(document).on("keydown.modal-escape",this._escapeKeyHandler.bind(this)),this},_hide:function(){return a("body").removeClass("coral-Modal.is-open").find(".coral-Modal-tabcapture").off("focus.modal-tabcapture").remove(),a(document).off("keydown.modal-escape"),this.$element.trigger("beforehide"),this._toggleBackdrop(!1),this.$element.attr("aria-hidden",!this.options.visible),this.$element.siblings().removeAttr("aria-hidden").filter(':data("aria-hidden")').each(function(b,c){a(c).attr("aria-hidden",a(c).data("aria-hidden")).removeData("aria-hidden")}),this.$element.fadeOut().trigger("blur"),this._previousFocus.trigger("focus"),this},center:function(){var a=this.$element.outerWidth(),b=this.$element.outerHeight();this.$element.css({"margin-left":-(a/2),"margin-top":-(b/2)})},_toggleBackdrop:function(b){if(this.options.backdrop){var c=a("body");(b||this.backdrop.is(":hidden"))&&b!==!1?this.backdrop.appendTo(c).fadeIn():this.backdrop.fadeOut(function(){a(this).detach()})}},_escapeKeyHandler:function(a){27===a.which&&this.hide()}}),CUI.Widget.registry.register("modal",CUI.Modal),CUI.options.dataAPI&&(a(document).on("cui-contentloaded.data-api",function(b){CUI.Modal.init(a("[data-init~=modal]",b.target))}),a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){b.preventDefault();var c=a(this),d=CUI.util.getDataTarget(c),e=c.attr("href"),f=a.extend({remote:!/#/.test(e)&&e},d.data(),c.data());"string"==typeof f.buttons&&(f.buttons=JSON.parse(f.buttons));var g=d.data("modal");d.modal(f),g&&d.data("modal").set({visible:!g.get("visible")})}))}(jQuery,this),function(a,b,c){CUI.Slider=new Class({toString:"Slider",extend:CUI.Widget,construct:function(){var b=this,c=this.$element.attr("id"),d=this.$element.children("fieldset"),e=d.children("legend"),f=[];this._readOptions(),c||(c=CUI.util.getNextId(),this.$element.attr("id",c)),this._renderMissingElements(),d.length>0&&(this.$element.append(d.contents(":not(legend)")),this._group=a("<div/>",{role:"group","class":"coral-Slider-fieldset "}),b.$element.wrap(this._group),e.length>0&&(this._grouplegend=a("<label/>").append(e.contents()),a.each(e.prop("attributes"),function(){b._grouplegend.attr(this.name,this.value)}),this._grouplegend.attr("id")||this._grouplegend.attr("id",c+"-legend"),this._group.attr("aria-labelledby",this._grouplegend.attr("id")),d.replaceWith(this._grouplegend),e=this._grouplegend.insertBefore(this.$element))),this.$inputs=this.$element.find("input"),this.$inputs.each(function(d){var g=a(this),h=g.attr("id");h||(g.attr("id",c+"-input"+d),h=g.attr("id")),g.attr("aria-labelledby")||g.attr("aria-labelledby","");var i=b.$element.find('label[for="'+h+'"]');e&&-1===g.attr("aria-labelledby").indexOf(e.attr("id"))&&g.attr("aria-labelledby",e.attr("id")+(g.attr("aria-labelledby").length?" ":"")+g.attr("aria-labelledby")),i.length>0&&(i.not(g.parent()).insertBefore(b.$element),i.each(function(c){a(this).attr("id")||a(this).attr("id",h+"-label"+c),-1===g.attr("aria-labelledby").indexOf(h+"-label"+c)&&g.attr("aria-labelledby",(g.attr("aria-labelledby").length?" ":"")+h+"-label"+c),CUI.util.isTouch||a(this).fipo("touchstart","mousedown",function(a){b.$handles.eq(c).focus()}.bind(this))})),g.parent().is("label")&&(i=g.parent(),i.attr("id")||i.attr("id",h+"-label"),i.attr("for")||i.attr("for",h),g.insertAfter(i),e&&i.addClass("u-coral-screenReaderOnly"),i.insertBefore(b.$element)),i.length&&-1===g.attr("aria-labelledby").indexOf(i.attr("id"))&&g.attr("aria-labelledby",g.attr("aria-labelledby")+(g.attr("aria-labelledby").length?" ":"")+i.attr("id")),0===i.length&&g.attr("aria-labelledby").length>0&&(i=a("#"+g.attr("aria-labelledby").split(" ")[0])),0===g.attr("aria-labelledby").length&&g.removeAttr("aria-labelledby"),g.is("[step]")||g.attr("step",b.options.step),g.is("[min]")||g.attr("min",b.options.min),g.is("[max]")||g.attr("max",b.options.max),g.is("[value]")?f.push(g.attr("value")):(g.attr({value:b.options.value,"aria-valuetext":b.options.valuetextFormatter(b.options.value)}),f.push(b.options.value)),0===d&&(g.is(":disabled")?(b.options.disabled=!0,b.$element.addClass("is-disabled")):b.options.disabled&&(g.attr("disabled","disabled"),b.$element.addClass("is-disabled"))),CUI.util.isTouch?(g.on("change",function(a){b.options.disabled||g.val()!==b.values[d]&&b.setValue(g.val(),d)}.bind(this)),g.on("focus",function(a){b._focus(a)}.bind(this)),g.on("blur",function(a){b._blur(a)}.bind(this))):(g.attr({"aria-hidden":!0,tabindex:-1,hidden:"hidden"}),0===d&&(i&&i.on("click",function(a){b.options.disabled||b._clickLabel(a)}.bind(this)),e&&e.on("click",function(a){b.options.disabled||b._clickLabel(a)}.bind(this))))}),b.values=f,"vertical"===this.options.orientation&&(this.isVertical=!0),this.$element.fipo("touchstart","mousedown",function(a){this._mouseDown(a)}.bind(this)),this.$element.on("change:value",this._processValueChanged.bind(this)),this.$element.on("change:disabled",this._processDisabledChanged.bind(this)),this.$element.on("change:min",this._processMinMaxStepChanged.bind(this)),this.$element.on("change:max",this._processMinMaxStepChanged.bind(this)),this.$element.on("change:step",this._processMinMaxStepChanged.bind(this)),this._render()},defaults:{step:"1",min:"1",max:"100",value:"1",orientation:"horizontal",slide:!1,disabled:!1,tooltips:!1,tooltipFormatter:function(a){return a.toString()},valuetextFormatter:function(a){return a.toString()},ticks:!1,filled:!1,bound:!1},values:[],$inputs:null,$ticks:null,$fill:null,$handles:null,$tooltips:null,isVertical:!1,draggingPosition:-1,_readOptions:function(){this.$element.hasClass("coral-Slider--vertical")&&(this.options.orientation="vertical",this.isVertical=!0),this.$element.hasClass("coral-Slider--tooltips")&&(this.options.tooltips=!0),this.$element.hasClass("coral-Slider--ticked")&&(this.options.ticks=!0),this.$element.hasClass("coral-Slider--filled")&&(this.options.filled=!0),this.$element.hasClass("coral-Slider--bound")&&(this.options.bound=!0),this.$element.data("slide")&&(this.options.slide=!0)},setValue:function(a,b){b=b||0,this._updateValue(b,a,!0),this._moveHandles(),this.options.filled&&this._updateFill()},_renderMissingElements:function(){if(!this.$element.find("input").length){var b,c=this,d=a.isArray(this.options.value)?this.options.value:[this.options.value];a.each(d,function(d,e){b=a("<input>"),b.attr({type:"range",min:c.options.min,max:c.options.max,step:c.options.step,value:e}).val(e),c.$element.append(b)})}if(!this.$element.find("div.coral-Slider-clickarea").length){var e=a('<div class="coral-Slider-clickarea">');this.$element.prepend(e)}this.$element.toggleClass("coral-Slider",!0),this.$element.toggleClass("coral-Slider--vertical","vertical"===this.options.orientation),this.$element.toggleClass("coral-Slider--tooltips",this.options.tooltips),this.$element.toggleClass("coral-Slider--ticked",this.options.ticks),this.$element.toggleClass("coral-Slider--filled",this.options.filled)},_processValueChanged:function(){var b=this,c=a.isArray(this.options.value)?this.options.value:[this.options.value];a.each(c,function(a,c){b._updateValue(a,c,!0)}),this._moveHandles(),this.options.filled&&this._updateFill()},_processMinMaxStepChanged:function(){var b=this;this.$element.find("input").attr("min",this.options.min),this.$element.find("input").attr("max",this.options.max),this.$element.find("input").attr("step",this.options.step),a.each(this.values,function(a,c){b._updateValue(a,c,!0)}),this.options.ticks&&(this.$element.find(".coral-Slider-ticks").remove(),this._buildTicks()),this.options.filled&&(this.$element.find(".coral-Slider-fill").remove(),this._buildFill()),this._moveHandles(),this.options.filled&&this._updateFill()},_processDisabledChanged:function(){this.options.disabled?(this.$inputs.attr("disabled","disabled"),this.$handles.each(function(){a(this).removeClass("is-focused"),a(this).parent().removeClass("is-focused")}),CUI.util.isTouch&&this.$handles.attr("aria-disabled",!0).removeAttr("tabindex")):(this.$inputs.removeAttr("disabled"),CUI.util.isTouch&&this.$handles.removeAttr("aria-disabled").attr("tabindex",0)),this.$element.toggleClass("is-disabled",this.options.disabled)},_render:function(){var b=this,c=b.$inputs.map(function(){return a(this).attr("max")});b.options.max=Math.max.apply(null,c.toArray());var d=b.$inputs.map(function(){return a(this).attr("min")});b.options.min=Math.min.apply(null,d.toArray());var e=b.$inputs.map(function(){return a(this).attr("step")});b.options.step=Math.min.apply(null,e.toArray()),b.options.ticks&&b._buildTicks(),b.options.filled&&b._buildFill(),b._buildHandles()},_buildTicks:function(){var b=a("<div></div>").addClass("coral-Slider-ticks");this.$element.prepend(b);for(var c=Math.round((this.options.max-this.options.min)/this.options.step)-1,d=this.isVertical?this.$element.height():this.$element.width(),e=0;c>e;e++){var f=(e+1)*(d/(c+1)),g=f/d*100,h=a("<div></div>").addClass("coral-Slider-tick").css(this.isVertical?"bottom":"left",g+"%");b.append(h)}this.$ticks=b.find(".coral-Slider-tick"),this.options.filled&&this._coverTicks()},_buildFill:function(){var b=this;if(this.$fill=a("<div></div>").addClass("coral-Slider-fill"),0!==b.values.length){var c,d;b.values.length<2?(c=(b.values[0]-b.options.min)/(b.options.max-b.options.min)*100,this.$fill.css(b.isVertical?"height":"width",c+"%")):(c=(this._getLowestValue()-b.options.min)/(b.options.max-b.options.min)*100,d=(this._getHighestValue()-this._getLowestValue())/(b.options.max-b.options.min)*100,this.$fill.css(b.isVertical?"height":"width",d+"%").css(b.isVertical?"bottom":"left",c+"%"))}this.$element.prepend(this.$fill),b.options.filled=!0},_buildHandles:function(){var b=this;b.$inputs.each(function(c){var d=a(this).wrap("<div></div>").parent().addClass("coral-Slider-value"),e=(b.values[c]-b.options.min)/(b.options.max-b.options.min)*100,f=a("<div></div>").addClass("coral-Slider-handle u-coral-openHand").css(b.isVertical?"bottom":"left",e+"%").attr({role:"slider",id:a(this).attr("id")+"-handle","aria-valuemin":b.options.min,"aria-valuemax":b.options.max,"aria-valuenow":b.values[c],"aria-valuetext":b.options.valuetextFormatter(b.values[c])});if(a(this).css(b.isVertical?"bottom":"left",e+"%"),a(d).append(f),b.options.tooltips){var g=a("<output>"+a(this).attr("value")+"</output>").addClass("coral-Tooltip coral-Tooltip--info").addClass(b.isVertical?"coral-Tooltip--positionRight":"coral-Tooltip--positionAbove").attr({id:a(this).attr("id")+"-tooltip","for":a(this).attr("id")});f.append(g)}if(a(this).attr("aria-labelledby")&&f.attr("aria-labelledby",a(this).attr("aria-labelledby")),b.$inputs.length>1&&a(this).attr("aria-labelledby"))for(var h,i=a(this).attr("aria-labelledby").split(" "),j=0;j<i.length;j++)h=a("#"+i[j]),j>0&&(h.removeAttr("for"),f.prepend(h));CUI.util.isTouch?(f.attr("aria-hidden",!0),a(this).attr("tabindex",0).removeAttr("aria-hidden").removeAttr("hidden")):(f.on("focus",function(a){b._focus(a)}.bind(this)),f.on("blur",function(a){b._blur(a)}.bind(this)),f.on("keydown",function(a){b._keyDown(a)}.bind(this)),f.attr("tabindex",0),a(this).attr({"aria-hidden":!0,tabindex:-1,hidden:"hidden"})),b.options.disabled&&f.attr("aria-disabled",!0).removeAttr("tabindex")}),b.$handles=b.$element.find(".coral-Slider-handle"),b.$tooltips=b.$element.find(".coral-Tooltip")},_handleClick:function(a){if(this.options.disabled)return!1;var b=this,d=a.pageX,e=a.pageY;if("touchstart"===a.type){var f=a.originalEvent.touches.length>0?a.originalEvent.touches:a.originalEvent.changedTouches;d=f[0].pageX,e=f[0].pageY}if(d!==c&&e!==c){var g=b._findNearestHandle(d,e),h=b._getValueFromCoord(d,e,!0);isNaN(h)||(b._updateValue(g,h),b._moveHandles(),b.options.filled&&b._updateFill()),CUI.util.isTouch||("mousedown"===a.type&&b.$handles.eq(g).data("mousedown",!0),b.$handles.eq(g).focus())}},_findNearestHandle:function(b,c){var d=this,e=999999,f=0;return d.$handles.each(function(g){var h=a(this).offset().left,i=a(this).offset().top,j=a(this).width(),k=a(this).height(),l=Math.abs(b-(h+j/2));"vertical"===d.options.orientation&&(l=Math.abs(c-(i+k/2))),e>l&&(e=l,f=g)}),f},_focus:function(b){if(this.options.disabled)return!1;var c=a(b.target),d=c.closest(".coral-Slider-value"),e=d.find(".coral-Slider-handle");e.data("mousedown")||(this.$element.addClass("is-focused"),d.addClass("is-focused"),e.addClass("is-focused"))},_blur:function(b){if(this.options.disabled)return!1;var c=a(b.target),d=c.closest(".coral-Slider-value"),e=d.find(".coral-Slider-handle");this.$element.removeClass("is-focused"),d.removeClass("is-focused"),e.removeClass("is-focused").removeData("mousedown")},_keyDown:function(b){if(!this.options.disabled){var c=this,d=a(b.target),e=d.closest(".coral-Slider-value").find("input"),f=c.$inputs.index(e),g=Number(e.val()),h=Number(c.options.step),i=Number(c.options.min),j=Number(c.options.max),k=Math.max(h,Math.round((j-i)/10));switch(d.removeData("mousedown"),c._focus(b),b.keyCode){case 40:case 37:g-=h,b.preventDefault();break;case 38:case 39:g+=h,b.preventDefault();break;case 33:g+=k-g%k,b.preventDefault();break;case 34:g-=k-(g%k===0?0:k-g%k),b.preventDefault();break;case 35:g=j,b.preventDefault();break;case 36:g=i,b.preventDefault()}g!==Number(e.val())&&(c.setValue(g,f),e.change())}},_mouseDown:function(c){if(this.options.disabled)return!1;c.preventDefault();var d,e=this;return this.draggingPosition=-1,this.$handles.each(function(a,b){b===c.target&&(e.draggingPosition=a)}.bind(this)),this.$tooltips.each(function(a,b){b===c.target&&(e.draggingPosition=a)}.bind(this)),this.draggingPosition<0?void this._handleClick(c):(d=this.$handles.eq(this.draggingPosition),d.addClass("is-dragged"),a("body").addClass("u-coral-closedHand"),a(b).fipo("touchmove.slider","mousemove.slider",this._handleDragging.bind(this)),a(b).fipo("touchend.slider","mouseup.slider",this._mouseUp.bind(this)),void(d===document.activeElement||CUI.util.isTouch||("mousedown"===c.type&&d.data("mousedown",!0),d.focus())))},_handleDragging:function(a){var b=a.pageX,c=a.pageY;if(a.originalEvent.targetTouches){var d=a.originalEvent.targetTouches.item(0);b=d.pageX,c=d.pageY}this._updateValue(this.draggingPosition,this._getValueFromCoord(b,c)),this._moveHandles(),this.options.filled&&this._updateFill(),a.preventDefault()},_mouseUp:function(){this.$handles.eq(this.draggingPosition).removeClass("is-dragged"),a("body").removeClass("u-coral-closedHand"),this.draggingPosition=-1,a(b).unbind("mousemove.slider touchmove.slider"),a(b).unbind("mouseup.slider touchend.slider")},_clickLabel:function(a){this.$handles.eq(0)[0].focus()},_updateValue:function(a,b,c){var d=this;(d.$inputs.eq(a).attr("value")!==b.toString()||d.values[a]!==b.toString())&&(b>this.options.max&&(b=this.options.max),b<this.options.min&&(b=this.options.min),(0===a||1===a)&&(2===d.$inputs.length&&this.options.bound&&(0===a?(b=Math.min(b,Number(d.$inputs.eq(1).val())),d.$inputs.eq(1).attr({min:b}),d.$inputs.eq(a).attr({max:d.$inputs.eq(1).val()}),d.$handles.eq(1).attr({"aria-valuemin":b}),d.$handles.eq(a).attr({"aria-valuemax":d.$inputs.eq(1).val()})):(b=Math.max(b,Number(d.$inputs.eq(0).val())),d.$inputs.eq(0).attr({max:b}),d.$inputs.eq(a).attr({min:d.$inputs.eq(0).val()}),d.$handles.eq(0).attr({"aria-valuemax":b}),d.$handles.eq(a).attr({"aria-valuemin":d.$inputs.eq(0).val()}))),d.values[a]=b.toString(),d.$inputs.eq(a).val(b).attr({value:b,"aria-valuetext":d.options.valuetextFormatter(b)}),d.$handles.eq(a).attr({"aria-valuenow":b,"aria-valuetext":d.options.valuetextFormatter(b)}),c||setTimeout(function(){d.$inputs.eq(a).change()},1)))},_moveHandles:function(){var b=this;this.$handles.each(function(c){var d=(b.values[c]-b.options.min)/(b.options.max-b.options.min)*100,e=b.$inputs.eq(c);"vertical"===b.options.orientation?b.options.slide?(a(this).stop().animate({bottom:d+"%"}),e.stop().animate({bottom:d+"%"})):(a(this).css("bottom",d+"%"),e.css("bottom",d+"%")):b.options.slide?(a(this).stop().animate({left:d+"%"}),e.stop().animate({left:d+"%"})):(a(this).css("left",d+"%"),e.css("left",d+"%")),b.options.tooltips&&b.$tooltips.eq(c).html(b.options.tooltipFormatter(b.values[c]))})},_updateFill:function(){var a,b=this;if(0!==b.values.length)if(2===b.values.length){a=(b._getLowestValue()-b.options.min)/(b.options.max-b.options.min)*100;var c=(b._getHighestValue()-b.options.min)/(b.options.max-b.options.min)*100,d=c-a;"vertical"===b.options.orientation?b.options.slide?b.$fill.stop().animate({bottom:a+"%",height:d+"%"}):b.$fill.css("bottom",a+"%").css("height",d+"%"):b.options.slide?b.$fill.stop().animate({left:a+"%",width:d+"%"}):b.$fill.css("left",a+"%").css("width",d+"%")}else a=(b.values[0]-b.options.min)/(b.options.max-b.options.min)*100,"vertical"===b.options.orientation?b.options.slide?b.$fill.stop().animate({height:a+"%"}):b.$fill.css("height",a+"%"):b.options.slide?b.$fill.stop().animate({width:a+"%"}):b.$fill.css("width",a+"%");b.options.ticks&&b._coverTicks()},_coverTicks:function(){var b=this;b.$ticks.each(function(c){var d=b._getValueFromCoord(a(this).offset().left,a(this).offset().top);2===b.values.length?d>b._getLowestValue()&&d<b._getHighestValue()?a(this).addClass("coral-Slider-tick--covered"):a(this).removeClass("coral-Slider-tick--covered"):d<b._getHighestValue()?a(this).addClass("coral-Slider-tick--covered"):a(this).removeClass("coral-Slider-tick--covered")})},_getValueFromCoord:function(a,b,c){var d,e,f,g=this,h=g.$element.offset();if("vertical"===g.options.orientation){var i=g.$element.height();d=(h.top+i-b)/i}else{var j=g.$element.width();d=(a-h.left)/j}if(c&&(0>d||d>1))return 0/0;var k=1*g.options.min+(g.options.max-g.options.min)*d;return k>=g.options.max?g.options.max:k<=g.options.min?g.options.min:(f=(k-g.options.min)%g.options.step,e=2*Math.abs(f)>=g.options.step?k-f+1*g.options.step:k-f)},_getHighestValue:function(){return Math.max.apply(null,this.values)},_getLowestValue:function(){return Math.min.apply(null,this.values)}}),CUI.Widget.registry.register("slider",CUI.Slider),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Slider.init(a(".coral-Slider[data-init~='slider']",b.target))})}(jQuery,this),function(a){CUI.LabeledSlider=new Class({toString:"LabeledSlider",extend:CUI.Slider,alternating:!1,construct:function(){this.$element.addClass("coral-Slider--labeled")},_getTickLabel:function(a){var b=this.$element.find("ul.coral-Slider-tickLabels li").eq(a);return b.html()},_buildTicks:function(){var b=this;this.$element.hasClass("coral-Slider--alternatingLabels")&&(this.alternating=!0);var c=a("<div></div>").addClass("coral-Slider-ticks");this.$element.prepend(c);var d=Math.ceil((b.options.max-b.options.min)/b.options.step)-1,e=b.isVertical?b.$element.height():b.$element.width(),f=e/(d+1);this.alternating&&(f*=2);for(var g=0;d>g;g++){var h=e*(g+1)/(d+1),i=a("<div></div>").addClass("coral-Slider-tick").css(b.isVertical?"bottom":"left",h+"px");c.append(i);var j="coral-Slider-tickLabel-"+g,k=a("<div></div>").addClass("coral-Slider-tickLabel "+j);b.isVertical||(h-=f/2),k.css(b.isVertical?"bottom":"left",h+"px"),b.isVertical||k.css("width",f+"px"),b.alternating&&!b.isVertical&&g%2===1&&(k.addClass("coral-Slider-tickLabel--alternate"),i.addClass("coral-Slider-tick--alternate")),k.append(b._getTickLabel(g)),c.append(k)}b.$ticks=c.find(".tick"),b.options.filled&&b._coverTicks()}}),CUI.Widget.registry.register("labeled-slider",CUI.LabeledSlider),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.LabeledSlider.init(a(".coral-Slider[data-init~='labeled-slider']",b.target))})}(window.jQuery),function(a,b,c){CUI.Autocomplete=new Class({toString:"Autocomplete",extend:CUI.Widget,construct:function(){this._input=this.options.predefine.input||this.$element.find(".js-coral-Autocomplete-textfield"),this._selectlist=this.options.predefine.selectlist||this.$element.find(".js-coral-Autocomplete-selectList"),this._tags=this.options.predefine.tags||this.$element.find(".js-coral-Autocomplete-tagList"),this._suggestionsBtn=this.options.predefine.suggestionsBtn||this.$element.find(".js-coral-Autocomplete-toggleButton"),this._selectListAnchor=this.$element.find(".js-coral-Autocomplete-field"),this._selectListAnchor.length||(this._selectListAnchor=this.$element.find(".js-coral-Autocomplete-inputGroup")),this.applyOptions(),this._makeAccessible(),this._initTypeahead(),this._setOptionListeners()},defaults:{mode:"starts",ignorecase:!0,delay:200,multiple:!1,forceselection:!1,selectlistConfig:null,tagConfig:null,predefine:{}},applyOptions:function(){this._setInput(),this._setTags(),this._setSelectlist(),this._setSuggestions(),this._setForceSelection()},getValue:function(){return this.options.multiple?this._tagListWidget.getValues():this.options.forceselection?this._lastSelected:this._input.val()},_setOptionListeners:function(){this.on("change:multiple",function(){this._setInput(),this._setTags(),this._setForceSelection()}.bind(this)),this.on("change:forceselection",function(){this._setForceSelection()}.bind(this))},_setForceSelection:function(){var b=this;if(this.options.forceselection&&!this.options.multiple){if(!this._valueInput){var d=this.$element.find(".js-coral-Autocomplete-hidden"),e=this._input.prop("name"),f=this._input.val();d.length>0?(this._valueInput=d,!this._valueInput.prop("name")&&e&&this._valueInput.prop("name",e),this._input.prop("name",""),b._lastSelected=this._valueInput.val(),b._lastSelectedDisplay=f):(e&&(this._valueInput=a('<input type="hidden" class="js-coral-Autocomplete-hidden">').prop("name",e).val(f).insertAfter(this._input),this._input.prop("name","")),b._lastSelected=f,b._lastSelectedDisplay=f)}this._input.on("blur.autocomplete-forceselection",function(){var a=function(){b._lastSelectedDisplay!==b._input.val()&&(""===b._input.val()&&(b._lastSelectedDisplay="",b._lastSelected="",b._triggerValueChange()),b._input.val(b._lastSelectedDisplay),b._valueInput.val(b._lastSelected))},c=setTimeout(a,0);b._suggestionsBtn.on("focus",function(){clearTimeout(c),b._suggestionsBtn.on("blur",a)})})}else this._input.off("blur.autocomplete-forceselection"),this._valueInput&&(this._input.prop("name",this._valueInput.prop("name")),this._input.val(this._valueInput.val()),this._valueInput.remove(),this._valueInput=c)},_setInput:function(){this.options.multiple?this._input.on("keypress.autocomplete-preventsubmit",function(a){return 13===a.which?(a.preventDefault(),!1):void 0}):this._input.off("keypress.autocomplete-preventsubmit"),this._input.attr("autocomplete","off"),this._lastSelected=this._input.val(),this._lastSelectedDisplay=this._input.val()},_setSelectlist:function(){0===this._selectlist.length?this._selectlist=a("<ul/>",{id:CUI.util.getNextId(),"class":"coral-SelectList js-coral-Autocomplete-selectList"}).appendTo(this.$element):this._selectlist.attr("id")||this._selectlist.attr("id",CUI.util.getNextId()),this._selectlist.selectList(a.extend({relatedElement:this._selectListAnchor,autofocus:!1,autohide:!0},this.options.selectlistConfig||{})),this._selectListWidget=this._selectlist.data("selectList"),this._selectlist.on("selected.autocomplete",this._handleSelected.bind(this))},_setTags:function(){if(this.options.multiple&&!this._tagListWidget){0===this._tags.length&&(this._tags=a("<ul/>",{"class":"coral-TagList js-coral-Autocomplete-tagList"}).appendTo(this.$element)),this._tags.tagList(this.options.tagConfig||{}),this._tagListWidget=this._tags.data("tagList"),this._input.on("keyup.autocomplete-addtag",this._addTag.bind(this));var b=this._triggerValueChange.bind(this);this._tags.on("itemremoved",b),this._tags.on("itemadded",b)}else!this.options.multiple&&this._tagListWidget&&(this._tags.off("itemadded"),this._tags.off("itemremoved"),this._tags.remove(),this._tags=null,this._tagListWidget=null,this._input.off("keyup.autocomplete-addtag"))},_initTypeahead:function(){var a,b=this,c=function(){b.showSuggestions(b._input.val(),!1,b._selectListWidget)},d=function(d){a&&clearTimeout(a),a=setTimeout(c,b.options.delay)};this._input.on("input.autocomplete",d),this._input.on("cut.autocomplete",d),this._input.on("keyup.autocomplete",function(a){switch(a.which){case 8:case 46:d()}}),this._input.on("keypress.autocomplete",function(a){a.stopPropagation()})},_setSuggestions:function(){var a=this;this._suggestionsBtn.length&&(this._suggestionsBtn.attr({tabindex:-1,"aria-hidden":!0}),this._suggestionsBtn.on("click.autocomplete",function(b){a._selectListWidget.get("visible")?a._input.trigger("focus"):(a.showSuggestions("",!0,a._selectListWidget),a._input.trigger("focus"),b.preventDefault(),b.stopPropagation())}),this._input.addClass("autocomplete-has-suggestion-btn"))},_makeAccessible:function(){var b,c=this;this._input.attr({id:this._input.attr("id")||CUI.util.getNextId(),role:"combobox","aria-multiselectable":this.options.multiple||null,"aria-autocomplete":this.options.typeahead?"list":null,"aria-owns":this._selectlist.attr("id")||null}),b=a('label[for="'+this._input.attr("id")+'"]'),0===b.length&&(b=this._input.closest("label")),0!==b.length&&0!==a.trim(b.text()).length||!this._input.attr("placeholder")||this._input.attr({"aria-label":this._input.attr("placeholder")}),this._selectListWidget._makeAccessible(),
this._input.add(this._suggestionsBtn).on("keydown.cui-autocomplete",function(a){switch(a.which){case 40:c._selectListWidget.get("visible")?c._selectListWidget.$element.trigger("focus"):c._selectListWidget.show().resetCaret(),a.preventDefault(),a.stopPropagation()}}.bind(this))},_addTag:function(a){13!==a.which||this.options.forceselection||(this._tagListWidget.addItem(this._input.val()),this.clear(),this._selectListWidget.hide())},_handleSelected:function(a){this._selectListWidget.hide();var b=a.selectedValue,c=a.displayedValue;this.options.multiple?(this._tagListWidget.addItem({display:c,value:b}),this.clear()):(this._lastSelected=b||c,this._lastSelectedDisplay=c,this.options.forceselection?(this._input.val(c),this._valueInput.val(this._lastSelected)):this._input.val(this._lastSelected),this._triggerValueChange()),this._input.trigger("focus")},showSuggestions:function(b,c,d){this.$element.trigger(a.Event("query",{value:b}));var e=this._selectListWidget.get("type"),f=!0;b.length||c?("static"===e?(this._handleStaticFilter(b),f=this._selectlist.find('[role="option"]:not(.is-hidden)').length>0):"dynamic"===e&&this._handleDynamicFilter(b),f?this._selectListWidget.show().resetCaret():this._selectListWidget.hide()):0===b.length&&this._selectListWidget._hasFocus()?("static"===e&&(this._handleStaticFilter(b),f=this._selectlist.find('[role="option"]:not(.is-hidden)').length>0),f||this._selectListWidget.hide()):this._selectListWidget.hide()},_handleStaticFilter:function(a){var b=this;a?this._selectListWidget.filter(function(c,d){return b.options.ignorecase&&(d=d.toLowerCase(),a=a.toLowerCase()),"starts"===b.options.mode?0===d.lastIndexOf(a,0):"contains"===b.options.mode?-1!==d.search(a):!1}):this._selectListWidget.filter()},_handleDynamicFilter:function(b){var c=a.extend({},this._selectListWidget.get("dataadditional"),{query:b});this._selectListWidget.set("dataadditional",c),this._selectListWidget.triggerLoadData(!0)},_triggerValueChange:function(){this.$element.trigger(a.Event("change:value"),{value:this.getValue()})},clear:function(){this._input.val(""),this._lastSelected="",this._lastSelectedDisplay="",this._selectListWidget.filter()},disable:function(){this.$element.addClass("is-disabled"),this.$element.attr("aria-disabled",!0),this._input.prop("disabled",!0),this._suggestionsBtn.prop("disabled",!0)},enable:function(){this.$element.removeClass("is-disabled"),this.$element.attr("aria-disabled",!1),this._input.prop("disabled",!1),this._suggestionsBtn.prop("disabled",!1)}}),CUI.Widget.registry.register("autocomplete",CUI.Autocomplete),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Autocomplete.init(a("[data-init~=autocomplete]",b.target))})}(jQuery,this),function(a,b,c){CUI.Select=new Class({toString:"Select",extend:CUI.Widget,construct:function(){this._button=this.$element.children(".coral-Select-button"),this._buttonText=this._button.children(".coral-Select-button-text"),this._nativeSelect=this.$element.children(".coral-Select-select"),this._selectList=this.$element.children(".coral-SelectList"),this._tagList=this.$element.children(".coral-TagList"),this._valueInput=this.$element.children("input[type=hidden]"),this.applyOptions()},defaults:{type:"static",nativewidget:!1,nativewidgetonmobile:!0,multiple:!1,tagConfig:null,selectlistConfig:null},applyOptions:function(){switch(this._nativeSelect.length>0&&this._nativeSelect.prop("multiple")&&(this.options.multiple=!0),this._createSelectList(),this._nativeSelect.removeClass("coral-Select-select--native"),this._nativeSelect.off(".selectlist"),this._button.off(".selectlist"),this._getModeOfOperation()){case"disabled":this._disabledEventHandling();break;case"nativeselect":this._prepareSelectForInteraction(),this._disableKeyboardInteractionWithSelectList();break;case"selectlist":this._prepareSelectListForInteraction(),this._disableKeyboardInteractionWithNativeSelect();break;case"hybrid":this._prepareSelectForInteraction(),this._prepareSelectListForInteraction(),this._hybridEventHandling(),this._disableKeyboardInteractionWithNativeSelect()}this.options.multiple?this._setTagList():"static"===this.options.type&&this._handleNativeSelect(),this._makeAccessible()},_makeAccessible:function(){var c,d,e,f=b.navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?!0:!1;this._button.attr({id:this._button.attr("id")||CUI.util.getNextId()}),this._button.hasClass("is-invalid")&&(this._button.attr({"aria-invalid":!0}),this._nativeSelect.attr({"aria-invalid":!0}),this._selectList.attr({"aria-invalid":!0})),this._button.hasClass("is-disabled")&&(this._button.attr({"aria-disabled":!0,disabled:"disabled"}),this._nativeSelect.attr({"aria-disabled":!0,disabled:"disabled"}),this._selectList.attr({"aria-disabled":!0})),c=this._nativeSelect.length&&this._nativeSelect.attr("id")?'label[for="'+this._nativeSelect.attr("id")+'"]':'label[for="'+this._button.attr("id")+'"]',d=a(c),d.attr({id:d.attr("id")||CUI.util.getNextId()}),e=d.attr("id"),this._buttonText.attr({id:this._buttonText.attr("id")||CUI.util.getNextId()}),this._button.attr({role:f?"button":"combobox","aria-expanded":!1,"aria-haspopup":!0,"aria-labelledby":e?this._buttonText.attr("id")+" "+e:null,"aria-owns":this._selectList.attr("id"),"aria-multiselectable":this.options.multiple||null}),this._selectListWidget&&this._selectListWidget._makeAccessible(),this._selectList.attr({"aria-controls":this._button.attr("id"),"aria-multiselectable":this.options.multiple||null}),d.length&&!this._button.is("[aria-hidden=true]")&&d.on("click.selectLabel",function(a){this._button.focus(),a.preventDefault()}.bind(this))},getValue:function(){return this.options.multiple?this._tagListWidget.getValues():"static"===this.options.type?this._nativeSelect[0][this._nativeSelect[0].selectedIndex].value:"dynamic"===this.options.type?this._valueInput.val():null},setValue:function(b){b===c?b=[]:a.isArray(b)||(b=[b]);var d=[];this.getItems().forEach(function(a){if(a instanceof CUI.SelectList.Option){var c=a.getValue(),e=b.indexOf(c);-1===e?d.push(c):this._select(c,a.getDisplay())}},this),this._deselect(d)},getItems:function(){return this._selectListWidget.getItems()},getOption:function(a){return this._selectListWidget.getOption(a)},getGroup:function(a){return this._selectListWidget.getGroup(a)},addOption:function(a,b){this._selectListWidget.addOption(a,b)},addGroup:function(a,b){this._selectListWidget.addGroup(a,b)},_getModeOfOperation:function(){return this._button.is(".is-disabled")?"disabled":"dynamic"===this.options.type?"selectlist":this.options.nativewidget?"nativeselect":this.options.nativewidgetonmobile?"hybrid":"selectlist"},_disabledEventHandling:function(){this._button.on("click.selectlist",function(a){return!1})},_hybridEventHandling:function(){var a=!1,b=!1,c=this;this._nativeSelect.on("touchstart.selectlist",function(){a=!0}).on("pointerdown.selectlist",function(b){b.originalEvent&&"touch"===b.originalEvent.pointerType&&(a=!0)}).on("MSPointerDown.selectlist",function(b){b.originalEvent&&2===b.originalEvent.pointerType&&(a=!0)}).on("mousedown.selectlist",function(d){return a?void(a=!1):void(1===d.which&&(c._nativeSelect.attr("disabled","disabled"),setTimeout(function(){c._nativeSelect.removeAttr("disabled"),c._button.focus()},0),b=!0,c._button.click()))}).on("click.selectlist",function(a){b&&(a.stopPropagation(),b=!1)}).on("mouseenter.selectlist mouseleave.selectlist",function(a){c._button.toggleClass("is-hovered","mouseenter"===a.type)}).on("focus.selectlist",function(a){c._button.toggleClass("is-focused","focus"===a.type)}).on("blur.selectlist",function(a){c._button.removeClass("is-focused")})},_disableKeyboardInteractionWithNativeSelect:function(){this._nativeSelect.attr({tabindex:"-1","aria-hidden":!0}),this._nativeSelect.off("focusin.nativeselect focusout.nativeselect keydown.nativeselect pointerdown.nativeselect MSPointerDown.nativeselect mousedown.nativeselect")},_disableKeyboardInteractionWithSelectList:function(){this._button.attr({tabindex:"-1","aria-hidden":!0})},_prepareSelectForInteraction:function(){var a=this;a._nativeSelect.addClass("coral-Select-select--native"),a._nativeSelect.css({height:a._button.outerHeight()}),a._nativeSelect.on("change.select",a._handleNativeSelect.bind(a)),a._nativeSelect.on("focusin.nativeselect",function(){a._button.addClass("is-focused")}),a._nativeSelect.on("focusout.nativeselect",function(b){a._button.removeClass("is-focused")})},_createSelectList:function(){var b=this,c="static";0===this._selectList.length?this._selectList=a("<ul/>",{id:CUI.util.getNextId(),"class":"coral-SelectList"}).appendTo(this.$element):this._selectList.attr("id")||this._selectList.attr("id",CUI.util.getNextId()),this._nativeSelect.length>0?this._parseMarkup():c="dynamic",this._selectList.selectList(a.extend({relatedElement:this._button,type:c},this.options.selectlistConfig||{})),this._selectListWidget=this._selectList.data("selectList"),this._selectList.on("itemadded",this._addItemToSelect.bind(this)).on("itemremoved",function(a){var c;c=a.item instanceof CUI.SelectList.Group?a.item.getItems().map(function(a){return a.getValue()}):[a.item.getValue()],b._deselect(c),b._removeItemFromSelect(a)})},_addItemToSelect:function(b){var c;if(b.item instanceof CUI.SelectList.Option)c=a("<option>"),c.attr("value",b.item.getValue());else{if(!(b.item instanceof CUI.SelectList.Group))return;c=a("<optgroup>")}c.text(b.item.getDisplay());var d=this._nativeSelect;b.target!=this._selectList.get(0)&&(d=d.children().eq(a(b.target).closest(".coral-SelectList-item--optgroup").index()));var e=b.item.getPosition();e>=d.children().length?d.append(c):0===e?d.prepend(c):d.children().eq(e).before(c)},_removeItemFromSelect:function(b){var c=this._nativeSelect;b.target!=this._selectList.get(0)&&(c=c.children().eq(a(b.target).closest(".coral-SelectList-item--optgroup").index())),c.children().eq(b.item.getPosition()).remove()},_prepareSelectListForInteraction:function(){var a=this;this._button.attr({"data-toggle":"selectlist","data-target":"#"+this._selectList.attr("id")}),this._selectList.on("selected.select",this._handleSelectedFromSelectList.bind(this)).on("show.select hide.select",function(b){a._button.toggleClass("is-active","show"===b.type)})},_handleNativeSelect:function(b){var c,d,e=this;e.options.multiple?(a.each(e._nativeSelect[0].options,function(a,b){b.selected?e._tagListWidget.addItem({value:b.value,display:b.text}):e._tagListWidget.removeItem(b.value)}),c=e._tagListWidget.getValues()):e._nativeSelect[0]&&(d=e._nativeSelect[0][e._nativeSelect[0].selectedIndex],e._buttonText.text(d?d.text:""),c=d?d.value:null),b&&this.$element.trigger(a.Event("selected",{selected:c}))},_syncSelectionToNativeSelect:function(b){this._nativeSelect.length&&a.each(this._nativeSelect[0].options,function(a,c){c.selected=b.indexOf(c.value)>-1})},_syncSelectionToSelectList:function(b){this._selectList.length&&a.each(this._selectList.find(this._selectListWidget._SELECTABLE_SELECTOR),function(c,d){var e=a(d);e.attr("aria-selected",b.indexOf(e.attr("data-value"))>-1)})},_parseMarkup:function(){function b(b,c){b.children("option").each(function(b,d){var e=a(d);a("<li/>",{"class":"coral-SelectList-item coral-SelectList-item--option","data-value":e.val(),text:e.text()}).appendTo(c)})}var c=this,d=this._nativeSelect.children("optgroup");d.length>0?d.each(function(d,e){var f=a(e),g=a("<li/>",{"class":"coral-SelectList-item coral-SelectList-item--optgroup"}).append(a("<span/>",{"class":"coral-SelectList-groupHeader",text:f.attr("label")}));b(f,a("<ul/>",{"class":"coral-SelectList-sublist"}).appendTo(g)),c._selectList.append(g)}):b(this._nativeSelect,this._selectList)},_setTagList:function(){var b=this;0===this._tagList.length&&(this._tagList=a("<ol/>",{"class":"coral-TagList"}).appendTo(this.$element)),this._tagList.tagList(this.options.tagConfig||{}),this._tagListWidget=this._tagList.data("tagList"),this._tagList.on("itemremoved",function(a,c){var d=b._tagListWidget.getValues();b._syncSelectionToNativeSelect(d),b._syncSelectionToSelectList(d)}),this._handleNativeSelect()},_handleSelectedFromSelectList:function(b){b&&b.stopPropagation(),this._selectListWidget.hide(),this._select(b.selectedValue,b.displayedValue),this._button.trigger("focus"),this.$element.trigger(a.Event("selected",{selected:this.getValue()}))},_select:function(a,b){var c;this.options.multiple?(this._tagListWidget.addItem({value:a,display:b}),c=this._tagListWidget.getValues()):(this._buttonText.text(b),this._valueInput.val(a),c=[""+a]),this._syncSelectionToNativeSelect(c),this._syncSelectionToSelectList(c)},_deselect:function(a){var b,c=this;if(this.options.multiple)a.forEach(function(a){c._tagListWidget.removeItem(a)}),b=this._tagListWidget.getValues();else if(a.indexOf(this.getValue())>-1){var d,e,f=this._getFirstOptionWithoutValues(this._getAllOptions(),a);f?(d=f.getValue(),e=f.getDisplay(),b=[d]):(d="",e="",b=[]),this._buttonText.text(e),this._valueInput.val(d)}b&&(this._syncSelectionToNativeSelect(b),this._syncSelectionToSelectList(b))},_getFirstOptionWithoutValues:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(-1===b.indexOf(d.getValue()))return d}},_getAllOptions:function(){for(var a=this.getItems(),b=[],c=0;c<a.length;c++){var d=a[c];d instanceof CUI.SelectList.Group?b=b.concat(d.getItems()):b.push(d)}return b}}),CUI.Widget.registry.register("select",CUI.Select),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Select.init(a("[data-init~=select]",b.target))})}(jQuery,this),function(a){function b(a){return 10>a?"0"+a:a}function c(a,b,c){void 0!==a&&(c[b]=a)}function d(a,b,c){c[b]=a?!0:!1}function e(a,b,c){c[b]=a||c[b]}function f(a,b,c){void 0!==a&&(c[b]=1*a)}function g(a){return a?moment([a.year(),a.month(),a.date()]):null}function h(a,b,c){return null===b&&null===c?!0:null===b?c>=a:null===c?a>=b:a>=b&&c>=a}function i(a,b){return a&&b?a.year()===b.year()&&a.month()===b.month()&&a.date()===b.date():void 0}var j=0;CUI.Datepicker=new Class({toString:"Datepicker",extend:CUI.Widget,defaults:{monthNames:null,dayNames:null,format:null,type:"date",selectedDateTime:null,startDay:0,disabled:!1,displayedFormat:null,storedFormat:null,headFormat:"MMMM YYYY",forceHTMLMode:!1,required:!1,hasError:!1,minDate:null,maxDate:null},displayDateTime:null,pickerShown:!1,construct:function(){this.guid=j+=1,this._readOptionsFromMarkup(),this._parseOptions(),this._setupMomentJS(),this._adjustMarkup(),this._findElements(),this._constructPopover(),this._initialize()},_readOptionsFromMarkup:function(){var b=this.options,g=this.$element,h=a(g.find("input").filter("[type^=date],[type=time]"));0!==h.length&&(b.type=h.attr("type")),[["disabled","disabled",d],["required","required",d],["displayed-format","displayedFormat",c],["stored-format","storedFormat",c],["force-html-mode","forceHTMLMode",c],["day-names","dayNames",e],["month-names","monthNames",e],["head-format","headFormat",e],["start-day","startDay",f],["min-date","minDate",c],["max-date","maxDate",c]].map(function(a){var c=a[0],d=a[1],e=a[2];e(g.data(c),d,b)})},_parseOptions:function(){var a=this.options;a.monthNames=a.monthNames||CUI.Datepicker.monthNames,a.dayNames=a.dayNames||CUI.Datepicker.dayNames,a.isDateEnabled="date"===a.type||"datetime"===a.type||"datetime-local"===a.type,a.isTimeEnabled="time"===a.type||"datetime"===a.type||"datetime-local"===a.type;var b=document.createElement("input");b.setAttribute("type",a.type),a.supportsInputType="text"!==b.type,null!==a.minDate&&("today"===a.minDate?a.minDate=moment().startOf("day"):moment(a.minDate,m).isValid()?a.minDate=moment(a.minDate,m):a.minDate=null),null!==a.maxDate&&("today"===a.maxDate?a.maxDate=moment().startOf("day"):moment(a.maxDate,m).isValid()?a.maxDate=moment(a.maxDate,m):a.maxDate=null),a.storedFormat=a.storedFormat||("time"===a.type?n:o),a.displayedFormat=a.displayedFormat||("time"===a.type?n:p),a.useNativeControls=a.forceHTMLMode,!a.forceHTMLMode&&l&&a.supportsInputType&&(a.useNativeControls=!0),a.useNativeControls&&("date"===a.type?a.displayedFormat=m:"time"===a.type?a.displayedFormat=n:a.displayedFormat=o)},_setupMomentJS:function(){this.options.language=q+(new Date).getTime(),moment.lang(this.options.language,{months:this.options.monthNames,weekdaysMin:this.options.dayNames})},_adjustMarkup:function(){var b=this.$element;if(this.options.useNativeControls)this.$popover=[];else{var c="popguid"+this.guid,d="#"+c+".coral-Popover";this.$popover=a("body").find(d),0===this.$popover.length&&(a("body").append(s.replace("%ID%",c)),this.$popover=a("body").find(d),this.options.isDateEnabled&&this.$popover.find(".coral-Popover-content").append(r))}if(0===b.find("input[type=hidden]").length&&b.append('<input type="hidden">'),!b.find("input[type=hidden]").attr("name")){var e=b.find("input").not("[type=hidden]").attr("name");b.find("input[type=hidden]").attr("name",e),b.find("input").not("[type=hidden]").removeAttr("name")}},_findElements:function(){this.$input=this.$element.find("input").not("[type=hidden]"),this.$hiddenInput=this.$element.find("input[type=hidden]"),this.$openButton=this.$element.find("button")},_constructPopover:function(){this.$popover.length&&(this.popover=new k({$element:this.$popover,$trigger:this.$openButton,options:this.options,setDateTimeCallback:this._popoverSetDateTimeCallback.bind(this),hideCallback:this._popoverHideCallback.bind(this)}))},_initialize:function(){this.options.useNativeControls?(this.displayDateTime=this.options.selectedDateTime=moment(this.$input.val(),this.options.displayedFormat),this.$openButton.hide()):this._switchInputTypeToText(this.$input),this.options.disabled||(this.$openButton.on("click",this._clickHandler.bind(this)),this.$input.on("change"+(l?" blur":""),this._inputChangedHandler.bind(this))),this.options.selectedDateTime||this._readInputVal([this.options.storedFormat,this.options.displayedFormat]),this._setDateTime(this.options.selectedDateTime,!0)},_readInputVal:function(a){var b=this.$input.eq(0).val();if(""!==b){var c=moment(b,a||this.options.displayedFormat);c&&c.isValid()||(c=moment(b)),this.displayDateTime=this.options.selectedDateTime=c,null!==c&&c.isValid()&&(this.displayDateTime=this.options.selectedDateTime=c)}else this.displayDateTime=null},_updateState:function(){this.options.disabled?(this.$element.find("input,button").attr("disabled","disabled"),this._hidePicker()):this.$element.find("input,button").removeAttr("disabled"),this.options.hasError||!this.options.selectedDateTime&&this.options.required||this.options.selectedDateTime&&!this.options.selectedDateTime.isValid()?(this.$element.addClass("is-invalid"),this.$element.find("input").addClass("is-invalid")):(this.$element.removeClass("is-invalid"),this.$element.find("input").removeClass("is-invalid"))},_popoverSetDateTimeCallback:function(){this._setDateTime.apply(this,arguments),this.options.isTimeEnabled===!1&&this._hidePicker()},_popoverHideCallback:function(){this.pickerShown=!1,this.$element.find("input").removeClass("is-highlighted")},_switchInputTypeToText:function(a){var b=a.parent();a.detach().attr("type","text").prependTo(b)},_openNativeInput:function(){this.$input.trigger("tap")},_clickHandler:function(a){if(this.pickerShown)this._hidePicker();else{var b=this;setTimeout(function(){b._openPicker()},100)}},_inputChangedHandler:function(){if(!this.options.disabled){var a;""!==this.$input.val()?(a=moment(this.$input.val(),this.options.displayedFormat),this.options.hasError=null!==a&&!h(a,this.options.minDate,this.options.maxDate)):this.options.hasError=!1,this._setDateTime(a,!0)}},_keyPress:function(){this.pickerShown},_openPicker:function(){this.options.useNativeControls?this._openNativeInput():(this._readInputVal(),this._showPicker())},_showPicker:function(){this.pickerShown||(this.$element.find("input").addClass("is-highlighted"),this.popover.show(this.displayDateTime),this.pickerShown=!0)},_hidePicker:function(){this.pickerShown&&(this.$element.find("input").removeClass("is-highlighted"),this.popover.hide(),this.pickerShown=!1)},_setDateTime:function(a,b){this.options.selectedDateTime=this.displayDateTime=a,a?a.isValid()&&this.$input.val(a.lang(this.options.language).format(this.options.displayedFormat)):this.$input.val("");var c=a&&a.isValid()?a.lang("en").format(this.options.storedFormat):"";this.$hiddenInput.val(c),this._updateState(),b||this.$input.trigger("change"),this.$hiddenInput.trigger("change")}}),CUI.Datepicker.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],CUI.Datepicker.dayNames=["Su","Mo","Tu","We","Th","Fr","Sa"],CUI.Widget.registry.register("datepicker",CUI.Datepicker),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Datepicker.init(a("[data-init~=datepicker]",b.target))});var k=new Class({toString:"Popover",extend:Object,construct:function(a){this.$element=a.$element,this.options=a.options,this.setDateTimeCallback=a.setDateTimeCallback,this.hideCallback=a.hideCallback,this.$element.popover(),this.popover=this.$element.data("popover"),this.popover.set({pointAt:a.$trigger,pointFrom:"bottom"}),this._setupListeners()},show:function(a){this.displayDateTime=a,this._renderCalendar(),this.options.isTimeEnabled&&this._renderTime(),this.popover.show()},hide:function(){this.popover.hide()},_setupListeners:function(){this.popover.on("hide",this._popupHideHandler.bind(this)),this.$element.find(".coral-DatePicker-calendar").on("swipe",this._swipeHandler.bind(this)),this.$element.on("mousedown",".coral-DatePicker-nextMonth",this._mouseDownNextHandler.bind(this)),this.$element.on("mousedown",".coral-DatePicker-prevMonth",this._mouseDownPrevHandler.bind(this)),this.options.isTimeEnabled&&(this.$element.on("selected",".coral-DatePicker-hour, .coral-DatePicker-minute",this._dropdownChangedHandler.bind(this)),this.$element.on("change",".coral-DatePicker-hour, .coral-DatePicker-minute",this._dropdownChangedHandler.bind(this)))},_popupHideHandler:function(a){this.hideCallback()},_swipeHandler:function(a){var b=a.direction,c=this.displayDateTime.year(),d=this.displayDateTime.month();"left"===b?(this.displayDateTime=g(moment([c,d+1,1])),this._renderCalendar("left")):"right"===b&&(this.displayDateTime=g(moment([c,d-1,1])),this._renderCalendar("right"))},_mouseDownNextHandler:function(a){a.preventDefault(),this.displayDateTime&&(this.displayDateTime=g(moment([this.displayDateTime.year(),this.displayDateTime.month()+1,1])),this._renderCalendar("left"))},_mouseDownPrevHandler:function(a){a.preventDefault(),this.displayDateTime&&(this.displayDateTime=g(moment([this.displayDateTime.year(),this.displayDateTime.month()-1,1])),this._renderCalendar("right"))},_dropdownChangedHandler:function(){var a=this._getHoursFromDropdown(),b=this._getMinutesFromDropdown();this.options.selectedDateTime||(this.options.selectedDateTime=moment());var c=this.options.selectedDateTime.hours(a).minutes(b);this.setDateTimeCallback(c)},_tableMouseDownHandler:function(b){b.preventDefault();var c=moment(a(b.target).data("date"),o);if(this.options.isTimeEnabled){var d=this._getHoursFromDropdown(),e=this._getMinutesFromDropdown();c.hours(d).minutes(e)}this.setDateTimeCallback(c),this._renderCalendar()},_renderCalendar:function(a){var b=this.displayDateTime;b&&b.isValid()||(this.displayDateTime=b=moment());var c=b.year(),d=b.month()+1,e=this._renderOneCalendar(d,c),f=this.$element.find(".coral-DatePicker-calendar");e.on("mousedown","a",this._tableMouseDownHandler.bind(this)),f.find("table").length>0&&a?this._slideCalendar(e,"left"===a):(f.find("table").remove(),f.find(".coral-DatePicker-calendarSlidingContainer").remove(),f.find(".coral-DatePicker-calendarBody").append(e))},_renderOneCalendar:function(b,c){var d=moment([c,b-1,1]).lang(this.options.language).format(this.options.headFormat),e=a('<div class="coral-DatePicker-calendarHeader"><h2 class="coral-Heading coral-Heading--2">'+d+"</h2></div>").append(a('<button class="coral-MinimalButton coral-DatePicker-nextMonth">&#x203A;</button>')).append(a('<button class="coral-MinimalButton coral-DatePicker-prevMonth">&#x2039;</button>')),f=this.$element.find(".coral-DatePicker-calendar"),g=f.find(".coral-DatePicker-calendarHeader");g.length>0?g.replaceWith(e):f.prepend(e);var j=a("<table>");j.data("date",c+"/"+b);for(var k="<tr>",l=null,m=0;7>m;m++){l=(m+this.options.startDay)%7;var n=this.options.dayNames[l];k+="<th><span>"+n+"</span></th>"}k+="</tr>",j.append("<thead>"+k+"</thead>");var p=moment([c,b-1,1]),q=(p.day()-this.options.startDay)%7;0>q&&(q+=7),k="";for(var r=moment(),s=0;6>s;s++){k+="<tr>";for(var t=0;7>t;t++){l=7*s+t-q+1;var u=moment([c,b-1,l]),v=u.month()+1===parseFloat(b),w="";i(u,r)&&(w+=" today"),i(u,this.options.selectedDateTime)&&(w+=" selected"),k+=v&&h(u,this.options.minDate,this.options.maxDate)?'<td class="'+w+'"><a href="#" data-date="'+u.lang(this.options.language).format(o)+'">'+u.date()+"</a></td>":'<td class="'+w+'"><span>'+u.date()+"</span></td>"}k+="</tr>"}return j.append("<tbody>"+k+"</tbody>"),j},_slideCalendar:function(b,c){this.$element.find(".coral-DatePicker-calendarSlidingContainer table").stop(!0,!0),this.$element.find(".coral-DatePicker-calendarSlidingContainer").remove();var d=this.$element.find("table"),e=d.width(),f=d.height(),g=a('<div class="coral-DatePicker-calendarSlidingContainer">');g.css({display:"block",position:"relative",width:e+"px",height:f+"px",overflow:"hidden"}),this.$element.find(".coral-DatePicker-calendarBody").append(g),g.append(d).append(b),d.css({position:"absolute",left:0,top:0}),d.after(b),b.css({position:"absolute",left:c?e:-e,top:0}),d.animate({left:c?-e:e},y,function(){d.remove()}),b.animate({left:0},y,function(){0!==g.parents().length&&(b.css({position:"relative",left:0,top:0}),b.detach(),this.$element.find(".coral-DatePicker-calendarBody").append(b),g.remove())}.bind(this))},_renderTime:function(){for(var c=this.options.selectedDateTime,d=a(t),e=a('<select class="coral-Select-select"></select>'),f=0;24>f;f++){var g=a("<option>"+b(f)+"</option>");c&&f===c.hours()&&g.attr("selected","selected"),e.append(g)}for(var h=a(u).append(e),i=a('<select class="coral-Select-select"></select>'),j=0;60>j;j++){var k=a("<option>"+b(j)+"</option>");c&&j===c.minutes()&&k.attr("selected","selected"),i.append(k)}var l=a(v).append(i);a(h).css(w),a(h).find("coral-Select").css(x),a(l).css(w),a(l).find("coral-Select").css(x),d.append(h,a("<span>:</span>"),l),0===this.$element.find(".coral-DatePicker-timeControls").length?this.$element.find(".coral-Popover-content").append(d):this.$element.find(".coral-DatePicker-timeControls").empty().append(d.children()),a(h).select(),a(l).select()},_getHoursFromDropdown:function(){return parseInt(this.$element.find(".coral-DatePicker-timeControls .coral-DatePicker-hour .coral-Select-select").val(),10)},_getMinutesFromDropdown:function(){return parseInt(this.$element.find(".coral-DatePicker-timeControls .coral-DatePicker-minute .coral-Select-select").val(),10)}}),l=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i),m="YYYY-MM-DD",n="HH:mm",o="YYYY-MM-DD[T]HH:mmZ",p="YYYY-MM-DD HH:mm",q="coralui_",r=['<div class="coral-DatePicker-calendar">','<div class="coral-DatePicker-calendarHeader"></div>','<div class="coral-DatePicker-calendarBody"></div>',"</div>"].join(""),s=['<div class="coral-Popover" style="display:none" id="%ID%">','<div class="coral-Popover-content"></div>',"</div>"].join(""),t='<div class="coral-DatePicker-timeControls"><i class="coral-Icon coral-Icon--clock coral-Icon--small"></i></div>',u='<div class="coral-Select coral-DatePicker-hour"><button class="coral-Select-button coral-MinimalButton"><span class="coral-Select-button-text"></span></button></div>',v='<div class="coral-Select coral-DatePicker-minute"><button class="coral-Select-button coral-MinimalButton"><span class="coral-Select-button-text"></span></button></div>',w={position:"relative"},x={position:"absolute",left:"1.5rem",top:"1rem"},y=400}(window.jQuery),function(a,b,c){function d(a){return a}function e(a){return decodeURIComponent(a.replace(f," "))}var f=/\+/g,g=a.cookie=function(f,h,i){if(h!==c){if(i=a.extend({},g.defaults,i),null===h&&(i.expires=-1),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return h=g.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(f),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=g.raw?d:e,m=b.cookie.split("; "),n=0,o=m.length;o>n;n++){var p=m[n].split("=");if(l(p.shift())===f){var q=l(p.join("="));return g.json?JSON.parse(q):q}}return null};g.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b)?(a.cookie(b,null,c),!0):!1}}(jQuery,document),function(a,b,c){CUI.Endor=CUI.Endor||{}}(jQuery,this),function(a,b,c){CUI.Endor.registry={register:function(a,b){var c=this._instanceMap,d=this._callbackMap,e=this;if(b=this._resolveKey(a,b)||CUI.util.getNextId(),a._isSingleton)c[b]=a;else{var f=c[b]||(c[b]=[]);f.push(a)}var g=d[b];return g&&(d[b]=g.filter(function(c){return e._invokeCallback(c,a,b),!c.options.once}),0===d[b].length&&delete d[b]),b},unregister:function(a,b){var c=this._instanceMap,d=this._callbackMap,e=this;if(b=this._resolveKey(a,b),!b)throw new Error("Invalid instance key");if(a._isSingleton)delete c[b];else{var f=c[b],g=f.indexOf(a);-1!=g&&f.splice(g,1)}var h=d[b];return h&&h.forEach(function(a){e._invokeCallback(a,null,b)}),b},has:function(a){return this._instanceMap.hasOwnProperty(a)},get:function(a){return this._instanceMap[a+""]},resolve:function(b,c,d){if(c={method:c,options:a.extend({},this._defaultCallbackOptions,d)},this.has(b)&&(this._invokeCallback(c,this.get(b),b),c.options.once))return function(){return c};var e=this._callbackMap[b]||(this._callbackMap[b]=[]);return e.push(c),function(){var a=e.indexOf(c);return-1!==a&&e.splice(a,1),c}},reset:function(){this._instanceMap={},this._callbackMap={}},_instanceMap:{},_callbackMap:{},_defaultCallbackOptions:{once:!1,scope:this},_invokeCallback:function(a,b,c){var d=a.options.scope||this;a.method.apply(d,[b,c])},_resolveKey:function(b,d){return d||(a.isFunction(b.getRegistryKey)?b.getRegistryKey():b.hasOwnProperty("toString")?b+"":c)}}}(jQuery,this),function(a,b){CUI.Endor.util={escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(a).replace(/[&<>"'\/]/g,function(a){return b[a]}.bind(this))},debounce:function(a,b,c){var d;return function(){function e(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(e,b||100)}},ensureElementId:function(b){var c=a(b);return c.attr("id")||c.attr("id",CUI.util.getNextId()),c},registerWidget:function(b){var c=b.toString(),d=CUI.util.decapitalize(c),e=CUI.Endor.util.pascalCaseToSelectorCase(c);CUI.Widget.registry.register(d,b),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(c){b.init(a("[data-init~="+e+"]",c.target))})},pascalCaseToSelectorCase:function(a){var b=/([A-Z]_*)/g;return a.replace(b,"-$1").split("-").filter(function(a){return""!==a}).map(CUI.util.decapitalize).join("-")}}}(jQuery,window),function(a,b,c){function d(a){return"string"==typeof a}var e=/^(store)([A-Z]\w*)$/;CUI.ShellWidgetMixin={getRegistryKey:function(){return this+""},_resolveWidget:function(b,c,d){var e=a.extend({scope:this},d);return CUI.Endor.registry.resolve(b,c,e)},_initOptionsStore:function(){for(var a in this.options){var b=this.options[a],c=e.exec(a);if(c){var f=CUI.util.decapitalize(c[2]),g=[this.toString(),f,b].filter(d).join(".");this._initOptionStore(f,g)}}},_initOptionStore:function(a,b){var d={type:"change:"+a,handler:function(a){var d=a.value;d!==c?CUI.Endor.store.save(b,d):CUI.Endor.store.clear(b)}};this.$element.on(d.type,d.handler)}},CUI.ShellWidgetMixin.applyTo=function(b,d){var e=b.prototype,f=e.construct,g=e.destruct;a.extend(e,CUI.ShellWidgetMixin,{_isSingleton:d!==c?d:!0,
construct:function(){a.isFunction(f)&&f.apply(this,arguments),this._initOptionsStore(),CUI.Endor.registry.register(this)},destruct:function(){CUI.Endor.registry.unregister(this),a.isFunction(g)&&g.apply(this,arguments)}})}}(jQuery,this),function(a,b,c){CUI.ShellWidget=new Class({toString:"ShellWidget",extend:CUI.Widget,construct:function(a){this._init(a)},_init:function(a){}}),CUI.ShellWidgetMixin.applyTo(CUI.ShellWidget)}(jQuery,this),function(a,b,c){var d={isClosed:null};CUI.Closable=new Class({toString:"Closable",extend:CUI.ShellWidget,defaults:d,construct:function(a){},getIsClosed:function(){return this.options.isClosed},setIsClosed:function(a){return a!==this.options.isClosed&&this._set("isClosed",a)!==this&&this._updateDOM(),this.options.isClosed},open:function(){return this.setIsClosed(!1)},close:function(){return this.setIsClosed(!0)},toggleIsClosed:function(){return this.setIsClosed(!this.options.isClosed)},_init:function(a){null===this.options.isClosed&&(this.options.isClosed=this.$element.hasClass(CUI.Closable.CLASS_CLOSED)),this._updateDOM()},_updateDOM:function(){CUI.Endor.util.ensureElementId(this.$element),this.$element.toggleClass(CUI.Closable.CLASS_CLOSED,this.options.isClosed)}}),CUI.Closable.defaults=d,CUI.Closable.CLASS_CLOSED="is-closed"}(jQuery,this),function(a,b,c){var d="endor-Panel",e="is-transitioning",f="endor-Panel-content--breadcrumbBarHeight",g="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";CUI.Shell=new Class({toString:"Shell",extend:CUI.ShellWidget,defaults:{brandIcon:null,brandTitle:null,brandHref:null,generateBreadcrumbBar:!1,breadcrumbBarOptions:{isClosed:!0},generatePage:!1,pageOptions:{generateOuterRail:!0,generateInnerRail:!0,generateBlackBar:!0,generateActionBar:!0,generateFooter:!0}},construct:function(a){},_breadcrumbBar:null,_crumbs:null,_page:null,_brand:null,_isCompact:!1,_init:function(a){this.inherited(arguments),this._setupElement(),this._resolveWidgets(),this._updateIsCompact(),this._updateBrand(),this._addListeners(),this._handleWindowLoadOrResize()},_setupElement:function(){if(this.$element.addClass(d),this.options.generateBreadcrumbBar=!!this.options.generateBreadcrumbBar,this.options.generateBreadcrumbBar){var b=a("<div></div>").prependTo(this.$element);b.before("<!-- CUI.Shell | breadcrumb bar -->"),new CUI.BreadcrumbBar(a.extend({element:b},{isClosed:!0},this.options.breadcrumbBarOptions))}if(this.options.generatePage=!!this.options.generatePage,this.options.generatePage){var c=a("<div></div>").appendTo(this.$element);c.before("<!-- CUI.Shell | page -->"),new CUI.Page(a.extend({element:c},this.options.pageOptions))}},_resolveWidgets:function(){this._resolveWidget(CUI.Page,this._handlePageResolved),this._resolveWidget(CUI.Crumbs,this._handleCrumbsResolved),this._resolveWidget(CUI.BreadcrumbBar,this._handleBreadcrumbBarResolved),this._resolveWidget(CUI.Brand,this._handleBrandResolved)},_handlePageResolved:function(a){this._page=a,this._updateBreadcrumbBarSpacing(),this._handleWindowLoadOrResize()},_handleCrumbsResolved:function(a){this._crumbs=a,a&&this.options.brandTitle&&a.setFirstItem({title:this.options.brandTitle,href:this.options.brandHref,icon:this.options.brandIcon}),this._handleWindowLoadOrResize()},_handleBreadcrumbBarResolved:function(a){var b=this._handleBreadcrumbBarIsClosedChange;b&&(this._breadcrumbBar.off("change:isClosed",b),delete this._handleBreadcrumbBarIsClosedChange),this._breadcrumbBar=a,a&&(b=this._handleBreadcrumbBarIsClosedChange=this._updateBrand.bind(this),a.on("change:isClosed",b)),this._updateBreadcrumbBarSpacing(),this._handleWindowLoadOrResize()},_handleBrandResolved:function(a){this._brand=a,this._updateBrand()},_addListeners:function(){var c=this;a(b).on("resize load",CUI.Endor.util.debounce(this._handleWindowLoadOrResize).bind(this)),a(document).on(CUI.BlackBar.EVENT_BACK_BUTTON_CLICK,function(a){a.preventDefault(),c._navigateToPreviousCrumb()}),a(document).on(CUI.BlackBar.EVENT_TITLE_CLICK,function(a){a.preventDefault(),c._toggleBreadcrumbBar()})},_updateIsCompact:function(){this._isCompact=b.innerWidth<CUI.Shell.COMPACT_WINDOW_WIDTH_BOUNDARY},_updateBrand:function(){this._brand&&(this._breadcrumbBar&&this._brand.setIsClosed(!this._breadcrumbBar.getIsClosed()),this.options.brandTitle&&this._brand.setTitle(this.options.brandTitle),this.options.brandIcon&&this._brand.setIcon(this.options.brandIcon),this.options.brandHref&&this._brand.setHref(this.options.brandHref))},_updateBreadcrumbBarSpacing:function(){this._page&&(this._breadcrumbBar?this._page.$element.addClass(f):this._page.$element.removeClass(f))},_handleWindowLoadOrResize:function(){if(this._updateIsCompact(),this._crumbs&&this._crumbs.truncate(),this._page&&(this._page.resize(this._isCompact),this._breadcrumbBar&&this._page._blackBar&&this._page._blackBar._titleBar&&this._page._blackBar._titleBar.length)){var a=this._breadcrumbBar.$element;this._page._blackBar._titleBar.attr({"aria-controls":a.attr("id"),"aria-expanded":!this._breadcrumbBar.get("isClosed"),tabindex:0})}},_toggleBreadcrumbBar:function(){if(this._breadcrumbBar&&(this._breadcrumbBar.toggleIsClosed(),this._page)){var a=this._page.$element;a.toggleClass(e).on(g,function b(c){a.off(g,b),a.removeClass(e)}),this._page._blackBar&&this._page._blackBar._titleBar&&this._page._blackBar._titleBar.length&&this._page._blackBar._titleBar.attr({"aria-expanded":!this._breadcrumbBar.get("isClosed")})}},_navigateToPreviousCrumb:function(){if(this._crumbs){var a=this._crumbs.getLastNavigableItem();if(a)return void(b.location=a.attr("href"))}b.history.back()}}),CUI.Endor.util.registerWidget(CUI.Shell),CUI.Shell.COMPACT_WINDOW_WIDTH_BOUNDARY=1024}(jQuery,this),function(a,b,c){var d="js-endor-page endor-Panel-content endor-Page",e="is-leftInnerRailOpen",f="is-rightInnerRailOpen",g="endor-Panel-content--actionBarHeight",h="endor-Panel-content--blackBarHeight",i='<div class="endor-Page-content endor-Panel">',j='<div class="endor-Panel-content" role="main">',k='<div class="js-endor-content endor-Panel-content">',l='<div class="endor-Panel-contentMain"><div class="u-coral-padding"></div></div>';CUI.Page=new Class({toString:"Page",extend:CUI.ShellWidget,defaults:{generateOuterRail:!1,outerRailOptions:{generateBrand:!0},generateBlackBar:!1,blackBarOptions:null,generateInnerRail:!1,innerRailOptions:null,generateActionBar:!1,generateFooter:!1,footerOptions:null},construct:function(a){},resize:function(a){a!=this._isCompact&&(this._isCompact=a,this._updateOuterRailToggleState(),this._updateBreadcrumbBarIsCompact())},getContent:function(){return this._$pageContentInner},openOuterRail:function(){this._isCompact&&this._leftInnerRail&&""!==this._leftInnerRail.getActivePanelId()&&this.setActiveLeftInnerRailPanel(""),this._isCompact&&this._rightInnerRail&&""!==this._rightInnerRail.getActivePanelId()&&this.setActiveRightInnerRailPanel(""),this._outerRail.open(),this._updateOuterRailToggleState(),this._updateBreadcrumbBarIsCompact()},closeOuterRail:function(){this._outerRail.close(),this._updateOuterRailToggleState(),this._updateBreadcrumbBarIsCompact()},toggleOuterRail:function(){this._outerRail&&(this._outerRailIsClosed()?this.openOuterRail():this.closeOuterRail())},setActiveInnerRailPanel:function(a){this._leftInnerRail&&this._leftInnerRail.contains("#"+a)?this.setActiveLeftInnerRailPanel(a):this._rightInnerRail&&this._rightInnerRail.contains("#"+a)&&this.setActiveRightInnerRailPanel(a)},setActiveLeftInnerRailPanel:function(a){return this._leftInnerRail?this._setActiveInnerRailPanel(this._leftInnerRail,a):void 0},setActiveRightInnerRailPanel:function(a){return this._rightInnerRail?this._setActiveInnerRailPanel(this._rightInnerRail,a):void 0},_outerRail:null,_outerRailToggle:null,_leftInnerRail:null,_rightInnerRail:null,_innerRailToggles:[],_footer:null,_blackBar:null,_actionBar:null,_breadcrumbBar:null,_$belowBlackBar:null,_$pageContentOuter:null,_$pageContentInner:null,_isCompact:!1,_init:function(a){this.inherited(arguments),this._setupElement(),this._resolveWidgets(),this._addListeners(),this._updateInnerRailState()},_setupElement:function(){this.$element.addClass(d);var b,c,e,f,g;this.options.generateOuterRail=!!this.options.generateOuterRail,this.options.generateOuterRail&&(g=a("<div>").prependTo(this.$element),g.before("<!-- CUI.Page | outer rail -->"),new CUI.OuterRail(a.extend({element:g},this.options.outerRailOptions))),b=this.$element.children("div.endor-Page-content"),b.length||(b=a(i).appendTo(this.$element),b.before("<!-- CUI.Page | main -->")),this.options.generateBlackBar=!!this.options.generateBlackBar,this.options.generateBlackBar&&(g=a("<nav>").appendTo(b),g.before("<!-- CUI.Page | black bar -->"),new CUI.BlackBar(a.extend({element:g},this.options.blackBarOptions))),c=b.children("div.endor-Panel-content"),c.length||(c=a(j).appendTo(b),c.before("<!-- CUI.Page | panel content -->")),this._$belowBlackBar=c,this.options.generateInnerRail=!!this.options.generateInnerRail,this.options.generateInnerRail&&(g=a("<div>").prependTo(c),g.before("<!-- CUI.Page | inner rail -->"),new CUI.InnerRail(a.extend({element:g},this.options.innerRailOptions))),b=c.find("div.endor-Page-content"),b.length||(b=a(i).appendTo(c),b.before("<!-- CUI.Page | content -->")),this.options.generateActionBar=!!this.options.generateActionBar,this.options.generateActionBar&&(g=a("<nav>").prependTo(b),g.before("<!-- CUI.Page | action bar -->"),new CUI.ActionBar({element:g})),f=b.find(".js-endor-content"),f.length||(f=a(k).appendTo(b),f.before("<!-- CUI.Page | page content (outer) -->")),this._$pageContentOuter=f,e=f.find("div.endor-Panel-contentMain"),e.length||(e=a(l).appendTo(f),e.before("<!-- CUI.Page | page content (inner) -->")),this._$pageContentInner=e.children("div.u-coral-padding"),this.options.generateFooter=!!this.options.generateFooter,this.options.generateFooter&&(g=a("<footer>").appendTo(e),g.before("<!-- CUI.Page | footer -->"),new CUI.Footer(a.extend({element:g},this.options.footerOptions)))},_resolveWidgets:function(){this._resolveWidget(CUI.InnerRail,function(){var a=CUI.Endor.registry.get(CUI.InnerRail);a.forEach(function(a){"left"===a.options.dock?this._leftInnerRail=a:"right"===a.options.dock&&(this._rightInnerRail=a),a.on("change:activePanelId",this._updateInnerRailState.bind(this))}.bind(this)),this._updateInnerRailState()}),this._resolveWidget(CUI.OuterRail,function(a){this._outerRail=a}),this._resolveWidget(CUI.OuterRailToggle,function(a){this._outerRailToggleHandler&&(this._outerRailToggle.$element.off(CUI.OuterRailToggle.EVENT_CLICK,this._outerRailToggleHandler),this._outerRailToggleHandler=c),this._outerRailToggle=a,this._outerRailToggle&&(this._outerRailToggleHandler=this.toggleOuterRail.bind(this),this._outerRailToggle.$element.on(CUI.OuterRailToggle.EVENT_CLICK,this._outerRailToggleHandler)),this._updateOuterRailToggleState()}),this._resolveWidget(CUI.BlackBar,function(a){this._blackBar=a,a?this._$belowBlackBar.addClass(h):this._$belowBlackBar.removeClass(h)}),this._resolveWidget(CUI.ActionBar,function(a){a?this._$pageContentOuter.addClass(g):this._$pageContentOuter.removeClass(g),this._actionBar=a}),this._resolveWidget(CUI.Footer,function(a){this._footer=a,this.resize(this._isCompact)}),this._resolveWidget(CUI.BreadcrumbBar,function(a){this._breadcrumbBar=a,this._updateBreadcrumbBarIsCompact()}),this._resolveWidget(CUI.InnerRailToggle,function(a){this._innerRailToggles=CUI.Endor.registry.get(CUI.InnerRailToggle),this._updateInnerRailToggleSelectedStates()})},_addListeners:function(){var b=this;a(document).on(CUI.InnerRailToggle.EVENT_CLICK,function(c,d,e){var f=a(e.getTarget()).attr("id")||"";b.setActiveInnerRailPanel(f)})},_setActiveInnerRailPanel:function(a,b){var c=a.getActivePanelId();b===c&&(b=""),b!==c&&(a.setActivePanelId(b),this._updateInnerRailState(),this._updateInnerRailToggleSelectedStates(),this._isCompact&&(this._updateOuterRailToggleState(),this._updateBreadcrumbBarIsCompact()))},_updateInnerRailState:function(){var a;this._leftInnerRail&&(a=this._leftInnerRail.getActivePanelId(),""===a?this.$element.removeClass(e):this.$element.addClass(e)),this._rightInnerRail&&(a=this._rightInnerRail.getActivePanelId(),""===a?this.$element.removeClass(f):this.$element.addClass(f)),this._updateInnerRailToggleSelectedStates()},_updateInnerRailToggleSelectedStates:function(){var b=this._leftInnerRail?this._leftInnerRail.getActivePanel():a(),c=this._rightInnerRail?this._rightInnerRail.getActivePanel():a();this._innerRailToggles&&this._innerRailToggles.forEach(function(a){a.setSelected(b.is(a.getTarget())||c.is(a.getTarget()))})},_updateOuterRailToggleState:function(){this._outerRailToggle&&this._outerRailToggle.setIsClosed(this._outerRailIsClosed())},_updateBreadcrumbBarIsCompact:function(){this._breadcrumbBar&&this._outerRail&&this._breadcrumbBar.setIsCompact(this._outerRailIsClosed())},_outerRailIsClosed:function(){return this._outerRail?this._isCompact&&this._leftInnerRail&&""!==this._leftInnerRail.getActivePanelId()?!0:this._isCompact&&this._rightInnerRail&&""!==this._rightInnerRail.getActivePanelId()?!0:this._outerRail.getIsClosed():!1}}),CUI.Endor.util.registerWidget(CUI.Page)}(jQuery,this),function(a,b,c){var d="endor-Crumbs",e="endor-Crumbs-item",f="endor-Crumbs-item--ellipsis",g="is-collapsed",h="."+f,i=e+"--unavailable",j=e+"--noNavigation",k='<i class="endor-Crumbs-item-icon coral-Icon"></i>',l='<a class="'+e+" "+f+'" href="#"></a>',m=100;CUI.Crumbs=new Class({toString:"Crumbs",extend:CUI.ShellWidget,construct:function(a){},setFirstItem:function(a,b){var c=this._itemFromTitleOrObjectOrElement(a,b);return this._firstCrumb?this._firstCrumb.replaceWith(c):this.$element.prepend(c),this._firstCrumb=c},addItem:function(a,b){var c=this._itemFromTitleOrObjectOrElement(a,b);return this.$element.append(c),c},getItems:function(){return this.$element.children().not(h)},removeItem:function(){var a=this.$element.children(":last-child").remove();if(a.is(this._firstCrumb))delete this._firstCrumb;else if(a.is(this._ellipsis))return this._remoteItem();return a},removeAllItems:function(){return delete this._firstCrumb,this.$element.children().remove().not(h)},truncate:function(){var b=this.$element.children(),c=this.$element.width()-m;b.removeClass(g),this._ellipsis.remove();var d=Array.prototype.reduce.call(b,function(b,c){return b+=a(c).outerWidth()},0);if(b.length&&d>c){for(var e=d,f=1,h=b.length-1;h>f&&e>c;f++){var i=a(b[f]);e-=i.width(),i.addClass(g)}this._ellipsis.insertAfter(b[0]).addClass(g)}},getLastNavigableItem:function(){var b;return this.$element.children().toArray().reverse().some(function(c){var d=a(c);return d.hasClass(i)||d.hasClass(j)?!1:(b=d,!0)}),b?b.eq(0):a()},_brand:null,_ellipsis:a(),_init:function(a){this.inherited(arguments),this._decorateElement(),this._findOrCreateEllipsis(),this.truncate()},_decorateElement:function(){if(!this.$element.is("nav"))throw new Error("CUI.Crumbs expects to be attached to a nav element");this.$element.addClass(d),this.$element.children().addClass(e)},_findOrCreateEllipsis:function(){var b=this.$element.find(h);0===b.length&&(b=a(l)),this._ellipsis=b},_itemFromTitleOrObjectOrElement:function(b,d){var f,g=b,h="string"==typeof g?g:c,i=a.isPlainObject(g)?g:c,j=g&&g.jquery?g:c;return j?(f=j,f.addClass(e)):f=i?this._constructItemFromObject(i):this._constructItemFromTitleAndRef(h,d),f},_constructItemFromTitleAndRef:function(b,c){return a("<a>").attr("href",c).text(b).addClass(e)},_constructItemFromObject:function(b){var c=this._constructItemFromTitleAndRef(b.title,b.href);if(b.hasOwnProperty("isAvailable")&&!b.isAvailable&&(c.addClass(i),c.attr("tabindex",-1)),b.hasOwnProperty("isNavigable")&&!b.isNavigable&&c.addClass(j),b.hasOwnProperty("icon")){var d=a(k);d.addClass(b.icon),c.prepend(d)}return c}}),CUI.Crumbs.isUnavailable=function(a){return a&&a.hasClass(i)},CUI.Crumbs.isNoNavigation=function(a){return a&&a.hasClass(j)},CUI.Crumbs.isNavigable=function(a){var b=CUI.Crumbs.isUnavailable(a),c=CUI.Crumbs.isNoNavigation(a);return a&&a.is("."+e)&&!(b||c)},CUI.Crumbs.CLASS_ITEM_UNAVAILABLE=i,CUI.Crumbs.CLASS_ITEM_NONAVIGATION=j,CUI.Endor.util.registerWidget(CUI.Crumbs)}(jQuery,this),function(a,b){var c="endor-Panel-header endor-ActionBar",d="endor-ActionBar-left",e="endor-ActionBar-right",f="endor-ActionBar-item",g=f+"--text";CUI.ActionBar=new Class({toString:"ActionBar",extend:CUI.Widget,construct:function(a){this._init(a)},addItem:function(b,c){var d=c&&c.right===!0?this._rightContainer:this._leftContainer,e=c&&c.isText;return b=a(b),b.addClass(f+(e?" "+g:"")),d.append(b),b},removeItem:function(a){return a=this.$element.find(a),a.remove()},getLeftContainer:function(){return this._leftContainer},getRightContainer:function(){return this._rightContainer},_leftContainer:a(),_rightContainer:a(),_init:function(a){this._setupElement()},_setupElement:function(){this.$element.addClass(c);var b;b=this.$element.children("div."+d),b.length||(b=a("<div>").addClass(d).appendTo(this.$element)),this._leftContainer=b.eq(0),b=this.$element.children("div."+e),b.length||(b=a("<div>").addClass(e).appendTo(this.$element)),this._rightContainer=b.eq(0)}}),CUI.Widget.registry.register("actionBar",CUI.ActionBar),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.ActionBar.init(a('[data-init~="action-bar"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.ActionBar)}(jQuery,this),function(a,b){var c="endor-Footer endor-Panel-footer endor-Footer--sticky",d="endor-Footer-copyright",e="endor-Footer-links",f="endor-Footer-item",g="span."+d,h="div."+e;CUI.Footer=new Class({toString:"Footer",extend:CUI.ShellWidget,defaults:{copyright:"© 2014 Adobe Systems Incorporated. All Rights Reserved."},construct:function(a){},setCopyright:function(a){a!==this.options.copyright&&this._set("copyright",a)!==this&&this._updateCopyrightDOM()},addItem:function(b){return a.isArray(b)?b.map(this.addItem,this):a(b).addClass(f).appendTo(this._$items)},removeItem:function(a){return this._$items.find(a).remove()},_$copyright:a(),_$items:a(),_init:function(a){this.inherited(arguments),this._setupElement(),this._updateCopyrightDOM()},_setupElement:function(){this.$element.addClass(c);var b;b=this.$element.children(g),b.length||(b=a("<span>").addClass(d).appendTo(this.$element)),this._$copyright=b.eq(0),b=this.$element.children(h),b.length||(b=a("<div>").addClass(e).appendTo(this.$element)),this._$items=b.eq(0)},_updateCopyrightDOM:function(){this._$copyright.text(this.options.copyright||"")}}),CUI.Endor.util.registerWidget(CUI.Footer)}(jQuery,this),function(a,b,c){var d="is-compact",e="div.endor-BreadcrumbBar-closeIndicator",f="endor-Panel-header endor-BreadcrumbBar js-endor-breadcrumb-bar",g='<nav class="endor-Crumbs">',h=['<button class="endor-BreadcrumbBar-closeIndicator coral-MinimalButton">','<i class="coral-Icon coral-Icon--chevronUp coral-Icon--sizeS"></i>',"</button>"].join("");CUI.BreadcrumbBar=new Class({toString:"BreadcrumbBar",extend:CUI.Closable,$closeIndicatorElement:null,$navElement:null,crumbsWidget:null,defaults:a.extend({},CUI.Closable.defaults,{isCompact:null,closeOnNavigate:!1,closeOnClick:!1,hideCloseIndicator:!1,closeIndicatorText:"Close"}),construct:function(a){},getIsCompact:function(){return this.options.isCompact},setIsCompact:function(a){return a!==this.options.isCompact&&this._set("isCompact",a)!==this&&this._applyIsCompactToDOM(),a},toggleIsCompact:function(){return this.setIsCompact(!this.options.isCompact)},_init:function(a){this.inherited(arguments),CUI.Endor.util.ensureElementId(this.$element),null===this.options.isCompact&&(this.options.isCompact=this.$element.hasClass(d)),this.options.isCompact=!!this.options.isCompact,this.options.closeOnNavigate=!!this.options.closeOnNavigate,this.options.closeOnClick=!!this.options.closeOnClick,this.options.hideCloseIndicator=!!this.options.hideCloseIndicator,this.$element.addClass(f),this.$navElement=this._getOrConstructNavElement(),this.crumbsWidget=this._getOrConstructCrumbsWidget(),this.$closeIndicatorElement=this._getOrConstructCloseIndicator(),this._setupCloseIndicator(),this._applyIsCompactToDOM(),this.$element.on("click",this._handleElementClick.bind(this))},_getOrConstructNavElement:function(){var b=this.$element.children("nav").eq(0);return 0===b.length&&(b=a(g),this.$element.prepend(b)),b},_getOrConstructCrumbsWidget:function(){var a=this.$navElement,b=CUI.Widget.fromElement(CUI.Crumbs,a);return b||(b=new CUI.Crumbs({element:a})),b},_getOrConstructCloseIndicator:function(){var b=this.$element.children(e).eq(0);return 0===b.length&&(b=a(h),this.$element.append(b)),0!==a.trim(b.text()).length||b.is("[aria-label], [aria-labelledby]")||0!==b.find("[aria-label], [aria-labelledby]").length||b.attr({"aria-label":this.options.closeIndicatorText,title:this.options.closeIndicatorText}),b},_setupCloseIndicator:function(){this.options.hasOwnProperty("hideCloseIndicator")&&(this.options.hideCloseIndicator=this.options.hideCloseIndicator===!0),this.options.hideCloseIndicator&&(this.$closeIndicatorElement.remove(),this.$closeIndicatorElement=c)},_handleElementClick:function(b){var c=a(b.target),d=this.options.closeOnClick;this.$closeIndicatorElement&&(this.$closeIndicatorElement.find(c).length||this.$closeIndicatorElement.is(c))?d=!0:CUI.Crumbs.isNavigable(c)&&(d=this.options.closeOnNavigate),d&&this.setIsClosed(!0)},_applyIsCompactToDOM:function(){this.options.isCompact?this.$element.addClass(d):this.$element.removeClass(d)}}),CUI.Endor.util.registerWidget(CUI.BreadcrumbBar)}(jQuery,this),function(a,b,c){var d="<i></i>",e="endor-Brand",f="endor-Brand-icon",g="."+f,h={icon:"coral-Icon coral-Icon--hammer coral-Icon--sizeM",title:"CoralUI",href:"http://coralui.corp.adobe.com"};CUI.Brand=new Class({toString:"Brand",extend:CUI.Closable,defaults:CUI.Closable.defaults,construct:{},setTitle:function(a){a!==this.options.title&&this._set("title",a)!==this&&this._updateAppearance()},setHref:function(a){a!==this.options.href&&this._set("href",a)!==this&&this._updateAppearance()},setIcon:function(a){a!==this.options.icon&&this._set("icon",a)!==this&&this._updateAppearance()},$icon:a(),_init:function(a){this.inherited(arguments),this._decorateElement(),this._findOrCreateIcon(),this._findOrCreateText(),this._updateAppearance(),this.on("click",this._handleClick.bind(this))},_decorateElement:function(){this.$element.addClass(e),this.options.hasOwnProperty("href")||(this.options.href=this.$element.attr("href")||h.href)},_findOrCreateIcon:function(){var b=this.$element.children(g);return 0===b.length?(b=a(d).prependTo(this.$element),this.options.hasOwnProperty("icon")||(this.options.icon=h.icon)):this.options.hasOwnProperty("icon")||(this.options.icon=b.attr("class").split(" ").filter(function(a){return a!==f}).join(" ")||h.icon),this.$icon=b},_findOrCreateText:function(){var b=this._getTextNode();return 0===b.length?(this.options.hasOwnProperty("title")||(this.options.title=h.title),b=a(document.createTextNode(this.options.title)).appendTo(this.$element)):this.options.hasOwnProperty("title")||(this.options.title=b.text()),b},_updateAppearance:function(){this.options.href&&""!==this.options.href&&this.$element.attr("href",this.options.href),this._getTextNode().replaceWith(document.createTextNode(this.options.title)),this.$icon.removeClass(),this.$icon.addClass(f),this.$icon.addClass(this.options.icon)},_getTextNode:function(){return this.$element.contents().filter(function(){return 3===this.nodeType}).eq(0)},_handleClick:function(a){this.options.href||(a.preventDefault(),this.$element.trigger(CUI.Brand.EVENT_CLICK,a))}}),CUI.Brand.EVENT_CLICK="cui-brand-click",CUI.Endor.util.registerWidget(CUI.Brand)}(jQuery,this),function(a,b,c){var d="is-active",e="coral-MultiPanel",f="."+e,g="."+d;CUI.InnerRail=new Class({toString:"InnerRail",extend:CUI.ShellWidget,_isSingleton:!1,defaults:{activePanelId:"",dock:"left"},_HTML_CLASSES:"js-endor-inner-rail endor-Page-sidepanel",construct:{},getActivePanel:function(){return this._getActivePanelById(this.options.activePanelId)},getActivePanelId:function(){return this.options.activePanelId},setActivePanel:function(b){var c=a(b).attr("id");return this.setActivePanelId(c)},setActivePanelId:function(a){a!==this.options.activePanelId&&this._set("activePanelId",a)!==this&&(this._updateAppearance(),this.$element.trigger(CUI.InnerRail.ACTIVE_PANEL_CHANGED,[this]))},addPanel:function(b){return a.isArray(b)?b.map(this.addPanel,this):CUI.Endor.util.ensureElementId(b).addClass(e).appendTo(this.$element)},removePanel:function(a){return a.attr("id")===this.options.activePanelId&&this.setActivePanelId(""),a.remove(),a},contains:function(a){return this.$element.find(a).length>0},_init:function(a){this.inherited(arguments),CUI.Endor.util.ensureElementId(this.$element),this.$element.addClass(this._HTML_CLASSES),this.$element.addClass("endor-Page-sidepanel--"+this.options.dock+"InnerRail"),this._parseHTML(),this._updateAppearance()},_parseHTML:function(){var a=this._getPanels();if(a.each(function(){CUI.Endor.util.ensureElementId(this)}),!this.options.activePanelId||""===this.options.activePanelId){var b=a.filter(g);b.length&&(this.options.activePanelId=b.attr("id"))}},_updateAppearance:function(){var a=this._getActivePanelByCSS(),b=this._getActivePanelById();b.length&&(a.length&&a.eq(0).attr("id")===b.eq(0).attr("id")||(a.removeClass(d),b.addClass(d)))},_getPanels:function(){return this.$element.children(f)},_getActivePanelById:function(){return this.options.activePanelId?this.$element.children("#"+this.options.activePanelId):a()},_getActivePanelByCSS:function(){return this.$element.children(f+g)}}),CUI.InnerRail.ACTIVE_PANEL_CHANGED="cui-inner-rail-active-panel-changed",CUI.Endor.util.registerWidget(CUI.InnerRail)}(jQuery,this),function(a,b,c){var d="is-selected",e=".endor-ActionButton-label";CUI.InnerRailToggle=new Class({toString:"InnerRailToggle",extend:CUI.ShellWidget,_isSingleton:!1,defaults:{target:"",label:null,prefixSelected:"Hide",prefixUnselected:"Show",selected:!1},construct:{},getTarget:function(){return this.options.target},setSelected:function(a,b){(b||a!==this.options.selected)&&this._set("selected",a)!==this&&(this.$element.toggleClass(d,a).attr({"aria-pressed":a,"aria-expanded":a}),this._updateLabelDOM())},setLabel:function(a,b){(b||a!==this.options.label)&&this._set("label",a)!==this&&this._updateLabelDOM()},_init:function(b){this.inherited(arguments),null===this.options.label&&(this.options.label=a.trim(this.$element.find(e).text())),this.setLabel(this.options.label,!0),this.setSelected(this.options.selected,!0),this.$element.on("click",function(a){a.preventDefault(),this.$element.trigger(CUI.InnerRailToggle.EVENT_CLICK,[a,this])}.bind(this));var c=a(this.getTarget()),d=[],f=c.closest(".js-endor-inner-rail, .endor-Page-sidepanel--innerRail, .endor-Page-sidepanel");f.attr("id")&&d.push(f.attr("id")),c.attr("id")&&d.push(c.attr("id")),d.length&&this.$element.attr("aria-controls",d.join(" "))},_updateLabelDOM:function(){var a=this.$element.find(e);if(a.length){var b="";this.options.selected&&this.options.prefixSelected?b=this.options.prefixSelected+" ":!this.options.selected&&this.options.prefixUnselected&&(b=this.options.prefixUnselected+" "),b+=this.options.label,a.eq(0).text(b)}}}),CUI.InnerRailToggle.EVENT_CLICK="cui-inner-rail-toggle-click",CUI.Endor.util.registerWidget(CUI.InnerRailToggle)}(jQuery,this),function(a,b,c){var d="js-endor-navrail endor-Page-sidepanel endor-Page-sidepanel--navigation",e="dark",f="coral--dark";CUI.OuterRail=new Class({toString:"OuterRail",extend:CUI.Closable,defaults:a.extend({},CUI.Closable.defaults,{generateBrand:!1,brandOptions:null,theme:e}),construct:{},_init:function(a){this.inherited(arguments),this._setupElement()},_setupElement:function(){if(this.$element.addClass(d),this.options.theme===e&&this.$element.addClass(f),this.options.generateBrand=!!this.options.generateBrand,this.options.generateBrand){var b=a("<a></a>").prependTo(this.$element);new CUI.Brand(a.extend({element:b},{isClosed:!1},this.options.brandOptions))}},_updateDOM:function(){this.inherited(arguments),this.$element.attr({"aria-expanded":!this.options.isClosed,"aria-hidden":this.options.isClosed})}}),CUI.Endor.util.registerWidget(CUI.OuterRail)}(jQuery,this),function(a,b,c){var d="i.coral-Icon",e="endor-BlackBar-nav",f="is-active",g='<i class="coral-Icon coral-Icon--navigation"></i>';CUI.OuterRailToggle=new Class({toString:"OuterRailToggle",extend:CUI.ShellWidget,defaults:{isClosed:!1,title:"Toggle Rail"},construct:{},setIsClosed:function(a){this.options.isClosed=a,this._updateDOM()},setTitle:function(a){this.options.title=a,this._updateDOM()},_init:function(a){this.options.title=this.$element.attr("title")||this.options.title,this.$element.addClass(e);var b=this.$element.children(d);b.length||this.$element.prepend(g),this.$element.on("click",function(a){a.preventDefault(),this.$element.trigger(CUI.OuterRailToggle.EVENT_CLICK,[a,this])}.bind(this)),this._updateDOM()},_updateDOM:function(){this.$element.attr({title:this.options.title,"aria-label":this.options.title}),this.$element.toggleClass(f,!this.options.isClosed).attr({"aria-pressed":!this.options.isClosed,"aria-expanded":!this.options.isClosed})}}),CUI.OuterRailToggle.EVENT_CLICK="cui-outer-rail-toggle-click",CUI.Endor.util.registerWidget(CUI.OuterRailToggle)}(jQuery,this),function(a,b){var c="endor-Panel-header endor-BlackBar",d=".endor-BlackBar-nav",e="<button></button>",f=".endor-BlackBar-back",g='<button class="endor-BlackBar-back js-endor-BlackBar-back" title="Back"><i class="coral-Icon coral-Icon--chevronLeft"></i></button>',h=".endor-BlackBar-title",i='<div role="heading" aria-level="1" class="endor-BlackBar-title"></div>',j=".endor-BlackBar-right",k='<div class="endor-BlackBar-right"></div>',l="endor-BlackBar-item",m="u-coral-hiddenXS",n="endor-BlackBar-item--text";CUI.BlackBar=new Class({toString:"BlackBar",extend:CUI.ShellWidget,defaults:{title:void 0,noNavToggle:!1,noBackButton:!1,noTitle:!1,backButtonTitle:"Back"},construct:function(a){},setTitle:function(a,b){(b||a!=this.options.value)&&(this._set("title",a)!==this||b)&&this._titleBar.html(CUI.Endor.util.escapeHtml(this.options.title||""))},setBackButtonTitle:function(a,b){(b||a!=this.options.backButtonTitle)&&(this._set("backButtonTitle",a)!==this||b)&&(a=CUI.Endor.util.escapeHtml(this.options.backButtonTitle),this._backButton.attr({"aria-label":a,title:a}))},addItem:function(b,c){var d=this._rightContainer,e=c&&c.isText;return b=a(b),b.addClass(l+(e?" "+n:"")).addClass(m),d.append(b),b},removeItem:function(a){return a=this._rightContainer.find(a),a.remove()},getRightContainer:function(){return this._rightContainer},_backButton:null,_titleBar:null,_rightContainer:a(),_init:function(a){this.inherited(arguments),this._setupElement(),this._initLeftBarContents(),this._initRightBarContents(),this._initTitleBar()},_setupElement:function(){this.$element.addClass(c)},_initLeftBarContents:function(){var b=this.$element.find(d);this.options.noNavToggle||(b.length||(b=a(e).prependTo(this.$element)),new CUI.OuterRailToggle({element:b})),this._backButton=this.$element.find(f),this._backButton.length||this.options.noBackButton||(this._backButton=a(g).insertAfter(b));var c=this._backButton.attr("aria-label")||this._backButton.attr("title")||this.options.backButtonTitle;this.setBackButtonTitle(c,!0),this._backButton.on("click",this._getRedispatchingHandler(CUI.BlackBar.EVENT_BACK_BUTTON_CLICK))},_initTitleBar:function(){var b=this.options.title;this._titleBar=this.$element.find(h),this._titleBar.length||this.options.noTitle?void 0===b?(b=this._titleBar.html(),this.options.title=b):this.setTitle(b,!0):(this._titleBar=a(i).appendTo(this.$element),this.setTitle(b,!0)),this._titleBar.on("click",this._getRedispatchingHandler(CUI.BlackBar.EVENT_TITLE_CLICK)).on("keydown",function(b){(13===b.keyCode||32===b.keyCode)&&(b.preventDefault(),a(b.target).trigger("click"))})},_initRightBarContents:function(){this._rightContainer=this.$element.find(j),this._rightContainer.length||(this._rightContainer=a(k).appendTo(this.$element));

},_getRedispatchingHandler:function(a){return function(b){b.preventDefault(),this.$element.trigger(a,[b,this])}.bind(this)}}),CUI.BlackBar.EVENT_TITLE_CLICK="cui-blackbar-title-click",CUI.BlackBar.EVENT_BACK_BUTTON_CLICK="cui-blackbar-back-button-click",CUI.Endor.util.registerWidget(CUI.BlackBar)}(jQuery,this),function(a,b){b.requestAnimationFrame=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||null;var c="coral-NavigationView",d="coral-NavigationView--brandHeight",e="coral-ColumnView",f="coral-ColumnView--navigation",g="coral-NavigationView-content",h="coral-NavigationView-content--searchBoxHeight",i="coral-ColumnView-column",j="coral-NavigationView-column",k="coral-NavigationView-columnContent",l="coral-ColumnView-item",m="coral-ColumnView-item--back",n="coral-ColumnView-item--title",o="coral-Icon",p="coral-ColumnView-icon",q="coral-ColumnView-item--hasChildren",r="coral-NavigationView-columnContent--backButtonHeight",s="coral-NavigationView-columnContent--homeAndBackHeight",t="coral-Wait coral-Wait--large coral-Wait--center",u="is-active",v="is-left",w="is-right",x="is-sliding",y="is-activedescendant",z="coralColumnviewTarget",A="data-coral-columnview-target",B="coralColumnviewId",C="data-coral-columnview-id",D=13,E=27,F=32,G=33,H=37,I=38,J=34,K=39,L=40,M=36,N=35,O=191,P=/(Mac|iPhone|iPod|iPad)/i.test(b.navigator.platform),Q=/chrome/i.test(b.navigator.userAgent);CUI.NavigationView=new Class({toString:"NavigationView",extend:CUI.Widget,construct:function(a){this._init(a)},defaults:{jsonUrl:null,withCredentials:!1,jsonData:null,searchEnabled:!1,searchPlaceholderText:"Search Navigation",clearSearchButtonText:"Clear",itemClickHandler:null,accountForBrand:!0},_init:function(e){e.jsonData&&"string"===a.type(e.jsonData)&&(this.options.jsonData=b[e.jsonData]),this.$element.addClass(c),this.options.accountForBrand&&this.$element.addClass(d),this._initSearchBox(),this._initNavElement(),this._applyOptions();var f=P&&Q&&!b.cvox?1e3:0,g=this;setTimeout(function(){g._makeAccessible()},f)},_homeColumnId:null,_currentColumnId:null,_targetColumnId:null,_jsonColumnCache:{},_searchableItems:[],_lastKeyCode:null,_applyOptions:function(){if(this.options.jsonData)this._applyJSONData(this.options.jsonData);else if(this.options.jsonUrl){var b=a(document.createElement("div")).addClass(t).appendTo(this.$navElement),c={url:this.options.jsonUrl};this.options.withCredentials&&(c.xhrFields={withCredentials:!0}),a.ajax(c).done(function(a){this.updateJSONData(a)}.bind(this)).always(function(){b.remove()})}},_makeAccessible:function(){var c=a('[role="main"]:first'),d=P&&Q&&!b.cvox,e=a('[data-init="brand"], .endor-Brand').first();c.attr("id",c.attr("id")||CUI.util.getNextId()),this.$element.attr({role:"navigation","aria-labelledby":e.attr("id")}),this.$navElement.attr({role:d?"group":"tree",tabindex:P&&!Q?0:null,"aria-controls":c.length?c.attr("id"):null});{var f=this.$navElement.find("."+j),g=f.eq(0);g.attr(C)}g.attr("aria-level",g.attr("aria-level")||0),f.each(function(b,c){var e,g=a(c),h=g.find("."+k),i=h.find("."+l),j=g.find("."+m+":first"),n=g.find("."+m+":last"),o=0;if(g.add(h).attr({role:"presentation"}),h.attr({id:h.attr("id")||CUI.util.getNextId()}),n.length){var r,s=null,t=null;n.attr("aria-level")||(e=f.filter("["+C+'="'+n.attr(A)+'"]'),o=g.attr("aria-level")?parseInt(g.attr("aria-level"),10):1,e.length&&(r=e.find("["+A+'="'+g.attr(C)+'"]'),r.length&&(s=r.attr("aria-posinset"),t=r.attr("aria-setsize")))),n.attr({id:n.attr("id")||CUI.util.getNextId(),role:d?"button":"treeitem","aria-expanded":n.attr("aria-expanded")||!0,"aria-owns":h.attr("id"),"aria-level":n.attr("aria-level")||o++,"aria-setsize":n.attr("aria-setsize")||t,"aria-posinset":n.attr("aria-posinset")||s}).find("."+p).attr("aria-hidden",!0),h.attr({role:"group","aria-labelledby":n.attr("id"),"aria-expanded":!0})}j.length&&!j.is(n)&&(e=f.filter("["+C+'="'+j.attr(A)+'"]'),j.attr({id:j.attr("id")||CUI.util.getNextId(),role:d?"button":"treeitem","aria-expanded":j.attr("aria-expanded")||!0,"aria-owns":j.attr("aria-owns")||n.attr("id")+" "+h.attr("id"),"aria-level":j.attr("aria-level")||(e.length?e.attr("aria-level"):o-1)}).find("."+p).attr("aria-hidden",!0)),i.length||n.length||(i=g.find("."+l)),i.each(function(b,c){var e=a(c),f=e.is("."+u+":not(."+q+")"),g=e.hasClass(q);e.attr({id:c.id||CUI.util.getNextId(),role:d?"button":"treeitem",tabindex:e.attr("tabindex")||(P&&!Q?-1:0),"aria-selected":e.attr("aria-selected")||(g?null:f),"aria-expanded":e.attr("aria-expanded")||(g?!1:null),"aria-setsize":e.attr("aria-setsize")||i.length,"aria-posinset":e.attr("aria-posinset")||b+1,"aria-level":e.attr("aria-level")||(n.length?o:null)}).find("."+p).attr("aria-hidden",!0)}.bind(this))}.bind(this)),this._setActiveDescendant()},_setActiveDescendant:function(c){var d=this.$navElement.find("."+u+" ."+l),e=c?a(c):d.filter("."+u+" ."+y);e.length||(e=d.filter("."+u+":not(."+q+")")),e.length||(e=d.first()),e.length&&(d.removeAttr("aria-activedescendant").removeClass(y).attr("tabindex",-1),this.$navElement.attr("aria-activedescendant",e.attr("id")),e.addClass(y).attr("tabindex",P&&!Q?-1:0),b.cvox&&b.cvox.Api&&"function"==typeof b.cvox.Api.syncToNode&&(b.cvox.Api.stop(),b.cvox.Api.syncToNode(e.get(0),!0)))},updateJSONData:function(a){this._currentColumnId=null,this._targetColumnId=null,this._homeColumnId=null,this._jsonColumnCache={},this.$navElement.empty(),this.options.jsonData=a,this._applyJSONData(a)},navigateHome:function(){if(this._currentColumnId!==this._homeColumnId){var a=this.$element.find("."+i+"["+C+'="'+this._currentColumnId+'"]'),b=this.$element.find("."+i+"["+C+'="'+this._homeColumnId+'"]');this._targetColumnId=this._homeColumnId,b.length?this._performNavNextFrame(a,b,!0):this._getTargetColumnJSON(this._homeColumnId)&&(this._targetJSONColumnData=this._getTargetColumnJSON(this._homeColumnId),b=this._createColumnViewFromJSON(this._targetJSONColumnData,v),this._performNavNextFrame(a,b,!0))}},_applyJSONData:function(a){a.id="json_"+CUI.util.getNextId(),this._jsonColumnCache[a.id]=a,this._homeColumnId=a.id,this._initJSONData(a,a.children),this._currentColumnId?this._createColumnViewFromJSON(this._jsonColumnCache[this._currentColumnId],u):this._createColumnViewFromJSON(a,u)},_initNavElement:function(){this.$navElement=this.$element.find("."+f),this.$navElement.length||(this.$navElement=a("<div></div>").addClass(e).addClass(f).appendTo(this.$element)),this.$navElement.addClass(g),this.options.searchEnabled&&this.$navElement.addClass(h),this.$navElement.on("click","."+l,function(b){var c=a(b.currentTarget);c.data(z)||c.hasClass(q)?(b.preventDefault(),this._navigateColumnView(c)):(this._selectItemHandler(c),this.options.itemClickHandler&&(b.preventDefault(),this.options.itemClickHandler.apply(this,[b,this._selectedItem])))}.bind(this)).on("focusin.cui-navigationview","."+l,function(a){this._setActiveDescendant(a.target),P&&!Q&&this.$navElement.trigger("focus")}.bind(this)).on("focusout.cui-navigationview",function(b){var c,d=this.$navElement.find(":tabbable");P||1===d.length?(c=this.$navElement.find("."+u+" ."+l+"."+u+":not(."+q+")"),c.length&&!c.is(b.target)&&this._setActiveDescendant(c)):d.length>1?(this.$navElement.removeAttr("aria-activedescendant"),a(b.target).attr("tabindex",-1)):0===d.length&&this._setActiveDescendant()}.bind(this)).on("keydown.cui-navigationview",function(a){var b,c=this.$navElement.find("."+u+" ."+l),d=c.filter("."+y).last(),e=c.index(d),f=!1;switch(this._lastKeyCode=null,a.which){case D:case F:d.trigger("click"),f=!0;break;case G:f=!0;break;case H:d.hasClass(m)?d.trigger("click"):b=c.filter(":lt("+e+")."+m).last(),f=!0;break;case I:b=c.filter(":lt("+e+")").last(),b.length||(b=c.last()),f=!0;break;case J:f=!0;break;case K:d.hasClass(q)?d.trigger("click"):d.hasClass(m)&&(b=c.filter(":gt("+e+"):not(."+m+")").first()),f=!0;break;case L:b=c.filter(":gt("+e+")").first(),b.length||(b=c.first()),f=!0;break;case M:b=c.first(),f=!0;break;case N:b=c.last(),f=!0}f&&(a.preventDefault(),a.stopPropagation(),this._lastKeyCode=a.which),b&&b.length&&(this._setActiveDescendant(b),(!P||P&&Q)&&b.trigger("focus"))}.bind(this))},_navigateColumnView:function(b){var c=b.closest("."+e),d=b.closest("."+i),f=b.data(z),g=b.hasClass(m),h=c.find("."+i+"["+C+'="'+f+'"]');if(this._currentColumnId=d.data(B),this._targetColumnId=f,this._homeColumnId||(this._homeColumnId=this._currentColumnId),h.length)this._performNavNextFrame(d,h,g);else if(this._getTargetColumnJSON(f))this._targetJSONColumnData=this._getTargetColumnJSON(f),h=this._createColumnViewFromJSON(this._targetJSONColumnData,g?v:w),this._performNavNextFrame(d,h,g);else if(b.prop("href")){var j=a('<div role="progressbar"></div>').addClass(t).appendTo(d),k=d.attr("aria-level")?parseInt(d.attr("aria-level"),10):0;a.get(b.prop("href")).done(function(e){if("string"===a.type(e))h=a(e).addClass(w).appendTo(c);else{var i=e;i.id=f,i=a.extend(i,this._getBackButtonDataFromButton(b)),this._initJSONData(i,i.children),this._jsonColumnCache[f]=i,h=this._createColumnViewFromJSON(i,g?v:w)}h.attr("aria-level",h.attr("aria-level")||g?k-1:k+1),this._performNavNextFrame(d,h,g)}.bind(this)).always(function(){j.remove()})}},_onSlideEndTimeout:null,_performNav:function(b,c,d){var e=this._getTransitionEvent(),f=this,g=function(b){clearTimeout(f._onSlideEndTimeout),a(b.currentTarget).off(e,g),f._removeColumnAnimation(a(b.currentTarget)),f._onNavComplete()};this._addCurrentColumnAnimation(b,d),this._addTargetColumnAnimation(c,d),e?(b.off(e).on(e,g),c.off(e).on(e,g),clearTimeout(this._onSlideEndTimeout),this._onSlideEndTimeout=setTimeout(function(){b.add(c).off(e,g),f._removeColumnAnimation(b),f._removeColumnAnimation(c),f._onNavComplete()},1e3*parseFloat(c.css("transition-duration"))+100)):(f._removeColumnAnimation(b),f._removeColumnAnimation(c),this._onNavComplete())},_addTargetColumnAnimation:function(a,b){this._removeColumnAnimation(a),a.addClass(u),a.addClass(x)},_addCurrentColumnAnimation:function(a,b){this._removeColumnAnimation(a),a.removeClass(u),a.addClass(b?w:v),a.addClass(x)},_removeColumnAnimation:function(a){a.removeClass(x+" "+v+" "+w)},_performNavNextFrame:function(a,c,d){if(b.requestAnimationFrame){var e=null,f=function(g){null===e?(e=g,b.requestAnimationFrame(f.bind(this))):this._performNav(a,c,d)};this._removeColumnAnimation(c),c.addClass(d?v:w),b.requestAnimationFrame(f.bind(this))}else this._performNav(a,c,d),this._onNavComplete()},_onNavComplete:function(){var a,b=this.$navElement.find("."+i+"["+C+'="'+this._currentColumnId+'"]'),c=this;this._makeAccessible(),this.$navElement.find("."+y).removeClass(y),this._targetColumnId&&b.data(B)===this._currentColumnId&&(this._jsonColumnCache[this._currentColumnId]&&b.remove(),a=this.$navElement.find("."+i+"."+u+" ."+l+"["+A+'="'+this._currentColumnId+'"]:last'),a.length||(a=this.$navElement.find("."+i+"["+C+'="'+this._targetColumnId+'"].'+u+" ."+l+"."+u)),a.length||(a=this.$navElement.find("."+i+"["+C+'="'+this._targetColumnId+'"].'+u+" ."+l+":first")),a.length&&(setTimeout(function(){c._setActiveDescendant(a)},0),(!P||P&&Q)&&a.trigger("focus")),this._currentColumnId=this._targetColumnId,this._targetColumnId=null)},_selectItemHandler:function(a){if(this._selectedItem&&(this._selectedItem.selected=!1),this._currentColumnId&&this._jsonColumnCache[this._currentColumnId])for(var c,d=this._jsonColumnCache[this._currentColumnId],e=a.text(),f=0;f<d.children.length;f++)if(c=d.children[f],c.name==e){this._selectedItem=c,this._selectedItem.selected=!0;break}this.$navElement.find("."+l).removeClass(u).attr("aria-selected",!1).removeAttr("aria-pressed"),a.addClass(u).attr("aria-selected",!0).attr("aria-pressed",P&&Q&&!b.cvox?!0:null),this._setActiveDescendant(a),(!P||P&&Q)&&a.trigger("focus")},_getTargetColumnJSON:function(a){if(this._jsonColumnCache[a])return this._jsonColumnCache[a];var b,c,d=this._jsonColumnCache[this._currentColumnId];if(!d)return null;for(var e=0;e<d.children.length;e++)if(c=d.children[e],c.id==a){b=c,this._jsonColumnCache[a]=b;break}return b},_createColumnViewFromJSON:function(b,c){for(var d,e,f,g,h,l,m,n,o,p,q=this,t=a("<div></div>").addClass(j).addClass(i).addClass(c).attr(C,b.id).attr({role:"presentation"}),u="",v=0,w=-1,x=b.parentColumnId;x&&this._jsonColumnCache[x];)v++,b.homeColumnId===x&&(w=v),x=this._jsonColumnCache[x].parentColumnId||this._jsonColumnCache[x].homeColumnId;return v>0&&w>0&&(w=v-w),b.homeColumnId&&(d=this._createHomeButtonFromJSON(b),t.append(d),u=d.attr("id"),o=this._jsonColumnCache[b.homeColumnId],o&&(l=o.children.length,h=o.children.indexOf(b),o.parentColumnId&&this._jsonColumnCache[o.parentColumnId]&&this._jsonColumnCache[o.parentColumnId].children&&(n=this._jsonColumnCache[o.parentColumnId].children.length,m=this._jsonColumnCache[o.parentColumnId].children.indexOf(o)))),(b.parentColumnId||b.backButtonLink)&&(e=this._createBackButtonFromJSON(b),t.append(e),u=e.attr("id"),b.parentColumnId&&(p=this._jsonColumnCache[b.parentColumnId],p&&p.children&&(l=p.children.length,h=p.children.indexOf(b)))),f=a("<div></div>").addClass(k).attr({role:"presentation",id:CUI.util.getNextId()}),b.homeColumnId&&(b.parentColumnId||b.backButtonLink)?(f.addClass(s),g=e):(b.homeColumnId||b.parentColumnId||b.backButtonLink)&&(f.addClass(r),g=e||d),t.attr("aria-level",v),g&&(g.attr({"aria-expanded":!0,"aria-owns":f.attr("id"),"aria-level":v,"aria-setsize":void 0===l||-1===l?null:l,"aria-posinset":void 0===h||-1===h?null:h+1}),d&&e&&d.attr({"aria-level":w>=0?w:v-1,"aria-owns":g.attr("id"),"aria-expanded":!0,"aria-setsize":void 0===n||-1===n?null:n,"aria-posinset":void 0===m||-1===m?null:m+1}),g.attr({"aria-level":v++}),f.attr({role:"group","aria-expanded":!0,"aria-labelledby":g.attr("id")})),l=b.children.length,h=1,b.children.forEach(function(a){var b=q._createColumnViewItemFromJSON(a).attr({"aria-level":v,"aria-setsize":l,"aria-posinset":h++});f.append(b)}),t.append(f).appendTo(this.$navElement)},_createBackButtonFromJSON:function(c){var d=a("<a></a>").addClass(l).addClass(m).addClass(n).text(c.backButtonLabel).attr({id:CUI.util.getNextId(),role:P&&Q&&!b.cvox?"button":"treeitem",tabindex:-1});return c.backButtonIcon&&d.prepend(a('<i role="img" aria-hidden="true"></i>').addClass(p).addClass(o).addClass(c.backButtonIcon)),c.parentColumnId&&d.attr(A,c.parentColumnId),c.backButtonLink?d.attr("href",c.backButtonLink):d.attr("href","#"+(c.parentColumnId||"")),d},_createColumnViewItemFromJSON:function(c){var d=a("<a></a>").addClass(l).text(c.name).attr({id:CUI.util.getNextId(),role:P&&Q&&!b.cvox?"button":"treeitem",tabindex:-1});return c.selected&&!c.children&&(d.addClass(u+" "+y).attr("tabindex",P&&!Q?-1:0).attr("aria-selected",!0).attr("aria-pressed",P&&Q&&!b.cvox?!0:null),this._setActiveDescendant(d)),c.children&&d.addClass(q).attr("aria-expanded",!1),c.url?d.attr("href",c.url):d.attr("href","#"+(c.id||"")),c.id&&d.attr(A,c.id),c.tooltip&&d.attr("title",c.tooltip),c.icon&&d.prepend(a('<i role="img" aria-hidden="true"></i>').addClass(p).addClass(o).addClass(c.icon)),d},_createHomeButtonFromJSON:function(c){var d=a("<a></a>").addClass(l).addClass(m).addClass(n).attr(A,c.homeColumnId).attr("href","#"+c.homeColumnId).text(c.homeColumnLabel).attr({id:CUI.util.getNextId(),role:P&&Q&&!b.cvox?"button":"treeitem",tabindex:-1});return c.homeColumnIcon&&d.prepend(a('<i role="img" aria-hidden="true"></i>').addClass(p).addClass(o).addClass(c.homeColumnIcon)),d},_getBackButtonDataFromButton:function(b){var c,d=a(b),e={parentColumnId:this._currentColumnId,backButtonLabel:d.text(),backButtonIcon:""},f=a(b).find("."+p);return f.length>0&&(c=f.attr("class"),c=c.replace(p,""),c=c.replace(o,""),e.backButtonIcon=a.trim(c)),e},_initJSONData:function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];a&&(e.parentColumnId=a.id,e.backButtonLabel=e.name,e.backButtonIcon=e.icon),c&&(e.homeColumnId=c.id,e.homeColumnLabel=c.homeMenuLabel||c.name,e.homeColumnIcon=c.homeMenuIcon||""),e.children?(e.id="json_"+CUI.util.getNextId(),e.selected&&(this._currentColumnId=e.id),this._jsonColumnCache[e.id]=e,this._initJSONData(e,e.children,e.isMenuHome?e:c)):(e.selected&&(this._currentColumnId=a.id||this._currentColumnId,this._selectedItem=e),this._searchableItems.push(e))}},_getTransitionEvent:function(){var a,b=this.$navElement.get(0),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a];return null},_initSearchBox:function(){if(this.options.searchEnabled){var c=null,d=this.$element.find(".coral-ColumnView-searchbox"),m=d.find(".coral-Textfield"),n=m.attr("id")||CUI.util.getNextId(),o=d.find(".coral-DecoratedTextfield-button"),p=null,q=null,r="",s=1,t=null,v=this,w=function(){d.length||(d=a(['<div class="coral-ColumnView-item coral-ColumnView-item--searchBox" role="search">','<span class="coral-DecoratedTextfield coral-NavigationView-DecoratedTextfield">','<label class="coral-DecoratedTextfield-icon coral-Icon coral-Icon--sizeXS coral-Icon--search" for="'+n+'"><span class="u-coral-screenReaderOnly">'+v.options.searchPlaceholderText+"</span></label>",'<input placeholder="'+v.options.searchPlaceholderText+'" type="text" class="coral-DecoratedTextfield-input coral-Textfield" id="'+n+'">','<button type="button" class="coral-DecoratedTextfield-button coral-MinimalButton" style="display:none;">','<i class="coral-MinimalButton-icon coral-Icon coral-Icon--sizeXS coral-Icon--close"><span class="u-coral-screenReaderOnly">'+v.options.clearSearchButtonText+"</span></i>","</button>","</span>","</div>"].join("")).appendTo(v.$element),m=d.find(".coral-Textfield"),o=d.find(".coral-DecoratedTextfield-button")),m.attr({id:n,role:P&&!Q?"textbox":"combobox","aria-haspopup":!0,"aria-expanded":!1,"aria-autocomplete":"inline",autocomplete:"off"}),m.on("keydown.cui-navigationview-search",x),m.on("keyup.cui-navigationview-search",y),o.on("click",function(){z(),m.focus()}),a(document).bind("keyup.cui-navigationview-search",function(a){"input"!==a.target.tagName.toLowerCase()&&"textarea"!==a.target.tagName.toLowerCase()&&a.keyCode==O&&m.focus()})},x=function(a){switch(a.keyCode){case I:a.preventDefault(),""!==r&&(s>1?s-=1:s=c.length,C());break;case L:a.preventDefault(),""!==r&&(s<c.length?s+=1:s=1,C());break;case D:z(),a.preventDefault(),s>0&&c.length&&(b.location.href=c[s-1].url);break;case E:z(),m.is(document.activeElement)&&m.focus()}},y=function(b){b.stopPropagation();var d=a(b.target).val();if(d!=r)if(r=d,t=null,p||(p=a("<div></div>").addClass(e).addClass(f).addClass(g).addClass(h).addClass(j).addClass(i).addClass(u).attr({id:CUI.util.getNextId(),role:"listbox","aria-expanded":!1}).css("display","none").append(a('<div role="presentation"></div>').addClass(k)).insertBefore(v.$navElement),m.attr({"aria-owns":p.attr("id")})),q=q||p.find("."+k),""===r)o.hide(),B();else{o.show(),F(),s=0,q.empty(),m.removeAttr("aria-activedescendant");for(var n=0;n<c.length;n++){var w=c[n],x=l,y=a("<a></a>").addClass(x).attr({href:w.url,id:p.attr("id")+"-option-"+n,role:"option",tabindex:-1,"aria-posinset":n,"aria-setsize":c.length}).text(w.name);w.tooltip&&y.attr("title",w.tooltip),q.append(y)}A()}},z=function(){r="",m.val(""),o.hide(),B()},A=function(){var a=q.find("."+u).attr("id")||null;p.css("display","block").add(m).attr({"aria-expanded":!0,"aria-activedescendant":a}).on("focusin.cui-navigationview-search","."+l,function(a){a.preventDefault(),m.focus()}),v.$navElement.css("display","none")},B=function(){v.$navElement.css("display","block"),p&&(p.css("display","none").add(m).attr({"aria-expanded":!1}).removeAttr("aria-activedescendant").off("focusin.cui-navigationview-search"),m.is(document.activeElement)&&m.blur().focus())},C=function(){t=t||p.find("."+l+"."+u),t&&t.removeClass(u).removeAttr("aria-selected"),t=p.find("."+l+":nth-child("+s+")"),t.addClass(u).attr({"aria-selected":!0}),m.add(p).attr({"aria-activedescendant":t.attr("id")}),G(t)},F=function(b){c=v._searchableItems.filter(function(b){for(var c,d,e="string"==a.type(b.name)?b.name.toLowerCase():"",f=0,g=0,h=0;h<r.length;h++)if(c=r[h].toLowerCase()," "!=c&&(d=e.indexOf(c,0===h?g:g+1),f+=(d-g)*(0===h?1:3),g=d,-1==g))return!1;return f+=e.length-g,-1===e.indexOf(r)&&(f+=100),b.score=f,!0}),c.sort(function(a,b){return a.score>b.score?1:a.score<b.score?-1:0})},G=function(a){if(a.length){var b=a.position().top,c=a.outerHeight(!1),d=q,e=b+c-d.height();e>0?d.scrollTop(d.scrollTop()+e):0>b&&d.scrollTop(d.scrollTop()+b)}};w()}}}),CUI.Widget.registry.register("navigationView",CUI.NavigationView),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.NavigationView.init(a('[data-init~="navigation-view"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.NavigationView)}(jQuery,this),function(a,b,c){CUI.ColumnView=new Class({toString:"ColumnView",extend:CUI.ShellWidget,construct:function(a){},defaults:{url:"{+path}",path:"",wrapLabels:!0},getSelectedItems:function(){return this.getActiveColumn().children(".is-selected")},getSelectedPaths:function(){var b=[];return this.getSelectedItems().each(function(){b.push(a(this).data("path"))}),b},getBreadcrumbItems:function(){return this.getActiveColumn().prevAll().children(".is-selected")},selectItemByPath:function(a,b){var c=this.getActiveColumn().children('.coral-ColumnView-item[data-path="'+a+'"]');this._setActiveColumn(c,!1),c.addClass("is-selected")},checkItemByPath:function(a,b){},getActiveColumn:function(){return this.$element.children(".is-active")},getTargetColumn:function(){var a=this.getActiveColumn(),b=this.getSelectedItems().filter(":not(.is-checked)");return 1===b.length&&b.hasClass("coral-ColumnView-item--hasChildren")?a.next():a},_init:function(a){if(this.inherited(arguments),this.options.path){var b=this._addColumn();b.addClass("is-active"),this._loadColumn(b,this.options.url,this.options.path)}else this.$element.contents().filter(function(){return 3===this.nodeType}).remove(),this._wrapLabels(this.$element.children(".coral-ColumnView-column"));this.$element.hasClass("coral-ColumnView--navigation")||(this.$element.on("click",".coral-ColumnView-item",this._selectItemHandler.bind(this)),this.$element.on("click",".coral-ColumnView-icon",this._checkItemHandler.bind(this)))},_addColumn:function(){var b=a('<div class="coral-ColumnView-column"><div class="wait small center"></div></div>');return this.$element.append(b),b},_loadColumn:function(b,c,d){var e=this;a.ajax({url:c.replace("{+path}",d)}).done(function(c){var d=a("<div />").append(c).find(".coral-ColumnView-column");b.html(d.html()),b.addClass(d.attr("class")),e._wrapLabels(b)}).always(function(){b.children(".wait").remove(),e.$element.trigger("loadcolumn",b,d)})},_wrapLabels:function(b){this.options.wrapLabels===!0&&b.find(".coral-ColumnView-item").each(function(){var b=a(this);b.addClass("coral-ColumnView-item--checkWrap"),this.scrollWidth>this.clientWidth&&b.addClass("coral-ColumnView-item--doublespaced"),b.removeClass("coral-ColumnView-item--checkWrap")})},_selectItemHandler:function(b){var c=a(b.target);c.hasClass("coral-ColumnView-item")||(c=c.parents(".coral-ColumnView-item")),this._setActiveColumn(c,!1),c.addClass("is-selected");var d=this.getActiveColumn().next();0===d.length?d=this._addColumn():d.attr("class","").addClass("coral-ColumnView-column"),this._loadColumn(d,c.data("url")||this.options.url,c.data("path")),this._scrollToColumn(),this.$element.trigger("select",c)},_checkItemHandler:function(b){b.stopPropagation();var c=a(b.target).parents(".coral-ColumnView-item");if(this._setActiveColumn(c,!0),c.toggleClass("is-selected is-checked"),0===this.getSelectedItems().length){var d=this.getActiveColumn(),e=d.prev();0!==e.length&&(d.removeClass("is-active"),e.addClass("is-active"))}this._scrollToColumn(),this.$element.trigger("check",c)},_setActiveColumn:function(a,b){var c=this.getActiveColumn(),d=a.parent();b===!0?d.children(".is-selected:not(.is-checked)").addClass("is-checked"):d.children(".is-selected:not(.is-checked)").removeClass("is-selected"),(b===!1||d.hasClass("is-active")===!1)&&c.children(".is-checked").removeClass("is-selected is-checked"),c.removeClass("is-active"),d.addClass("is-active").nextAll().html("")},_scrollToColumn:function(){var b,c,d,e=this.getActiveColumn(),f=this.getSelectedItems().filter(":not(.is-checked)");d=1===f.length?e.next():e,d.position()&&d.position().left+d.outerWidth()>=this.$element.width()?(d.nextAll().remove(),b=this.$element[0].scrollWidth-this.$element.outerWidth(),c=1.5*(b-this.$element.scrollLeft()),this.$element.animate({scrollLeft:b},c)):e.position()&&e.position().left<0&&(b=0,e.prevAll().each(function(){b+=a(this).outerWidth()}),c=1.5*(this.$element.scrollLeft()-b),this.$element.animate({scrollLeft:b},c))}}),CUI.Widget.registry.register("columnview",CUI.ColumnView),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.ColumnView.init(a("[data-init~=columnview]",b.target))})}(jQuery,this),function(a,b){CUI.ShellMac=new Class({toString:"ShellMac",extend:CUI.Shell,defaults:a.extend(CUI.Shell.prototype.defaults,{locale:"en_US",hasImsSession:!1,imsServer:"https://marketing.adobe.com",activeOrgId:null,searchProduct:"mcloud",imsServiceCode:null}),_badge:null,_notificationsPopover:null,_brand:null,_navigationView:null,construct:function(a){},setLocale:function(b){CUI.MacApiService.configure({locale:b}),a(document).trigger(CUI.ShellMac.EVENT_IMS_INFO_UPDATED),a(document).trigger(CUI.ShellMac.EVENT_HELP_CONFIG_UPDATED)},setHasImsSession:function(b){CUI.MacApiService.configure({hasImsSession:b}),a(document).trigger(CUI.ShellMac.EVENT_IMS_INFO_UPDATED)},setImsServer:function(b){CUI.MacApiService.configure({imsServer:b}),a(document).trigger(CUI.ShellMac.EVENT_IMS_INFO_UPDATED)},setActiveOrgId:function(b){CUI.MacApiService.configure({activeOrgId:b}),a(document).trigger(CUI.ShellMac.EVENT_IMS_INFO_UPDATED)},setSearchProduct:function(b){CUI.MacApiService.configure({searchProduct:b}),a(document).trigger(CUI.ShellMac.EVENT_HELP_CONFIG_UPDATED)},addNotification:function(a){a.hasOwnProperty("html")||(a={html:a}),this._badge&&this._badge.addNotification(a),this._notificationsPopover&&this._notificationsPopover.refreshList()},removeAllNotifications:function(){var a={newNotifications:[]};this._badge&&this._badge.updateNotifications(a),this._notificationsPopover&&this._notificationsPopover.updateNotifications(a)},_init:function(a){this.inherited(arguments),CUI.MacApiService.configure({hasImsSession:this.options.hasImsSession,imsServer:this.options.imsServer,activeOrgId:this.options.activeOrgId,locale:this.options.locale,searchProduct:this.options.searchProduct,imsServiceCode:this.options.imsServiceCode}),this._initEventListeners()},_initEventListeners:function(){a(document).on(CUI.Brand.EVENT_CLICK,this._handleBrandClicked.bind(this))},_resolveWidgets:function(){this.inherited(arguments),this._resolveWidget(CUI.Badge,this._handleBadgeResolved),this._resolveWidget(CUI.NotificationsPopover,this._handleNotificationsPopoverResolved),this._resolveWidget(CUI.NavigationView,this._handleNavigationViewResolved)},_handleBadgeResolved:function(a){this._badge=a},_handleNotificationsPopoverResolved:function(a){this._notificationsPopover=a},_handleNavigationViewResolved:function(a){this._navigationView=a},_handleBrandClicked:function(){this._navigationView&&this._navigationView.navigateHome()}}),CUI.ShellMac.EVENT_IMS_INFO_UPDATED="cui-shellmac-ims-info-updated",CUI.ShellMac.EVENT_HELP_CONFIG_UPDATED="cui--helpconfig-info-updated",CUI.Endor.util.registerWidget(CUI.ShellMac)}(jQuery,this),function(a,b){var c={},d={hasImsSession:!1,imsServer:"https://marketing.adobe.com",activeOrgId:null,locale:"en_US",searchProduct:"mcloud"},e=null,f=null,g=null,h=null,i=null,j=null,k=null,l={header:"/content/mac/default/header.jsonp",notifications:"/content/mac/default/header/notifications.jsonp",user:"/content/mac/default/header/user.jsonp",setActiveOrg:"/content/mac/default/header.setActiveOrg.jsonp",setActiveProductContext:"/content/mac/default/header.setActivePC.jsonp",tenant:"/content/mac/default/services/tenant.jsonp",tartanLogin:"/libs/granite/core/content/login.autologin.html"},m=null,n=null,o=null,p=null;CUI.MacApiService={configure:function(b){d=a.extend(d,b)},hasImsSession:function(){return d.hasImsSession},getLocale:function(){return d.locale},getSearchProduct:function(){return d.searchProduct},getActiveOrgId:function(){return d.activeOrgId},getImsServer:function(){return d.imsServer},getImsServiceCode:function(){return d.imsServiceCode},getUser:function(){if(d.hasImsSession)return this.getMACUser();if(arguments.length){var b=arguments[0],e=c[b];return e||(e=a.ajax({url:b,xhrFields:{withCredentials:!0}}).always(function(){delete c[b]}).promise(),c[b]=e),e}return null},getMACUser:function(){var b,c,e;return h||(b=function(a){h.resolve(a),h=null},c=function(a){h.reject(a),h=null},e=function(){var a={url:d.imsServer+l.user,success:b,error:c},e=this.getImsServiceCode();e&&(a.data={servicecode:e}),this._loadJSONP(a)}.bind(this),h=new a.Deferred,o?e():this._loadMACPreReqs().then(e,c)),h.promise()},getNotifications:function(){if(d.hasImsSession)return this.getMACNotifications();if(arguments.length){var b=arguments[0],e=c[b];return e||(e=a.ajax({url:b,xhrFields:{withCredentials:!0}}).always(function(){delete c[b]}).promise(),c[b]=e),e}return null},getMACNotifications:function(){var b,c,e;return i||(b=function(a){i.resolve(a),i=null},c=function(a){i.reject(a),i=null},e=function(){this._loadJSONP({url:d.imsServer+l.notifications,success:b,error:c})}.bind(this),i=new a.Deferred,o?e():this._loadMACPreReqs().then(e,c)),i.promise()},getMACHeader:function(){return this._loadMACPreReqs()},_loadMACPreReqs:function(){var b,c;return e||(b=function(a){e&&(e.resolve(a),e=null)},c=function(a){e&&(e.reject(a),e=null)},e=new a.Deferred,d.activeOrgId?this._loadMACTenantApi().then(function(a){this._loadMACHeaderApi().then(b,c)}.bind(this),c):this._loadMACHeaderApi().then(b,c)),e.promise()},_loadMACTenantApi:function(){return f||(f=new a.Deferred,a.ajax({type:"GET",data:{orgId:d.activeOrgId},url:d.imsServer+l.tenant,contentType:"application/json",dataType:"jsonp",success:function(a){a&&a.tenantUrl&&(n=a.tenantUrl),a&&a.tenantId&&(m=a.tenantId),p=d.imsServer,d.imsServer=n||d.imsServer,f.resolve(a),f=null},error:function(a){f.reject(a),f=null}})),f.promise()},_loadMACHeaderApi:function(){return g||(g=new a.Deferred,this._loadJSONP({url:d.imsServer+l.header,success:function(a){o=a,g.resolve(o),g=null},error:function(a){g.reject(a),g=null}})),g.promise()},setActiveOrg:function(b){return j||(j=new a.Deferred,a.ajax({type:"GET",url:d.imsServer+l.setActiveOrg,contentType:"application/json",dataType:"jsonp",data:{orgId:b.orgId},success:function(a){d.imsServer=d.imsServer.replace(m,b.tenantId),j.resolve({redirect:d.imsServer}),j=null},error:function(a){j.reject(a),j=null}})),j.promise()},setActiveProductContext:function(b){return k||(k=new a.Deferred,a.ajax({type:"GET",url:d.imsServer+l.setActiveProductContext,contentType:"application/json",dataType:"jsonp",data:{servicecode:this.getImsServiceCode(),ident:b},success:function(){k.resolve({redirect:d.imsServer}),k=null},error:function(a){k.reject(a),k=null}})),k.promise()},_loadJSONP:function(b){a.ajax({type:"GET",url:b.url,data:a.extend({lang:d.locale},b.data),contentType:"application/json",dataType:"jsonp",success:function(a){b.success(a)},error:function(a){this._retryOnceAfterMACLoginAttempt(b)}.bind(this)})},_retryOnceAfterMACLoginAttempt:function(c){this._attemptMACLoginFromIMSSession({success:function(){a.ajax({type:"GET",url:c.url,contentType:"application/json",dataType:"jsonp",success:function(a){c.success(a)},error:function(a){b.console&&console.log("Unable to reach "+c.url+" even after an attempt to login to tartan."),c.error(a)}})},error:function(a){b.console&&console.log("IMS Session is dead. Unable to log back into tartan."),c.error(a)}})},_attemptMACLoginFromIMSSession:function(c){var e=(p||d.imsServer)+l.tartanLogin,f=a("<iframe></iframe>").attr("src",e).css("display","none").appendTo(a("body")),g=function(a){
if(0===e.indexOf(a.origin+"/")){f.remove();try{var d=JSON.parse(a.data);d.redirect&&(d.redirect=d.redirect.replace(/^(.*\/\/[^\/?#]*).*$/,"$1")),d.success?c.success(d):c.error()}catch(h){c.error()}b.removeEventListener("message",g)}};b.addEventListener("message",g)}}}(jQuery,window),function(a,b){CUI.MacApiService.util={getActiveOrgNameFromUser:function(a){var b=this.getActiveOrgFromUser(a);return b?CUI.Endor.util.escapeHtml(b.name):""},getNumOrganizationsFromUser:function(a){return a&&a.organizations?a.organizations.length:0},getAvatarFromUser:function(a){var b="";return a&&a.info&&a.info.avatar&&""!==a.info.avatar&&(b=a.info.avatar),b},getActiveOrgFromUser:function(a){if(a&&a.organizations&&a.organizations.length>0){for(var b=null,c=0;c<a.organizations.length;c++)if(a.organizations[c].active){b=a.organizations[c];break}return b}return null},getOrgFromOrgId:function(a,b){if(a&&a.organizations){for(var c=null,d=0;d<a.organizations.length;d++){var e=a.organizations[d];if(e.orgId==b){c=e;break}}return c}return null},getActionFromUser:function(a,b){var c=null;return a&&a.actions&&a.actions.forEach(function(a){a.id==b&&(c=a)}),c}}}(jQuery,window),function(a,b){var c="endor-List-item endor-List-item--interactive";CUI.HelpPopover=new Class({toString:"HelpPopover",extend:CUI.Popover,construct:function(a){this._init()},getSearchText:function(){return this._searchText},setSearchText:function(a){this._searchText=a,this._searchElement.val(a),this._toggleClearButton()},defaults:{whatsNewLabel:"What's New",customerCareLabel:"Customer Care",helpHomeLabel:"Help Home",communityLabel:"Community",searchPlaceholder:"Search",helpModuleBase:"https://marketing.adobe.com",customerCareLink:"https://helpx.adobe.com/marketing-cloud/contact-support.html",communityLink:null},_searchForm:null,_searchText:"",_searchElement:null,_clearButton:null,_init:function(){this.$element.on("show",this._onShowElement.bind(this)),this.$element.attr("id")||this.$element.attr("id","help-popover"),this.$element.addClass("coral-Popover"),this.$element.find(".endor-List").length||this.$element.empty().append(this._generateMarkup()),this._searchForm=this.$element.find("form"),this._searchElement=this.$element.find(".coral-DecoratedTextfield-input"),this._clearButton=this.$element.find(".coral-DecoratedTextfield-button"),this._initEventListeners()},_initEventListeners:function(){this._clearButton.on("click",this._onClearClick.bind(this)),this._searchElement.on("keyup",this._onInputKeyUp.bind(this)),this._searchForm.submit(this._onSearchSubmit.bind(this))},_onSearchSubmit:function(a){this.$element.find('[name="q"]').val(this._searchElement.val()),this.$element.data("popover").hide()},_onInputKeyUp:function(a){if(13!==a.keyCode){var b=this._searchElement.val();b!=this._searchText&&(this._searchText=b,this._toggleClearButton())}},_onClearClick:function(){this._searchText="",this._searchElement.val(""),this._toggleClearButton()},_toggleClearButton:function(){""===this._searchText?this._clearButton.hide():this._clearButton.show()},_onShowElement:function(){setTimeout(function(){this._searchElement.focus()}.bind(this),50)},_generateMarkup:function(){var a="jp_JP"==CUI.MacApiService.getLocale()?"ja_JP":CUI.MacApiService.getLocale(),b=this.options.helpModuleBase+"/resources/help/"+a+"/home/index.html",d=CUI.MacApiService.getSearchProduct(),e=this.options.helpModuleBase+"/resources/help/"+a+"/home/index.html";return this.options.communityLink||(this.options.communityLink=b+"?r="+d+"&f=community"),['<div class="endor-List">','<div class="endor-List-item">','<form class="coral-Form coral-Form--vertical" action="'+e+'" method="get" target="_blank">','<div class="coral-Form-field coral-DecoratedTextfield coral-Form-field--singleItem">','<i class="coral-DecoratedTextfield-icon coral-Icon coral-Icon--sizeXS coral-Icon--search"></i>','<input type="text" class="coral-DecoratedTextfield-input coral-Textfield" placeholder="'+this.options.searchPlaceholder+'">','<button type="button" class="coral-DecoratedTextfield-button coral-MinimalButton" style="display:none;">','<i class="coral-MinimalButton-icon coral-Icon coral-Icon--sizeXS coral-Icon--close"></i>',"</button>","</div>",'<input type="hidden" name="q" >','<input type="hidden" name="r" value="'+d+'">','<input type="submit" value="submit" style="display:none;">',"</form>","</div>",'<a href="'+b+"?r="+d+'&f=release" target="_blank" class="'+c+'">'+this.options.whatsNewLabel+"</a>",'<a href="'+b+"?r="+d+'&f=home" target="_blank" class="'+c+'">'+this.options.helpHomeLabel+"</a>",'<a href="'+this.options.customerCareLink+'" target="_blank" class="'+c+'">'+this.options.customerCareLabel+"</a>",'<a href="'+this.options.communityLink+'" target="_blank" class="'+c+'">'+this.options.communityLabel+"</a>","</div>"].join("")}}),CUI.Widget.registry.register("helpPopover",CUI.HelpPopover),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.HelpPopover.init(a('[data-init~="help-popover"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.HelpPopover)}(jQuery,this),function(a,b){CUI.Badge=new Class({toString:"Badge",extend:CUI.Widget,construct:function(b){this._init(),a(document).on(CUI.ShellMac.EVENT_IMS_INFO_UPDATED,CUI.Endor.util.debounce(this._loadNotificationsAsync).bind(this))},defaults:{notificationsCount:0,notifications:null,notificationsUrl:null},_init:function(){this.$element.addClass("endor-BlackBar-item endor-Badge"),this.$element.attr("data-target")||this.$element.attr("data-target","#notifications-popover"),this.$element.data("toggle")||this.$element.attr("data-toggle","popover"),this.$element.data("pointFrom")||this.$element.attr("data-point-from","bottom"),this.$element.data("alignFrom")||this.$element.attr("data-align-from","right"),this.options.notifications=this.options.notifications||{},this.updateNotifications(this.options.notifications),this._loadNotificationsAsync()},_loadNotificationsAsync:function(){if(this.options.notificationsUrl&&""!==this.options.notificationsUrl||CUI.MacApiService.hasImsSession()){var a=CUI.MacApiService.getNotifications(this.options.notificationsUrl);a&&a.done(function(a){this.updateNotifications(a)}.bind(this))}},addNotification:function(a){a.hasOwnProperty("html")||(a={html:a}),this.options.notifications=this.options.notifications||{},this.options.notifications.newNotifications=this.options.notifications.newNotifications||[],this.options.notifications.newNotifications.push(a),this.updateNotifications(this.options.notifications)},updateNotifications:function(a){this.options.notifications=a||{},this.options.notificationsCount=a.newNotifications?a.newNotifications.length:0,this.$element.text(this.options.notificationsCount),0===this.options.notificationsCount?this.$element.addClass("is-empty"):this.$element.removeClass("is-empty")},removeAllNotifications:function(){this.$element.text("0"),this.$element.addClass("is-empty")}}),CUI.Widget.registry.register("badge",CUI.Badge),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.Badge.init(a('[data-init~="badge"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.Badge)}(jQuery,window),function(a,b){CUI.NotificationsPopover=new Class({toString:"NotificationsPopover",extend:CUI.Popover,construct:function(a){this._init()},defaults:{noNewNotificationsLabel:"You have no new notifications",notificationsUrl:null,notifications:null},applyOptions:function(a){},addNotification:function(a){a.hasOwnProperty("html")||(a={html:a}),this.options.notifications=this.options.notifications||{},this.options.notifications.newNotifications=this.options.notifications.newNotifications||[],this.options.notifications.newNotifications.push(a),this.refreshList()},refreshList:function(){this._updateList(),this.$element.is(":visible")&&this._updatePopoverTail()},updateNotifications:function(a){this.options=this.options||{},this.options.notifications=a,this.refreshList()},removeAllNotifications:function(){this.options=this.options||{},this.options.notifications=this.options.notifications||{},this.options.notifications.newNotifications=[],this.updateNotifications(this.options.notifications)},_loadNotificationsAsync:function(){if(this.options.notificationsUrl&&""!==this.options.notificationsUrl||CUI.MacApiService.hasImsSession()){var a=CUI.MacApiService.getNotifications(this.options.notificationsUrl);a&&a.done(function(a){this.updateNotifications(a)}.bind(this)).fail(function(a){console.log("unable to pull in the notifications: "),console.log(a)})}},_updatePopoverTail:function(){this.$element.is(":visible")&&this.$element.data("popover")&&(this.$element.data("popover").hide(),this.$element.data("popover").show())},updateViewAll:function(a){this.options.viewAll=a,this._updateList()},_listElement:null,_updateList:function(){this._listElement.empty();var a=this.options&&this.options.notifications&&this.options.notifications.newNotifications?this.options.notifications.newNotifications:[];a.length>0?a.forEach(function(a){this._listElement.append('<div class="endor-List-item endor-List-item--interactive endor-Notification is-unread">'+a.html+"</div>")}.bind(this)):this._listElement.append('<div class="endor-List-item endor-List-item--interactive endor-Notification">'+this.options.noNewNotificationsLabel+"</div>"),this.options.notifications.viewAll&&this._listElement.append('<div class="endor-List-item endor-List-item--interactive endor-Notification"><a href="'+this.options.notifications.viewAll.url+'">'+this.options.notifications.viewAll.text+"</a></div>")},_init:function(b){this.options.notifications=this.options.notifications||{},this.$element.addClass("coral-Popover"),this._listElement=this.$element.find(".endor-List"),this._listElement.length||(this._listElement=a('<div class="endor-List"></div>'),this.$element.append(this._listElement)),this._loadNotificationsAsync(),this._updateList(),a(document).on(CUI.ShellMac.EVENT_IMS_INFO_UPDATED,CUI.Endor.util.debounce(this._loadNotificationsAsync).bind(this))}}),CUI.Widget.registry.register("notificationsPopover",CUI.NotificationsPopover),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.NotificationsPopover.init(a('[data-init~="notifications-popover"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.NotificationsPopover)}(jQuery,this),function(a,b){CUI.UserAccountPopover=new Class({toString:"UserAccountPopover",extend:CUI.Popover,construct:function(a){this._init()},defaults:{user:null,userUrl:null,customLogout:!1,productContextHeader:"Product Context"},updateUser:function(a){this.options.user=a;var b=this._generateTenantHtml();this.$account.html(b)},_init:function(){this.$element.addClass("coral-Popover"),this.$account=this.$element.find(".js-endor-Account"),this.$account.length?this.$account.addClass("endor-Account"):(this.$account=a('<div class="endor-Account"></div>'),this.$element.empty().append(this.$account)),this.$account.on("click",".js-endor-Account-logout",this._onLogoutClick.bind(this)),this.$account.on("click",".js-endor-Account-actionableTenant",this._onTenantClick.bind(this)),this.$account.on("click",".js-endor-Account-actionableContext",this._onContextClick.bind(this)),this.$account.html(this.user?this._generateTenantHtml():this._generateLoaderHtml()),a(document).on(CUI.ShellMac.EVENT_IMS_INFO_UPDATED,CUI.Endor.util.debounce(this._loadUserAsync).bind(this)),this._loadUserAsync()},_loadUserAsync:function(){if(this.options.userUrl&&""!==this.options.userUrl||CUI.MacApiService.hasImsSession()){var a=CUI.MacApiService.getUser(this.options.userUrl);a&&a.done(function(a){this.updateUser(a)}.bind(this))}},_generateTenantHtml:function(){var a=this.options.user.organizations,b=!(1!==a.length||a[0].prodCtx&&a[0].prodCtx.length),c=CUI.MacApiService.util.getActiveOrgFromUser(this.options.user),d=CUI.MacApiService.util.getActionFromUser(this.options.user,"settings"),e=CUI.MacApiService.util.getActionFromUser(this.options.user,"logout"),f='<div class="endor-Account-header">'+this._getUserAvatarHtml(this.options.user)+'<a href="'+d.url+'" title="'+d.text+'" class="endor-Account-configLink coral-Icon coral-Icon--gear coral-Icon--sizeM"></a><div class="endor-Account-data"><span class="endor-Account-name">'+this.options.user.info.displayName+'</span><span class="endor-Account-caption">'+this.options.user.info.title+"</span>"+(b?'<span class="endor-Account-caption">'+c.name+"</span>":"")+"</div></div>";return b||(f+='<div class="endor-List">',a.forEach(function(a){a.active?(f+='<div class="endor-List-item">  <span class="endor-Account-tenant endor-Account-tenant--selected">    <span class="endor-Account-tenantCheck coral-Icon coral-Icon--sizeXS coral-Icon--check coral-Icon"></span>'+a.name+"  </span>",a.prodCtx&&a.prodCtx.length&&(f+='  <div class="endor-Account-contextList">    <span class="endor-Account-contextListHeader">'+this.options.productContextHeader+"</span>",a.prodCtx.forEach(function(a){a.active?f+='<span class="endor-Account-context endor-Account-context--selected">  <span class="endor-Account-contextCheck coral-Icon coral-Icon--sizeXS coral-Icon--check"></span>'+a.label+"</span>":a.ident&&(f+='<a data-context-id="'+a.ident+'" class="endor-Account-context endor-Account-context--interactive js-endor-Account-actionableContext">'+a.label+"</a>")}),f+="</div>"),f+="</div>"):a.orgId&&(f+='<a data-org-id="'+a.orgId+'" class="endor-List-item endor-List-item--interactive js-endor-Account-actionableTenant endor-Account-tenant">'+a.name+"</a>")}.bind(this)),f+="</div>"),f+='<div class="endor-Account-footer"><button class="coral-Button coral-Button--primary coral-Button--block js-endor-Account-logout">'+e.text+"</button></div>"},_generateLoaderHtml:function(){return'<div class="endor-Account-loaderContainer"><div class="coral-Wait coral-Wait--large coral-Wait--center"></div></div>'},_getUserAvatarHtml:function(a){var b=a.info&&a.info.avatar?a.info.avatar:"",c=CUI.MacApiService.util.getActionFromUser(this.options.user,"settings"),d=a.info&&a.info.disableEditAvatar===!0?"":c.url||"";return""!==b?'<a class="endor-Account-avatar"'+(""!==d?' href="'+d+'"':"")+' title="Edit"><img src="'+a.info.avatar+'" alt="avatar"/>'+(""!==d?'<i class="endor-Account-avatar-overlay coral-Icon coral-Icon--sizeS coral-Icon--edit"></i>':"")+"</a>":'<a class="endor-Account-avatar endor-Account-avatar--default"'+(""!==d?' href="'+d+'"':"")+' title="Edit"><i class="coral-Icon coral-Icon--sizeL coral-Icon--user"></i>'+(""!==d?'<i class="endor-Account-avatar-overlay coral-Icon coral-Icon--sizeS coral-Icon--edit"></i>':"")+"</a>"},_onLogoutClick:function(c){var d=CUI.MacApiService.util.getActionFromUser(this.options.user,"logout");this.options.customLogout||""===d.url?a(document).trigger(CUI.UserAccountPopover.EVENT_CUSTOM_LOGOUT,[d.url]):b.location.href=d.url},_onTenantClick:function(c){var d=a(c.target).data("orgId"),e=CUI.MacApiService.util.getOrgFromOrgId(this.options.user,d),f=CUI.MacApiService.util.getActiveOrgFromUser(this.options.user);e&&e!=f&&(this._showProgressIndicator(),CUI.MacApiService.setActiveOrg(e).done(function(a){a.redirect&&(b.location.href=a.redirect)}).fail(function(a){b.console&&console.log("failed to set the active org.")}).always(function(){this._hideProgressIndicator()}.bind(this)))},_onContextClick:function(c){this._showProgressIndicator();var d=a(c.currentTarget).data("contextId");CUI.MacApiService.setActiveProductContext(d).done(function(a){a.redirect&&(b.location.href=a.redirect)}).fail(function(a){b.console&&console.log("failed to set the active product context")}).always(function(){this._hideProgressIndicator()}.bind(this))},_showProgressIndicator:function(){this.$progressIndicator||(this.$progressIndicator=a('<div class="endor-Account-modalLoaderContainer">  <div class="coral-Wait coral-Wait--large coral-Wait--center"></div></div>')),this.$progressIndicator.appendTo(this.$account)},_hideProgressIndicator:function(){this.$progressIndicator&&this.$progressIndicator.remove()}}),CUI.UserAccountPopover.EVENT_CUSTOM_LOGOUT="cui-useraccountpopup-logout-click",CUI.Widget.registry.register("userAccountPopover",CUI.UserAccountPopover),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.UserAccountPopover.init(a('[data-init~="user-account-popover"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.UserAccountPopover)}(jQuery,window),function(a,b){var c='<i class="coral-Icon coral-Icon--sizeM coral-Icon--user"></i>',d="endor-UserProfile-avatar",e="endor-UserProfile-avatar--default";CUI.UserProfile=new Class({toString:"UserProfile",extend:CUI.Widget,construct:function(a){this._init()},defaults:{user:null,userUrl:null},_tenant:null,_avatar:null,updateUser:function(a){var b=CUI.MacApiService.util.getActiveOrgFromUser(a),c=CUI.MacApiService.util.getNumOrganizationsFromUser(a);this.options.user=a,this._updateTenant(b,c),this._updateAvatar()},updateAvatar:function(a){this.options.user=this.options.user||{},this.options.user.info=this.options.user.info||{},this.options.user.info.avatar=a,this._updateAvatar()},_init:function(){this.$element.addClass("endor-BlackBar-item endor-UserProfile"),this.$element.attr("data-target")||this.$element.attr("data-target","#user-account-popover"),this.$element.data("toggle")||this.$element.attr("data-toggle","popover"),this.$element.data("pointAt")||this.$element.attr("data-point-at","#user-profile-avatar"),this.$element.data("pointFrom")||this.$element.attr("data-point-from","bottom"),this.$element.data("alignFrom")||this.$element.attr("data-align-from","right"),this._initTenant(),this._initAvatar(),a(document).on(CUI.ShellMac.EVENT_IMS_INFO_UPDATED,CUI.Endor.util.debounce(this._loadUserAsync).bind(this)),this.options.user?this.updateUser(this.options.user):this._loadUserAsync()},_initTenant:function(){this._tenant=this.$element.find(".endor-UserProfile-tenant"),this._tenant.length||(this._tenant=a('<div class="endor-UserProfile-tenant">'+CUI.MacApiService.util.getActiveOrgNameFromUser(this.options.user)+"</div>").appendTo(this.$element))},_loadUserAsync:function(){if(this.options.userUrl&&""!==this.options.userUrl||CUI.MacApiService.hasImsSession()){var a=CUI.MacApiService.getUser(this.options.userUrl);a&&a.done(function(a){this.updateUser(a)}.bind(this))}},_updateTenant:function(a,b){this._tenant.text(a&&b>1?a.name:"")},_initAvatar:function(){this._avatar=this.$element.find(".endor-UserProfile-avatar"),this._avatar.length||(this._avatar=a('<div id="user-profile-avatar" class="'+d+'"></div>').appendTo(this.$element),this._updateAvatar())},_updateAvatar:function(){var a=CUI.MacApiService.util.getAvatarFromUser(this.options.user);""!==a?this._avatar.removeClass(e).html('<img src="'+a+'" alt="avatar">'):this._avatar.addClass(e).html(c)}}),CUI.Widget.registry.register("userProfile",CUI.UserProfile),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.UserProfile.init(a('[data-init~="user-profile"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.UserProfile)}(jQuery,window),function(a){function b(){var a={};return window.OM&&window.OM.Config?a=window.OM.Config.appConfig:window.Omniture&&window.Omniture.Config?a=window.Omniture.Config.appConfig:window.adobe&&(a=window.adobe.analytics.appConfig),a}var c;CUI.AnalyticsNotificationService={loadNotifications:function(){var d=b();return c&&"resolved"!==c.state()||(c=a.ajax({type:"GET",url:d.endpoints.analyticsServiceUrl+"/shellnotifications",data:{locale:d.localeConfig.currentLocaleCode},headers:{Authorization:d.analyticsServicesAccessToken}})),c},markNotificationsRead:function(c){var d=b();return c.forEach(function(a){"UNREAD"===a.notificationStatus&&(a.notificationStatus="READ")}),a.ajax({type:"PUT",contentType:"application/json",url:d.endpoints.analyticsServiceUrl+"/shellnotifications",data:JSON.stringify(c),headers:{Authorization:d.analyticsServicesAccessToken}})}}}(jQuery),function(a){CUI.ReportSuiteSelector=new Class({toString:"ReportSuiteSelector",extend:CUI.Widget,defaults:{readOnly:!1,reportSuiteListUrl:null,changeReportSuitesEndpoint:null,reloadPage:!0,confirm:!1,rsid:null,showAllLabel:"Show All",searchPlaceholderLabel:"Search Report Suites",noReportSuitesLabel:"No report suites.",changeReportSuiteWarningLabel:"Changing report suites may cause any unsaved data on the page to be lost.",confirmPrompt:"Are you sure?",confirmLabel:"Yes",cancelLabel:"Cancel"},construct:function(a){var b=this;CUI.ReportSuiteSelector.hasOwnProperty("count")?CUI.ReportSuiteSelector.count++:CUI.ReportSuiteSelector.count=0;var c=b._buildElements();b._wireEvents(),b._loadData(!1,function(){null!==b.options.rsid&&b._cachedReportSuiteData.length>0?b.changeSuite(b.options.rsid,!1,!0):c.$triggerLink.setText("No Report Suite")})},changeSuite:function(b,c,d){var e=this,f=e.uiElements,g=function(){var g;if(g=e.options.alternateDisplaySuiteId?e.options.alternateDisplaySuiteId:""===e.options.alternateDisplaySuiteId?"":e.selectedSuite,!g||g!==b){e.selectedSuite=b,f.$triggerLink.setText(i.name);var h=function(b){var c=a("<form>").attr("method","POST").attr("action",e.options.changeReportSuitesEndpoint).appendTo("body");a("<input>").attr("type","hidden").attr("name","d_url").attr("id","switch_destination_url").val(window.btoa(location.href)).appendTo(c),a("<input>").attr("type","hidden").attr("name","switch_accnt").val(b).appendTo(c),c.submit()};if(c!==!1&&CUI.ReportSuiteSelector.reloadPage!==!1)h(b);else{var j=a.Event(CUI.ReportSuiteSelector.EVENT_REPORT_SUITE_CHANGED);j.initialSuite=d,a(document).trigger(j,{rsid:b,changeSuiteAndReload:h})}}};for(var h in e._cachedReportSuiteData){var i=e._cachedReportSuiteData[h];if(i.value===b){if(e.options.confirm&&!d){var j=f.$modal.data("modal");j||(j=f.$modal.modal()),f.$modalConfirmButton.one("click",g),j.show()}else g();return}}throw new Error('Report suite "'+b+'" was specified but none were found with that RSID.')},setSelectorText:function(a){this.uiElements.$triggerLink.setText(a)},_buildElements:function(){var b=a("<a>").addClass("coral-ButtonGroup-item coral-Button coral-Button--secondary coral-Button--quiet").appendTo(this.$element);this.options.readOnly?b.css({color:"#4b4b4b",cursor:"default"}):b.addClass("coral-Button--rsidSelector").attr("data-toggle","popover").attr("data-target","#reportSuiteSelector-"+CUI.ReportSuiteSelector.count),b.setText=function(c){b.html('<i class="endor-ActionButton-icon coral-Icon coral-Icon--data"></i>'),a('<span class="endor-ActionButton-label">').text(c).appendTo(b)},this.setAlternateText=function(a,c){b.setText(a),this.options.alternateDisplaySuiteId=c};var c=a("<div>").attr("data-align-from",this.options.alignFrom).attr("data-point-from",this.options.pointFrom).attr("id","reportSuiteSelector-"+CUI.ReportSuiteSelector.count).addClass("coral-Popover report-suite-selector").appendTo(this.$element),d=a("<div>").addClass("endor-List").appendTo(c),e=a("<div>").addClass("endor-List-item").appendTo(d),f=a("<div>").addClass("searchfield").appendTo(e),g=a("<div>").addClass("coral-DecoratedTextfield coral-Popover-content--Textfield search-box-container").appendTo(f),h=(a("<i>").addClass("coral-DecoratedTextfield-icon coral-Icon coral-Icon--sizeXS coral-Icon--search").appendTo(g),a("<input>").addClass("coral-DecoratedTextfield-input coral-Textfield").attr("type","text").attr("placeholder",this.options.searchPlaceholderLabel).appendTo(g)),i=a("<button>").addClass("coral-DecoratedTextfield-button coral-MinimalButton").attr("type","button").html('<i class="coral-MinimalButton-icon coral-Icon coral-Icon--sizeXS coral-Icon--close">').hide().appendTo(g),j=a("<div>").css({position:"relative",minHeight:"50px"}).appendTo(c),k=a("<div>").addClass("coral-Wait").addClass("coral-Wait--center").hide().appendTo(j),l=a("<div>").addClass("endor-List report-suite-list").appendTo(j),m=a("<a>").addClass("endor-List-item show-all-link").text(this.options.showAllLabel).appendTo(c);m.hidden=!1;var n=a("<div>").addClass("coral-Modal").appendTo(this.$element),o=a("<div>").addClass("coral-Modal-header").appendTo(n);a("<i>").addClass("coral-Modal-typeIcon coral-Icon coral-Icon-sizeS").appendTo(o),a("<h2>").addClass("coral-Modal-title coral-Heading coral-Heading--2").text(this.options.confirmPrompt).appendTo(o);var p=a("<button>").attr("type","button").attr("title","Close").attr("data-dismiss","modal").addClass("coral-MinimalButton coral-Modal-closeButton").appendTo(o);a("<i>").addClass("coral-Icon coral-Icon-sizeXS coral-Icon--close coral-MinimalButton-icon").appendTo(p);var q=a("<div>").addClass("coral-Modal-body").appendTo(n),r=a("<p>").text(this.options.changeReportSuiteWarningLabel).appendTo(q),s=a("<div>").addClass("coral-Modal-footer").appendTo(n),t=a("<button>").attr("type","button").attr("data-dismiss","modal").addClass("coral-Button").text(this.options.cancelLabel).appendTo(s),u=a("<button>").attr("type","button").attr("data-dismiss","modal").addClass("coral-Button coral-Button--primary").text(this.options.confirmLabel).appendTo(s);return this.uiElements={$triggerLink:b,$popoverContainer:c,$searchBox:h,$spinner:k,$clearButton:i,$suiteList:l,$showAllLink:m,$modal:n,$modalHeader:o,$modalCloseButton:p,$modalBody:q,$modalText:r,$modalFooter:s,$modalCancelButton:t,$modalConfirmButton:u},this.uiElements},_wireEvents:function(){var b=this,c=b.uiElements,d=function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=c.bottom<d.bottom,f=c.top>d.top;return!e&&!f};c.$searchBox.on("keydown",function(e){var f={upArrow:38,downArrow:40,enter:13,escape:27};switch(e.keyCode){case f.upArrow:c.$selectedSuite.index()>0&&(c.$selectedSuite.removeClass("suite-selected"),c.$selectedSuite=c.$selectedSuite.prev(),d(c.$selectedSuite[0],c.$suiteList[0])||c.$selectedSuite[0].scrollIntoView(!0),c.$selectedSuite.addClass("suite-selected"));break;case f.downArrow:c.$selectedSuite.index()<c.$suiteList.children("li").length-1&&(c.$selectedSuite.removeClass("suite-selected"),c.$selectedSuite=c.$selectedSuite.next(),d(c.$selectedSuite[0],c.$suiteList[0])||c.$selectedSuite[0].scrollIntoView(!1),c.$selectedSuite.addClass("suite-selected"));break;case f.enter:e.preventDefault(),c.$selectedSuite.click();break;case f.escape:c.$searchBox.val().length>0?c.$clearButton.click():c.$popoverContainer.data("popover").hide();break;default:a(this).data("delayId",setTimeout(function(){b._populateList()},750)),a(this).val().length>0?c.$clearButton.show():c.$clearButton.hide()}}),c.$showAllLink.on("click",function(a){a.preventDefault(),b._loadData(!0,function(){b._populateList()})}),c.$clearButton.click(function(d){d.preventDefault(),a(this).hide(),c.$searchBox.val(""),b._populateList()}),c.$popoverContainer.on("show",function(a){setTimeout(c.$searchBox.focus.bind(c.$searchBox),100)})},_cachedReportSuiteData:[],_loadData:function(b,c){var d=this,e=d.uiElements;e.$suiteList.fadeOut("fast",function(){e.$spinner.show("fast",function(){a.ajax({url:d.options.reportSuiteListUrl,data:{limit:b?0:10},xhrFields:{withCredentials:!0}}).done(function(a){for(var f=0;f<a.length;f++){var g=a[f];g.name||(g.text?g.name=g.text:(g.name=g.value,g.text=g.value))}d._cachedReportSuiteData=a,b&&(e.$showAllLink.hide(),e.$showAllLink.hidden=!0),d._populateList(),c&&c(),e.$spinner.hide("fast",function(){e.$suiteList.show("fast")})})})})},_populateList:function(){function b(b){var c=a(this).data("reportSuiteData");d.changeSuite(c.value,d.options.reloadPage,!1),e.$popoverContainer.data("popover").hide()}var c=this._cachedReportSuiteData,d=this,e=d.uiElements,f=e.$searchBox.val(),g=e.$searchBox.attr("placeholder"),h=0===f.length||f===g;if(!h&&!e.$showAllLink.hidden)return void d._loadData(!0);e.$suiteList.empty(),h||(c=this._cachedReportSuiteData.filter(function(a){for(var b,c,d=a.name.toLowerCase(),e=0,g=0,h=0;h<f.length;h++)if(b=f[h].toLowerCase()," "!==b&&(c=d.indexOf(b,0===h?g:g+1),e+=(c-g)*(0===h?1:3),g=c,-1===g))return!1;return e+=d.length-g,a.score=e,!0}),c.sort(function(a,b){return a.score>b.score?1:a.score<b.score?-1:0}));for(var i=0;i<c.length;i++){var j=c[i],k=a("<li>").data("reportSuiteData",j).addClass("endor-List-item endor-List-item--interactive").attr("data-rsid",j.value).text(j.name).appendTo(e.$suiteList);k.on("click",b)}0===c.length?a("<li>").addClass("endor-List-item").text(this.options.noReportSuitesLabel).appendTo(e.$suiteList):e.$selectedSuite=e.$suiteList.find("li").first().addClass("suite-selected")}}),CUI.ReportSuiteSelector.EVENT_REPORT_SUITE_CHANGED="report-suite-changed",CUI.Widget.registry.register("reportSuiteSelector",CUI.ReportSuiteSelector),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.ReportSuiteSelector.init(a("[data-init~=report-suite-selector]",b.target))})}(jQuery),function(a,b){CUI.AnalyticsBadge=new Class({toString:"AnalyticsBadge",extend:CUI.Badge,construct:function(){this._buildElements(),this._wireEvents(),this.loadNotifications(this.options.pollForUpdates)},_init:function(){},_loadNotificationsAsync:function(){},_buildElements:function(){this.$element.addClass("endor-BlackBar-item endor-Badge"),this.$element.attr("data-target")||this.$element.attr("data-target","#notifications-popover"),this.$element.data("toggle")||this.$element.attr("data-toggle","popover"),this.$element.data("pointFrom")||this.$element.attr("data-point-from","bottom"),this.$element.data("alignFrom")||this.$element.attr("data-align-from","right")},_wireEvents:function(){this.$element.click(function(b){this.popoverOpen=!0;var c=a("#analytics-notifications-popover");c.one("hide",function(){CUI.AnalyticsNotificationService.markNotificationsRead(this.notifications).done(function(){this.popoverOpen=!1,c.find(".is-unread").removeClass("is-unread"),this.updateNotifications(this.notifications)}.bind(this))}.bind(this))}.bind(this))},loadNotifications:function(a){CUI.AnalyticsNotificationService.loadNotifications().done(function(b){this.updateNotifications(b),a&&setTimeout(this.loadNotifications.bind(this,a),5e3)}.bind(this))},updateNotifications:function(a){this.notifications=a;var b=0;a.forEach&&a.forEach(function(a){"UNREAD"===a.notificationStatus&&b++}.bind(this)),this.$element.text(b),0===b?this.$element.addClass("is-empty"):this.popoverOpen||(this.$element.removeClass("is-empty"),this.$element.click())}}),CUI.Widget.registry.register("analyticsBadge",CUI.AnalyticsBadge),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.AnalyticsBadge.init(a('[data-init~="analytics-badge"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.AnalyticsBadge)}(jQuery,window),function(a,b){CUI.AnalyticsNotificationsPopover=new Class({toString:"AnalyticsNotificationsPopover",extend:CUI.NotificationsPopover,construct:function(){this._buildElements(),this.loadNotifications(this.options.pollForUpdates)},_init:function(){},_buildElements:function(){var b=a("<div>").css({position:"relative",minHeight:"50px",backgroundColor:"#ffffff"}).appendTo(this.$element),c=this.$element.find(".endor-List");c.length||(c=a('<div class="endor-List"></div>'),b.append(c));var d=a("<div>").addClass("coral-Wait").addClass("coral-Wait--center").hide().appendTo(b);this.uiElements={$listContainer:b,$list:c,$spinner:d}},loadNotifications:function(a){CUI.AnalyticsNotificationService.loadNotifications().done(function(b){this.updateNotifications(b),a&&setTimeout(this.loadNotifications.bind(this,a),5e3)}.bind(this))},updateNotifications:function(b){this.uiElements.$list.empty(),b.sort(function(a,b){var c=new Date(a.createdTime),d=new Date(b.createdTime);return d-c}),b.length>0?b.forEach(function(c,d){if(!(d>4)){var e=c.url,f=CUI.scUrlService.getProductIdFromUrl(e),g=CUI.scUrlService.getCurrentProductId();if(f&&f!=g){var h=CUI.scUrlService.getUrlRelativeToProductPath(e);e=CUI.scUrlService.switchp(f,h)}c.rsid&&(e=CUI.scUrlService.switchReportSuite(c.rsid,e)),c.appendSession&&(e=CUI.scUrlService.s(e));var i=a("<a>").attr({href:e,target:"_blank"}).addClass("endor-List-item endor-List-item--interactive endor-Notification").text(c.text).appendTo(this.uiElements.$list);"UNREAD"===c.notificationStatus&&i.addClass("is-unread"),i.click(function(a){CUI.AnalyticsNotificationService.markNotificationsRead(b);

}.bind(this))}}.bind(this)):this.uiElements.$list.append(['<div class="endor-List-item endor-List-item--interactive endor-Notification">',this.options.noNewNotificationsLabel,"</div>"].join(""))}}),CUI.Widget.registry.register("analyticsNotificationsPopover",CUI.AnalyticsNotificationsPopover),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.AnalyticsNotificationsPopover.init(a('[data-init~="analytics-notifications-popover"]',b.target))}),CUI.ShellWidgetMixin.applyTo(CUI.AnalyticsNotificationsPopover)}(jQuery,this),function(a){CUI.LanguageSelector=new Class({toString:"LanguageSelector",extend:CUI.Widget,construct:function(b){this.$anchorLabel=a(".endor-currentLanguage"),b.languages?this._buildDOMFromLanguagesArray():this._buildLanguagesArrayFromDOM(),this._updateAnchorLabel(b.currentLocale),this._addListeners()},defaults:{languages:null,changeLocaleUrl:null,currentLocaleCode:"en_US",currentLocale:"English"},_addListeners:function(){this.$element.on("click",".coral-SelectList-item",function(b){var c=this._getLanguageObjectFromLocaleCode(a(b.target).data("locale"));c&&(this.options.currentLocaleCode=c.localeCode,this.options.currentLocale=c.displayName,this._updateAnchorLabel(c.displayName),this._updateLocale(c.localeCode)),this.$element.data("popover").hide()}.bind(this))},_buildLanguagesArrayFromDOM:function(){var b=[];this.$element.find(".coral-SelectList-item").each(function(){b.push({displayName:a(this).text(),localeCode:a(this).data("locale")})}),this.options.languages=b},_buildDOMFromLanguagesArray:function(){var a=this.$element.find(".coral-SelectList");a.empty(),this.options.languages.forEach(function(b){a.append('<li class="coral-SelectList-item coral-SelectList-item--option" data-locale="'+b.localeCode+'">'+b.displayName+"</li>")})},_getLanguageObjectFromLocaleCode:function(a){var b=null;return this.options.languages&&this.options.languages.forEach(function(c){c.localeCode==a&&(b=c)}),b},_updateAnchorLabel:function(a){this.$anchorLabel.text(a)},_updateLocale:function(a){location.href=this.options.changeLocaleUrl+"&change_locale="+a+location.hash}}),CUI.Widget.registry.register("languageSelector",CUI.LanguageSelector),CUI.options.dataAPI&&a(document).on("cui-contentloaded.data-api",function(b){CUI.LanguageSelector.init(a("[data-init~=language-selector]",b.target))})}(jQuery),function(a){function b(){var a={};return window.OM&&window.OM.Config?a=window.OM.Config.appConfig:window.Omniture&&window.Omniture.Config?a=window.Omniture.Config.appConfig:window.adobe&&(a=window.adobe.analytics.appConfig),a}CUI.scUrlService={productIds:{SITECATALYST:"site_catalyst",SUITE:"suite",ADMINMODULE:"am",GENESIS:"sn",DISCOVER:"dsc",SURVEY:"survey",SOCIAL:"social",SEARCHCENTER:"sem"},getProductIdFromUrl:function(a){return a?-1!=a.indexOf("/sc15")?this.productIds.SITECATALYST:-1!=a.indexOf("/suite")?this.productIds.SUITE:-1!=a.indexOf("/am")?this.productIds.ADMINMODULE:-1!=a.indexOf("/sn")?this.productIds.GENESIS:-1!=a.indexOf("/dsc")?this.productIds.DISCOVER:-1!=a.indexOf("/survey")?this.productIds.SURVEY:-1!=a.indexOf("/social")?this.productIds.SOCIAL:-1!=a.indexOf("/scm")?this.productIds.SEARCHCENTER:null:null},getCurrentProductId:function(){return this.getProductIdFromUrl(window.location.href)},getUrlRelativeToProductPath:function(b){var c,d,e,f=a("<a>").attr("href",b).get(0),g=f.pathname.split("/");return c="p"==g[1]?4:2,d="/"+g.slice(c).join("/"),e=d+f.search+f.hash},s:function(a,c){var d=b();c=c||{};var e=c.jpj||d.jpj;delete c.jpj,a=this.appendParams(a,c);var f=a.split("#");a=f[0];var g=f[1]?"#"+f[1]:"";return a.indexOf(!1)&&(a+=-1===a.indexOf("?")?"?":"&",a+="ssSession="+d.ssSession,a+="&",a+="jpj="+e),a+g},f:function(a,c,d){var e=b();c=c||{};var f=d||e.endpoints.scriptPath;return e.endpoints.actionAccessor in c||(c[e.endpoints.actionAccessor]=a),f=this.appendParams(f,c)},fs:function(a,c,d){var e=b();c=c||{};var f=d||e.endpoints.scriptPath;return e.endpoints.actionAccessor in c||(c[e.endpoints.actionAccessor]=a),f=this.s(f,c)},appendParams:function(a,b){b=b||{};var c=a.split("#");a=c[0];var d=c[1]?"#"+c[1]:"",e="=",f="&",g=a.indexOf("?")<0?"?":"&",h=0;for(var i in b)if("string"==typeof b[i]||"number"==typeof b[i])a+=h++?f:g,a+=encodeURIComponent(i),a+=e,a+=encodeURIComponent(b[i]);else for(var j in b[i])b[i].hasOwnProperty(j)&&(a+=h++?f:g,a+=encodeURIComponent(i)+"["+encodeURIComponent(j)+"]",a+=e,a+=encodeURIComponent(b[i][j]));return a+d},appendHashParams:function(a,b){b=b||{};var c=a.split("#");a=c[0];var d=c[1]?"#"+c[1]:"#/",e="=",f="&",g=d.indexOf("?")<0?"?":"&",h=0;for(var i in b)if("string"==typeof b[i]||"number"==typeof b[i])d+=h++?f:g,d+=encodeURIComponent(i),d+=e,d+=encodeURIComponent(b[i]);else for(var j in b[i])b[i].hasOwnProperty(j)&&(d+=h++?f:g,d+=encodeURIComponent(i)+"["+encodeURIComponent(j)+"]",d+=e,d+=encodeURIComponent(b[i][j]));return a+d},appendFragment:function(a,b){return a+"#/"+b},suite:function(a,c,d,e){var f=b();e!==!1&&(e=!0),d=d||"index.html",c=c||{};var g=f.endpoints.suiteUrl+"/"+d;return e?this.fs(a,c,g):this.f(a,c,g)},suitej:function(a,b,c,d){return this.suite(a,b||{},c||"json/index.html",d||!0)},switchp:function(a,b,c){var d="Product.SwitchProduct",e={product_id:a};return b&&(e.redirect_url=this.appendParams(b,c)),this.suite(d,e,"index.html",!1)},switchps:function(a,b,c){return this.s(this.switchp(a,b,c))},switchpf:function(a,b,c){if(b&&a==this.getCurrentProductId())return this.f(b,c);var d="Product.SwitchProduct",e={product_id:a};if(b){e.redirect_command=b,c=c||{};for(var f in c)c.hasOwnProperty(f)&&(e[f]=c[f])}return this.suite(d,e,"index.html",!1)},switchpfs:function(a,b,c){return this.s(this.switchpf(a,b,c))},switchReportSuite:function(a,c){var d=b();if(d.activeUser.currentRSID==a)return c;var e={};return e.switch_accnt=a,e.d_url=window.btoa(c),this.suite("Main.SwitchReportSuite",e,null,!0)},dashboard:function(a,b,c,d){c=c||{},c.dashboard=a;var e;return e=d?this.switchpfs(this.productIds.SUITE,"Dashboard.Explore",c):this.switchpf(this.productIds.SUITE,"Dashboard.Explore",c),b||(e+="#edit_layout"),e}}}(jQuery),function(a){window.adobe=window.adobe||{},window.OM&&OM.Config&&a.noConflict(),CUI.Shell.COMPACT_WINDOW_WIDTH_BOUNDARY=1300,a(document).on("click",".js-beta-feedback-btn",function(){if(0===a("#beta_feedback_iframe").length){var b,c,d=window.OM&&OM.Config?OM.Config.betaFeedbackConfig:adobe.analytics.betaFeedbackConfig,e="?",f=d.betaFeedBackFormUrl;e+="&project=AN",e+="&environment=";for(var g in d.betaFeedBackData)d.betaFeedBackData.hasOwnProperty(g)&&(e+=g+": "+d.betaFeedBackData[g]+", ");b="width: 100%; height: 100%; background-color: transparent; border: none; padding: 0; margin: 0; position: absolute; top: 0; left: 0; z-index: 30000;",c=a("<iframe frameborder='0' src='"+f+encodeURI(e)+"' id='beta_feedback_iframe' style='"+b+"'/>"),a("body").append(c),a(window).on("message",function h(b){if(b=b.originalEvent,b.source==c[0].contentWindow){var d=JSON.parse(b.data);switch(d.type){case"closed":c.remove(),a(window).off("message",h)}}})}}),a(document).on("report-suite-changed",function(a,b){window.Prototype&&Event.fire(window.document,"jq:"+CUI.ReportSuiteSelector.EVENT_REPORT_SUITE_CHANGED,{rsid:b.rsid,changeSuiteAndReload:b.changeSuiteAndReload,initialSuite:a.initialSuite})}),a(document).on("click","#more-popup .endor-List-item",function(){a("#more-popup").data("popover").hide()}),adobe.manuallyBootstrapShell=function(){CUI.Page.init(a("[data-manual-init~=page]")),CUI.ShellMac.init(a("[data-manual-init~=shell-mac]")),CUI.Crumbs.init(a("[data-manual-init~=crumbs]")),CUI.BreadcrumbBar.init(a("[data-manual-init~=breadcrumb-bar]")),CUI.OuterRail.init(a("[data-manual-init~=outer-rail]")),CUI.Brand.init(a("[data-manual-init~=brand]")),CUI.NavigationView.init(a("[data-manual-init~=navigation-view]")),CUI.ReportSuiteSelector.init(a("[data-manual-init~=report-suite-selector]")),CUI.BlackBar.init(a("[data-manual-init~=black-bar]")),CUI.OuterRailToggle.init(a("[data-manual-init~=outer-rail-toggle]")),CUI.AnalyticsBadge.init(a("[data-manual-init~=analytics-badge]")),CUI.UserProfile.init(a("[data-manual-init~=user-profile]")),CUI.HelpPopover.init(a("[data-manual-init~=help-popover]")),CUI.AnalyticsNotificationsPopover.init(a("[data-manual-init~=analytics-notifications-popover]")),CUI.UserAccountPopover.init(a("[data-manual-init~=user-account-popover]")),CUI.ActionBar.init(a("[data-manual-init~=action-bar]")),CUI.InnerRail.init(a("[data-manual-init~=inner-rail]")),CUI.InnerRailToggle.init(a("[data-manual-init~=inner-rail-toggle]"))},adobe.linkImsAccounts=function(){var b=window.OM&&OM.Config?OM.Config.imsLinkingURL:adobe.analytics.imsLinkingURL;a.ajax({url:b,success:function(b){var c=JSON.parse(b);c.ims_userid&&""!==c.ims_userid&&a("#link-wizard-button").remove()}})},a(document).on("click",".js-link-accounts-btn",function(){window.startWizard()})}(jQuery);