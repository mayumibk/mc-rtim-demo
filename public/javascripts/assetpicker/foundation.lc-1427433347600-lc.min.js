$(document).on("click","button[type=submit]",function(a){var b=$(this).attr("form");
if(b){a.preventDefault();
$("#"+b).submit()
}});
(function(a,b){b(a).on("foundation-selections-change",".foundation-collection[role=listbox]",function(c){b(this).find(".foundation-collection-item").each(function(){var e=b(this);
var d=e.is(".foundation-selections-item");
e.attr("aria-selected",d);
e.find("input.aria-value[type=hidden]").prop("disabled",!d)
})
})
})(document,Granite.$);
(function(b,a,c){b.eventSpider=(function(){var p={},f=b.event.add,g=b.event.remove,n=b.event.trigger,h=b.event.dispatch,i=decodeURIComponent(a.location.search.slice(1)).split("&").reduce(function d(r,q){q=q.split("=");
r[q[0]]=q[1];
return r
},{});
p.storage=[];
p.timeline=[];
p.config={autoflush:false};
function j(r,q){console.log(r,q)
}function m(r){var q=null;
b.each(p.storage,function(s,t){if(t.elem===r){q=t;
return false
}});
return q
}function o(u,r,s,w,q){var v=m(u),t={types:r,handler:s,data:w,selector:q,created:new Date().getTime()};
if(v){v.events.push(t)
}else{p.storage.push({elem:u,events:[t]})
}f.apply(this,arguments);
if(p.config.autoflush){j("listener added",{elem:u,event:t})
}}function k(u,s,t,q,r){var v=m(u);
if(s&&!t&&!q&&!r){}g.apply(this,arguments)
}function e(t,u,s,q){var r={event:t.type,originalEvent:t,data:u,elem:s,onlyHandlers:q,fired:new Date().getTime()};
p.timeline.push(r);
n.apply(this,arguments);
if(p.config.autoflush){j("event triggered",r)
}}function l(r){var q={event:r.type,originalEvent:r,fired:new Date().getTime()};
p.timeline.push(q);
h.apply(this,arguments);
if(p.config.autoflush){j("native event triggered",q)
}}p.getHandler=function(q){return m(q)
};
p.getEvents=function(r){var s=p.getHandler(r),q={};
if(s){b.each(s.events,function(t,u){b.each(u.types.split(" "),function(w,x){var y=x.split(".");
if(!q[y[0]]){q[y[0]]=[]
}for(var v=1;
v<y.length;
v++){if(b.inArray(y[v],q[y[0]])===-1){q[y[0]].push(y[v])
}}})
});
return q
}return s
};
if(i.debugClientLibs){if(location.hash=="#flushEvents"){p.config.autoflush=true
}b.event.add=o;
b.event.remove=k;
b.event.trigger=e;
b.event.dispatch=l
}return p
}())
}(jQuery,this));
Granite=window.Granite||{};
Granite.UI=Granite.UI||{};
Granite.UI.Foundation=Granite.UI.Foundation||{};
(function(a,c,b){b.options.transformHash=false;
c(a).on("cui-contentloaded.foundation",function(f,d){if(d&&d._foundationcontentloaded){return
}c(f.target).trigger("foundation-contentloaded",{_cuicontentloaded:true})
});
c(a).on("foundation-contentloaded.foundation",function(f,d){if(d&&d._cuicontentloaded){return
}c(f.target).trigger("cui-contentloaded",{_foundationcontentloaded:true})
})
})(window.document,Granite.$,History);
(function(a,b,c,d){b.UI.Foundation.Utils=b.UI.Foundation.Utils||(function(){var f=[];
var e=function(j,h,i,k){k=k||c(h);
j.find(h).each(function(){var l=this;
if(k.is(function(){return i(this,l)
})){c(l).remove()
}})
};
var g=function(i,h){if(i.length===0){c.each(h,function(){if(c(this).prop("src")){i.push(this)
}});
return i
}c.each(h,function(){var j=this;
var k=c(j).prop("src");
if(!k){return
}var l=false;
c.each(i,function(){var m=c(this).prop("src");
if(m===k){l=true;
return false
}});
if(!l){i.push(j)
}});
return i
};
return{processHtml:function(k,h){var i;
if(k.jquery){i=k
}else{var m=a.createElement("div");
m.innerHTML=k;
i=c(m)
}e(i,"script",function(o,p){var n=c(p).prop("src");
if(!n){return false
}return c(o).prop("src")===n
},c(g(f,c("script"))));
e(i,"link",function(o,q){var p=c(o);
var n=c(q);
if(p.prop("rel")!=="stylesheet"||n.prop("rel")!=="stylesheet"){return false
}else{return p.prop("href")===n.prop("href")
}});
var j=c("head");
c("link",c(h||"body")).each(function(){j.append(c(this).clone());
c(this).remove()
});
g(f,c("script",i));
var l=i.find(h);
if(k.jquery){if(h){return l.length?l:i
}else{return i
}}else{if(h){return l.length?l[0].outerHTML:i[0].innerHTML
}else{return i[0].innerHTML
}}}}
})()
})(document,Granite,Granite.$);
(function(c,a,b,d){function e(i,g,f){var h;
i.some(function(j){if(g.apply(f,arguments)){h=j;
return true
}return false
});
return h
}b.UI.Foundation.Adapters=b.UI.Foundation.Adapters||(function(){var f=[];
var g=function(i){var h;
if(typeof i.selector==="string"){h=i.selector
}else{if(i.selector===a){h="document"
}else{if(d(c).is(i.selector)){h="window"
}else{throw new Error("Invalid config selector")
}}}return"foundation.adapters.internal.adapters."+i.type+"::"+h
};
return{register:function(k,h,i){var j={type:k,selector:h,adapter:i};
g(j);
f.push(j)
},has:function(h){return f.some(function(i){return i.type===h
})
},get:function(i){var h=[];
f.forEach(function(j){if(j.type===i){h.push(j)
}});
return h
},adapt:function(i,l){if(!i||!l){return
}var k=d(i);
var h=e(f,function(m){return m.type==l&&k.is(m.selector)
});
if(!h){return
}var j=g(h);
return k.data(j)||(function(){var m=h.adapter(i);
k.data(j,m);
return m
})()
}}
})();
d.fn.adaptTo=d.fn.adaptTo||function(f){return b.UI.Foundation.Adapters.adapt(this[0],f)
}
})(window,document,Granite,Granite.$);
(function(a,b,c,d){b.UI.Foundation.Layouts=b.UI.Foundation.Layouts||(function(){function e(){this.layouter={};
this.cleaner={}
}e.prototype={register:function(f,h,g){this.layouter[f]=h;
this.cleaner[f]=g
},has:function(f){return this.layouter.hasOwnProperty(f)
},hasCleaner:function(f){return this.cleaner.hasOwnProperty(f)
},get:function(f){return this.has(f)?this.layouter[f]:d
},getCleaner:function(f){return this.hasCleaner(f)?this.cleaner[f]:d
},layout:function(h){var g=c(h);
var f=g.data("foundationLayout");
var i=this.get(f.name);
if(i){i(h,f)
}this.displayToggle(g.data("foundationLayout"))
},displayToggle:function(h){var f=c(".foundation-admin-layouttoggle"),g=f.find("button");
g.each(function(k,m){var j=c(m),l=j.data("foundation-admin-layouttoggle-layout");
if(l.name!==h.name){j.removeClass("hide")
}else{j.addClass("hide")
}})
},switchLayout:function(i,h){var g=c(i),f=g.data("foundationLayout");
if(f.name===h.name){return
}if(f){(this.getCleaner(f.name)||this.clean)(i,f)
}g.addClass(h.name);
g.data("foundationLayout",h);
this.layout(i)
},clean:function(h){var g=c(h);
var f=g.data("foundationLayout");
g.removeClass(f.name);
g.data("foundationLayout",null)
}};
return new e()
})();
c(a).on("foundation-contentloaded.foundation-layout",function(f){c(f.target).filter("[data-foundation-layout]").add(c("[data-foundation-layout]",f.target)).each(function(){b.UI.Foundation.Layouts.layout(this)
})
})
})(document,Granite,Granite.$);
(function(b,h){var g=".foundation-collection-action";
function a(j,i){j.toggleClass("hide",!i)
}function f(i,j){if(j===0&&i===0){return true
}if(j>0&&i===">0"){return true
}return false
}function d(j,i){if(i===0&&j==="none"){return true
}if(i===1&&j==="single"){return true
}if(i>=1&&j==="multiple"){return true
}return false
}function e(j,l){var i=l.find(".foundation-selections-item").toArray().map(function(n){var m=h(n).find(".foundation-collection-quickactions").data("foundationCollectionQuickactionsRel")||"";
m=m.trim();
return m.length?m.split(/\s+/):[]
});
var k=i.every(function(m){return m.length===0
});
if(k){return true
}return i.every(function(m){return !m.every(function(n){return !j.hasClass(n)
})
})
}function c(m,j,n){var i=true;
if(j.hasOwnProperty("activeCount")){var l=n.find(".foundation-collection-item").length;
i=f(j.activeCount,l)
}if(i&&j.hasOwnProperty("activeSelectionCount")){var k=n.adaptTo("foundation-selections");
i=d(j.activeSelectionCount,k.count())
}if(i){i=e(m,n)
}return i
}h(b).on("foundation-contentloaded"+g,function(i){h(".foundation-collection-action",i.target).each(function(){var k=h(this);
var j=k.data("foundationCollectionAction");
if(!j){return
}var l=h(j.target);
if(!l.length){return
}a(k,c(k,j,l))
})
});
h(b).on("foundation-selections-change"+g,".foundation-collection",function(i){var j=h(this);
h(".foundation-collection-action").each(function(){var l=h(this);
var k=l.data("foundationCollectionAction");
if(!k||!j.is(k.target)){return
}a(l,c(l,k,j))
})
})
})(document,Granite.$);
(function(g,b,f,h){var e=".foundation-collection-infinityscrolling";
function d(m,j){var k=j.prop("scrollHeight");
var l=j.prop("scrollTop");
var i=j.prop("clientHeight");
if(i+l>=k&&m.is(":visible")){c(m)
}}function a(m,k){var l=k.height();
var j=k.prop("scrollHeight");
var i=m.data("src");
if(i&&(j-l)===0){c(m).done(function(){a(m,k)
})
}}function c(j){if(j.data("foundationCollectionInfinityscrolling.internal.isLoading")){return h.Deferred().fail()
}var i=j.data("src");
if(!i){return h.Deferred().fail()
}j.data("foundationCollectionInfinityscrolling.internal.isLoading",true);
return h.ajax({url:i}).done(function(k){var m=h(f.UI.Foundation.Utils.processHtml(k));
j.data("src",m.find(".foundation-collection").data("src"));
var l=j.adaptTo("foundation-layout");
if(l&&typeof l.append==="function"){l.append(m.find(".foundation-collection-item").get())
}else{if(g.console){console.warn("The collection has no layout or the layout has no appending support; new items are not appended")
}}j.data("foundationCollectionInfinityscrolling.internal.isLoading",false)
}).fail(function(){j.data("foundationCollectionInfinityscrolling.internal.isLoading",false)
})
}h(b).on("foundation-contentloaded"+e,function(i){h(".foundation-collection",i.target).each(function(){var k=h(this);
var j=(function(m){var l=m.data("scrollSrc");
if(l){return m.closest(l)
}return m.parent()
})(k);
j.off("scroll"+e).on("scroll"+e,function(){d(k,j)
});
a(k,j)
})
})
})(window,document,Granite,Granite.$);
(function(a,b){a.UI.Foundation.Adapters.register("foundation-selections",".foundation-collection",function(c){var d=b(c);
return{count:function(){return d.find(".foundation-selections-item").length
},clear:function(e){var f=d.find(".foundation-selections-item").removeClass("foundation-selections-item").length;
if(!e&&f){d.trigger("foundation-selections-change")
}return this
}}
})
})(Granite,Granite.$);
(function(e,a,d,f,c){function b(k){var i=[k];
var j=0;
return{current:function(){return this.peek(0)
},peek:function(l){return i[j+l]
},pointToToken:function(m){for(var l=0,n=i.length;
l<n;
l++){var o=i[l];
if(o.token===m){j=l;
return o
}}},forward:function(){if(j<i.length-1){return i[++j]
}},back:function(){if(j>0){return i[--j]
}},push:function(l){i.splice(++j,i.length-j,l)
}}
}function h(){return""+Date.now()
}var g=h();
if(c.enabled){c.replaceState({foundationContent:{token:g}})
}f(a).on("click.foundation-content",".foundation-content-control",function(m){m.preventDefault();
var l=f(this);
var k=l.data("foundationContentControlAction");
var j=l.data("foundationContentControlRefresh");
var i=l.closest(".foundation-content").adaptTo("foundation-content");
if(k==="back"){i.back(j)
}else{if(k==="forward"){i.forward(j)
}}});
f(e).on("statechange",function(l){var k=c.getState();
if(!k.data.foundationContent){return
}var j=f(".foundation-content");
if(!j.length){return
}var i=j.adaptTo("foundation-content");
i.goToToken(k.data.foundationContent.token)
});
d.UI.Foundation.Adapters.register("foundation-content",".foundation-content",function(l){var m=f(l);
var j=b({token:g,el:m.children(".foundation-content-current")});
var i=function(n){return n.children(".foundation-content-current").removeClass("foundation-content-current").detach()
};
var k=function(n){return f.ajax(n,{cache:!f.browser.msie})
};
return{pushState:function(o,p,n){return this.go(n,false,c.enabled?{data:o,title:p,url:n}:undefined)
},replaceState:function(o,p,n){return this.go(n,true,c.enabled?{data:o,title:p,url:n}:undefined)
},go:function(o,p,q){var n=this;
return k(o).then(function(r){if(p){return n.replace(r,q)
}else{return n.push(r,q)
}})
},goToToken:function(o){var p=j.pointToToken(o);
if(!p||p.el.is(".foundation-content-current")){return
}var n=d.UI.Foundation.Utils.processHtml(p.el);
i(m);
n.addClass("foundation-content-current").appendTo(m)
},refresh:function(){return this.go(a.location.toString(),true)
},push:function(o,t){var n=h();
var s=f(".foundation-content-path").data("foundation-content-path");
var p=d.UI.Foundation.Utils.processHtml(o,".foundation-content-current");
i(m);
var r=f("<div class='foundation-content-current'>").append(p).appendTo(m);
if(f(".foundation-content-path").length===0){f('<div class="foundation-content-path hidden"></div>').data("foundation-content-path",s).prependTo(f(".foundation-content-current"))
}j.push({token:n,el:r,history:c.enabled&&t});
r.trigger("foundation-contentloaded");
if(c.enabled&&t){var q=t.data||{};
q.foundationContent={token:n};
c.pushState(q,t.title,t.url)
}return n
},replace:function(n,r){var o=d.UI.Foundation.Utils.processHtml(n,".foundation-content-current");
m.children(".foundation-content-current").empty().append(o).trigger("foundation-contentloaded");
var q=j.current();
q.historyConfig=c.enabled&&r;
if(q.historyConfig){var p=r.data||{};
p.foundationContent={token:q.token};
c.replaceState(p,r.title,r.url)
}return q.token
},back:function(q){if(c.enabled&&j.current().history&&c.getState().data.foundationContent){if(q){var n=this;
f(e).one("statechange",function(){n.refresh()
})
}var s=j.peek(-1);
c.back();
return s?s.token:undefined
}var r=j.back();
if(!r){return
}var p=d.UI.Foundation.Utils.processHtml(r.el);
i(m);
p.addClass("foundation-content-current").appendTo(m);
if(q){this.refresh()
}var o=CUI.CardView.get(f(".foundation-collection",m));
if(o&&o.layout){o.layout()
}return r.token
},forward:function(r){if(c.enabled&&c.getState().data.foundationContent){if(r){var o=this;
f(e).one("statechange",function(){o.refresh()
})
}var s=j.peek(1);
c.forward();
return s?s.token:undefined
}var q=j.forward();
if(!q){return
}var p=d.UI.Foundation.Utils.processHtml(q.el);
i(m);
p.addClass("foundation-content-current").appendTo(m);
if(r){this.refresh()
}return q.token
}}
})
})(window,document,Granite,Granite.$,History);
(function(a,f,e){if(!e.enabled){return
}var d=".foundation-content-history";
var c=(function(){var h=e.options.initialTitle;
if(h.indexOf("|")!=-1){h=h.substring(0,h.indexOf("|")).replace(/\s\s*$/,"")
}return h
})();
function g(k,p,r,q){var l=k.data(p);
if(l===undefined){l={}
}if(typeof l!=="object"){var j={};
j[r]=l;
l=j
}for(var m=3,n=arguments.length;
m<n;
m++){var h=arguments[m];
l[h]=k.data(p+"-"+h)
}return l
}function b(i){var h=g(i,"foundation-content-history","action","title","data");
var j=c+(h.title?" | "+h.title:"");
return{title:j,url:i.prop("href"),replace:h.action!==undefined?h.action==="replace":!!h.replace,data:h.data}
}f(a).on("click"+d,"a[data-foundation-content-history]",function(m){try{var h=f(this);
var k=f(".foundation-content");
if(!k.length){return
}var l=b(h);
var j=k.adaptTo("foundation-content");
if(l.replace){j.replaceState(l.data,l.title,l.url)
}else{j.pushState(l.data,l.title,l.url)
}m.preventDefault()
}catch(i){}})
})(document,Granite.$,History);
(function(h,d,e,c){var k=".foundation-form";
var b=e('<div class="modal" data-type="error"><div class="modal-header"><h2></h2><button class="close" type="button" data-dismiss="modal">&times;</button></div><div class="modal-body"></div></div>');
function m(p){var q=p.adaptTo("foundation-field");
if(q){q.reset()
}}function a(p){return e.ajax({type:p.prop("method"),url:p.prop("action"),contentType:p.prop("enctype"),data:p.serialize(),cache:false})
}function f(p,q){q.done(n(p)).fail(o(p))
}function n(q){var p=q.data("redirect");
if(p){return function(){e.ajax(p).always(g(q))
}
}else{return g(q)
}}function l(p,q){if(p.lastIndexOf("?")>=0){return p+"&"+q
}return p+"?"+q
}function g(p){return function(r){var u=p.data("foundationFormOutputReplace")||p.data("foundationFormOutputPush");
if(!u){return
}var t=e(u);
var q=t.adaptTo("foundation-content");
if(q){var s=(function(){if(c.enabled){var w=p.data("foundationFormHistory");
if(w){var v=w.url||w.useFormUrl?l(p.prop("action"),p.serialize()):undefined;
return{data:w.data,title:w.title,url:v}
}}})();
if(p.data("foundationFormOutputReplace")){q.replace(r,s)
}else{q.push(r,s)
}}else{t.html(r)
}}
}function o(){return function(t,q,s){var r=b.clone();
if(q==="error"){var p=e(t.responseText);
if(p.find(".foundation-form-response-status-code").length>0){r.find(".modal-header h2").html(p.find(".foundation-form-response-title").next().html());
r.find(".modal-body").html(p.find(".foundation-form-response-description").next().html());
r.appendTo("body").modal("show");
return
}}r.find(".modal-header h2").text(q);
r.find(".modal-body").text(s);
r.appendTo("body").modal("show")
}
}e(h).on("foundation-form-submit-callback"+k,"form.foundation-form",function(p,q){f(e(this),q)
});
e(h).on("reset"+k,"form.foundation-form",function(p){e(this).adaptTo("foundation-form").reset(true)
});
e(h).on("submit"+k,"form.foundation-form",function(r){var p=e(this);
if(p.data("foundationFormAjax")){var q=p.data("foundationFormHistory");
if(!c.enabled&&(typeof(q)!="undefined")&&q.noSupportBehaviour==="disableAjax"){return
}r.preventDefault();
if(!p.data("foundationFormDisable")){f(p,a(p))
}}});
d.UI.Foundation.Adapters.register("foundation-form","form.foundation-form",function(p){var q=e(p);
return{reset:function(r){if(!r){p.reset()
}q.find(".foundation-field-editable").each(function(){var s=e(this);
m(s.find(".foundation-field-readonly"));
m(s.find(".foundation-field-edit"))
})
}}
});
function j(p,q){if(q){return e("."+p+"[data-foundation-mode-group~='"+q+"'], ."+p+":not([data-foundation-mode-group])")
}else{return e("."+p)
}}function i(p,q){p.toggleClass("mode-edit mode-default")
}e(h).on("foundation-mode-change"+k,function(q,r,p){if(r!=="default"&&r!=="edit"){return
}i(j("foundation-form",p),r)
})
})(document,Granite,Granite.$,History);
(function(a,b){a.UI.Foundation.Adapters.register("foundation-wizard",".foundation-wizard",function(c){var d=b(c);
return{toggleNext:function(e){this.toggle("next",e)
},togglePrev:function(e){this.toggle("prev",e)
},toggleCancel:function(e){this.toggle("cancel",e)
},toggle:function(h,e){var f=d.adaptTo("foundation-layout");
if(f&&typeof f.toggle==="function"){f.toggle(h,e);
return
}var g=d.children(".foundation-wizard-step.foundation-wizard-step-active").find(".foundation-wizard-control[data-foundation-wizard-control-action="+h+"]");
g.each(function(){if(b(this).is("button")){b(this).prop("disabled",!e)
}else{b(this).toggleClass("disabled",!e)
}})
}}
})
})(Granite,Granite.$);
(function(c,a,b,d,f){function e(g){var h=g?c.localStorage:c.sessionStorage;
return{get:function(i){return JSON.parse(h.getItem(i))
},set:function(i,j){h.setItem(i,JSON.stringify(j))
},remove:function(i){h.removeItem(i)
}}
}b.UI.Foundation.Adapters.register("foundation-clipboard",d(c),function(g){var i=d(g);
var h=e();
return{get:function(j){return h.get(j)
},set:function(j,k){h.set(j,k);
i.trigger("foundation-clipboard-change",{key:j,data:k,timestamp:new Date().getTime()})
},remove:function(j){h.remove(j);
i.trigger("foundation-clipboard-change",{key:j,data:null,timestamp:new Date().getTime()})
}}
})
})(window,document,Granite,Granite.$);
(function(c,a,d){var b=".foundation-mode";
d(a).on("click"+b,".foundation-mode-change",function(h){h.preventDefault();
var f=d(this);
var i=f.data("foundationModeValue");
var g=f.data("foundationModeGroup");
f.trigger("foundation-mode-change",[i,g]);
d(c).resize()
})
})(window,document,Granite.$);
(function(b,a,c){c(a).fipo("tap","click",".foundation-history-control",function(g){g.preventDefault();
var f=c(this);
var d=f.data("foundationHistoryControlAction");
if(d==="back"){b.history.back()
}else{if(d==="forward"){b.history.forward()
}}})
})(window,document,Granite.$);
(function(c,a,d){function e(f,g){if(g){return"%7B"+f+"%7D"
}else{return"{"+f+"}"
}}var b=(function(){var f=[];
return{register:function(g,h){f.push({varname:g,provider:h})
},expandURITemplate:function(g){if(!g){return g
}return f.reduce(function(i,h){var j=encodeURIComponent(h.provider(h.varname));
return i.replace(e(h.varname),j).replace(e(h.varname,true),j)
},g)
},resolveVar:function(g){var h;
f.some(function(i){if(i.varname===g){h=i.provider(g);
return true
}});
return h
}}
})();
b.register("window.location",function(){return c.location
});
d(a).on("click","a.foundation-setter",function(f){f.preventDefault();
c.location=b.expandURITemplate(this.href)
});
d(a).on("foundation-contentloaded",function(f){d("input.foundation-setter",f.target).each(function(){this.value=b.resolveVar(d(this).data("foundationSetterVar"))
})
})
})(window,document,Granite.$);
(function(i,e,h,k){var j=".foundation-layout-card";
var f=j+"-quickactions";
function a(n){var m=function(p,q,o){if(q!=="default"&&q!=="selection"){return
}if(n.data("foundationModeGroup")!==o){return
}k.CardView.get(n).setGridSelectionMode(q==="selection");
n.closest(".foundation-collection-container").toggleClass("mode-selection",q==="selection");
if(q==="default"){c(n)
}else{d(n)
}};
h(i).on("foundation-mode-change"+j,m);
n.data("foundation-layout-card.internal.modeChangeHandler",m);
n.on("change:selection"+j,function(o){n.trigger("foundation-selections-change")
});
if(n.is("[data-foundation-collection-quickactions]")){var l=n.data("foundationCollection");
if(!l||l.mode==="default"){c(n)
}}}function b(m,o,l){var n=m.find(".foundation-collection-quickactions").children();
if(n.length){return n
}return o.siblings("[data-foundation-collection-quickactions-name~="+l.fallback+"]").children()
}function c(o){var m=o.data("foundationCollectionQuickactions");
var l=o.adaptTo("foundation-selections");
var n=h.quickaction.settings.event;
o.finger(n.openMenu.touch+f,".foundation-collection-item",function(q){var p=h(this);
var r=b(p,o,m);
if(!r||!r.length){return
}q.preventDefault();
q.stopImmediatePropagation();
h.quickaction(q,r.map(function(){var s=h(this);
return{display:s.clone(true).data("foundationCollectionItem",p[0]),pinned:!!s.data("foundationCollectionQuickactionPinned")}
}),{container:o,layout:h.quickaction.LAYOUT_CIRCLE,autoClose:true,displayCloseButton:true});
l.clear(true);
p.addClass("foundation-selections-item");
o.trigger("foundation-selections-change");
o.one("quickactionclosemenu"+f,function(){l.clear()
})
});
o.pointer(n.openMenu.pointer+f,".foundation-collection-item",function(q){var p=h(this);
var r=b(p,o,m);
if(!r||!r.length){return
}q.preventDefault();
q.stopImmediatePropagation();
h.quickaction(q,r.map(function(){var s=h(this);
return{display:s.clone(true).data("foundationCollectionItem",p[0]),pinned:!!s.data("foundationCollectionQuickactionPinned")}
}),{container:o,anchor:p,layout:h.quickaction.LAYOUT_BAR,autoClose:true})
})
}function d(l){l.off(f)
}function g(l){h(i).off("foundation-mode-change"+j,l.data("foundation-layout-card.internal.modeChangeHandler"));
l.off("change:selection"+j);
l.removeData("foundation-layout-card.internal.modeChangeHandler");
d(l)
}e.UI.Foundation.Layouts.register("foundation-layout-card",function(m,l){var p=h(m);
if(!p.hasClass("foundation-collection")){return
}if(p.data("foundation-layout-card.internal.init")){return
}p.data("foundation-layout-card.internal.init",true);
p.closest(".foundation-collection-container").addClass("card");
p.wrapInner("<div class='grid-0'>");
p.cardView({selectorConfig:{itemSelector:".foundation-collection-item",headerSelector:"header",dataContainer:"grid-0",enableImageMultiply:true,view:{selectedItem:{list:{cls:"foundation-selections-item selected"},grid:{cls:"foundation-selections-item selected"}},selectedItems:{list:{selector:".foundation-selections-item"},grid:{selector:".foundation-selections-item"}}},controller:{selectElement:{list:".foundation-collection-item .select",grid:".foundation-collection-item"},moveHandleElement:{list:".foundation-collection-item > .move"},targetToItem:{list:function(q){return q.closest(".foundation-collection-item")
},grid:function(q){return q.closest(".foundation-collection-item")
},header:function(q){return q.closest("header")
}},gridSelect:{cls:"mode-selection"},selectAll:{selector:"header > i.select",cls:"selected"}}}});
var n=k.CardView.get(p);
n.setDisplayMode(k.CardView.DISPLAY_GRID);
a(p);
if(l.selectionMode){n.setGridSelectionMode(true)
}var o=p.data("foundationSelectionsMode");
if(o){n.setSelectionModeCount(o)
}},function(m,l){e.UI.Foundation.Layouts.clean(m);
var n=h(m);
n.closest(".foundation-collection-container").removeClass("card");
g(n);
n.removeData("foundation-layout-card.internal.init")
});
e.UI.Foundation.Adapters.register("foundation-layout",".foundation-layout-card.foundation-collection",function(l){var m=h(l);
return{append:function(n){k.CardView.get(m).append(n);
m.trigger("foundation-contentloaded")
}}
})
})(document,Granite,Granite.$,CUI);
(function(a,g,h,c){var f=".foundation-layout-list";
function e(i,j){if(j){return h("."+i+"[data-foundation-mode-group~='"+j+"'], ."+i+":not([data-foundation-mode-group])")
}else{return h("."+i)
}}function b(l){var i=l.adaptTo("foundation-selections");
var k=l.data("foundationModeGroup");
var j=function(n,o,m){if(o!=="default"&&o!=="selection"){return
}if(l.data("foundationModeGroup")!==m){return
}if(o!=="selection"){c.CardView.get(l).clearSelection()
}};
h(a).on("foundation-mode-change"+f,j);
l.data("foundation-layout-list.internal.modeChangeHandler",j);
l.on("change:selection"+f,function(o){if(o.moreSelectionChanges===true){return
}var m=l.data("foundation-layout-list.internal.beforeCount")||0;
var n=i.count();
if(m===0&&n>0){l.trigger("foundation-mode-change",["selection",k])
}else{if(m>0&&n===0){l.trigger("foundation-mode-change",["default",k])
}}l.trigger("foundation-selections-change");
l.data("foundation-layout-list.internal.beforeCount",n)
})
}function d(i){h(a).off("foundation-mode-change"+f,i.data("foundation-layout-list.internal.modeChangeHandler"));
i.off("change:selection"+f);
i.removeData("foundation-layout-list.internal.modeChangeHandler");
i.removeData("foundation-layout-list.internal.beforeCount")
}g.UI.Foundation.Layouts.register("foundation-layout-list",function(j,i){var m=h(j);
if(!m.hasClass("foundation-collection")){return
}if(m.data("foundation-layout-list.internal.init")){return
}m.data("foundation-layout-list.internal.init",true);
var k=m.data("foundationModeGroup");
e("foundation-mode-change",k).css("display","none");
if(!m.data("cardView")){m.addClass("list").wrapInner("<div class='grid-0'>")
}m.cardView({selectorConfig:{itemSelector:".foundation-collection-item",headerSelector:"header",dataContainer:"grid-0",enableImageMultiply:true,view:{selectedItem:{list:{cls:"foundation-selections-item selected"},grid:{cls:"foundation-selections-item selected"}},selectedItems:{list:{selector:".foundation-selections-item"},grid:{selector:".foundation-selections-item"}}},controller:{selectElement:{list:".foundation-collection-item .select",grid:".foundation-collection-item"},moveHandleElement:{list:".foundation-collection-item > .move"},targetToItem:{list:function(n){return n.closest(".foundation-collection-item")
},grid:function(n){return n.closest(".foundation-collection-item")
},header:function(n){return n.closest("header")
}},gridSelect:{cls:"mode-selection"},selectAll:{selector:"header > i.select",cls:"selected"}}}});
c.CardView.get(m).setDisplayMode(c.CardView.DISPLAY_LIST);
b(m);
var l=m.data("foundationSelectionsMode");
if(l){c.CardView.get(m).setSelectionModeCount(l)
}},function(j,i){g.UI.Foundation.Layouts.clean(j);
var l=h(j);
var k=l.data("foundationModeGroup");
e("foundation-mode-change",k).css("display","");
d(l);
l.removeData("foundation-layout-list.internal.init")
});
g.UI.Foundation.Adapters.register("foundation-layout",".foundation-layout-list.foundation-collection",function(i){var j=h(i);
return{append:function(k){c.CardView.get(j).append(k);
j.trigger("foundation-contentloaded")
}}
})
})(document,Granite,Granite.$,CUI);
(function(a,b,c,d){function e(g,f,h){if(h){return f.group===h
}else{return true
}}b.UI.Foundation.Layouts.register("foundation-layout-mode",function(h,g){var f=c(h);
c(a).on("foundation-mode-change.foundation-layout-mode",function(j,k,i){if(!e(f,g,i)){return
}f.children(":not(.mode-"+k+")").addClass("hide").removeClass("show");
f.children(".mode-"+k).addClass("show").removeClass("hide")
})
})
})(document,Granite,Granite.$);
(function(d,e){var c=".foundation-layout-wizard";
function a(f,i,h){var g=[i[0]];
if(h){h.removeClass("foundation-wizard-step-active");
g.push(h[0])
}i.addClass("foundation-wizard-step-active");
f.trigger("foundation-wizard-stepchange",g)
}function b(f){f.addClass("flexwizard").children(".foundation-wizard-step").addClass("step content-container").find(".foundation-wizard-control").addClass("flexwizard-control").attr("data-action",function(){return e(this).data("foundationWizardControlAction")
}).end().end().on("flexwizard-stepchange"+c,function(g,i,h){a(f,i,h)
}).flexWizard().children("nav").addClass("content-header").end()
}d.UI.Foundation.Layouts.register("foundation-layout-wizard",function(g,f){var h=e(g);
if(!h.hasClass("foundation-wizard")){return
}b(h)
},function(g,f){d.UI.Foundation.Layouts.clean(g);
e(g).off(c)
});
d.UI.Foundation.Adapters.register("foundation-layout",".foundation-layout-wizard.foundation-wizard",function(f){var g=e(f);
return{toggleNext:function(h){this.toggle("next",h)
},togglePrev:function(h){this.toggle("prev",h)
},toggleCancel:function(h){this.toggle("cancel",h)
},toggle:function(j,h){var i=g.children(".foundation-wizard-step.foundation-wizard-step-active").add(g.children("nav")).find(".foundation-wizard-control[data-foundation-wizard-control-action="+j+"]");
i.each(function(){if(e(this).is("button")){e(this).prop("disabled",!h)
}else{e(this).toggleClass("disabled",!h)
}})
}}
});
e.validator.register({selector:".foundation-layout-wizard.foundation-wizard .foundation-wizard-step input, .foundation-layout-wizard.foundation-wizard .foundation-wizard-step textarea, .foundation-layout-wizard.foundation-wizard .foundation-wizard-step [role=listbox]",show:function(f,g){var h=f.closest(".foundation-wizard").adaptTo("foundation-wizard");
h.toggleNext(false)
},clear:function(f){var h=true;
f.find(":submittable").each(function(){var i=e(this);
if(i.willValidate&&!i.checkValidity()){h=false;
return false
}});
var g=f.closest(".foundation-wizard").adaptTo("foundation-wizard");
g.toggleNext(h)
}})
})(Granite,Granite.$);
(function(a,b){b(a).on("foundation-selections-change",".foundation-wizard-step .foundation-collection[role=listbox]",function(d){var c=b(this);
c.checkValidity();
c.updateErrorUI()
})
})(document,Granite.$);